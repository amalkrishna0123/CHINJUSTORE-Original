(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function tI(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Xg={exports:{}},wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function sI(){if(kw)return wu;kw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var f in r)f!=="key"&&(o[f]=r[f])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:u,ref:r!==void 0?r:null,props:o}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var Dw;function nI(){return Dw||(Dw=1,Xg.exports=sI()),Xg.exports}var a=nI(),Zg={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function iI(){if(Pw)return Ge;Pw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function R(F,re,ve){this.props=F,this.context=re,this.refs=E,this.updater=ve||N}R.prototype.isReactComponent={},R.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},R.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=R.prototype;function k(F,re,ve){this.props=F,this.context=re,this.refs=E,this.updater=ve||N}var P=k.prototype=new T;P.constructor=k,w(P,R.prototype),P.isPureReactComponent=!0;var H=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function M(F,re,ve,ge,Ae,ke){return ve=ke.ref,{$$typeof:s,type:F,key:re,ref:ve!==void 0?ve:null,props:ke}}function A(F,re){return M(F.type,re,void 0,void 0,void 0,F.props)}function I(F){return typeof F=="object"&&F!==null&&F.$$typeof===s}function O(F){var re={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ve){return re[ve]})}var L=/\/+/g;function z(F,re){return typeof F=="object"&&F!==null&&F.key!=null?O(""+F.key):re.toString(36)}function V(){}function ye(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(V,V):(F.status="pending",F.then(function(re){F.status==="pending"&&(F.status="fulfilled",F.value=re)},function(re){F.status==="pending"&&(F.status="rejected",F.reason=re)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function _e(F,re,ve,ge,Ae){var ke=typeof F;(ke==="undefined"||ke==="boolean")&&(F=null);var Ce=!1;if(F===null)Ce=!0;else switch(ke){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(F.$$typeof){case s:case e:Ce=!0;break;case x:return Ce=F._init,_e(Ce(F._payload),re,ve,ge,Ae)}}if(Ce)return Ae=Ae(F),Ce=ge===""?"."+z(F,0):ge,H(Ae)?(ve="",Ce!=null&&(ve=Ce.replace(L,"$&/")+"/"),_e(Ae,re,ve,"",function(Y){return Y})):Ae!=null&&(I(Ae)&&(Ae=A(Ae,ve+(Ae.key==null||F&&F.key===Ae.key?"":(""+Ae.key).replace(L,"$&/")+"/")+Ce)),re.push(Ae)),1;Ce=0;var dt=ge===""?".":ge+":";if(H(F))for(var be=0;be<F.length;be++)ge=F[be],ke=dt+z(ge,be),Ce+=_e(ge,re,ve,ke,Ae);else if(be=_(F),typeof be=="function")for(F=be.call(F),be=0;!(ge=F.next()).done;)ge=ge.value,ke=dt+z(ge,be++),Ce+=_e(ge,re,ve,ke,Ae);else if(ke==="object"){if(typeof F.then=="function")return _e(ye(F),re,ve,ge,Ae);throw re=String(F),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function K(F,re,ve){if(F==null)return F;var ge=[],Ae=0;return _e(F,ge,"","",function(ke){return re.call(ve,ke,Ae++)}),ge}function oe(F){if(F._status===-1){var re=F._result;re=re(),re.then(function(ve){(F._status===0||F._status===-1)&&(F._status=1,F._result=ve)},function(ve){(F._status===0||F._status===-1)&&(F._status=2,F._result=ve)}),F._status===-1&&(F._status=0,F._result=re)}if(F._status===1)return F._result.default;throw F._result}var le=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function we(){}return Ge.Children={map:K,forEach:function(F,re,ve){K(F,function(){re.apply(this,arguments)},ve)},count:function(F){var re=0;return K(F,function(){re++}),re},toArray:function(F){return K(F,function(re){return re})||[]},only:function(F){if(!I(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ge.Component=R,Ge.Fragment=t,Ge.Profiler=r,Ge.PureComponent=k,Ge.StrictMode=n,Ge.Suspense=h,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(F){return B.H.useMemoCache(F)}},Ge.cache=function(F){return function(){return F.apply(null,arguments)}},Ge.cloneElement=function(F,re,ve){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=w({},F.props),Ae=F.key,ke=void 0;if(re!=null)for(Ce in re.ref!==void 0&&(ke=void 0),re.key!==void 0&&(Ae=""+re.key),re)!G.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(ge[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)ge.children=ve;else if(1<Ce){for(var dt=Array(Ce),be=0;be<Ce;be++)dt[be]=arguments[be+2];ge.children=dt}return M(F.type,Ae,void 0,void 0,ke,ge)},Ge.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Ge.createElement=function(F,re,ve){var ge,Ae={},ke=null;if(re!=null)for(ge in re.key!==void 0&&(ke=""+re.key),re)G.call(re,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ae[ge]=re[ge]);var Ce=arguments.length-2;if(Ce===1)Ae.children=ve;else if(1<Ce){for(var dt=Array(Ce),be=0;be<Ce;be++)dt[be]=arguments[be+2];Ae.children=dt}if(F&&F.defaultProps)for(ge in Ce=F.defaultProps,Ce)Ae[ge]===void 0&&(Ae[ge]=Ce[ge]);return M(F,ke,void 0,void 0,null,Ae)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(F){return{$$typeof:f,render:F}},Ge.isValidElement=I,Ge.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:oe}},Ge.memo=function(F,re){return{$$typeof:p,type:F,compare:re===void 0?null:re}},Ge.startTransition=function(F){var re=B.T,ve={};B.T=ve;try{var ge=F(),Ae=B.S;Ae!==null&&Ae(ve,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(we,le)}catch(ke){le(ke)}finally{B.T=re}},Ge.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Ge.use=function(F){return B.H.use(F)},Ge.useActionState=function(F,re,ve){return B.H.useActionState(F,re,ve)},Ge.useCallback=function(F,re){return B.H.useCallback(F,re)},Ge.useContext=function(F){return B.H.useContext(F)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(F,re){return B.H.useDeferredValue(F,re)},Ge.useEffect=function(F,re,ve){var ge=B.H;if(typeof ve=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ge.useEffect(F,re)},Ge.useId=function(){return B.H.useId()},Ge.useImperativeHandle=function(F,re,ve){return B.H.useImperativeHandle(F,re,ve)},Ge.useInsertionEffect=function(F,re){return B.H.useInsertionEffect(F,re)},Ge.useLayoutEffect=function(F,re){return B.H.useLayoutEffect(F,re)},Ge.useMemo=function(F,re){return B.H.useMemo(F,re)},Ge.useOptimistic=function(F,re){return B.H.useOptimistic(F,re)},Ge.useReducer=function(F,re,ve){return B.H.useReducer(F,re,ve)},Ge.useRef=function(F){return B.H.useRef(F)},Ge.useState=function(F){return B.H.useState(F)},Ge.useSyncExternalStore=function(F,re,ve){return B.H.useSyncExternalStore(F,re,ve)},Ge.useTransition=function(){return B.H.useTransition()},Ge.version="19.1.0",Ge}var Ow;function kx(){return Ow||(Ow=1,Zg.exports=iI()),Zg.exports}var C=kx();const mt=tI(C);var Jg={exports:{}},Nu={},e0={exports:{}},t0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function rI(){return Mw||(Mw=1,function(s){function e(K,oe){var le=K.length;K.push(oe);e:for(;0<le;){var we=le-1>>>1,F=K[we];if(0<r(F,oe))K[we]=oe,K[le]=F,le=we;else break e}}function t(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var oe=K[0],le=K.pop();if(le!==oe){K[0]=le;e:for(var we=0,F=K.length,re=F>>>1;we<re;){var ve=2*(we+1)-1,ge=K[ve],Ae=ve+1,ke=K[Ae];if(0>r(ge,le))Ae<F&&0>r(ke,ge)?(K[we]=ke,K[Ae]=le,we=Ae):(K[we]=ge,K[ve]=le,we=ve);else if(Ae<F&&0>r(ke,le))K[we]=ke,K[Ae]=le,we=Ae;else break e}}return oe}function r(K,oe){var le=K.sortIndex-oe.sortIndex;return le!==0?le:K.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var h=[],p=[],x=1,v=null,_=3,N=!1,w=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H(K){for(var oe=t(p);oe!==null;){if(oe.callback===null)n(p);else if(oe.startTime<=K)n(p),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=t(p)}}function B(K){if(E=!1,H(K),!w)if(t(h)!==null)w=!0,G||(G=!0,z());else{var oe=t(p);oe!==null&&_e(B,oe.startTime-K)}}var G=!1,M=-1,A=5,I=-1;function O(){return R?!0:!(s.unstable_now()-I<A)}function L(){if(R=!1,G){var K=s.unstable_now();I=K;var oe=!0;try{e:{w=!1,E&&(E=!1,k(M),M=-1),N=!0;var le=_;try{t:{for(H(K),v=t(h);v!==null&&!(v.expirationTime>K&&O());){var we=v.callback;if(typeof we=="function"){v.callback=null,_=v.priorityLevel;var F=we(v.expirationTime<=K);if(K=s.unstable_now(),typeof F=="function"){v.callback=F,H(K),oe=!0;break t}v===t(h)&&n(h),H(K)}else n(h);v=t(h)}if(v!==null)oe=!0;else{var re=t(p);re!==null&&_e(B,re.startTime-K),oe=!1}}break e}finally{v=null,_=le,N=!1}oe=void 0}}finally{oe?z():G=!1}}}var z;if(typeof P=="function")z=function(){P(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ye=V.port2;V.port1.onmessage=L,z=function(){ye.postMessage(null)}}else z=function(){T(L,0)};function _e(K,oe){M=T(function(){K(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_next=function(K){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var le=_;_=oe;try{return K()}finally{_=le}},s.unstable_requestPaint=function(){R=!0},s.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=_;_=K;try{return oe()}finally{_=le}},s.unstable_scheduleCallback=function(K,oe,le){var we=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?we+le:we):le=we,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=le+F,K={id:x++,callback:oe,priorityLevel:K,startTime:le,expirationTime:F,sortIndex:-1},le>we?(K.sortIndex=le,e(p,K),t(h)===null&&K===t(p)&&(E?(k(M),M=-1):E=!0,_e(B,le-we))):(K.sortIndex=F,e(h,K),w||N||(w=!0,G||(G=!0,z()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var oe=_;return function(){var le=_;_=oe;try{return K.apply(this,arguments)}finally{_=le}}}}(t0)),t0}var Lw;function aI(){return Lw||(Lw=1,e0.exports=rI()),e0.exports}var s0={exports:{}},Is={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function lI(){if(Vw)return Is;Vw=1;var s=kx();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,p,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:h,containerInfo:p,implementation:x}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Is.createPortal=function(h,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,x)},Is.flushSync=function(h){var p=u.T,x=n.p;try{if(u.T=null,n.p=2,h)return h()}finally{u.T=p,n.p=x,n.d.f()}},Is.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(h,p))},Is.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Is.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?n.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:N}):x==="script"&&n.d.X(h,{crossOrigin:v,integrity:_,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Is.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);n.d.M(h,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(h)},Is.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin);n.d.L(h,x,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Is.preloadModule=function(h,p){if(typeof h=="string")if(p){var x=f(p.as,p.crossOrigin);n.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(h)},Is.requestFormReset=function(h){n.d.r(h)},Is.unstable_batchedUpdates=function(h,p){return h(p)},Is.useFormState=function(h,p,x){return u.H.useFormState(h,p,x)},Is.useFormStatus=function(){return u.H.useHostTransitionStatus()},Is.version="19.1.0",Is}var zw;function oI(){if(zw)return s0.exports;zw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),s0.exports=lI(),s0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function cI(){if(Uw)return Nu;Uw=1;var s=aI(),e=kx(),t=oI();function n(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,c=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(c=l.return),i=l.return;while(i)}return l.tag===3?c:null}function u(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(n(188))}function h(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(n(188));return l!==i?null:i}for(var c=i,d=l;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return f(g),i;if(y===d)return f(g),l;y=y.sibling}throw Error(n(188))}if(c.return!==d.return)c=g,d=y;else{for(var S=!1,D=g.child;D;){if(D===c){S=!0,c=g,d=y;break}if(D===d){S=!0,d=g,c=y;break}D=D.sibling}if(!S){for(D=y.child;D;){if(D===c){S=!0,c=y,d=g;break}if(D===d){S=!0,d=y,c=g;break}D=D.sibling}if(!S)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:l}function p(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=p(i),l!==null)return l;i=i.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),P=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function ye(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case B:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case P:return(i.displayName||"Context")+".Provider";case k:return(i._context.displayName||"Context")+".Consumer";case H:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return l=i.displayName||null,l!==null?l:ye(i.type)||"Memo";case A:l=i._payload,i=i._init;try{return ye(i(l))}catch{}}return null}var _e=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},we=[],F=-1;function re(i){return{current:i}}function ve(i){0>F||(i.current=we[F],we[F]=null,F--)}function ge(i,l){F++,we[F]=i.current,i.current=l}var Ae=re(null),ke=re(null),Ce=re(null),dt=re(null);function be(i,l){switch(ge(Ce,l),ge(ke,i),ge(Ae,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?aw(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=aw(l),i=lw(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ve(Ae),ge(Ae,i)}function Y(){ve(Ae),ve(ke),ve(Ce)}function ce(i){i.memoizedState!==null&&ge(dt,i);var l=Ae.current,c=lw(l,i.type);l!==c&&(ge(ke,i),ge(Ae,c))}function Ne(i){ke.current===i&&(ve(Ae),ve(ke)),dt.current===i&&(ve(dt),xu._currentValue=le)}var de=Object.prototype.hasOwnProperty,W=s.unstable_scheduleCallback,se=s.unstable_cancelCallback,ie=s.unstable_shouldYield,xe=s.unstable_requestPaint,Te=s.unstable_now,Lt=s.unstable_getCurrentPriorityLevel,Nr=s.unstable_ImmediatePriority,Ln=s.unstable_UserBlockingPriority,Ts=s.unstable_NormalPriority,Er=s.unstable_LowPriority,jr=s.unstable_IdlePriority,Rl=s.log,Ad=s.unstable_setDisableYieldValue,zt=null,xt=null;function an(i){if(typeof Rl=="function"&&Ad(i),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(zt,i)}catch{}}var Cs=Math.clz32?Math.clz32:ja,Id=Math.log,Jm=Math.LN2;function ja(i){return i>>>=0,i===0?32:31-(Id(i)/Jm|0)|0}var Sa=256,Ta=4194304;function Vn(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function kl(i,l,c){var d=i.pendingLanes;if(d===0)return 0;var g=0,y=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var D=d&134217727;return D!==0?(d=D&~y,d!==0?g=Vn(d):(S&=D,S!==0?g=Vn(S):c||(c=D&~i,c!==0&&(g=Vn(c))))):(D=d&~y,D!==0?g=Vn(D):S!==0?g=Vn(S):c||(c=d&~i,c!==0&&(g=Vn(c)))),g===0?0:l!==0&&l!==g&&(l&y)===0&&(y=g&-g,c=l&-l,y>=c||y===32&&(c&4194048)!==0)?l:g}function Ca(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function xc(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var i=Sa;return Sa<<=1,(Sa&4194048)===0&&(Sa=256),i}function vc(){var i=Ta;return Ta<<=1,(Ta&62914560)===0&&(Ta=4194304),i}function Ai(i){for(var l=[],c=0;31>c;c++)l.push(i);return l}function Ii(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function bc(i,l,c,d,g,y){var S=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,q=i.expirationTimes,J=i.hiddenUpdates;for(c=S&~c;0<c;){var ae=31-Cs(c),he=1<<ae;D[ae]=0,q[ae]=-1;var ee=J[ae];if(ee!==null)for(J[ae]=null,ae=0;ae<ee.length;ae++){var te=ee[ae];te!==null&&(te.lane&=-536870913)}c&=~he}d!==0&&ni(i,d,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(S&~l))}function ni(i,l,c){i.pendingLanes|=l,i.suspendedLanes&=~l;var d=31-Cs(l);i.entangledLanes|=l,i.entanglements[d]=i.entanglements[d]|1073741824|c&4194090}function _c(i,l){var c=i.entangledLanes|=l;for(i=i.entanglements;c;){var d=31-Cs(c),g=1<<d;g&l|i[d]&l&&(i[d]|=l),c&=~g}}function Sr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Dl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Tr(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:Sw(i.type))}function Rd(i,l){var c=oe.p;try{return oe.p=i,l()}finally{oe.p=c}}var Pt=Math.random().toString(36).slice(2),ts="__reactFiber$"+Pt,$t="__reactProps$"+Pt,vn="__reactContainer$"+Pt,wc="__reactEvents$"+Pt,ep="__reactListeners$"+Pt,Cr="__reactHandles$"+Pt,kd="__reactResources$"+Pt,Aa="__reactMarker$"+Pt;function Ar(i){delete i[ts],delete i[$t],delete i[wc],delete i[ep],delete i[Cr]}function Ri(i){var l=i[ts];if(l)return l;for(var c=i.parentNode;c;){if(l=c[vn]||c[ts]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(i=dw(i);i!==null;){if(c=i[ts])return c;i=dw(i)}return l}i=c,c=i.parentNode}return null}function ii(i){if(i=i[ts]||i[vn]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function ri(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(n(33))}function zs(i){var l=i[kd];return l||(l=i[kd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ft(i){i[Aa]=!0}var Nc=new Set,Pl={};function zn(i,l){ki(i,l),ki(i+"Capture",l)}function ki(i,l){for(Pl[i]=l,i=0;i<l.length;i++)Nc.add(l[i])}var Dd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pd={},Ia={};function Od(i){return de.call(Ia,i)?!0:de.call(Pd,i)?!1:Dd.test(i)?Ia[i]=!0:(Pd[i]=!0,!1)}function Ir(i,l,c){if(Od(l))if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+c)}}function ai(i,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+c)}}function vs(i,l,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(l,c,""+d)}}var Ra,Md;function Di(i){if(Ra===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Ra=l&&l[1]||"",Md=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+i+Md}var Ol=!1;function Ml(i,l){if(!i||Ol)return"";Ol=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(te){var ee=te}Reflect.construct(i,[],he)}else{try{he.call()}catch(te){ee=te}i.call(he.prototype)}}else{try{throw Error()}catch(te){ee=te}(he=i())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),S=y[0],D=y[1];if(S&&D){var q=S.split(`
`),J=D.split(`
`);for(g=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(d===q.length||g===J.length)for(d=q.length-1,g=J.length-1;1<=d&&0<=g&&q[d]!==J[g];)g--;for(;1<=d&&0<=g;d--,g--)if(q[d]!==J[g]){if(d!==1||g!==1)do if(d--,g--,0>g||q[d]!==J[g]){var ae=`
`+q[d].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=d&&0<=g);break}}}finally{Ol=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Di(c):""}function Ec(i){switch(i.tag){case 26:case 27:case 5:return Di(i.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 15:return Ml(i.type,!1);case 11:return Ml(i.type.render,!1);case 1:return Ml(i.type,!0);case 31:return Di("Activity");default:return""}}function Ll(i){try{var l="";do l+=Ec(i),i=i.return;while(i);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Us(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function jc(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function tp(i){var l=jc(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),d=""+i[l];if(!i.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,y.call(this,S)}}),Object.defineProperty(i,l,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Vl(i){i._valueTracker||(i._valueTracker=tp(i))}function Sc(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var c=l.getValue(),d="";return i&&(d=jc(i)?i.checked?"true":"false":i.value),i=d,i!==c?(l.setValue(i),!0):!1}function ka(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sp=/[\n"\\]/g;function Wt(i){return i.replace(sp,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ln(i,l,c,d,g,y,S,D){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),l!=null?S==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+Us(l)):i.value!==""+Us(l)&&(i.value=""+Us(l)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),l!=null?Rr(i,S,Us(l)):c!=null?Rr(i,S,Us(c)):d!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+Us(D):i.removeAttribute("name")}function Da(i,l,c,d,g,y,S,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),l!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;c=c!=null?""+Us(c):"",l=l!=null?""+Us(l):c,D||l===i.value||(i.value=l),i.defaultValue=l}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=D?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Rr(i,l,c){l==="number"&&ka(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Pi(i,l,c,d){if(i=i.options,l){l={};for(var g=0;g<c.length;g++)l["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=l.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Us(c),l=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}l!==null||i[g].disabled||(l=i[g])}l!==null&&(l.selected=!0)}}function _t(i,l,c){if(l!=null&&(l=""+Us(l),l!==i.value&&(i.value=l),c==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=c!=null?""+Us(c):""}function Pa(i,l,c,d){if(l==null){if(d!=null){if(c!=null)throw Error(n(92));if(_e(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),l=c}c=Us(l),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d)}function bn(i,l){if(l){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=l;return}}i.textContent=l}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ld(i,l,c){var d=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":d?i.setProperty(l,c):typeof c!="number"||c===0||Oa.has(l)?l==="float"?i.cssFloat=c:i[l]=(""+c).trim():i[l]=c+"px"}function Tc(i,l,c){if(l!=null&&typeof l!="object")throw Error(n(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in l)d=l[g],l.hasOwnProperty(g)&&c[g]!==d&&Ld(i,g,d)}else for(var y in l)l.hasOwnProperty(y)&&Ld(i,y,l[y])}function Cc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var np=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ip=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zl(i){return ip.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Oi=null;function _n(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Mi=null,Li=null;function Ac(i){var l=ii(i);if(l&&(i=l.stateNode)){var c=i[$t]||null;e:switch(i=l.stateNode,l.type){case"input":if(ln(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Wt(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var d=c[l];if(d!==i&&d.form===i.form){var g=d[$t]||null;if(!g)throw Error(n(90));ln(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<c.length;l++)d=c[l],d.form===i.form&&Sc(d)}break e;case"textarea":_t(i,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Pi(i,!!c.multiple,l,!1)}}}var li=!1;function Vd(i,l,c){if(li)return i(l,c);li=!0;try{var d=i(l);return d}finally{if(li=!1,(Mi!==null||Li!==null)&&(Rh(),Mi&&(l=Mi,i=Li,Li=Mi=null,Ac(l),i)))for(l=0;l<i.length;l++)Ac(i[l])}}function Ma(i,l){var c=i.stateNode;if(c===null)return null;var d=c[$t]||null;if(d===null)return null;c=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,l,typeof c));return c}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(Un)try{var La={};Object.defineProperty(La,"passive",{get:function(){wn=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{wn=!1}var oi=null,kr=null,Vi=null;function Ic(){if(Vi)return Vi;var i,l=kr,c=l.length,d,g="value"in oi?oi.value:oi.textContent,y=g.length;for(i=0;i<c&&l[i]===g[i];i++);var S=c-i;for(d=1;d<=S&&l[c-d]===g[y-d];d++);return Vi=g.slice(i,1<d?1-d:void 0)}function ci(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ui(){return!0}function Rc(){return!1}function os(i){function l(c,d,g,y,S){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ui:Rc,this.isPropagationStopped=Rc,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),l}var ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=os(ht),Va=x({},ht,{view:0,detail:0}),zd=os(Va),Bl,Fl,di,za=x({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==di&&(di&&i.type==="mousemove"?(Bl=i.screenX-di.screenX,Fl=i.screenY-di.screenY):Fl=Bl=0,di=i),Bl)},movementY:function(i){return"movementY"in i?i.movementY:Fl}}),Nn=os(za),Ud=x({},za,{dataTransfer:0}),rp=os(Ud),Ua=x({},Va,{relatedTarget:0}),ql=os(Ua),kc=x({},ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=os(kc),Bd=x({},ht,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Gl=os(Bd),ap=x({},ht,{data:0}),Dc=os(ap),Ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=qd[i])?!!l[i]:!1}function Fa(){return Pc}var Hd=x({},Va,{key:function(i){if(i.key){var l=Ba[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=ci(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(i){return i.type==="keypress"?ci(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ci(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$l=os(Hd),Gd=x({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=os(Gd),zi=x({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),$d=os(zi),Wd=x({},ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kd=os(Wd),Yd=x({},za,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wl=os(Yd),Bs=x({},ht,{newState:0,oldState:0}),Qd=os(Bs),Xd=[9,13,27,32],hi=Un&&"CompositionEvent"in window,m=null;Un&&"documentMode"in document&&(m=document.documentMode);var b=Un&&"TextEvent"in window&&!m,j=Un&&(!hi||m&&8<m&&11>=m),U=" ",X=!1;function ne(i,l){switch(i){case"keyup":return Xd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var et=!1;function ss(i,l){switch(i){case"compositionend":return Ee(l);case"keypress":return l.which!==32?null:(X=!0,U);case"textInput":return i=l.data,i===U&&X?null:i;default:return null}}function tt(i,l){if(et)return i==="compositionend"||!hi&&ne(i,l)?(i=Ic(),Vi=kr=oi=null,et=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return j&&l.locale!=="ko"?null:l.data;default:return null}}var cs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ns(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!cs[i.type]:l==="textarea"}function Ui(i,l,c,d){Mi?Li?Li.push(d):Li=[d]:Mi=d,l=Lh(l,"onChange"),0<l.length&&(c=new Ul("onChange","change",null,c,d),i.push({event:c,listeners:l}))}var bs=null,fi=null;function Mc(i){tw(i,0)}function Zd(i){var l=ri(i);if(Sc(l))return i}function wv(i,l){if(i==="change")return l}var Nv=!1;if(Un){var lp;if(Un){var op="oninput"in document;if(!op){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),op=typeof Ev.oninput=="function"}lp=op}else lp=!1;Nv=lp&&(!document.documentMode||9<document.documentMode)}function jv(){bs&&(bs.detachEvent("onpropertychange",Sv),fi=bs=null)}function Sv(i){if(i.propertyName==="value"&&Zd(fi)){var l=[];Ui(l,fi,i,_n(i)),Vd(Mc,l)}}function RC(i,l,c){i==="focusin"?(jv(),bs=l,fi=c,bs.attachEvent("onpropertychange",Sv)):i==="focusout"&&jv()}function kC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zd(fi)}function DC(i,l){if(i==="click")return Zd(l)}function PC(i,l){if(i==="input"||i==="change")return Zd(l)}function OC(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var on=typeof Object.is=="function"?Object.is:OC;function Lc(i,l){if(on(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var c=Object.keys(i),d=Object.keys(l);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!de.call(l,g)||!on(i[g],l[g]))return!1}return!0}function Tv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cv(i,l){var c=Tv(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=l&&d>=l)return{node:c,offset:l-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Tv(c)}}function Av(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Av(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Iv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=ka(i.document);l instanceof i.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)i=l.contentWindow;else break;l=ka(i.document)}return l}function cp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var MC=Un&&"documentMode"in document&&11>=document.documentMode,Kl=null,up=null,Vc=null,dp=!1;function Rv(i,l,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;dp||Kl==null||Kl!==ka(d)||(d=Kl,"selectionStart"in d&&cp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Vc&&Lc(Vc,d)||(Vc=d,d=Lh(up,"onSelect"),0<d.length&&(l=new Ul("onSelect","select",null,l,c),i.push({event:l,listeners:d}),l.target=Kl)))}function qa(i,l){var c={};return c[i.toLowerCase()]=l.toLowerCase(),c["Webkit"+i]="webkit"+l,c["Moz"+i]="moz"+l,c}var Yl={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},hp={},kv={};Un&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Ha(i){if(hp[i])return hp[i];if(!Yl[i])return i;var l=Yl[i],c;for(c in l)if(l.hasOwnProperty(c)&&c in kv)return hp[i]=l[c];return i}var Dv=Ha("animationend"),Pv=Ha("animationiteration"),Ov=Ha("animationstart"),LC=Ha("transitionrun"),VC=Ha("transitionstart"),zC=Ha("transitioncancel"),Mv=Ha("transitionend"),Lv=new Map,fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fp.push("scrollEnd");function Bn(i,l){Lv.set(i,l),zn(l,[i])}var Vv=new WeakMap;function En(i,l){if(typeof i=="object"&&i!==null){var c=Vv.get(i);return c!==void 0?c:(l={value:i,source:l,stack:Ll(l)},Vv.set(i,l),l)}return{value:i,source:l,stack:Ll(l)}}var jn=[],Ql=0,mp=0;function Jd(){for(var i=Ql,l=mp=Ql=0;l<i;){var c=jn[l];jn[l++]=null;var d=jn[l];jn[l++]=null;var g=jn[l];jn[l++]=null;var y=jn[l];if(jn[l++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}y!==0&&zv(c,g,y)}}function eh(i,l,c,d){jn[Ql++]=i,jn[Ql++]=l,jn[Ql++]=c,jn[Ql++]=d,mp|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function pp(i,l,c,d){return eh(i,l,c,d),th(i)}function Xl(i,l){return eh(i,null,null,l),th(i)}function zv(i,l,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&l!==null&&(g=31-Cs(c),i=y.hiddenUpdates,d=i[g],d===null?i[g]=[l]:d.push(l),l.lane=c|536870912),y):null}function th(i){if(50<cu)throw cu=0,_g=null,Error(n(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Zl={};function UC(i,l,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(i,l,c,d){return new UC(i,l,c,d)}function gp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,l){var c=i.alternate;return c===null?(c=cn(i.tag,l,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=l,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,l=i.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Uv(i,l){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,l=c.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function sh(i,l,c,d,g,y){var S=0;if(d=i,typeof i=="function")gp(i)&&(S=1);else if(typeof i=="string")S=FA(i,c,Ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=cn(31,c,l,g),i.elementType=I,i.lanes=y,i;case w:return Ga(c.children,g,y,l);case E:S=8,g|=24;break;case R:return i=cn(12,c,l,g|2),i.elementType=R,i.lanes=y,i;case B:return i=cn(13,c,l,g),i.elementType=B,i.lanes=y,i;case G:return i=cn(19,c,l,g),i.elementType=G,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:case P:S=10;break e;case k:S=9;break e;case H:S=11;break e;case M:S=14;break e;case A:S=16,d=null;break e}S=29,c=Error(n(130,i===null?"null":typeof i,"")),d=null}return l=cn(S,c,l,g),l.elementType=i,l.type=d,l.lanes=y,l}function Ga(i,l,c,d){return i=cn(7,i,d,l),i.lanes=c,i}function xp(i,l,c){return i=cn(6,i,null,l),i.lanes=c,i}function yp(i,l,c){return l=cn(4,i.children!==null?i.children:[],i.key,l),l.lanes=c,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Jl=[],eo=0,nh=null,ih=0,Sn=[],Tn=0,$a=null,Fi=1,qi="";function Wa(i,l){Jl[eo++]=ih,Jl[eo++]=nh,nh=i,ih=l}function Bv(i,l,c){Sn[Tn++]=Fi,Sn[Tn++]=qi,Sn[Tn++]=$a,$a=i;var d=Fi;i=qi;var g=32-Cs(d)-1;d&=~(1<<g),c+=1;var y=32-Cs(l)+g;if(30<y){var S=g-g%5;y=(d&(1<<S)-1).toString(32),d>>=S,g-=S,Fi=1<<32-Cs(l)+g|c<<g|d,qi=y+i}else Fi=1<<y|c<<g|d,qi=i}function vp(i){i.return!==null&&(Wa(i,1),Bv(i,1,0))}function bp(i){for(;i===nh;)nh=Jl[--eo],Jl[eo]=null,ih=Jl[--eo],Jl[eo]=null;for(;i===$a;)$a=Sn[--Tn],Sn[Tn]=null,qi=Sn[--Tn],Sn[Tn]=null,Fi=Sn[--Tn],Sn[Tn]=null}var Fs=null,Ut=null,ct=!1,Ka=null,mi=!1,_p=Error(n(519));function Ya(i){var l=Error(n(418,""));throw Bc(En(l,i)),_p}function Fv(i){var l=i.stateNode,c=i.type,d=i.memoizedProps;switch(l[ts]=i,l[$t]=d,c){case"dialog":Qe("cancel",l),Qe("close",l);break;case"iframe":case"object":case"embed":Qe("load",l);break;case"video":case"audio":for(c=0;c<du.length;c++)Qe(du[c],l);break;case"source":Qe("error",l);break;case"img":case"image":case"link":Qe("error",l),Qe("load",l);break;case"details":Qe("toggle",l);break;case"input":Qe("invalid",l),Da(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Vl(l);break;case"select":Qe("invalid",l);break;case"textarea":Qe("invalid",l),Pa(l,d.value,d.defaultValue,d.children),Vl(l)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||d.suppressHydrationWarning===!0||rw(l.textContent,c)?(d.popover!=null&&(Qe("beforetoggle",l),Qe("toggle",l)),d.onScroll!=null&&Qe("scroll",l),d.onScrollEnd!=null&&Qe("scrollend",l),d.onClick!=null&&(l.onclick=Vh),l=!0):l=!1,l||Ya(i)}function qv(i){for(Fs=i.return;Fs;)switch(Fs.tag){case 5:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:Fs=Fs.return}}function zc(i){if(i!==Fs)return!1;if(!ct)return qv(i),ct=!0,!1;var l=i.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Lg(i.type,i.memoizedProps)),c=!c),c&&Ut&&Ya(i),qv(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(l===0){Ut=qn(i.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++;i=i.nextSibling}Ut=null}}else l===27?(l=Ut,Kr(i.type)?(i=Bg,Bg=null,Ut=i):Ut=l):Ut=Fs?qn(i.stateNode.nextSibling):null;return!0}function Uc(){Ut=Fs=null,ct=!1}function Hv(){var i=Ka;return i!==null&&(Ws===null?Ws=i:Ws.push.apply(Ws,i),Ka=null),i}function Bc(i){Ka===null?Ka=[i]:Ka.push(i)}var wp=re(null),Qa=null,Hi=null;function Dr(i,l,c){ge(wp,l._currentValue),l._currentValue=c}function Gi(i){i._currentValue=wp.current,ve(wp)}function Np(i,l,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),i===c)break;i=i.return}}function Ep(i,l,c,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var D=y;y=g;for(var q=0;q<l.length;q++)if(D.context===l[q]){y.lanes|=c,D=y.alternate,D!==null&&(D.lanes|=c),Np(y.return,c,i),d||(S=null);break e}y=D.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(n(341));S.lanes|=c,y=S.alternate,y!==null&&(y.lanes|=c),Np(S,c,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Fc(i,l,c,d){i=null;for(var g=l,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var D=g.type;on(g.pendingProps.value,S.value)||(i!==null?i.push(D):i=[D])}}else if(g===dt.current){if(S=g.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(xu):i=[xu])}g=g.return}i!==null&&Ep(l,i,c,d),l.flags|=262144}function rh(i){for(i=i.firstContext;i!==null;){if(!on(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xa(i){Qa=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function As(i){return Gv(Qa,i)}function ah(i,l){return Qa===null&&Xa(i),Gv(i,l)}function Gv(i,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Hi===null){if(i===null)throw Error(n(308));Hi=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Hi=Hi.next=l;return c}var BC=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){l.aborted=!0,i.forEach(function(c){return c()})}},FC=s.unstable_scheduleCallback,qC=s.unstable_NormalPriority,is={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jp(){return{controller:new BC,data:new Map,refCount:0}}function qc(i){i.refCount--,i.refCount===0&&FC(qC,function(){i.controller.abort()})}var Hc=null,Sp=0,to=0,so=null;function HC(i,l){if(Hc===null){var c=Hc=[];Sp=0,to=Cg(),so={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Sp++,l.then($v,$v),l}function $v(){if(--Sp===0&&Hc!==null){so!==null&&(so.status="fulfilled");var i=Hc;Hc=null,to=0,so=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function GC(i,l){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){d.status="fulfilled",d.value=l;for(var g=0;g<c.length;g++)(0,c[g])(l)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var Wv=K.S;K.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&HC(i,l),Wv!==null&&Wv(i,l)};var Za=re(null);function Tp(){var i=Za.current;return i!==null?i:Ct.pooledCache}function lh(i,l){l===null?ge(Za,Za.current):ge(Za,l.pool)}function Kv(){var i=Tp();return i===null?null:{parent:is._currentValue,pool:i}}var Gc=Error(n(460)),Yv=Error(n(474)),oh=Error(n(542)),Cp={then:function(){}};function Qv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ch(){}function Xv(i,l,c){switch(c=i[c],c===void 0?i.push(l):c!==l&&(l.then(ch,ch),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Jv(i),i;default:if(typeof l.status=="string")l.then(ch,ch);else{if(i=Ct,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=l,i.status="pending",i.then(function(d){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=d}},function(d){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Jv(i),i}throw $c=l,Gc}}var $c=null;function Zv(){if($c===null)throw Error(n(459));var i=$c;return $c=null,i}function Jv(i){if(i===Gc||i===oh)throw Error(n(483))}var Pr=!1;function Ap(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ip(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Or(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Mr(i,l,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(yt&2)!==0){var g=d.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l,l=th(i),zv(i,null,c),l}return eh(i,d,l,c),th(i)}function Wc(i,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var d=l.lanes;d&=i.pendingLanes,c|=d,l.lanes=c,_c(i,c)}}function Rp(i,l){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,c=c.next}while(c!==null);y===null?g=y=l:y=y.next=l}else g=y=l;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=l:i.next=l,c.lastBaseUpdate=l}var kp=!1;function Kc(){if(kp){var i=so;if(i!==null)throw i}}function Yc(i,l,c,d){kp=!1;var g=i.updateQueue;Pr=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var q=D,J=q.next;q.next=null,S===null?y=J:S.next=J,S=q;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==S&&(D===null?ae.firstBaseUpdate=J:D.next=J,ae.lastBaseUpdate=q))}if(y!==null){var he=g.baseState;S=0,ae=J=q=null,D=y;do{var ee=D.lane&-536870913,te=ee!==D.lane;if(te?(st&ee)===ee:(d&ee)===ee){ee!==0&&ee===to&&(kp=!0),ae!==null&&(ae=ae.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Be=i,Le=D;ee=l;var Et=c;switch(Le.tag){case 1:if(Be=Le.payload,typeof Be=="function"){he=Be.call(Et,he,ee);break e}he=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Le.payload,ee=typeof Be=="function"?Be.call(Et,he,ee):Be,ee==null)break e;he=x({},he,ee);break e;case 2:Pr=!0}}ee=D.callback,ee!==null&&(i.flags|=64,te&&(i.flags|=8192),te=g.callbacks,te===null?g.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(J=ae=te,q=he):ae=ae.next=te,S|=ee;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;te=D,D=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);ae===null&&(q=he),g.baseState=q,g.firstBaseUpdate=J,g.lastBaseUpdate=ae,y===null&&(g.shared.lanes=0),Hr|=S,i.lanes=S,i.memoizedState=he}}function eb(i,l){if(typeof i!="function")throw Error(n(191,i));i.call(l)}function tb(i,l){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)eb(c[i],l)}var no=re(null),uh=re(0);function sb(i,l){i=Zi,ge(uh,i),ge(no,l),Zi=i|l.baseLanes}function Dp(){ge(uh,Zi),ge(no,no.current)}function Pp(){Zi=uh.current,ve(no),ve(uh)}var Lr=0,$e=null,wt=null,Kt=null,dh=!1,io=!1,Ja=!1,hh=0,Qc=0,ro=null,$C=0;function qt(){throw Error(n(321))}function Op(i,l){if(l===null)return!1;for(var c=0;c<l.length&&c<i.length;c++)if(!on(i[c],l[c]))return!1;return!0}function Mp(i,l,c,d,g,y){return Lr=y,$e=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=i===null||i.memoizedState===null?zb:Ub,Ja=!1,y=c(d,g),Ja=!1,io&&(y=ib(l,c,d,g)),nb(i),y}function nb(i){K.H=yh;var l=wt!==null&&wt.next!==null;if(Lr=0,Kt=wt=$e=null,dh=!1,Qc=0,ro=null,l)throw Error(n(300));i===null||us||(i=i.dependencies,i!==null&&rh(i)&&(us=!0))}function ib(i,l,c,d){$e=i;var g=0;do{if(io&&(ro=null),Qc=0,io=!1,25<=g)throw Error(n(301));if(g+=1,Kt=wt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=JC,y=l(c,d)}while(io);return y}function WC(){var i=K.H,l=i.useState()[0];return l=typeof l.then=="function"?Xc(l):l,i=i.useState()[0],(wt!==null?wt.memoizedState:null)!==i&&($e.flags|=1024),l}function Lp(){var i=hh!==0;return hh=0,i}function Vp(i,l,c){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~c}function zp(i){if(dh){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}dh=!1}Lr=0,Kt=wt=$e=null,io=!1,Qc=hh=0,ro=null}function Gs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?$e.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Yt(){if(wt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var l=Kt===null?$e.memoizedState:Kt.next;if(l!==null)Kt=l,wt=i;else{if(i===null)throw $e.alternate===null?Error(n(467)):Error(n(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Kt===null?$e.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}function Up(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(i){var l=Qc;return Qc+=1,ro===null&&(ro=[]),i=Xv(ro,i,l),l=$e,(Kt===null?l.memoizedState:Kt.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?zb:Ub),i}function fh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xc(i);if(i.$$typeof===P)return As(i)}throw Error(n(438,String(i)))}function Bp(i){var l=null,c=$e.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Up(),$e.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(i),d=0;d<i;d++)c[d]=O;return l.index++,c}function $i(i,l){return typeof l=="function"?l(i):l}function mh(i){var l=Yt();return Fp(l,wt,i)}function Fp(i,l,c){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var g=i.baseQueue,y=d.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}l.baseQueue=g=y,d.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{l=g.next;var D=S=null,q=null,J=l,ae=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(st&he)===he:(Lr&he)===he){var ee=J.revertLane;if(ee===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===to&&(ae=!0);else if((Lr&ee)===ee){J=J.next,ee===to&&(ae=!0);continue}else he={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(D=q=he,S=y):q=q.next=he,$e.lanes|=ee,Hr|=ee;he=J.action,Ja&&c(y,he),y=J.hasEagerState?J.eagerState:c(y,he)}else ee={lane:he,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(D=q=ee,S=y):q=q.next=ee,$e.lanes|=he,Hr|=he;J=J.next}while(J!==null&&J!==l);if(q===null?S=y:q.next=D,!on(y,i.memoizedState)&&(us=!0,ae&&(c=so,c!==null)))throw c;i.memoizedState=y,i.baseState=S,i.baseQueue=q,d.lastRenderedState=y}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function qp(i){var l=Yt(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=c.dispatch,g=c.pending,y=l.memoizedState;if(g!==null){c.pending=null;var S=g=g.next;do y=i(y,S.action),S=S.next;while(S!==g);on(y,l.memoizedState)||(us=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,d]}function rb(i,l,c){var d=$e,g=Yt(),y=ct;if(y){if(c===void 0)throw Error(n(407));c=c()}else c=l();var S=!on((wt||g).memoizedState,c);S&&(g.memoizedState=c,us=!0),g=g.queue;var D=ob.bind(null,d,g,i);if(Zc(2048,8,D,[i]),g.getSnapshot!==l||S||Kt!==null&&Kt.memoizedState.tag&1){if(d.flags|=2048,ao(9,ph(),lb.bind(null,d,g,c,l),null),Ct===null)throw Error(n(349));y||(Lr&124)!==0||ab(d,l,c)}return c}function ab(i,l,c){i.flags|=16384,i={getSnapshot:l,value:c},l=$e.updateQueue,l===null?(l=Up(),$e.updateQueue=l,l.stores=[i]):(c=l.stores,c===null?l.stores=[i]:c.push(i))}function lb(i,l,c,d){l.value=c,l.getSnapshot=d,cb(l)&&ub(i)}function ob(i,l,c){return c(function(){cb(l)&&ub(i)})}function cb(i){var l=i.getSnapshot;i=i.value;try{var c=l();return!on(i,c)}catch{return!0}}function ub(i){var l=Xl(i,2);l!==null&&mn(l,i,2)}function Hp(i){var l=Gs();if(typeof i=="function"){var c=i;if(i=c(),Ja){an(!0);try{c()}finally{an(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:i},l}function db(i,l,c,d){return i.baseState=c,Fp(i,wt,typeof d=="function"?d:$i)}function KC(i,l,c,d,g){if(xh(i))throw Error(n(485));if(i=l.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};K.T!==null?c(!0):y.isTransition=!1,d(y),c=l.pending,c===null?(y.next=l.pending=y,hb(l,y)):(y.next=c.next,l.pending=c.next=y)}}function hb(i,l){var c=l.action,d=l.payload,g=i.state;if(l.isTransition){var y=K.T,S={};K.T=S;try{var D=c(g,d),q=K.S;q!==null&&q(S,D),fb(i,l,D)}catch(J){Gp(i,l,J)}finally{K.T=y}}else try{y=c(g,d),fb(i,l,y)}catch(J){Gp(i,l,J)}}function fb(i,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){mb(i,l,d)},function(d){return Gp(i,l,d)}):mb(i,l,c)}function mb(i,l,c){l.status="fulfilled",l.value=c,pb(l),i.state=c,l=i.pending,l!==null&&(c=l.next,c===l?i.pending=null:(c=c.next,l.next=c,hb(i,c)))}function Gp(i,l,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=c,pb(l),l=l.next;while(l!==d)}i.action=null}function pb(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function gb(i,l){return l}function xb(i,l){if(ct){var c=Ct.formState;if(c!==null){e:{var d=$e;if(ct){if(Ut){t:{for(var g=Ut,y=mi;g.nodeType!==8;){if(!y){g=null;break t}if(g=qn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ut=qn(g.nextSibling),d=g.data==="F!";break e}}Ya(d)}d=!1}d&&(l=c[0])}}return c=Gs(),c.memoizedState=c.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gb,lastRenderedState:l},c.queue=d,c=Mb.bind(null,$e,d),d.dispatch=c,d=Hp(!1),y=Qp.bind(null,$e,!1,d.queue),d=Gs(),g={state:l,dispatch:null,action:i,pending:null},d.queue=g,c=KC.bind(null,$e,g,y,c),g.dispatch=c,d.memoizedState=i,[l,c,!1]}function yb(i){var l=Yt();return vb(l,wt,i)}function vb(i,l,c){if(l=Fp(i,l,gb)[0],i=mh($i)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=Xc(l)}catch(S){throw S===Gc?oh:S}else d=l;l=Yt();var g=l.queue,y=g.dispatch;return c!==l.memoizedState&&($e.flags|=2048,ao(9,ph(),YC.bind(null,g,c),null)),[d,y,i]}function YC(i,l){i.action=l}function bb(i){var l=Yt(),c=wt;if(c!==null)return vb(l,c,i);Yt(),l=l.memoizedState,c=Yt();var d=c.queue.dispatch;return c.memoizedState=i,[l,d,!1]}function ao(i,l,c,d){return i={tag:i,create:c,deps:d,inst:l,next:null},l=$e.updateQueue,l===null&&(l=Up(),$e.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,l.lastEffect=i),i}function ph(){return{destroy:void 0,resource:void 0}}function _b(){return Yt().memoizedState}function gh(i,l,c,d){var g=Gs();d=d===void 0?null:d,$e.flags|=i,g.memoizedState=ao(1|l,ph(),c,d)}function Zc(i,l,c,d){var g=Yt();d=d===void 0?null:d;var y=g.memoizedState.inst;wt!==null&&d!==null&&Op(d,wt.memoizedState.deps)?g.memoizedState=ao(l,y,c,d):($e.flags|=i,g.memoizedState=ao(1|l,y,c,d))}function wb(i,l){gh(8390656,8,i,l)}function Nb(i,l){Zc(2048,8,i,l)}function Eb(i,l){return Zc(4,2,i,l)}function jb(i,l){return Zc(4,4,i,l)}function Sb(i,l){if(typeof l=="function"){i=i();var c=l(i);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Tb(i,l,c){c=c!=null?c.concat([i]):null,Zc(4,4,Sb.bind(null,l,i),c)}function $p(){}function Cb(i,l){var c=Yt();l=l===void 0?null:l;var d=c.memoizedState;return l!==null&&Op(l,d[1])?d[0]:(c.memoizedState=[i,l],i)}function Ab(i,l){var c=Yt();l=l===void 0?null:l;var d=c.memoizedState;if(l!==null&&Op(l,d[1]))return d[0];if(d=i(),Ja){an(!0);try{i()}finally{an(!1)}}return c.memoizedState=[d,l],d}function Wp(i,l,c){return c===void 0||(Lr&1073741824)!==0?i.memoizedState=l:(i.memoizedState=c,i=k_(),$e.lanes|=i,Hr|=i,c)}function Ib(i,l,c,d){return on(c,l)?c:no.current!==null?(i=Wp(i,c,d),on(i,l)||(us=!0),i):(Lr&42)===0?(us=!0,i.memoizedState=c):(i=k_(),$e.lanes|=i,Hr|=i,l)}function Rb(i,l,c,d,g){var y=oe.p;oe.p=y!==0&&8>y?y:8;var S=K.T,D={};K.T=D,Qp(i,!1,l,c);try{var q=g(),J=K.S;if(J!==null&&J(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ae=GC(q,d);Jc(i,l,ae,fn(i))}else Jc(i,l,d,fn(i))}catch(he){Jc(i,l,{then:function(){},status:"rejected",reason:he},fn())}finally{oe.p=y,K.T=S}}function QC(){}function Kp(i,l,c,d){if(i.tag!==5)throw Error(n(476));var g=kb(i).queue;Rb(i,g,l,le,c===null?QC:function(){return Db(i),c(d)})}function kb(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:le},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:c},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Db(i){var l=kb(i).next.queue;Jc(i,l,{},fn())}function Yp(){return As(xu)}function Pb(){return Yt().memoizedState}function Ob(){return Yt().memoizedState}function XC(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var c=fn();i=Or(c);var d=Mr(l,i,c);d!==null&&(mn(d,l,c),Wc(d,l,c)),l={cache:jp()},i.payload=l;return}l=l.return}}function ZC(i,l,c){var d=fn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},xh(i)?Lb(l,c):(c=pp(i,l,c,d),c!==null&&(mn(c,i,d),Vb(c,l,d)))}function Mb(i,l,c){var d=fn();Jc(i,l,c,d)}function Jc(i,l,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(xh(i))Lb(l,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var S=l.lastRenderedState,D=y(S,c);if(g.hasEagerState=!0,g.eagerState=D,on(D,S))return eh(i,l,g,0),Ct===null&&Jd(),!1}catch{}finally{}if(c=pp(i,l,g,d),c!==null)return mn(c,i,d),Vb(c,l,d),!0}return!1}function Qp(i,l,c,d){if(d={lane:2,revertLane:Cg(),action:d,hasEagerState:!1,eagerState:null,next:null},xh(i)){if(l)throw Error(n(479))}else l=pp(i,c,d,2),l!==null&&mn(l,i,2)}function xh(i){var l=i.alternate;return i===$e||l!==null&&l===$e}function Lb(i,l){io=dh=!0;var c=i.pending;c===null?l.next=l:(l.next=c.next,c.next=l),i.pending=l}function Vb(i,l,c){if((c&4194048)!==0){var d=l.lanes;d&=i.pendingLanes,c|=d,l.lanes=c,_c(i,c)}}var yh={readContext:As,use:fh,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},zb={readContext:As,use:fh,useCallback:function(i,l){return Gs().memoizedState=[i,l===void 0?null:l],i},useContext:As,useEffect:wb,useImperativeHandle:function(i,l,c){c=c!=null?c.concat([i]):null,gh(4194308,4,Sb.bind(null,l,i),c)},useLayoutEffect:function(i,l){return gh(4194308,4,i,l)},useInsertionEffect:function(i,l){gh(4,2,i,l)},useMemo:function(i,l){var c=Gs();l=l===void 0?null:l;var d=i();if(Ja){an(!0);try{i()}finally{an(!1)}}return c.memoizedState=[d,l],d},useReducer:function(i,l,c){var d=Gs();if(c!==void 0){var g=c(l);if(Ja){an(!0);try{c(l)}finally{an(!1)}}}else g=l;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=ZC.bind(null,$e,i),[d.memoizedState,i]},useRef:function(i){var l=Gs();return i={current:i},l.memoizedState=i},useState:function(i){i=Hp(i);var l=i.queue,c=Mb.bind(null,$e,l);return l.dispatch=c,[i.memoizedState,c]},useDebugValue:$p,useDeferredValue:function(i,l){var c=Gs();return Wp(c,i,l)},useTransition:function(){var i=Hp(!1);return i=Rb.bind(null,$e,i.queue,!0,!1),Gs().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,c){var d=$e,g=Gs();if(ct){if(c===void 0)throw Error(n(407));c=c()}else{if(c=l(),Ct===null)throw Error(n(349));(st&124)!==0||ab(d,l,c)}g.memoizedState=c;var y={value:c,getSnapshot:l};return g.queue=y,wb(ob.bind(null,d,y,i),[i]),d.flags|=2048,ao(9,ph(),lb.bind(null,d,y,c,l),null),c},useId:function(){var i=Gs(),l=Ct.identifierPrefix;if(ct){var c=qi,d=Fi;c=(d&~(1<<32-Cs(d)-1)).toString(32)+c,l="«"+l+"R"+c,c=hh++,0<c&&(l+="H"+c.toString(32)),l+="»"}else c=$C++,l="«"+l+"r"+c.toString(32)+"»";return i.memoizedState=l},useHostTransitionStatus:Yp,useFormState:xb,useActionState:xb,useOptimistic:function(i){var l=Gs();l.memoizedState=l.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=Qp.bind(null,$e,!0,c),c.dispatch=l,[i,l]},useMemoCache:Bp,useCacheRefresh:function(){return Gs().memoizedState=XC.bind(null,$e)}},Ub={readContext:As,use:fh,useCallback:Cb,useContext:As,useEffect:Nb,useImperativeHandle:Tb,useInsertionEffect:Eb,useLayoutEffect:jb,useMemo:Ab,useReducer:mh,useRef:_b,useState:function(){return mh($i)},useDebugValue:$p,useDeferredValue:function(i,l){var c=Yt();return Ib(c,wt.memoizedState,i,l)},useTransition:function(){var i=mh($i)[0],l=Yt().memoizedState;return[typeof i=="boolean"?i:Xc(i),l]},useSyncExternalStore:rb,useId:Pb,useHostTransitionStatus:Yp,useFormState:yb,useActionState:yb,useOptimistic:function(i,l){var c=Yt();return db(c,wt,i,l)},useMemoCache:Bp,useCacheRefresh:Ob},JC={readContext:As,use:fh,useCallback:Cb,useContext:As,useEffect:Nb,useImperativeHandle:Tb,useInsertionEffect:Eb,useLayoutEffect:jb,useMemo:Ab,useReducer:qp,useRef:_b,useState:function(){return qp($i)},useDebugValue:$p,useDeferredValue:function(i,l){var c=Yt();return wt===null?Wp(c,i,l):Ib(c,wt.memoizedState,i,l)},useTransition:function(){var i=qp($i)[0],l=Yt().memoizedState;return[typeof i=="boolean"?i:Xc(i),l]},useSyncExternalStore:rb,useId:Pb,useHostTransitionStatus:Yp,useFormState:bb,useActionState:bb,useOptimistic:function(i,l){var c=Yt();return wt!==null?db(c,wt,i,l):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Bp,useCacheRefresh:Ob},lo=null,eu=0;function vh(i){var l=eu;return eu+=1,lo===null&&(lo=[]),Xv(lo,i,l)}function tu(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function bh(i,l){throw l.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function Bb(i){var l=i._init;return l(i._payload)}function Fb(i){function l(Q,$){if(i){var Z=Q.deletions;Z===null?(Q.deletions=[$],Q.flags|=16):Z.push($)}}function c(Q,$){if(!i)return null;for(;$!==null;)l(Q,$),$=$.sibling;return null}function d(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function g(Q,$){return Q=Bi(Q,$),Q.index=0,Q.sibling=null,Q}function y(Q,$,Z){return Q.index=Z,i?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<$?(Q.flags|=67108866,$):Z):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function S(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function D(Q,$,Z,ue){return $===null||$.tag!==6?($=xp(Z,Q.mode,ue),$.return=Q,$):($=g($,Z),$.return=Q,$)}function q(Q,$,Z,ue){var De=Z.type;return De===w?ae(Q,$,Z.props.children,ue,Z.key):$!==null&&($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===A&&Bb(De)===$.type)?($=g($,Z.props),tu($,Z),$.return=Q,$):($=sh(Z.type,Z.key,Z.props,null,Q.mode,ue),tu($,Z),$.return=Q,$)}function J(Q,$,Z,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=yp(Z,Q.mode,ue),$.return=Q,$):($=g($,Z.children||[]),$.return=Q,$)}function ae(Q,$,Z,ue,De){return $===null||$.tag!==7?($=Ga(Z,Q.mode,ue,De),$.return=Q,$):($=g($,Z),$.return=Q,$)}function he(Q,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=xp(""+$,Q.mode,Z),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return Z=sh($.type,$.key,$.props,null,Q.mode,Z),tu(Z,$),Z.return=Q,Z;case N:return $=yp($,Q.mode,Z),$.return=Q,$;case A:var ue=$._init;return $=ue($._payload),he(Q,$,Z)}if(_e($)||z($))return $=Ga($,Q.mode,Z,null),$.return=Q,$;if(typeof $.then=="function")return he(Q,vh($),Z);if($.$$typeof===P)return he(Q,ah(Q,$),Z);bh(Q,$)}return null}function ee(Q,$,Z,ue){var De=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return De!==null?null:D(Q,$,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return Z.key===De?q(Q,$,Z,ue):null;case N:return Z.key===De?J(Q,$,Z,ue):null;case A:return De=Z._init,Z=De(Z._payload),ee(Q,$,Z,ue)}if(_e(Z)||z(Z))return De!==null?null:ae(Q,$,Z,ue,null);if(typeof Z.then=="function")return ee(Q,$,vh(Z),ue);if(Z.$$typeof===P)return ee(Q,$,ah(Q,Z),ue);bh(Q,Z)}return null}function te(Q,$,Z,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Q=Q.get(Z)||null,D($,Q,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return Q=Q.get(ue.key===null?Z:ue.key)||null,q($,Q,ue,De);case N:return Q=Q.get(ue.key===null?Z:ue.key)||null,J($,Q,ue,De);case A:var Ke=ue._init;return ue=Ke(ue._payload),te(Q,$,Z,ue,De)}if(_e(ue)||z(ue))return Q=Q.get(Z)||null,ae($,Q,ue,De,null);if(typeof ue.then=="function")return te(Q,$,Z,vh(ue),De);if(ue.$$typeof===P)return te(Q,$,Z,ah($,ue),De);bh($,ue)}return null}function Be(Q,$,Z,ue){for(var De=null,Ke=null,Oe=$,Ve=$=0,hs=null;Oe!==null&&Ve<Z.length;Ve++){Oe.index>Ve?(hs=Oe,Oe=null):hs=Oe.sibling;var lt=ee(Q,Oe,Z[Ve],ue);if(lt===null){Oe===null&&(Oe=hs);break}i&&Oe&&lt.alternate===null&&l(Q,Oe),$=y(lt,$,Ve),Ke===null?De=lt:Ke.sibling=lt,Ke=lt,Oe=hs}if(Ve===Z.length)return c(Q,Oe),ct&&Wa(Q,Ve),De;if(Oe===null){for(;Ve<Z.length;Ve++)Oe=he(Q,Z[Ve],ue),Oe!==null&&($=y(Oe,$,Ve),Ke===null?De=Oe:Ke.sibling=Oe,Ke=Oe);return ct&&Wa(Q,Ve),De}for(Oe=d(Oe);Ve<Z.length;Ve++)hs=te(Oe,Q,Ve,Z[Ve],ue),hs!==null&&(i&&hs.alternate!==null&&Oe.delete(hs.key===null?Ve:hs.key),$=y(hs,$,Ve),Ke===null?De=hs:Ke.sibling=hs,Ke=hs);return i&&Oe.forEach(function(Jr){return l(Q,Jr)}),ct&&Wa(Q,Ve),De}function Le(Q,$,Z,ue){if(Z==null)throw Error(n(151));for(var De=null,Ke=null,Oe=$,Ve=$=0,hs=null,lt=Z.next();Oe!==null&&!lt.done;Ve++,lt=Z.next()){Oe.index>Ve?(hs=Oe,Oe=null):hs=Oe.sibling;var Jr=ee(Q,Oe,lt.value,ue);if(Jr===null){Oe===null&&(Oe=hs);break}i&&Oe&&Jr.alternate===null&&l(Q,Oe),$=y(Jr,$,Ve),Ke===null?De=Jr:Ke.sibling=Jr,Ke=Jr,Oe=hs}if(lt.done)return c(Q,Oe),ct&&Wa(Q,Ve),De;if(Oe===null){for(;!lt.done;Ve++,lt=Z.next())lt=he(Q,lt.value,ue),lt!==null&&($=y(lt,$,Ve),Ke===null?De=lt:Ke.sibling=lt,Ke=lt);return ct&&Wa(Q,Ve),De}for(Oe=d(Oe);!lt.done;Ve++,lt=Z.next())lt=te(Oe,Q,Ve,lt.value,ue),lt!==null&&(i&&lt.alternate!==null&&Oe.delete(lt.key===null?Ve:lt.key),$=y(lt,$,Ve),Ke===null?De=lt:Ke.sibling=lt,Ke=lt);return i&&Oe.forEach(function(eI){return l(Q,eI)}),ct&&Wa(Q,Ve),De}function Et(Q,$,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:e:{for(var De=Z.key;$!==null;){if($.key===De){if(De=Z.type,De===w){if($.tag===7){c(Q,$.sibling),ue=g($,Z.props.children),ue.return=Q,Q=ue;break e}}else if($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===A&&Bb(De)===$.type){c(Q,$.sibling),ue=g($,Z.props),tu(ue,Z),ue.return=Q,Q=ue;break e}c(Q,$);break}else l(Q,$);$=$.sibling}Z.type===w?(ue=Ga(Z.props.children,Q.mode,ue,Z.key),ue.return=Q,Q=ue):(ue=sh(Z.type,Z.key,Z.props,null,Q.mode,ue),tu(ue,Z),ue.return=Q,Q=ue)}return S(Q);case N:e:{for(De=Z.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){c(Q,$.sibling),ue=g($,Z.children||[]),ue.return=Q,Q=ue;break e}else{c(Q,$);break}else l(Q,$);$=$.sibling}ue=yp(Z,Q.mode,ue),ue.return=Q,Q=ue}return S(Q);case A:return De=Z._init,Z=De(Z._payload),Et(Q,$,Z,ue)}if(_e(Z))return Be(Q,$,Z,ue);if(z(Z)){if(De=z(Z),typeof De!="function")throw Error(n(150));return Z=De.call(Z),Le(Q,$,Z,ue)}if(typeof Z.then=="function")return Et(Q,$,vh(Z),ue);if(Z.$$typeof===P)return Et(Q,$,ah(Q,Z),ue);bh(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(c(Q,$.sibling),ue=g($,Z),ue.return=Q,Q=ue):(c(Q,$),ue=xp(Z,Q.mode,ue),ue.return=Q,Q=ue),S(Q)):c(Q,$)}return function(Q,$,Z,ue){try{eu=0;var De=Et(Q,$,Z,ue);return lo=null,De}catch(Oe){if(Oe===Gc||Oe===oh)throw Oe;var Ke=cn(29,Oe,null,Q.mode);return Ke.lanes=ue,Ke.return=Q,Ke}finally{}}}var oo=Fb(!0),qb=Fb(!1),Cn=re(null),pi=null;function Vr(i){var l=i.alternate;ge(rs,rs.current&1),ge(Cn,i),pi===null&&(l===null||no.current!==null||l.memoizedState!==null)&&(pi=i)}function Hb(i){if(i.tag===22){if(ge(rs,rs.current),ge(Cn,i),pi===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(pi=i)}}else zr()}function zr(){ge(rs,rs.current),ge(Cn,Cn.current)}function Wi(i){ve(Cn),pi===i&&(pi=null),ve(rs)}var rs=re(0);function _h(i){for(var l=i;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Ug(c)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Xp(i,l,c,d){l=i.memoizedState,c=c(d,l),c=c==null?l:x({},l,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Zp={enqueueSetState:function(i,l,c){i=i._reactInternals;var d=fn(),g=Or(d);g.payload=l,c!=null&&(g.callback=c),l=Mr(i,g,d),l!==null&&(mn(l,i,d),Wc(l,i,d))},enqueueReplaceState:function(i,l,c){i=i._reactInternals;var d=fn(),g=Or(d);g.tag=1,g.payload=l,c!=null&&(g.callback=c),l=Mr(i,g,d),l!==null&&(mn(l,i,d),Wc(l,i,d))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var c=fn(),d=Or(c);d.tag=2,l!=null&&(d.callback=l),l=Mr(i,d,c),l!==null&&(mn(l,i,c),Wc(l,i,c))}};function Gb(i,l,c,d,g,y,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,S):l.prototype&&l.prototype.isPureReactComponent?!Lc(c,d)||!Lc(g,y):!0}function $b(i,l,c,d){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,d),l.state!==i&&Zp.enqueueReplaceState(l,l.state,null)}function el(i,l){var c=l;if("ref"in l){c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}if(i=i.defaultProps){c===l&&(c=x({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}var wh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Wb(i){wh(i)}function Kb(i){console.error(i)}function Yb(i){wh(i)}function Nh(i,l){try{var c=i.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function Qb(i,l,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Jp(i,l,c){return c=Or(c),c.tag=3,c.payload={element:null},c.callback=function(){Nh(i,l)},c}function Xb(i){return i=Or(i),i.tag=3,i}function Zb(i,l,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;i.payload=function(){return g(y)},i.callback=function(){Qb(l,c,d)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Qb(l,c,d),typeof g!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function eA(i,l,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=c.alternate,l!==null&&Fc(l,c,g,!0),c=Cn.current,c!==null){switch(c.tag){case 13:return pi===null?Ng():c.alternate===null&&Bt===0&&(Bt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===Cp?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([d]):l.add(d),jg(i,d,g)),!1;case 22:return c.flags|=65536,d===Cp?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([d]):c.add(d)),jg(i,d,g)),!1}throw Error(n(435,c.tag))}return jg(i,d,g),Ng(),!1}if(ct)return l=Cn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=g,d!==_p&&(i=Error(n(422),{cause:d}),Bc(En(i,c)))):(d!==_p&&(l=Error(n(423),{cause:d}),Bc(En(l,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=En(d,c),g=Jp(i.stateNode,d,g),Rp(i,g),Bt!==4&&(Bt=2)),!1;var y=Error(n(520),{cause:d});if(y=En(y,c),ou===null?ou=[y]:ou.push(y),Bt!==4&&(Bt=2),l===null)return!0;d=En(d,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Jp(c.stateNode,d,i),Rp(c,i),!1;case 1:if(l=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gr===null||!Gr.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Xb(g),Zb(g,i,c,d),Rp(c,g),!1}c=c.return}while(c!==null);return!1}var Jb=Error(n(461)),us=!1;function _s(i,l,c,d){l.child=i===null?qb(l,null,c,d):oo(l,i.child,c,d)}function e_(i,l,c,d,g){c=c.render;var y=l.ref;if("ref"in d){var S={};for(var D in d)D!=="ref"&&(S[D]=d[D])}else S=d;return Xa(l),d=Mp(i,l,c,S,y,g),D=Lp(),i!==null&&!us?(Vp(i,l,g),Ki(i,l,g)):(ct&&D&&vp(l),l.flags|=1,_s(i,l,d,g),l.child)}function t_(i,l,c,d,g){if(i===null){var y=c.type;return typeof y=="function"&&!gp(y)&&y.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=y,s_(i,l,y,d,g)):(i=sh(c.type,null,d,l,l.mode,g),i.ref=l.ref,i.return=l,l.child=i)}if(y=i.child,!lg(i,g)){var S=y.memoizedProps;if(c=c.compare,c=c!==null?c:Lc,c(S,d)&&i.ref===l.ref)return Ki(i,l,g)}return l.flags|=1,i=Bi(y,d),i.ref=l.ref,i.return=l,l.child=i}function s_(i,l,c,d,g){if(i!==null){var y=i.memoizedProps;if(Lc(y,d)&&i.ref===l.ref)if(us=!1,l.pendingProps=d=y,lg(i,g))(i.flags&131072)!==0&&(us=!0);else return l.lanes=i.lanes,Ki(i,l,g)}return eg(i,l,c,d,g)}function n_(i,l,c){var d=l.pendingProps,g=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,i!==null){for(g=l.child=i.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;l.childLanes=y&~d}else l.childLanes=0,l.child=null;return i_(i,l,d,c)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&lh(l,y!==null?y.cachePool:null),y!==null?sb(l,y):Dp(),Hb(l);else return l.lanes=l.childLanes=536870912,i_(i,l,y!==null?y.baseLanes|c:c,c)}else y!==null?(lh(l,y.cachePool),sb(l,y),zr(),l.memoizedState=null):(i!==null&&lh(l,null),Dp(),zr());return _s(i,l,g,c),l.child}function i_(i,l,c,d){var g=Tp();return g=g===null?null:{parent:is._currentValue,pool:g},l.memoizedState={baseLanes:c,cachePool:g},i!==null&&lh(l,null),Dp(),Hb(l),i!==null&&Fc(i,l,d,!0),null}function Eh(i,l){var c=l.ref;if(c===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(l.flags|=4194816)}}function eg(i,l,c,d,g){return Xa(l),c=Mp(i,l,c,d,void 0,g),d=Lp(),i!==null&&!us?(Vp(i,l,g),Ki(i,l,g)):(ct&&d&&vp(l),l.flags|=1,_s(i,l,c,g),l.child)}function r_(i,l,c,d,g,y){return Xa(l),l.updateQueue=null,c=ib(l,d,c,g),nb(i),d=Lp(),i!==null&&!us?(Vp(i,l,y),Ki(i,l,y)):(ct&&d&&vp(l),l.flags|=1,_s(i,l,c,y),l.child)}function a_(i,l,c,d,g){if(Xa(l),l.stateNode===null){var y=Zl,S=c.contextType;typeof S=="object"&&S!==null&&(y=As(S)),y=new c(d,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Zp,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=d,y.state=l.memoizedState,y.refs={},Ap(l),S=c.contextType,y.context=typeof S=="object"&&S!==null?As(S):Zl,y.state=l.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Xp(l,c,S,d),y.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Zp.enqueueReplaceState(y,y.state,null),Yc(l,d,y,g),Kc(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(i===null){y=l.stateNode;var D=l.memoizedProps,q=el(c,D);y.props=q;var J=y.context,ae=c.contextType;S=Zl,typeof ae=="object"&&ae!==null&&(S=As(ae));var he=c.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||J!==S)&&$b(l,y,d,S),Pr=!1;var ee=l.memoizedState;y.state=ee,Yc(l,d,y,g),Kc(),J=l.memoizedState,D||ee!==J||Pr?(typeof he=="function"&&(Xp(l,c,he,d),J=l.memoizedState),(q=Pr||Gb(l,c,q,d,ee,J,S))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=J),y.props=d,y.state=J,y.context=S,d=q):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{y=l.stateNode,Ip(i,l),S=l.memoizedProps,ae=el(c,S),y.props=ae,he=l.pendingProps,ee=y.context,J=c.contextType,q=Zl,typeof J=="object"&&J!==null&&(q=As(J)),D=c.getDerivedStateFromProps,(J=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==he||ee!==q)&&$b(l,y,d,q),Pr=!1,ee=l.memoizedState,y.state=ee,Yc(l,d,y,g),Kc();var te=l.memoizedState;S!==he||ee!==te||Pr||i!==null&&i.dependencies!==null&&rh(i.dependencies)?(typeof D=="function"&&(Xp(l,c,D,d),te=l.memoizedState),(ae=Pr||Gb(l,c,ae,d,ee,te,q)||i!==null&&i.dependencies!==null&&rh(i.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,te,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,te,q)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=te),y.props=d,y.state=te,y.context=q,d=ae):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(l.flags|=1024),d=!1)}return y=d,Eh(i,l),d=(l.flags&128)!==0,y||d?(y=l.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,i!==null&&d?(l.child=oo(l,i.child,null,g),l.child=oo(l,null,c,g)):_s(i,l,c,g),l.memoizedState=y.state,i=l.child):i=Ki(i,l,g),i}function l_(i,l,c,d){return Uc(),l.flags|=256,_s(i,l,c,d),l.child}var tg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(i){return{baseLanes:i,cachePool:Kv()}}function ng(i,l,c){return i=i!==null?i.childLanes&~c:0,l&&(i|=An),i}function o_(i,l,c){var d=l.pendingProps,g=!1,y=(l.flags&128)!==0,S;if((S=y)||(S=i!==null&&i.memoizedState===null?!1:(rs.current&2)!==0),S&&(g=!0,l.flags&=-129),S=(l.flags&32)!==0,l.flags&=-33,i===null){if(ct){if(g?Vr(l):zr(),ct){var D=Ut,q;if(q=D){e:{for(q=D,D=mi;q.nodeType!==8;){if(!D){D=null;break e}if(q=qn(q.nextSibling),q===null){D=null;break e}}D=q}D!==null?(l.memoizedState={dehydrated:D,treeContext:$a!==null?{id:Fi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},q=cn(18,null,null,0),q.stateNode=D,q.return=l,l.child=q,Fs=l,Ut=null,q=!0):q=!1}q||Ya(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return Ug(D)?l.lanes=32:l.lanes=536870912,null;Wi(l)}return D=d.children,d=d.fallback,g?(zr(),g=l.mode,D=jh({mode:"hidden",children:D},g),d=Ga(d,g,c,null),D.return=l,d.return=l,D.sibling=d,l.child=D,g=l.child,g.memoizedState=sg(c),g.childLanes=ng(i,S,c),l.memoizedState=tg,d):(Vr(l),ig(l,D))}if(q=i.memoizedState,q!==null&&(D=q.dehydrated,D!==null)){if(y)l.flags&256?(Vr(l),l.flags&=-257,l=rg(i,l,c)):l.memoizedState!==null?(zr(),l.child=i.child,l.flags|=128,l=null):(zr(),g=d.fallback,D=l.mode,d=jh({mode:"visible",children:d.children},D),g=Ga(g,D,c,null),g.flags|=2,d.return=l,g.return=l,d.sibling=g,l.child=d,oo(l,i.child,null,c),d=l.child,d.memoizedState=sg(c),d.childLanes=ng(i,S,c),l.memoizedState=tg,l=g);else if(Vr(l),Ug(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var J=S.dgst;S=J,d=Error(n(419)),d.stack="",d.digest=S,Bc({value:d,source:null,stack:null}),l=rg(i,l,c)}else if(us||Fc(i,l,c,!1),S=(c&i.childLanes)!==0,us||S){if(S=Ct,S!==null&&(d=c&-c,d=(d&42)!==0?1:Sr(d),d=(d&(S.suspendedLanes|c))!==0?0:d,d!==0&&d!==q.retryLane))throw q.retryLane=d,Xl(i,d),mn(S,i,d),Jb;D.data==="$?"||Ng(),l=rg(i,l,c)}else D.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=q.treeContext,Ut=qn(D.nextSibling),Fs=l,ct=!0,Ka=null,mi=!1,i!==null&&(Sn[Tn++]=Fi,Sn[Tn++]=qi,Sn[Tn++]=$a,Fi=i.id,qi=i.overflow,$a=l),l=ig(l,d.children),l.flags|=4096);return l}return g?(zr(),g=d.fallback,D=l.mode,q=i.child,J=q.sibling,d=Bi(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,J!==null?g=Bi(J,g):(g=Ga(g,D,c,null),g.flags|=2),g.return=l,d.return=l,d.sibling=g,l.child=d,d=g,g=l.child,D=i.child.memoizedState,D===null?D=sg(c):(q=D.cachePool,q!==null?(J=is._currentValue,q=q.parent!==J?{parent:J,pool:J}:q):q=Kv(),D={baseLanes:D.baseLanes|c,cachePool:q}),g.memoizedState=D,g.childLanes=ng(i,S,c),l.memoizedState=tg,d):(Vr(l),c=i.child,i=c.sibling,c=Bi(c,{mode:"visible",children:d.children}),c.return=l,c.sibling=null,i!==null&&(S=l.deletions,S===null?(l.deletions=[i],l.flags|=16):S.push(i)),l.child=c,l.memoizedState=null,c)}function ig(i,l){return l=jh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function jh(i,l){return i=cn(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function rg(i,l,c){return oo(l,i.child,null,c),i=ig(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function c_(i,l,c){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l),Np(i.return,l,c)}function ag(i,l,c,d,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=g)}function u_(i,l,c){var d=l.pendingProps,g=d.revealOrder,y=d.tail;if(_s(i,l,d.children,c),d=rs.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&c_(i,c,l);else if(i.tag===19)c_(i,c,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(ge(rs,d),g){case"forwards":for(c=l.child,g=null;c!==null;)i=c.alternate,i!==null&&_h(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=l.child,l.child=null):(g=c.sibling,c.sibling=null),ag(l,!1,g,c,y);break;case"backwards":for(c=null,g=l.child,l.child=null;g!==null;){if(i=g.alternate,i!==null&&_h(i)===null){l.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}ag(l,!0,c,null,y);break;case"together":ag(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ki(i,l,c){if(i!==null&&(l.dependencies=i.dependencies),Hr|=l.lanes,(c&l.childLanes)===0)if(i!==null){if(Fc(i,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,c=Bi(i,i.pendingProps),l.child=c,c.return=l;i.sibling!==null;)i=i.sibling,c=c.sibling=Bi(i,i.pendingProps),c.return=l;c.sibling=null}return l.child}function lg(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&rh(i)))}function tA(i,l,c){switch(l.tag){case 3:be(l,l.stateNode.containerInfo),Dr(l,is,i.memoizedState.cache),Uc();break;case 27:case 5:ce(l);break;case 4:be(l,l.stateNode.containerInfo);break;case 10:Dr(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Vr(l),l.flags|=128,null):(c&l.child.childLanes)!==0?o_(i,l,c):(Vr(l),i=Ki(i,l,c),i!==null?i.sibling:null);Vr(l);break;case 19:var g=(i.flags&128)!==0;if(d=(c&l.childLanes)!==0,d||(Fc(i,l,c,!1),d=(c&l.childLanes)!==0),g){if(d)return u_(i,l,c);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ge(rs,rs.current),d)break;return null;case 22:case 23:return l.lanes=0,n_(i,l,c);case 24:Dr(l,is,i.memoizedState.cache)}return Ki(i,l,c)}function d_(i,l,c){if(i!==null)if(i.memoizedProps!==l.pendingProps)us=!0;else{if(!lg(i,c)&&(l.flags&128)===0)return us=!1,tA(i,l,c);us=(i.flags&131072)!==0}else us=!1,ct&&(l.flags&1048576)!==0&&Bv(l,ih,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var d=l.elementType,g=d._init;if(d=g(d._payload),l.type=d,typeof d=="function")gp(d)?(i=el(d,i),l.tag=1,l=a_(null,l,d,i,c)):(l.tag=0,l=eg(null,l,d,i,c));else{if(d!=null){if(g=d.$$typeof,g===H){l.tag=11,l=e_(null,l,d,i,c);break e}else if(g===M){l.tag=14,l=t_(null,l,d,i,c);break e}}throw l=ye(d)||d,Error(n(306,l,""))}}return l;case 0:return eg(i,l,l.type,l.pendingProps,c);case 1:return d=l.type,g=el(d,l.pendingProps),a_(i,l,d,g,c);case 3:e:{if(be(l,l.stateNode.containerInfo),i===null)throw Error(n(387));d=l.pendingProps;var y=l.memoizedState;g=y.element,Ip(i,l),Yc(l,d,null,c);var S=l.memoizedState;if(d=S.cache,Dr(l,is,d),d!==y.cache&&Ep(l,[is],c,!0),Kc(),d=S.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:S.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=l_(i,l,d,c);break e}else if(d!==g){g=En(Error(n(424)),l),Bc(g),l=l_(i,l,d,c);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ut=qn(i.firstChild),Fs=l,ct=!0,Ka=null,mi=!0,c=qb(l,null,d,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Uc(),d===g){l=Ki(i,l,c);break e}_s(i,l,d,c)}l=l.child}return l;case 26:return Eh(i,l),i===null?(c=pw(l.type,null,l.pendingProps,null))?l.memoizedState=c:ct||(c=l.type,i=l.pendingProps,d=zh(Ce.current).createElement(c),d[ts]=l,d[$t]=i,Ns(d,c,i),Ft(d),l.stateNode=d):l.memoizedState=pw(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return ce(l),i===null&&ct&&(d=l.stateNode=hw(l.type,l.pendingProps,Ce.current),Fs=l,mi=!0,g=Ut,Kr(l.type)?(Bg=g,Ut=qn(d.firstChild)):Ut=g),_s(i,l,l.pendingProps.children,c),Eh(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&ct&&((g=d=Ut)&&(d=AA(d,l.type,l.pendingProps,mi),d!==null?(l.stateNode=d,Fs=l,Ut=qn(d.firstChild),mi=!1,g=!0):g=!1),g||Ya(l)),ce(l),g=l.type,y=l.pendingProps,S=i!==null?i.memoizedProps:null,d=y.children,Lg(g,y)?d=null:S!==null&&Lg(g,S)&&(l.flags|=32),l.memoizedState!==null&&(g=Mp(i,l,WC,null,null,c),xu._currentValue=g),Eh(i,l),_s(i,l,d,c),l.child;case 6:return i===null&&ct&&((i=c=Ut)&&(c=IA(c,l.pendingProps,mi),c!==null?(l.stateNode=c,Fs=l,Ut=null,i=!0):i=!1),i||Ya(l)),null;case 13:return o_(i,l,c);case 4:return be(l,l.stateNode.containerInfo),d=l.pendingProps,i===null?l.child=oo(l,null,d,c):_s(i,l,d,c),l.child;case 11:return e_(i,l,l.type,l.pendingProps,c);case 7:return _s(i,l,l.pendingProps,c),l.child;case 8:return _s(i,l,l.pendingProps.children,c),l.child;case 12:return _s(i,l,l.pendingProps.children,c),l.child;case 10:return d=l.pendingProps,Dr(l,l.type,d.value),_s(i,l,d.children,c),l.child;case 9:return g=l.type._context,d=l.pendingProps.children,Xa(l),g=As(g),d=d(g),l.flags|=1,_s(i,l,d,c),l.child;case 14:return t_(i,l,l.type,l.pendingProps,c);case 15:return s_(i,l,l.type,l.pendingProps,c);case 19:return u_(i,l,c);case 31:return d=l.pendingProps,c=l.mode,d={mode:d.mode,children:d.children},i===null?(c=jh(d,c),c.ref=l.ref,l.child=c,c.return=l,l=c):(c=Bi(i.child,d),c.ref=l.ref,l.child=c,c.return=l,l=c),l;case 22:return n_(i,l,c);case 24:return Xa(l),d=As(is),i===null?(g=Tp(),g===null&&(g=Ct,y=jp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),l.memoizedState={parent:d,cache:g},Ap(l),Dr(l,is,g)):((i.lanes&c)!==0&&(Ip(i,l),Yc(l,null,null,c),Kc()),g=i.memoizedState,y=l.memoizedState,g.parent!==d?(g={parent:d,cache:d},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),Dr(l,is,d)):(d=y.cache,Dr(l,is,d),d!==g.cache&&Ep(l,[is],c,!0))),_s(i,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Yi(i){i.flags|=4}function h_(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bw(l)){if(l=Cn.current,l!==null&&((st&4194048)===st?pi!==null:(st&62914560)!==st&&(st&536870912)===0||l!==pi))throw $c=Cp,Yv;i.flags|=8192}}function Sh(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?vc():536870912,i.lanes|=l,fo|=l)}function su(i,l){if(!ct)switch(i.tailMode){case"hidden":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Vt(i){var l=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(l)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=c,l}function sA(i,l,c){var d=l.pendingProps;switch(bp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(l),null;case 1:return Vt(l),null;case 3:return c=l.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Gi(is),Y(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(zc(l)?Yi(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hv())),Vt(l),null;case 26:return c=l.memoizedState,i===null?(Yi(l),c!==null?(Vt(l),h_(l,c)):(Vt(l),l.flags&=-16777217)):c?c!==i.memoizedState?(Yi(l),Vt(l),h_(l,c)):(Vt(l),l.flags&=-16777217):(i.memoizedProps!==d&&Yi(l),Vt(l),l.flags&=-16777217),null;case 27:Ne(l),c=Ce.current;var g=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==d&&Yi(l);else{if(!d){if(l.stateNode===null)throw Error(n(166));return Vt(l),null}i=Ae.current,zc(l)?Fv(l):(i=hw(g,d,c),l.stateNode=i,Yi(l))}return Vt(l),null;case 5:if(Ne(l),c=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==d&&Yi(l);else{if(!d){if(l.stateNode===null)throw Error(n(166));return Vt(l),null}if(i=Ae.current,zc(l))Fv(l);else{switch(g=zh(Ce.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}i[ts]=l,i[$t]=d;e:for(g=l.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break e;for(;g.sibling===null;){if(g.return===null||g.return===l)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l.stateNode=i;e:switch(Ns(i,c,d),c){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Yi(l)}}return Vt(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==d&&Yi(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(n(166));if(i=Ce.current,zc(l)){if(i=l.stateNode,c=l.memoizedProps,d=null,g=Fs,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[ts]=l,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||rw(i.nodeValue,c)),i||Ya(l)}else i=zh(i).createTextNode(d),i[ts]=l,l.stateNode=i}return Vt(l),null;case 13:if(d=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=zc(l),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[ts]=l}else Uc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Vt(l),g=!1}else g=Hv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return l.flags&256?(Wi(l),l):(Wi(l),null)}if(Wi(l),(l.flags&128)!==0)return l.lanes=c,l;if(c=d!==null,i=i!==null&&i.memoizedState!==null,c){d=l.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)}return c!==i&&c&&(l.child.flags|=8192),Sh(l,l.updateQueue),Vt(l),null;case 4:return Y(),i===null&&kg(l.stateNode.containerInfo),Vt(l),null;case 10:return Gi(l.type),Vt(l),null;case 19:if(ve(rs),g=l.memoizedState,g===null)return Vt(l),null;if(d=(l.flags&128)!==0,y=g.rendering,y===null)if(d)su(g,!1);else{if(Bt!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(y=_h(i),y!==null){for(l.flags|=128,su(g,!1),i=y.updateQueue,l.updateQueue=i,Sh(l,i),l.subtreeFlags=0,i=c,c=l.child;c!==null;)Uv(c,i),c=c.sibling;return ge(rs,rs.current&1|2),l.child}i=i.sibling}g.tail!==null&&Te()>Ah&&(l.flags|=128,d=!0,su(g,!1),l.lanes=4194304)}else{if(!d)if(i=_h(y),i!==null){if(l.flags|=128,d=!0,i=i.updateQueue,l.updateQueue=i,Sh(l,i),su(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!ct)return Vt(l),null}else 2*Te()-g.renderingStartTime>Ah&&c!==536870912&&(l.flags|=128,d=!0,su(g,!1),l.lanes=4194304);g.isBackwards?(y.sibling=l.child,l.child=y):(i=g.last,i!==null?i.sibling=y:l.child=y,g.last=y)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Te(),l.sibling=null,i=rs.current,ge(rs,d?i&1|2:i&1),l):(Vt(l),null);case 22:case 23:return Wi(l),Pp(),d=l.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(c&536870912)!==0&&(l.flags&128)===0&&(Vt(l),l.subtreeFlags&6&&(l.flags|=8192)):Vt(l),c=l.updateQueue,c!==null&&Sh(l,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048),i!==null&&ve(Za),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Gi(is),Vt(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function nA(i,l){switch(bp(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Gi(is),Y(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Ne(l),null;case 13:if(Wi(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Uc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return ve(rs),null;case 4:return Y(),null;case 10:return Gi(l.type),null;case 22:case 23:return Wi(l),Pp(),i!==null&&ve(Za),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Gi(is),null;case 25:return null;default:return null}}function f_(i,l){switch(bp(l),l.tag){case 3:Gi(is),Y();break;case 26:case 27:case 5:Ne(l);break;case 4:Y();break;case 13:Wi(l);break;case 19:ve(rs);break;case 10:Gi(l.type);break;case 22:case 23:Wi(l),Pp(),i!==null&&ve(Za);break;case 24:Gi(is)}}function nu(i,l){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&i)===i){d=void 0;var y=c.create,S=c.inst;d=y(),S.destroy=d}c=c.next}while(c!==g)}}catch(D){St(l,l.return,D)}}function Ur(i,l,c){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&i)===i){var S=d.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,g=l;var q=c,J=D;try{J()}catch(ae){St(g,q,ae)}}}d=d.next}while(d!==y)}}catch(ae){St(l,l.return,ae)}}function m_(i){var l=i.updateQueue;if(l!==null){var c=i.stateNode;try{tb(l,c)}catch(d){St(i,i.return,d)}}}function p_(i,l,c){c.props=el(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){St(i,l,d)}}function iu(i,l){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(g){St(i,l,g)}}function gi(i,l){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){St(i,l,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){St(i,l,g)}else c.current=null}function g_(i){var l=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){St(i,i.return,g)}}function og(i,l,c){try{var d=i.stateNode;EA(d,i.type,c,l),d[$t]=l}catch(g){St(i,i.return,g)}}function x_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Kr(i.type)||i.tag===4}function cg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||x_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Kr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ug(i,l,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(i),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Vh));else if(d!==4&&(d===27&&Kr(i.type)&&(c=i.stateNode,l=null),i=i.child,i!==null))for(ug(i,l,c),i=i.sibling;i!==null;)ug(i,l,c),i=i.sibling}function Th(i,l,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?c.insertBefore(i,l):c.appendChild(i);else if(d!==4&&(d===27&&Kr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Th(i,l,c),i=i.sibling;i!==null;)Th(i,l,c),i=i.sibling}function y_(i){var l=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,g=l.attributes;g.length;)l.removeAttributeNode(g[0]);Ns(l,d,c),l[ts]=i,l[$t]=c}catch(y){St(i,i.return,y)}}var Qi=!1,Ht=!1,dg=!1,v_=typeof WeakSet=="function"?WeakSet:Set,ds=null;function iA(i,l){if(i=i.containerInfo,Og=Gh,i=Iv(i),cp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var S=0,D=-1,q=-1,J=0,ae=0,he=i,ee=null;t:for(;;){for(var te;he!==c||g!==0&&he.nodeType!==3||(D=S+g),he!==y||d!==0&&he.nodeType!==3||(q=S+d),he.nodeType===3&&(S+=he.nodeValue.length),(te=he.firstChild)!==null;)ee=he,he=te;for(;;){if(he===i)break t;if(ee===c&&++J===g&&(D=S),ee===y&&++ae===d&&(q=S),(te=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=te}c=D===-1||q===-1?null:{start:D,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(Mg={focusedElem:i,selectionRange:c},Gh=!1,ds=l;ds!==null;)if(l=ds,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,ds=i;else for(;ds!==null;){switch(l=ds,y=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=l,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var Be=el(c.type,g,c.elementType===c.type);i=d.getSnapshotBeforeUpdate(Be,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(Le){St(c,c.return,Le)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,c=i.nodeType,c===9)zg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=l.sibling,i!==null){i.return=l.return,ds=i;break}ds=l.return}}function b_(i,l,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Br(i,c),d&4&&nu(5,c);break;case 1:if(Br(i,c),d&4)if(i=c.stateNode,l===null)try{i.componentDidMount()}catch(S){St(c,c.return,S)}else{var g=el(c.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(g,l,i.__reactInternalSnapshotBeforeUpdate)}catch(S){St(c,c.return,S)}}d&64&&m_(c),d&512&&iu(c,c.return);break;case 3:if(Br(i,c),d&64&&(i=c.updateQueue,i!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{tb(i,l)}catch(S){St(c,c.return,S)}}break;case 27:l===null&&d&4&&y_(c);case 26:case 5:Br(i,c),l===null&&d&4&&g_(c),d&512&&iu(c,c.return);break;case 12:Br(i,c);break;case 13:Br(i,c),d&4&&N_(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=fA.bind(null,c),RA(i,c))));break;case 22:if(d=c.memoizedState!==null||Qi,!d){l=l!==null&&l.memoizedState!==null||Ht,g=Qi;var y=Ht;Qi=d,(Ht=l)&&!y?Fr(i,c,(c.subtreeFlags&8772)!==0):Br(i,c),Qi=g,Ht=y}break;case 30:break;default:Br(i,c)}}function __(i){var l=i.alternate;l!==null&&(i.alternate=null,__(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Ar(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ot=null,$s=!1;function Xi(i,l,c){for(c=c.child;c!==null;)w_(i,l,c),c=c.sibling}function w_(i,l,c){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(zt,c)}catch{}switch(c.tag){case 26:Ht||gi(c,l),Xi(i,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ht||gi(c,l);var d=Ot,g=$s;Kr(c.type)&&(Ot=c.stateNode,$s=!1),Xi(i,l,c),fu(c.stateNode),Ot=d,$s=g;break;case 5:Ht||gi(c,l);case 6:if(d=Ot,g=$s,Ot=null,Xi(i,l,c),Ot=d,$s=g,Ot!==null)if($s)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(c.stateNode)}catch(y){St(c,l,y)}else try{Ot.removeChild(c.stateNode)}catch(y){St(c,l,y)}break;case 18:Ot!==null&&($s?(i=Ot,uw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),_u(i)):uw(Ot,c.stateNode));break;case 4:d=Ot,g=$s,Ot=c.stateNode.containerInfo,$s=!0,Xi(i,l,c),Ot=d,$s=g;break;case 0:case 11:case 14:case 15:Ht||Ur(2,c,l),Ht||Ur(4,c,l),Xi(i,l,c);break;case 1:Ht||(gi(c,l),d=c.stateNode,typeof d.componentWillUnmount=="function"&&p_(c,l,d)),Xi(i,l,c);break;case 21:Xi(i,l,c);break;case 22:Ht=(d=Ht)||c.memoizedState!==null,Xi(i,l,c),Ht=d;break;default:Xi(i,l,c)}}function N_(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_u(i)}catch(c){St(l,l.return,c)}}function rA(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new v_),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new v_),l;default:throw Error(n(435,i.tag))}}function hg(i,l){var c=rA(i);l.forEach(function(d){var g=mA.bind(null,i,d);c.has(d)||(c.add(d),d.then(g,g))})}function un(i,l){var c=l.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=i,S=l,D=S;e:for(;D!==null;){switch(D.tag){case 27:if(Kr(D.type)){Ot=D.stateNode,$s=!1;break e}break;case 5:Ot=D.stateNode,$s=!1;break e;case 3:case 4:Ot=D.stateNode.containerInfo,$s=!0;break e}D=D.return}if(Ot===null)throw Error(n(160));w_(y,S,g),Ot=null,$s=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)E_(l,i),l=l.sibling}var Fn=null;function E_(i,l){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:un(l,i),dn(i),d&4&&(Ur(3,i,i.return),nu(3,i),Ur(5,i,i.return));break;case 1:un(l,i),dn(i),d&512&&(Ht||c===null||gi(c,c.return)),d&64&&Qi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Fn;if(un(l,i),dn(i),d&512&&(Ht||c===null||gi(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Aa]||y[ts]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Ns(y,d,c),y[ts]=i,Ft(y),d=y;break e;case"link":var S=yw("link","href",g).get(d+(c.href||""));if(S){for(var D=0;D<S.length;D++)if(y=S[D],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(D,1);break t}}y=g.createElement(d),Ns(y,d,c),g.head.appendChild(y);break;case"meta":if(S=yw("meta","content",g).get(d+(c.content||""))){for(D=0;D<S.length;D++)if(y=S[D],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(D,1);break t}}y=g.createElement(d),Ns(y,d,c),g.head.appendChild(y);break;default:throw Error(n(468,d))}y[ts]=i,Ft(y),d=y}i.stateNode=d}else vw(g,i.type,i.stateNode);else i.stateNode=xw(g,d,i.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?vw(g,i.type,i.stateNode):xw(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&og(i,i.memoizedProps,c.memoizedProps)}break;case 27:un(l,i),dn(i),d&512&&(Ht||c===null||gi(c,c.return)),c!==null&&d&4&&og(i,i.memoizedProps,c.memoizedProps);break;case 5:if(un(l,i),dn(i),d&512&&(Ht||c===null||gi(c,c.return)),i.flags&32){g=i.stateNode;try{bn(g,"")}catch(te){St(i,i.return,te)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,og(i,g,c!==null?c.memoizedProps:g)),d&1024&&(dg=!0);break;case 6:if(un(l,i),dn(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(te){St(i,i.return,te)}}break;case 3:if(Fh=null,g=Fn,Fn=Uh(l.containerInfo),un(l,i),Fn=g,dn(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{_u(l.containerInfo)}catch(te){St(i,i.return,te)}dg&&(dg=!1,j_(i));break;case 4:d=Fn,Fn=Uh(i.stateNode.containerInfo),un(l,i),dn(i),Fn=d;break;case 12:un(l,i),dn(i);break;case 13:un(l,i),dn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(yg=Te()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,hg(i,d)));break;case 22:g=i.memoizedState!==null;var q=c!==null&&c.memoizedState!==null,J=Qi,ae=Ht;if(Qi=J||g,Ht=ae||q,un(l,i),Ht=ae,Qi=J,dn(i),d&8192)e:for(l=i.stateNode,l._visibility=g?l._visibility&-2:l._visibility|1,g&&(c===null||q||Qi||Ht||tl(i)),c=null,l=i;;){if(l.tag===5||l.tag===26){if(c===null){q=c=l;try{if(y=q.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=q.stateNode;var he=q.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){St(q,q.return,te)}}}else if(l.tag===6){if(c===null){q=l;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(te){St(q,q.return,te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,hg(i,c))));break;case 19:un(l,i),dn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,hg(i,d)));break;case 30:break;case 21:break;default:un(l,i),dn(i)}}function dn(i){var l=i.flags;if(l&2){try{for(var c,d=i.return;d!==null;){if(x_(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,y=cg(i);Th(i,y,g);break;case 5:var S=c.stateNode;c.flags&32&&(bn(S,""),c.flags&=-33);var D=cg(i);Th(i,D,S);break;case 3:case 4:var q=c.stateNode.containerInfo,J=cg(i);ug(i,J,q);break;default:throw Error(n(161))}}catch(ae){St(i,i.return,ae)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function j_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;j_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Br(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)b_(i,l.alternate,l),l=l.sibling}function tl(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Ur(4,l,l.return),tl(l);break;case 1:gi(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&p_(l,l.return,c),tl(l);break;case 27:fu(l.stateNode);case 26:case 5:gi(l,l.return),tl(l);break;case 22:l.memoizedState===null&&tl(l);break;case 30:tl(l);break;default:tl(l)}i=i.sibling}}function Fr(i,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,g=i,y=l,S=y.flags;switch(y.tag){case 0:case 11:case 15:Fr(g,y,c),nu(4,y);break;case 1:if(Fr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){St(d,d.return,J)}if(d=y,g=d.updateQueue,g!==null){var D=d.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)eb(q[g],D)}catch(J){St(d,d.return,J)}}c&&S&64&&m_(y),iu(y,y.return);break;case 27:y_(y);case 26:case 5:Fr(g,y,c),c&&d===null&&S&4&&g_(y),iu(y,y.return);break;case 12:Fr(g,y,c);break;case 13:Fr(g,y,c),c&&S&4&&N_(g,y);break;case 22:y.memoizedState===null&&Fr(g,y,c),iu(y,y.return);break;case 30:break;default:Fr(g,y,c)}l=l.sibling}}function fg(i,l){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&qc(c))}function mg(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&qc(i))}function xi(i,l,c,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)S_(i,l,c,d),l=l.sibling}function S_(i,l,c,d){var g=l.flags;switch(l.tag){case 0:case 11:case 15:xi(i,l,c,d),g&2048&&nu(9,l);break;case 1:xi(i,l,c,d);break;case 3:xi(i,l,c,d),g&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&qc(i)));break;case 12:if(g&2048){xi(i,l,c,d),i=l.stateNode;try{var y=l.memoizedProps,S=y.id,D=y.onPostCommit;typeof D=="function"&&D(S,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(q){St(l,l.return,q)}}else xi(i,l,c,d);break;case 13:xi(i,l,c,d);break;case 23:break;case 22:y=l.stateNode,S=l.alternate,l.memoizedState!==null?y._visibility&2?xi(i,l,c,d):ru(i,l):y._visibility&2?xi(i,l,c,d):(y._visibility|=2,co(i,l,c,d,(l.subtreeFlags&10256)!==0)),g&2048&&fg(S,l);break;case 24:xi(i,l,c,d),g&2048&&mg(l.alternate,l);break;default:xi(i,l,c,d)}}function co(i,l,c,d,g){for(g=g&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=i,S=l,D=c,q=d,J=S.flags;switch(S.tag){case 0:case 11:case 15:co(y,S,D,q,g),nu(8,S);break;case 23:break;case 22:var ae=S.stateNode;S.memoizedState!==null?ae._visibility&2?co(y,S,D,q,g):ru(y,S):(ae._visibility|=2,co(y,S,D,q,g)),g&&J&2048&&fg(S.alternate,S);break;case 24:co(y,S,D,q,g),g&&J&2048&&mg(S.alternate,S);break;default:co(y,S,D,q,g)}l=l.sibling}}function ru(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=i,d=l,g=d.flags;switch(d.tag){case 22:ru(c,d),g&2048&&fg(d.alternate,d);break;case 24:ru(c,d),g&2048&&mg(d.alternate,d);break;default:ru(c,d)}l=l.sibling}}var au=8192;function uo(i){if(i.subtreeFlags&au)for(i=i.child;i!==null;)T_(i),i=i.sibling}function T_(i){switch(i.tag){case 26:uo(i),i.flags&au&&i.memoizedState!==null&&HA(Fn,i.memoizedState,i.memoizedProps);break;case 5:uo(i);break;case 3:case 4:var l=Fn;Fn=Uh(i.stateNode.containerInfo),uo(i),Fn=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=au,au=16777216,uo(i),au=l):uo(i));break;default:uo(i)}}function C_(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function lu(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];ds=d,I_(d,i)}C_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)A_(i),i=i.sibling}function A_(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&Ur(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Ch(i)):lu(i);break;default:lu(i)}}function Ch(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];ds=d,I_(d,i)}C_(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Ur(8,l,l.return),Ch(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Ch(l));break;default:Ch(l)}i=i.sibling}}function I_(i,l){for(;ds!==null;){var c=ds;switch(c.tag){case 0:case 11:case 15:Ur(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:qc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ds=d;else e:for(c=i;ds!==null;){d=ds;var g=d.sibling,y=d.return;if(__(d),d===c){ds=null;break e}if(g!==null){g.return=y,ds=g;break e}ds=y}}}var aA={getCacheForType:function(i){var l=As(is),c=l.data.get(i);return c===void 0&&(c=i(),l.data.set(i,c)),c}},lA=typeof WeakMap=="function"?WeakMap:Map,yt=0,Ct=null,Ye=null,st=0,vt=0,hn=null,qr=!1,ho=!1,pg=!1,Zi=0,Bt=0,Hr=0,sl=0,gg=0,An=0,fo=0,ou=null,Ws=null,xg=!1,yg=0,Ah=1/0,Ih=null,Gr=null,ws=0,$r=null,mo=null,po=0,vg=0,bg=null,R_=null,cu=0,_g=null;function fn(){if((yt&2)!==0&&st!==0)return st&-st;if(K.T!==null){var i=to;return i!==0?i:Cg()}return Tr()}function k_(){An===0&&(An=(st&536870912)===0||ct?yc():536870912);var i=Cn.current;return i!==null&&(i.flags|=32),An}function mn(i,l,c){(i===Ct&&(vt===2||vt===9)||i.cancelPendingCommit!==null)&&(go(i,0),Wr(i,st,An,!1)),Ii(i,c),((yt&2)===0||i!==Ct)&&(i===Ct&&((yt&2)===0&&(sl|=c),Bt===4&&Wr(i,st,An,!1)),yi(i))}function D_(i,l,c){if((yt&6)!==0)throw Error(n(327));var d=!c&&(l&124)===0&&(l&i.expiredLanes)===0||Ca(i,l),g=d?uA(i,l):Eg(i,l,!0),y=d;do{if(g===0){ho&&!d&&Wr(i,l,0,!1);break}else{if(c=i.current.alternate,y&&!oA(c)){g=Eg(i,l,!1),y=!1;continue}if(g===2){if(y=l,i.errorRecoveryDisabledLanes&y)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){l=S;e:{var D=i;g=ou;var q=D.current.memoizedState.isDehydrated;if(q&&(go(D,S).flags|=256),S=Eg(D,S,!1),S!==2){if(pg&&!q){D.errorRecoveryDisabledLanes|=y,sl|=y,g=4;break e}y=Ws,Ws=g,y!==null&&(Ws===null?Ws=y:Ws.push.apply(Ws,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){go(i,0),Wr(i,l,0,!0);break}e:{switch(d=i,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Wr(d,l,An,!qr);break e;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(g=yg+300-Te(),10<g)){if(Wr(d,l,An,!qr),kl(d,0,!0)!==0)break e;d.timeoutHandle=ow(P_.bind(null,d,c,Ws,Ih,xg,l,An,sl,fo,qr,y,2,-0,0),g);break e}P_(d,c,Ws,Ih,xg,l,An,sl,fo,qr,y,0,-0,0)}}break}while(!0);yi(i)}function P_(i,l,c,d,g,y,S,D,q,J,ae,he,ee,te){if(i.timeoutHandle=-1,he=l.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(gu={stylesheets:null,count:0,unsuspend:qA},T_(l),he=GA(),he!==null)){i.cancelPendingCommit=he(B_.bind(null,i,l,y,c,d,g,S,D,q,ae,1,ee,te)),Wr(i,y,S,!J);return}B_(i,l,y,c,d,g,S,D,q)}function oA(i){for(var l=i;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!on(y(),g))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wr(i,l,c,d){l&=~gg,l&=~sl,i.suspendedLanes|=l,i.pingedLanes&=~l,d&&(i.warmLanes|=l),d=i.expirationTimes;for(var g=l;0<g;){var y=31-Cs(g),S=1<<y;d[y]=-1,g&=~S}c!==0&&ni(i,c,l)}function Rh(){return(yt&6)===0?(uu(0),!1):!0}function wg(){if(Ye!==null){if(vt===0)var i=Ye.return;else i=Ye,Hi=Qa=null,zp(i),lo=null,eu=0,i=Ye;for(;i!==null;)f_(i.alternate,i),i=i.return;Ye=null}}function go(i,l){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,SA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),wg(),Ct=i,Ye=c=Bi(i.current,null),st=l,vt=0,hn=null,qr=!1,ho=Ca(i,l),pg=!1,fo=An=gg=sl=Hr=Bt=0,Ws=ou=null,xg=!1,(l&8)!==0&&(l|=l&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=l;0<d;){var g=31-Cs(d),y=1<<g;l|=i[g],d&=~y}return Zi=l,Jd(),c}function O_(i,l){$e=null,K.H=yh,l===Gc||l===oh?(l=Zv(),vt=3):l===Yv?(l=Zv(),vt=4):vt=l===Jb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,hn=l,Ye===null&&(Bt=1,Nh(i,En(l,i.current)))}function M_(){var i=K.H;return K.H=yh,i===null?yh:i}function L_(){var i=K.A;return K.A=aA,i}function Ng(){Bt=4,qr||(st&4194048)!==st&&Cn.current!==null||(ho=!0),(Hr&134217727)===0&&(sl&134217727)===0||Ct===null||Wr(Ct,st,An,!1)}function Eg(i,l,c){var d=yt;yt|=2;var g=M_(),y=L_();(Ct!==i||st!==l)&&(Ih=null,go(i,l)),l=!1;var S=Bt;e:do try{if(vt!==0&&Ye!==null){var D=Ye,q=hn;switch(vt){case 8:wg(),S=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(l=!0);var J=vt;if(vt=0,hn=null,xo(i,D,q,J),c&&ho){S=0;break e}break;default:J=vt,vt=0,hn=null,xo(i,D,q,J)}}cA(),S=Bt;break}catch(ae){O_(i,ae)}while(!0);return l&&i.shellSuspendCounter++,Hi=Qa=null,yt=d,K.H=g,K.A=y,Ye===null&&(Ct=null,st=0,Jd()),S}function cA(){for(;Ye!==null;)V_(Ye)}function uA(i,l){var c=yt;yt|=2;var d=M_(),g=L_();Ct!==i||st!==l?(Ih=null,Ah=Te()+500,go(i,l)):ho=Ca(i,l);e:do try{if(vt!==0&&Ye!==null){l=Ye;var y=hn;t:switch(vt){case 1:vt=0,hn=null,xo(i,l,y,1);break;case 2:case 9:if(Qv(y)){vt=0,hn=null,z_(l);break}l=function(){vt!==2&&vt!==9||Ct!==i||(vt=7),yi(i)},y.then(l,l);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Qv(y)?(vt=0,hn=null,z_(l)):(vt=0,hn=null,xo(i,l,y,7));break;case 5:var S=null;switch(Ye.tag){case 26:S=Ye.memoizedState;case 5:case 27:var D=Ye;if(!S||bw(S)){vt=0,hn=null;var q=D.sibling;if(q!==null)Ye=q;else{var J=D.return;J!==null?(Ye=J,kh(J)):Ye=null}break t}}vt=0,hn=null,xo(i,l,y,5);break;case 6:vt=0,hn=null,xo(i,l,y,6);break;case 8:wg(),Bt=6;break e;default:throw Error(n(462))}}dA();break}catch(ae){O_(i,ae)}while(!0);return Hi=Qa=null,K.H=d,K.A=g,yt=c,Ye!==null?0:(Ct=null,st=0,Jd(),Bt)}function dA(){for(;Ye!==null&&!ie();)V_(Ye)}function V_(i){var l=d_(i.alternate,i,Zi);i.memoizedProps=i.pendingProps,l===null?kh(i):Ye=l}function z_(i){var l=i,c=l.alternate;switch(l.tag){case 15:case 0:l=r_(c,l,l.pendingProps,l.type,void 0,st);break;case 11:l=r_(c,l,l.pendingProps,l.type.render,l.ref,st);break;case 5:zp(l);default:f_(c,l),l=Ye=Uv(l,Zi),l=d_(c,l,Zi)}i.memoizedProps=i.pendingProps,l===null?kh(i):Ye=l}function xo(i,l,c,d){Hi=Qa=null,zp(l),lo=null,eu=0;var g=l.return;try{if(eA(i,g,l,c,st)){Bt=1,Nh(i,En(c,i.current)),Ye=null;return}}catch(y){if(g!==null)throw Ye=g,y;Bt=1,Nh(i,En(c,i.current)),Ye=null;return}l.flags&32768?(ct||d===1?i=!0:ho||(st&536870912)!==0?i=!1:(qr=i=!0,(d===2||d===9||d===3||d===6)&&(d=Cn.current,d!==null&&d.tag===13&&(d.flags|=16384))),U_(l,i)):kh(l)}function kh(i){var l=i;do{if((l.flags&32768)!==0){U_(l,qr);return}i=l.return;var c=sA(l.alternate,l,Zi);if(c!==null){Ye=c;return}if(l=l.sibling,l!==null){Ye=l;return}Ye=l=i}while(l!==null);Bt===0&&(Bt=5)}function U_(i,l){do{var c=nA(i.alternate,i);if(c!==null){c.flags&=32767,Ye=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(i=i.sibling,i!==null)){Ye=i;return}Ye=i=c}while(i!==null);Bt=6,Ye=null}function B_(i,l,c,d,g,y,S,D,q){i.cancelPendingCommit=null;do Dh();while(ws!==0);if((yt&6)!==0)throw Error(n(327));if(l!==null){if(l===i.current)throw Error(n(177));if(y=l.lanes|l.childLanes,y|=mp,bc(i,c,y,S,D,q),i===Ct&&(Ye=Ct=null,st=0),mo=l,$r=i,po=c,vg=y,bg=g,R_=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,pA(Ts,function(){return $_(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,g=oe.p,oe.p=2,S=yt,yt|=4;try{iA(i,l,c)}finally{yt=S,oe.p=g,K.T=d}}ws=1,F_(),q_(),H_()}}function F_(){if(ws===1){ws=0;var i=$r,l=mo,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var d=oe.p;oe.p=2;var g=yt;yt|=4;try{E_(l,i);var y=Mg,S=Iv(i.containerInfo),D=y.focusedElem,q=y.selectionRange;if(S!==D&&D&&D.ownerDocument&&Av(D.ownerDocument.documentElement,D)){if(q!==null&&cp(D)){var J=q.start,ae=q.end;if(ae===void 0&&(ae=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(ae,D.value.length);else{var he=D.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),Be=D.textContent.length,Le=Math.min(q.start,Be),Et=q.end===void 0?Le:Math.min(q.end,Be);!te.extend&&Le>Et&&(S=Et,Et=Le,Le=S);var Q=Cv(D,Le),$=Cv(D,Et);if(Q&&$&&(te.rangeCount!==1||te.anchorNode!==Q.node||te.anchorOffset!==Q.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Z=he.createRange();Z.setStart(Q.node,Q.offset),te.removeAllRanges(),Le>Et?(te.addRange(Z),te.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),te.addRange(Z))}}}}for(he=[],te=D;te=te.parentNode;)te.nodeType===1&&he.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var ue=he[D];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Gh=!!Og,Mg=Og=null}finally{yt=g,oe.p=d,K.T=c}}i.current=l,ws=2}}function q_(){if(ws===2){ws=0;var i=$r,l=mo,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var d=oe.p;oe.p=2;var g=yt;yt|=4;try{b_(i,l.alternate,l)}finally{yt=g,oe.p=d,K.T=c}}ws=3}}function H_(){if(ws===4||ws===3){ws=0,xe();var i=$r,l=mo,c=po,d=R_;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ws=5:(ws=0,mo=$r=null,G_(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Gr=null),Dl(c),l=l.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(zt,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=K.T,g=oe.p,oe.p=2,K.T=null;try{for(var y=i.onRecoverableError,S=0;S<d.length;S++){var D=d[S];y(D.value,{componentStack:D.stack})}}finally{K.T=l,oe.p=g}}(po&3)!==0&&Dh(),yi(i),g=i.pendingLanes,(c&4194090)!==0&&(g&42)!==0?i===_g?cu++:(cu=0,_g=i):cu=0,uu(0)}}function G_(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,qc(l)))}function Dh(i){return F_(),q_(),H_(),$_()}function $_(){if(ws!==5)return!1;var i=$r,l=vg;vg=0;var c=Dl(po),d=K.T,g=oe.p;try{oe.p=32>c?32:c,K.T=null,c=bg,bg=null;var y=$r,S=po;if(ws=0,mo=$r=null,po=0,(yt&6)!==0)throw Error(n(331));var D=yt;if(yt|=4,A_(y.current),S_(y,y.current,S,c),yt=D,uu(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(zt,y)}catch{}return!0}finally{oe.p=g,K.T=d,G_(i,l)}}function W_(i,l,c){l=En(c,l),l=Jp(i.stateNode,l,2),i=Mr(i,l,2),i!==null&&(Ii(i,2),yi(i))}function St(i,l,c){if(i.tag===3)W_(i,i,c);else for(;l!==null;){if(l.tag===3){W_(l,i,c);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))){i=En(c,i),c=Xb(2),d=Mr(l,c,2),d!==null&&(Zb(c,d,l,i),Ii(d,2),yi(d));break}}l=l.return}}function jg(i,l,c){var d=i.pingCache;if(d===null){d=i.pingCache=new lA;var g=new Set;d.set(l,g)}else g=d.get(l),g===void 0&&(g=new Set,d.set(l,g));g.has(c)||(pg=!0,g.add(c),i=hA.bind(null,i,l,c),l.then(i,i))}function hA(i,l,c){var d=i.pingCache;d!==null&&d.delete(l),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Ct===i&&(st&c)===c&&(Bt===4||Bt===3&&(st&62914560)===st&&300>Te()-yg?(yt&2)===0&&go(i,0):gg|=c,fo===st&&(fo=0)),yi(i)}function K_(i,l){l===0&&(l=vc()),i=Xl(i,l),i!==null&&(Ii(i,l),yi(i))}function fA(i){var l=i.memoizedState,c=0;l!==null&&(c=l.retryLane),K_(i,c)}function mA(i,l){var c=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(l),K_(i,c)}function pA(i,l){return W(i,l)}var Ph=null,yo=null,Sg=!1,Oh=!1,Tg=!1,nl=0;function yi(i){i!==yo&&i.next===null&&(yo===null?Ph=yo=i:yo=yo.next=i),Oh=!0,Sg||(Sg=!0,xA())}function uu(i,l){if(!Tg&&Oh){Tg=!0;do for(var c=!1,d=Ph;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var S=d.suspendedLanes,D=d.pingedLanes;y=(1<<31-Cs(42|i)+1)-1,y&=g&~(S&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Z_(d,y))}else y=st,y=kl(d,d===Ct?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Ca(d,y)||(c=!0,Z_(d,y));d=d.next}while(c);Tg=!1}}function gA(){Y_()}function Y_(){Oh=Sg=!1;var i=0;nl!==0&&(jA()&&(i=nl),nl=0);for(var l=Te(),c=null,d=Ph;d!==null;){var g=d.next,y=Q_(d,l);y===0?(d.next=null,c===null?Ph=g:c.next=g,g===null&&(yo=c)):(c=d,(i!==0||(y&3)!==0)&&(Oh=!0)),d=g}uu(i)}function Q_(i,l){for(var c=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var S=31-Cs(y),D=1<<S,q=g[S];q===-1?((D&c)===0||(D&d)!==0)&&(g[S]=xc(D,l)):q<=l&&(i.expiredLanes|=D),y&=~D}if(l=Ct,c=st,c=kl(i,i===l?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===l&&(vt===2||vt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&se(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ca(i,c)){if(l=c&-c,l===i.callbackPriority)return l;switch(d!==null&&se(d),Dl(c)){case 2:case 8:c=Ln;break;case 32:c=Ts;break;case 268435456:c=jr;break;default:c=Ts}return d=X_.bind(null,i),c=W(c,d),i.callbackPriority=l,i.callbackNode=c,l}return d!==null&&d!==null&&se(d),i.callbackPriority=2,i.callbackNode=null,2}function X_(i,l){if(ws!==0&&ws!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Dh()&&i.callbackNode!==c)return null;var d=st;return d=kl(i,i===Ct?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(D_(i,d,l),Q_(i,Te()),i.callbackNode!=null&&i.callbackNode===c?X_.bind(null,i):null)}function Z_(i,l){if(Dh())return null;D_(i,l,!0)}function xA(){TA(function(){(yt&6)!==0?W(Nr,gA):Y_()})}function Cg(){return nl===0&&(nl=yc()),nl}function J_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:zl(""+i)}function ew(i,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,i.id&&c.setAttribute("form",i.id),l.parentNode.insertBefore(c,l),i=new FormData(i),c.parentNode.removeChild(c),i}function yA(i,l,c,d,g){if(l==="submit"&&c&&c.stateNode===g){var y=J_((g[$t]||null).action),S=d.submitter;S&&(l=(l=S[$t]||null)?J_(l.formAction):S.getAttribute("formAction"),l!==null&&(y=l,S=null));var D=new Ul("action","action",null,d,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(nl!==0){var q=S?ew(g,S):new FormData(g);Kp(c,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(D.preventDefault(),q=S?ew(g,S):new FormData(g),Kp(c,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var Ag=0;Ag<fp.length;Ag++){var Ig=fp[Ag],vA=Ig.toLowerCase(),bA=Ig[0].toUpperCase()+Ig.slice(1);Bn(vA,"on"+bA)}Bn(Dv,"onAnimationEnd"),Bn(Pv,"onAnimationIteration"),Bn(Ov,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(LC,"onTransitionRun"),Bn(VC,"onTransitionStart"),Bn(zC,"onTransitionCancel"),Bn(Mv,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_A=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function tw(i,l){l=(l&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],g=d.event;d=d.listeners;e:{var y=void 0;if(l)for(var S=d.length-1;0<=S;S--){var D=d[S],q=D.instance,J=D.currentTarget;if(D=D.listener,q!==y&&g.isPropagationStopped())break e;y=D,g.currentTarget=J;try{y(g)}catch(ae){wh(ae)}g.currentTarget=null,y=q}else for(S=0;S<d.length;S++){if(D=d[S],q=D.instance,J=D.currentTarget,D=D.listener,q!==y&&g.isPropagationStopped())break e;y=D,g.currentTarget=J;try{y(g)}catch(ae){wh(ae)}g.currentTarget=null,y=q}}}}function Qe(i,l){var c=l[wc];c===void 0&&(c=l[wc]=new Set);var d=i+"__bubble";c.has(d)||(sw(l,i,2,!1),c.add(d))}function Rg(i,l,c){var d=0;l&&(d|=4),sw(c,i,d,l)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function kg(i){if(!i[Mh]){i[Mh]=!0,Nc.forEach(function(c){c!=="selectionchange"&&(_A.has(c)||Rg(c,!1,i),Rg(c,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Mh]||(l[Mh]=!0,Rg("selectionchange",!1,l))}}function sw(i,l,c,d){switch(Sw(l)){case 2:var g=KA;break;case 8:g=YA;break;default:g=$g}c=g.bind(null,l,c,i),g=void 0,!wn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(l,c,{capture:!0,passive:g}):i.addEventListener(l,c,!0):g!==void 0?i.addEventListener(l,c,{passive:g}):i.addEventListener(l,c,!1)}function Dg(i,l,c,d,g){var y=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var D=d.stateNode.containerInfo;if(D===g)break;if(S===4)for(S=d.return;S!==null;){var q=S.tag;if((q===3||q===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;D!==null;){if(S=Ri(D),S===null)return;if(q=S.tag,q===5||q===6||q===26||q===27){d=y=S;continue e}D=D.parentNode}}d=d.return}Vd(function(){var J=y,ae=_n(c),he=[];e:{var ee=Lv.get(i);if(ee!==void 0){var te=Ul,Be=i;switch(i){case"keypress":if(ci(c)===0)break e;case"keydown":case"keyup":te=$l;break;case"focusin":Be="focus",te=ql;break;case"focusout":Be="blur",te=ql;break;case"beforeblur":case"afterblur":te=ql;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=rp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=$d;break;case Dv:case Pv:case Ov:te=Hl;break;case Mv:te=Kd;break;case"scroll":case"scrollend":te=zd;break;case"wheel":te=Wl;break;case"copy":case"cut":case"paste":te=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Oc;break;case"toggle":case"beforetoggle":te=Qd}var Le=(l&4)!==0,Et=!Le&&(i==="scroll"||i==="scrollend"),Q=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var $=J,Z;$!==null;){var ue=$;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||Q===null||(ue=Ma($,Q),ue!=null&&Le.push(hu($,ue,Z))),Et)break;$=$.return}0<Le.length&&(ee=new te(ee,Be,null,c,ae),he.push({event:ee,listeners:Le}))}}if((l&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",te=i==="mouseout"||i==="pointerout",ee&&c!==Oi&&(Be=c.relatedTarget||c.fromElement)&&(Ri(Be)||Be[vn]))break e;if((te||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(Be=c.relatedTarget||c.toElement,te=J,Be=Be?Ri(Be):null,Be!==null&&(Et=o(Be),Le=Be.tag,Be!==Et||Le!==5&&Le!==27&&Le!==6)&&(Be=null)):(te=null,Be=J),te!==Be)){if(Le=Nn,ue="onMouseLeave",Q="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Le=Oc,ue="onPointerLeave",Q="onPointerEnter",$="pointer"),Et=te==null?ee:ri(te),Z=Be==null?ee:ri(Be),ee=new Le(ue,$+"leave",te,c,ae),ee.target=Et,ee.relatedTarget=Z,ue=null,Ri(ae)===J&&(Le=new Le(Q,$+"enter",Be,c,ae),Le.target=Z,Le.relatedTarget=Et,ue=Le),Et=ue,te&&Be)t:{for(Le=te,Q=Be,$=0,Z=Le;Z;Z=vo(Z))$++;for(Z=0,ue=Q;ue;ue=vo(ue))Z++;for(;0<$-Z;)Le=vo(Le),$--;for(;0<Z-$;)Q=vo(Q),Z--;for(;$--;){if(Le===Q||Q!==null&&Le===Q.alternate)break t;Le=vo(Le),Q=vo(Q)}Le=null}else Le=null;te!==null&&nw(he,ee,te,Le,!1),Be!==null&&Et!==null&&nw(he,Et,Be,Le,!0)}}e:{if(ee=J?ri(J):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var De=wv;else if(ns(ee))if(Nv)De=PC;else{De=kC;var Ke=RC}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Cc(J.elementType)&&(De=wv):De=DC;if(De&&(De=De(i,J))){Ui(he,De,c,ae);break e}Ke&&Ke(i,ee,J),i==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Rr(ee,"number",ee.value)}switch(Ke=J?ri(J):window,i){case"focusin":(ns(Ke)||Ke.contentEditable==="true")&&(Kl=Ke,up=J,Vc=null);break;case"focusout":Vc=up=Kl=null;break;case"mousedown":dp=!0;break;case"contextmenu":case"mouseup":case"dragend":dp=!1,Rv(he,c,ae);break;case"selectionchange":if(MC)break;case"keydown":case"keyup":Rv(he,c,ae)}var Oe;if(hi)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else et?ne(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(j&&c.locale!=="ko"&&(et||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&et&&(Oe=Ic()):(oi=ae,kr="value"in oi?oi.value:oi.textContent,et=!0)),Ke=Lh(J,Ve),0<Ke.length&&(Ve=new Dc(Ve,i,null,c,ae),he.push({event:Ve,listeners:Ke}),Oe?Ve.data=Oe:(Oe=Ee(c),Oe!==null&&(Ve.data=Oe)))),(Oe=b?ss(i,c):tt(i,c))&&(Ve=Lh(J,"onBeforeInput"),0<Ve.length&&(Ke=new Dc("onBeforeInput","beforeinput",null,c,ae),he.push({event:Ke,listeners:Ve}),Ke.data=Oe)),yA(he,i,J,c,ae)}tw(he,l)})}function hu(i,l,c){return{instance:i,listener:l,currentTarget:c}}function Lh(i,l){for(var c=l+"Capture",d=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Ma(i,c),g!=null&&d.unshift(hu(i,g,y)),g=Ma(i,l),g!=null&&d.push(hu(i,g,y))),i.tag===3)return d;i=i.return}return[]}function vo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nw(i,l,c,d,g){for(var y=l._reactName,S=[];c!==null&&c!==d;){var D=c,q=D.alternate,J=D.stateNode;if(D=D.tag,q!==null&&q===d)break;D!==5&&D!==26&&D!==27||J===null||(q=J,g?(J=Ma(c,y),J!=null&&S.unshift(hu(c,J,q))):g||(J=Ma(c,y),J!=null&&S.push(hu(c,J,q)))),c=c.return}S.length!==0&&i.push({event:l,listeners:S})}var wA=/\r\n?/g,NA=/\u0000|\uFFFD/g;function iw(i){return(typeof i=="string"?i:""+i).replace(wA,`
`).replace(NA,"")}function rw(i,l){return l=iw(l),iw(i)===l}function Vh(){}function Nt(i,l,c,d,g,y){switch(c){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||bn(i,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&bn(i,""+d);break;case"className":ai(i,"class",d);break;case"tabIndex":ai(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,c,d);break;case"style":Tc(i,d,y);break;case"data":if(l!=="object"){ai(i,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=zl(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(l!=="input"&&Nt(i,l,"name",g.name,g,null),Nt(i,l,"formEncType",g.formEncType,g,null),Nt(i,l,"formMethod",g.formMethod,g,null),Nt(i,l,"formTarget",g.formTarget,g,null)):(Nt(i,l,"encType",g.encType,g,null),Nt(i,l,"method",g.method,g,null),Nt(i,l,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=zl(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Vh);break;case"onScroll":d!=null&&Qe("scroll",i);break;case"onScrollEnd":d!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=zl(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),Ir(i,"popover",d);break;case"xlinkActuate":vs(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":vs(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":vs(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":vs(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":vs(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":vs(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":vs(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":vs(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":vs(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ir(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=np.get(c)||c,Ir(i,c,d))}}function Pg(i,l,c,d,g,y){switch(c){case"style":Tc(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof d=="string"?bn(i,d):(typeof d=="number"||typeof d=="bigint")&&bn(i,""+d);break;case"onScroll":d!=null&&Qe("scroll",i);break;case"onScrollEnd":d!=null&&Qe("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),l=c.slice(2,g?c.length-7:void 0),y=i[$t]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(l,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(l,d,g);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Ir(i,c,d)}}}function Ns(i,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var S=c[y];if(S!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Nt(i,l,y,S,c,null)}}g&&Nt(i,l,"srcSet",c.srcSet,c,null),d&&Nt(i,l,"src",c.src,c,null);return;case"input":Qe("invalid",i);var D=y=S=g=null,q=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":g=ae;break;case"type":S=ae;break;case"checked":q=ae;break;case"defaultChecked":J=ae;break;case"value":y=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,l));break;default:Nt(i,l,d,ae,c,null)}}Da(i,y,D,q,J,S,g,!1),Vl(i);return;case"select":Qe("invalid",i),d=S=y=null;for(g in c)if(c.hasOwnProperty(g)&&(D=c[g],D!=null))switch(g){case"value":y=D;break;case"defaultValue":S=D;break;case"multiple":d=D;default:Nt(i,l,g,D,c,null)}l=y,c=S,i.multiple=!!d,l!=null?Pi(i,!!d,l,!1):c!=null&&Pi(i,!!d,c,!0);return;case"textarea":Qe("invalid",i),y=g=d=null;for(S in c)if(c.hasOwnProperty(S)&&(D=c[S],D!=null))switch(S){case"value":d=D;break;case"defaultValue":g=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:Nt(i,l,S,D,c,null)}Pa(i,d,g,y),Vl(i);return;case"option":for(q in c)if(c.hasOwnProperty(q)&&(d=c[q],d!=null))switch(q){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Nt(i,l,q,d,c,null)}return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(d=0;d<du.length;d++)Qe(du[d],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Nt(i,l,J,d,c,null)}return;default:if(Cc(l)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&Pg(i,l,ae,d,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(d=c[D],d!=null&&Nt(i,l,D,d,c,null))}function EA(i,l,c,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,D=null,q=null,J=null,ae=null;for(te in c){var he=c[te];if(c.hasOwnProperty(te)&&he!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":q=he;default:d.hasOwnProperty(te)||Nt(i,l,te,null,d,he)}}for(var ee in d){var te=d[ee];if(he=c[ee],d.hasOwnProperty(ee)&&(te!=null||he!=null))switch(ee){case"type":y=te;break;case"name":g=te;break;case"checked":J=te;break;case"defaultChecked":ae=te;break;case"value":S=te;break;case"defaultValue":D=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,l));break;default:te!==he&&Nt(i,l,ee,te,d,he)}}ln(i,S,D,q,J,ae,y,g);return;case"select":te=S=D=ee=null;for(y in c)if(q=c[y],c.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":te=q;default:d.hasOwnProperty(y)||Nt(i,l,y,null,d,q)}for(g in d)if(y=d[g],q=c[g],d.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":ee=y;break;case"defaultValue":D=y;break;case"multiple":S=y;default:y!==q&&Nt(i,l,g,y,d,q)}l=D,c=S,d=te,ee!=null?Pi(i,!!c,ee,!1):!!d!=!!c&&(l!=null?Pi(i,!!c,l,!0):Pi(i,!!c,c?[]:"",!1));return;case"textarea":te=ee=null;for(D in c)if(g=c[D],c.hasOwnProperty(D)&&g!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Nt(i,l,D,null,d,g)}for(S in d)if(g=d[S],y=c[S],d.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":ee=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&Nt(i,l,S,g,d,y)}_t(i,ee,te);return;case"option":for(var Be in c)if(ee=c[Be],c.hasOwnProperty(Be)&&ee!=null&&!d.hasOwnProperty(Be))switch(Be){case"selected":i.selected=!1;break;default:Nt(i,l,Be,null,d,ee)}for(q in d)if(ee=d[q],te=c[q],d.hasOwnProperty(q)&&ee!==te&&(ee!=null||te!=null))switch(q){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Nt(i,l,q,ee,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in c)ee=c[Le],c.hasOwnProperty(Le)&&ee!=null&&!d.hasOwnProperty(Le)&&Nt(i,l,Le,null,d,ee);for(J in d)if(ee=d[J],te=c[J],d.hasOwnProperty(J)&&ee!==te&&(ee!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,l));break;default:Nt(i,l,J,ee,d,te)}return;default:if(Cc(l)){for(var Et in c)ee=c[Et],c.hasOwnProperty(Et)&&ee!==void 0&&!d.hasOwnProperty(Et)&&Pg(i,l,Et,void 0,d,ee);for(ae in d)ee=d[ae],te=c[ae],!d.hasOwnProperty(ae)||ee===te||ee===void 0&&te===void 0||Pg(i,l,ae,ee,d,te);return}}for(var Q in c)ee=c[Q],c.hasOwnProperty(Q)&&ee!=null&&!d.hasOwnProperty(Q)&&Nt(i,l,Q,null,d,ee);for(he in d)ee=d[he],te=c[he],!d.hasOwnProperty(he)||ee===te||ee==null&&te==null||Nt(i,l,he,ee,d,te)}var Og=null,Mg=null;function zh(i){return i.nodeType===9?i:i.ownerDocument}function aw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lw(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Lg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Vg=null;function jA(){var i=window.event;return i&&i.type==="popstate"?i===Vg?!1:(Vg=i,!0):(Vg=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,SA=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,TA=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(i){return cw.resolve(null).then(i).catch(CA)}:ow;function CA(i){setTimeout(function(){throw i})}function Kr(i){return i==="head"}function uw(i,l){var c=l,d=0,g=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var S=i.ownerDocument;if(c&1&&fu(S.documentElement),c&2&&fu(S.body),c&4)for(c=S.head,fu(c),S=c.firstChild;S;){var D=S.nextSibling,q=S.nodeName;S[Aa]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=D}}if(g===0){i.removeChild(y),_u(l);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);_u(l)}function zg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":zg(c),Ar(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function AA(i,l,c,d){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Aa])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function IA(i,l,c){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=qn(i.nextSibling),i===null))return null;return i}function Ug(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function RA(i,l){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")l();else{var d=function(){l(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function qn(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var Bg=null;function dw(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return i;l--}else c==="/$"&&l++}i=i.previousSibling}return null}function hw(i,l,c){switch(l=zh(c),i){case"html":if(i=l.documentElement,!i)throw Error(n(452));return i;case"head":if(i=l.head,!i)throw Error(n(453));return i;case"body":if(i=l.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function fu(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Ar(i)}var In=new Map,fw=new Set;function Uh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ji=oe.d;oe.d={f:kA,r:DA,D:PA,C:OA,L:MA,m:LA,X:zA,S:VA,M:UA};function kA(){var i=Ji.f(),l=Rh();return i||l}function DA(i){var l=ii(i);l!==null&&l.tag===5&&l.type==="form"?Db(l):Ji.r(i)}var bo=typeof document>"u"?null:document;function mw(i,l,c){var d=bo;if(d&&typeof l=="string"&&l){var g=Wt(l);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),fw.has(g)||(fw.add(g),i={rel:i,crossOrigin:c,href:l},d.querySelector(g)===null&&(l=d.createElement("link"),Ns(l,"link",i),Ft(l),d.head.appendChild(l)))}}function PA(i){Ji.D(i),mw("dns-prefetch",i,null)}function OA(i,l){Ji.C(i,l),mw("preconnect",i,l)}function MA(i,l,c){Ji.L(i,l,c);var d=bo;if(d&&i&&l){var g='link[rel="preload"][as="'+Wt(l)+'"]';l==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Wt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Wt(c.imageSizes)+'"]')):g+='[href="'+Wt(i)+'"]';var y=g;switch(l){case"style":y=_o(i);break;case"script":y=wo(i)}In.has(y)||(i=x({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:i,as:l},c),In.set(y,i),d.querySelector(g)!==null||l==="style"&&d.querySelector(mu(y))||l==="script"&&d.querySelector(pu(y))||(l=d.createElement("link"),Ns(l,"link",i),Ft(l),d.head.appendChild(l)))}}function LA(i,l){Ji.m(i,l);var c=bo;if(c&&i){var d=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+Wt(d)+'"][href="'+Wt(i)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=wo(i)}if(!In.has(y)&&(i=x({rel:"modulepreload",href:i},l),In.set(y,i),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(pu(y)))return}d=c.createElement("link"),Ns(d,"link",i),Ft(d),c.head.appendChild(d)}}}function VA(i,l,c){Ji.S(i,l,c);var d=bo;if(d&&i){var g=zs(d).hoistableStyles,y=_o(i);l=l||"default";var S=g.get(y);if(!S){var D={loading:0,preload:null};if(S=d.querySelector(mu(y)))D.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":l},c),(c=In.get(y))&&Fg(i,c);var q=S=d.createElement("link");Ft(q),Ns(q,"link",i),q._p=new Promise(function(J,ae){q.onload=J,q.onerror=ae}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Bh(S,l,d)}S={type:"stylesheet",instance:S,count:1,state:D},g.set(y,S)}}}function zA(i,l){Ji.X(i,l);var c=bo;if(c&&i){var d=zs(c).hoistableScripts,g=wo(i),y=d.get(g);y||(y=c.querySelector(pu(g)),y||(i=x({src:i,async:!0},l),(l=In.get(g))&&qg(i,l),y=c.createElement("script"),Ft(y),Ns(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function UA(i,l){Ji.M(i,l);var c=bo;if(c&&i){var d=zs(c).hoistableScripts,g=wo(i),y=d.get(g);y||(y=c.querySelector(pu(g)),y||(i=x({src:i,async:!0,type:"module"},l),(l=In.get(g))&&qg(i,l),y=c.createElement("script"),Ft(y),Ns(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function pw(i,l,c,d){var g=(g=Ce.current)?Uh(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=_o(c.href),c=zs(g).hoistableStyles,d=c.get(l),d||(d={type:"style",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=_o(c.href);var y=zs(g).hoistableStyles,S=y.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,S),(y=g.querySelector(mu(i)))&&!y._p&&(S.instance=y,S.state.loading=5),In.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},In.set(i,c),y||BA(g,i,c,S.state))),l&&d===null)throw Error(n(528,""));return S}if(l&&d!==null)throw Error(n(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=wo(c),c=zs(g).hoistableScripts,d=c.get(l),d||(d={type:"script",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function _o(i){return'href="'+Wt(i)+'"'}function mu(i){return'link[rel="stylesheet"]['+i+"]"}function gw(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function BA(i,l,c,d){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=i.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Ns(l,"link",c),Ft(l),i.head.appendChild(l))}function wo(i){return'[src="'+Wt(i)+'"]'}function pu(i){return"script[async]"+i}function xw(i,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var d=i.querySelector('style[data-href~="'+Wt(c.href)+'"]');if(d)return l.instance=d,Ft(d),d;var g=x({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Ft(d),Ns(d,"style",g),Bh(d,c.precedence,i),l.instance=d;case"stylesheet":g=_o(c.href);var y=i.querySelector(mu(g));if(y)return l.state.loading|=4,l.instance=y,Ft(y),y;d=gw(c),(g=In.get(g))&&Fg(d,g),y=(i.ownerDocument||i).createElement("link"),Ft(y);var S=y;return S._p=new Promise(function(D,q){S.onload=D,S.onerror=q}),Ns(y,"link",d),l.state.loading|=4,Bh(y,c.precedence,i),l.instance=y;case"script":return y=wo(c.src),(g=i.querySelector(pu(y)))?(l.instance=g,Ft(g),g):(d=c,(g=In.get(y))&&(d=x({},c),qg(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ft(g),Ns(g,"link",d),i.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Bh(d,c.precedence,i));return l.instance}function Bh(i,l,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,S=0;S<d.length;S++){var D=d[S];if(D.dataset.precedence===l)y=D;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(i,l.firstChild))}function Fg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function qg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Fh=null;function yw(i,l,c){if(Fh===null){var d=new Map,g=Fh=new Map;g.set(c,d)}else g=Fh,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[Aa]||y[ts]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(l)||"";S=i+S;var D=d.get(S);D?D.push(y):d.set(S,[y])}}return d}function vw(i,l,c){i=i.ownerDocument||i,i.head.insertBefore(c,l==="title"?i.querySelector("head > title"):null)}function FA(i,l,c){if(c===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function bw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var gu=null;function qA(){}function HA(i,l,c){if(gu===null)throw Error(n(475));var d=gu;if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=_o(c.href),y=i.querySelector(mu(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=qh.bind(d),i.then(d,d)),l.state.loading|=4,l.instance=y,Ft(y);return}y=i.ownerDocument||i,c=gw(c),(g=In.get(g))&&Fg(c,g),y=y.createElement("link"),Ft(y);var S=y;S._p=new Promise(function(D,q){S.onload=D,S.onerror=q}),Ns(y,"link",c),l.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=qh.bind(d),i.addEventListener("load",l),i.addEventListener("error",l))}}function GA(){if(gu===null)throw Error(n(475));var i=gu;return i.stylesheets&&i.count===0&&Hg(i,i.stylesheets),0<i.count?function(l){var c=setTimeout(function(){if(i.stylesheets&&Hg(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c)}}:null}function qh(){if(this.count--,this.count===0){if(this.stylesheets)Hg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hh=null;function Hg(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hh=new Map,l.forEach($A,i),Hh=null,qh.call(i))}function $A(i,l){if(!(l.state.loading&4)){var c=Hh.get(i);if(c)var d=c.get(null);else{c=new Map,Hh.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),d=S)}d&&c.set(null,d)}g=l.instance,S=g.getAttribute("data-precedence"),y=c.get(S)||d,y===d&&c.set(null,g),c.set(S,g),this.count++,d=qh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),l.state.loading|=4}}var xu={$$typeof:P,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function WA(i,l,c,d,g,y,S,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function _w(i,l,c,d,g,y,S,D,q,J,ae,he){return i=new WA(i,l,c,S,D,q,J,he),l=1,y===!0&&(l|=24),y=cn(3,null,null,l),i.current=y,y.stateNode=i,l=jp(),l.refCount++,i.pooledCache=l,l.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:l},Ap(y),i}function ww(i){return i?(i=Zl,i):Zl}function Nw(i,l,c,d,g,y){g=ww(g),d.context===null?d.context=g:d.pendingContext=g,d=Or(l),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Mr(i,d,l),c!==null&&(mn(c,i,l),Wc(c,i,l))}function Ew(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<l?c:l}}function Gg(i,l){Ew(i,l),(i=i.alternate)&&Ew(i,l)}function jw(i){if(i.tag===13){var l=Xl(i,67108864);l!==null&&mn(l,i,67108864),Gg(i,67108864)}}var Gh=!0;function KA(i,l,c,d){var g=K.T;K.T=null;var y=oe.p;try{oe.p=2,$g(i,l,c,d)}finally{oe.p=y,K.T=g}}function YA(i,l,c,d){var g=K.T;K.T=null;var y=oe.p;try{oe.p=8,$g(i,l,c,d)}finally{oe.p=y,K.T=g}}function $g(i,l,c,d){if(Gh){var g=Wg(d);if(g===null)Dg(i,l,d,$h,c),Tw(i,d);else if(XA(g,i,l,c,d))d.stopPropagation();else if(Tw(i,d),l&4&&-1<QA.indexOf(i)){for(;g!==null;){var y=ii(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Vn(y.pendingLanes);if(S!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var q=1<<31-Cs(S);D.entanglements[1]|=q,S&=~q}yi(y),(yt&6)===0&&(Ah=Te()+500,uu(0))}}break;case 13:D=Xl(y,2),D!==null&&mn(D,y,2),Rh(),Gg(y,2)}if(y=Wg(d),y===null&&Dg(i,l,d,$h,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else Dg(i,l,d,null,c)}}function Wg(i){return i=_n(i),Kg(i)}var $h=null;function Kg(i){if($h=null,i=Ri(i),i!==null){var l=o(i);if(l===null)i=null;else{var c=l.tag;if(c===13){if(i=u(l),i!==null)return i;i=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return $h=i,null}function Sw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case Nr:return 2;case Ln:return 8;case Ts:case Er:return 32;case jr:return 268435456;default:return 32}default:return 32}}var Yg=!1,Yr=null,Qr=null,Xr=null,yu=new Map,vu=new Map,Zr=[],QA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tw(i,l){switch(i){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":yu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(l.pointerId)}}function bu(i,l,c,d,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:l,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},l!==null&&(l=ii(l),l!==null&&jw(l)),i):(i.eventSystemFlags|=d,l=i.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),i)}function XA(i,l,c,d,g){switch(l){case"focusin":return Yr=bu(Yr,i,l,c,d,g),!0;case"dragenter":return Qr=bu(Qr,i,l,c,d,g),!0;case"mouseover":return Xr=bu(Xr,i,l,c,d,g),!0;case"pointerover":var y=g.pointerId;return yu.set(y,bu(yu.get(y)||null,i,l,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,vu.set(y,bu(vu.get(y)||null,i,l,c,d,g)),!0}return!1}function Cw(i){var l=Ri(i.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=u(c),l!==null){i.blockedOn=l,Rd(i.priority,function(){if(c.tag===13){var d=fn();d=Sr(d);var g=Xl(c,d);g!==null&&mn(g,c,d),Gg(c,d)}});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Wh(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var c=Wg(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Oi=d,c.target.dispatchEvent(d),Oi=null}else return l=ii(c),l!==null&&jw(l),i.blockedOn=c,!1;l.shift()}return!0}function Aw(i,l,c){Wh(i)&&c.delete(l)}function ZA(){Yg=!1,Yr!==null&&Wh(Yr)&&(Yr=null),Qr!==null&&Wh(Qr)&&(Qr=null),Xr!==null&&Wh(Xr)&&(Xr=null),yu.forEach(Aw),vu.forEach(Aw)}function Kh(i,l){i.blockedOn===l&&(i.blockedOn=null,Yg||(Yg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ZA)))}var Yh=null;function Iw(i){Yh!==i&&(Yh=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yh===i&&(Yh=null);for(var l=0;l<i.length;l+=3){var c=i[l],d=i[l+1],g=i[l+2];if(typeof d!="function"){if(Kg(d||c)===null)continue;break}var y=ii(c);y!==null&&(i.splice(l,3),l-=3,Kp(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function _u(i){function l(q){return Kh(q,i)}Yr!==null&&Kh(Yr,i),Qr!==null&&Kh(Qr,i),Xr!==null&&Kh(Xr,i),yu.forEach(l),vu.forEach(l);for(var c=0;c<Zr.length;c++){var d=Zr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Zr.length&&(c=Zr[0],c.blockedOn===null);)Cw(c),c.blockedOn===null&&Zr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],S=g[$t]||null;if(typeof y=="function")S||Iw(c);else if(S){var D=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[$t]||null)D=S.formAction;else if(Kg(g)!==null)continue}else D=S.action;typeof D=="function"?c[d+1]=D:(c.splice(d,3),d-=3),Iw(c)}}}function Qg(i){this._internalRoot=i}Qh.prototype.render=Qg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));var c=l.current,d=fn();Nw(c,d,i,l,null,null)},Qh.prototype.unmount=Qg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Nw(i.current,2,null,i,null,null),Rh(),l[vn]=null}};function Qh(i){this._internalRoot=i}Qh.prototype.unstable_scheduleHydration=function(i){if(i){var l=Tr();i={blockedOn:null,target:i,priority:l};for(var c=0;c<Zr.length&&l!==0&&l<Zr[c].priority;c++);Zr.splice(c,0,i),c===0&&Cw(i)}};var Rw=e.version;if(Rw!=="19.1.0")throw Error(n(527,Rw,"19.1.0"));oe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(l),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var JA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{zt=Xh.inject(JA),xt=Xh}catch{}}return Nu.createRoot=function(i,l){if(!r(i))throw Error(n(299));var c=!1,d="",g=Wb,y=Kb,S=Yb,D=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=_w(i,1,!1,null,null,c,d,g,y,S,D,null),i[vn]=l.current,kg(i),new Qg(l)},Nu.hydrateRoot=function(i,l,c){if(!r(i))throw Error(n(299));var d=!1,g="",y=Wb,S=Kb,D=Yb,q=null,J=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks),c.formState!==void 0&&(J=c.formState)),l=_w(i,1,!0,l,c??null,d,g,y,S,D,q,J),l.context=ww(null),c=l.current,d=fn(),d=Sr(d),g=Or(d),g.callback=null,Mr(c,g,d),c=d,l.current.lanes=c,Ii(l,c),yi(l),i[vn]=l.current,kg(i),new Qh(l)},Nu.version="19.1.0",Nu}var Bw;function uI(){if(Bw)return Jg.exports;Bw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jg.exports=cI(),Jg.exports}var dI=uI(),Eu={},Fw;function hI(){if(Fw)return Eu;Fw=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.parse=u,Eu.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function u(_,N){const w=new o,E=_.length;if(E<2)return w;const R=(N==null?void 0:N.decode)||x;let T=0;do{const k=_.indexOf("=",T);if(k===-1)break;const P=_.indexOf(";",T),H=P===-1?E:P;if(k>H){T=_.lastIndexOf(";",k-1)+1;continue}const B=f(_,T,k),G=h(_,k,B),M=_.slice(B,G);if(w[M]===void 0){let A=f(_,k+1,H),I=h(_,H,A);const O=R(_.slice(A,I));w[M]=O}T=H+1}while(T<E);return w}function f(_,N,w){do{const E=_.charCodeAt(N);if(E!==32&&E!==9)return N}while(++N<w);return w}function h(_,N,w){for(;N>w;){const E=_.charCodeAt(--N);if(E!==32&&E!==9)return N+1}return w}function p(_,N,w){const E=(w==null?void 0:w.encode)||encodeURIComponent;if(!s.test(_))throw new TypeError(`argument name is invalid: ${_}`);const R=E(N);if(!e.test(R))throw new TypeError(`argument val is invalid: ${N}`);let T=_+"="+R;if(!w)return T;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);T+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);T+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);T+="; Path="+w.path}if(w.expires){if(!v(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);T+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(T+="; HttpOnly"),w.secure&&(T+="; Secure"),w.partitioned&&(T+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return T}function x(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function v(_){return r.call(_)==="[object Date]"}return Eu}hI();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qw="popstate";function fI(s={}){function e(n,r){let{pathname:o,search:u,hash:f}=n.location;return P0("",{pathname:o,search:u,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Yu(r)}return pI(e,t,null,s)}function Mt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Yn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mI(){return Math.random().toString(36).substring(2,10)}function Hw(s,e){return{usr:s.state,key:s.key,idx:e}}function P0(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Qo(e):e,state:t,key:e&&e.key||n||mI()}}function Yu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Qo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function pI(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,u=r.history,f="POP",h=null,p=x();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function x(){return(u.state||{idx:null}).idx}function v(){f="POP";let R=x(),T=R==null?null:R-p;p=R,h&&h({action:f,location:E.location,delta:T})}function _(R,T){f="PUSH";let k=P0(E.location,R,T);p=x()+1;let P=Hw(k,p),H=E.createHref(k);try{u.pushState(P,"",H)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(H)}o&&h&&h({action:f,location:E.location,delta:1})}function N(R,T){f="REPLACE";let k=P0(E.location,R,T);p=x();let P=Hw(k,p),H=E.createHref(k);u.replaceState(P,"",H),o&&h&&h({action:f,location:E.location,delta:0})}function w(R){let T=r.location.origin!=="null"?r.location.origin:r.location.href,k=typeof R=="string"?R:Yu(R);return k=k.replace(/ $/,"%20"),Mt(T,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,T)}let E={get action(){return f},get location(){return s(r,u)},listen(R){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(qw,v),h=R,()=>{r.removeEventListener(qw,v),h=null}},createHref(R){return e(r,R)},createURL:w,encodeLocation(R){let T=w(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:_,replace:N,go(R){return u.go(R)}};return E}function SE(s,e,t="/"){return gI(s,e,t,!1)}function gI(s,e,t,n){let r=typeof e=="string"?Qo(e):e,o=dr(r.pathname||"/",t);if(o==null)return null;let u=TE(s);xI(u);let f=null;for(let h=0;f==null&&h<u.length;++h){let p=CI(o);f=SI(u[h],p,n)}return f}function TE(s,e=[],t=[],n=""){let r=(o,u,f)=>{let h={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};h.relativePath.startsWith("/")&&(Mt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let p=ar([n,h.relativePath]),x=t.concat(h);o.children&&o.children.length>0&&(Mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),TE(o.children,e,x,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:EI(p,o.index),routesMeta:x})};return s.forEach((o,u)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))r(o,u);else for(let h of CE(o.path))r(o,u,h)}),e}function CE(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let u=CE(n.join("/")),f=[];return f.push(...u.map(h=>h===""?o:[o,h].join("/"))),r&&f.push(...u),f.map(h=>s.startsWith("/")&&h===""?"/":h)}function xI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:jI(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var yI=/^:[\w-]+$/,vI=3,bI=2,_I=1,wI=10,NI=-2,Gw=s=>s==="*";function EI(s,e){let t=s.split("/"),n=t.length;return t.some(Gw)&&(n+=NI),e&&(n+=bI),t.filter(r=>!Gw(r)).reduce((r,o)=>r+(yI.test(o)?vI:o===""?_I:wI),n)}function jI(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function SI(s,e,t=!1){let{routesMeta:n}=s,r={},o="/",u=[];for(let f=0;f<n.length;++f){let h=n[f],p=f===n.length-1,x=o==="/"?e:e.slice(o.length)||"/",v=Ef({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},x),_=h.route;if(!v&&p&&t&&!n[n.length-1].route.index&&(v=Ef({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!v)return null;Object.assign(r,v.params),u.push({params:r,pathname:ar([o,v.pathname]),pathnameBase:kI(ar([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=ar([o,v.pathnameBase]))}return u}function Ef(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=TI(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let o=r[0],u=o.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:n.reduce((p,{paramName:x,isOptional:v},_)=>{if(x==="*"){let w=f[_]||"";u=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const N=f[_];return v&&!N?p[x]=void 0:p[x]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:s}}function TI(s,e=!1,t=!0){Yn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,h)=>(n.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function CI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function dr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function AI(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?Qo(s):s;return{pathname:t?t.startsWith("/")?t:II(t,e):e,search:DI(n),hash:PI(r)}}function II(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function n0(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dx(s){let e=RI(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Px(s,e,t,n=!1){let r;typeof s=="string"?r=Qo(s):(r={...s},Mt(!r.pathname||!r.pathname.includes("?"),n0("?","pathname","search",r)),Mt(!r.pathname||!r.pathname.includes("#"),n0("#","pathname","hash",r)),Mt(!r.search||!r.search.includes("#"),n0("#","search","hash",r)));let o=s===""||r.pathname==="",u=o?"/":r.pathname,f;if(u==null)f=t;else{let v=e.length-1;if(!n&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),v-=1;r.pathname=_.join("/")}f=v>=0?e[v]:"/"}let h=AI(r,f),p=u&&u!=="/"&&u.endsWith("/"),x=(o||u===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||x)&&(h.pathname+="/"),h}var ar=s=>s.join("/").replace(/\/\/+/g,"/"),kI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),DI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,PI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function OI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var AE=["POST","PUT","PATCH","DELETE"];new Set(AE);var MI=["GET",...AE];new Set(MI);var Xo=C.createContext(null);Xo.displayName="DataRouter";var dm=C.createContext(null);dm.displayName="DataRouterState";var IE=C.createContext({isTransitioning:!1});IE.displayName="ViewTransition";var LI=C.createContext(new Map);LI.displayName="Fetchers";var VI=C.createContext(null);VI.displayName="Await";var ei=C.createContext(null);ei.displayName="Navigation";var cd=C.createContext(null);cd.displayName="Location";var ti=C.createContext({outlet:null,matches:[],isDataRoute:!1});ti.displayName="Route";var Ox=C.createContext(null);Ox.displayName="RouteError";function zI(s,{relative:e}={}){Mt(Zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=C.useContext(ei),{hash:r,pathname:o,search:u}=ud(s,{relative:e}),f=o;return t!=="/"&&(f=o==="/"?t:ar([t,o])),n.createHref({pathname:f,search:u,hash:r})}function Zo(){return C.useContext(cd)!=null}function nn(){return Mt(Zo(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(cd).location}var RE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kE(s){C.useContext(ei).static||C.useLayoutEffect(s)}function es(){let{isDataRoute:s}=C.useContext(ti);return s?ZI():UI()}function UI(){Mt(Zo(),"useNavigate() may be used only in the context of a <Router> component.");let s=C.useContext(Xo),{basename:e,navigator:t}=C.useContext(ei),{matches:n}=C.useContext(ti),{pathname:r}=nn(),o=JSON.stringify(Dx(n)),u=C.useRef(!1);return kE(()=>{u.current=!0}),C.useCallback((h,p={})=>{if(Yn(u.current,RE),!u.current)return;if(typeof h=="number"){t.go(h);return}let x=Px(h,JSON.parse(o),r,p.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ar([e,x.pathname])),(p.replace?t.replace:t.push)(x,p.state,p)},[e,t,o,r,s])}C.createContext(null);function Jo(){let{matches:s}=C.useContext(ti),e=s[s.length-1];return e?e.params:{}}function ud(s,{relative:e}={}){let{matches:t}=C.useContext(ti),{pathname:n}=nn(),r=JSON.stringify(Dx(t));return C.useMemo(()=>Px(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function BI(s,e){return DE(s,e)}function DE(s,e,t,n){var k;Mt(Zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:o}=C.useContext(ei),{matches:u}=C.useContext(ti),f=u[u.length-1],h=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",v=f&&f.route;{let P=v&&v.path||"";PE(p,!v||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let _=nn(),N;if(e){let P=typeof e=="string"?Qo(e):e;Mt(x==="/"||((k=P.pathname)==null?void 0:k.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${P.pathname}" was given in the \`location\` prop.`),N=P}else N=_;let w=N.pathname||"/",E=w;if(x!=="/"){let P=x.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(P.length).join("/")}let R=!o&&t&&t.matches&&t.matches.length>0?t.matches:SE(s,{pathname:E});Yn(v||R!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yn(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=$I(R&&R.map(P=>Object.assign({},P,{params:Object.assign({},h,P.params),pathname:ar([x,r.encodeLocation?r.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?x:ar([x,r.encodeLocation?r.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),u,t,n);return e&&T?C.createElement(cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},T):T}function FI(){let s=XI(),e=OI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:o},"ErrorBoundary")," or"," ",C.createElement("code",{style:o},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:r},t):null,u)}var qI=C.createElement(FI,null),HI=class extends C.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?C.createElement(ti.Provider,{value:this.props.routeContext},C.createElement(Ox.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GI({routeContext:s,match:e,children:t}){let n=C.useContext(Xo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(ti.Provider,{value:s},t)}function $I(s,e=[],t=null,n=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let r=s,o=t==null?void 0:t.errors;if(o!=null){let h=r.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let u=!1,f=-1;if(t)for(let h=0;h<r.length;h++){let p=r[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:x,errors:v}=t,_=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||_){u=!0,f>=0?r=r.slice(0,f+1):r=[r[0]];break}}}return r.reduceRight((h,p,x)=>{let v,_=!1,N=null,w=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,N=p.route.errorElement||qI,u&&(f<0&&x===0?(PE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):f===x&&(_=!0,w=p.route.hydrateFallbackElement||null)));let E=e.concat(r.slice(0,x+1)),R=()=>{let T;return v?T=N:_?T=w:p.route.Component?T=C.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=h,C.createElement(GI,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:T})};return t&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?C.createElement(HI,{location:t.location,revalidation:t.revalidation,component:N,error:v,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):R()},null)}function Mx(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WI(s){let e=C.useContext(Xo);return Mt(e,Mx(s)),e}function KI(s){let e=C.useContext(dm);return Mt(e,Mx(s)),e}function YI(s){let e=C.useContext(ti);return Mt(e,Mx(s)),e}function Lx(s){let e=YI(s),t=e.matches[e.matches.length-1];return Mt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function QI(){return Lx("useRouteId")}function XI(){var n;let s=C.useContext(Ox),e=KI("useRouteError"),t=Lx("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function ZI(){let{router:s}=WI("useNavigate"),e=Lx("useNavigate"),t=C.useRef(!1);return kE(()=>{t.current=!0}),C.useCallback(async(r,o={})=>{Yn(t.current,RE),t.current&&(typeof r=="number"?s.navigate(r):await s.navigate(r,{fromRouteId:e,...o}))},[s,e])}var $w={};function PE(s,e,t){!e&&!$w[s]&&($w[s]=!0,Yn(!1,t))}C.memo(JI);function JI({routes:s,future:e,state:t}){return DE(s,void 0,t,e)}function e4({to:s,replace:e,state:t,relative:n}){Mt(Zo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=C.useContext(ei);Yn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=C.useContext(ti),{pathname:u}=nn(),f=es(),h=Px(s,Dx(o),u,n==="path"),p=JSON.stringify(h);return C.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:n})},[f,p,n,e,t]),null}function ft(s){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function t4({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:o=!1}){Mt(!Zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:u,navigator:r,static:o,future:{}}),[u,r,o]);typeof t=="string"&&(t=Qo(t));let{pathname:h="/",search:p="",hash:x="",state:v=null,key:_="default"}=t,N=C.useMemo(()=>{let w=dr(h,u);return w==null?null:{location:{pathname:w,search:p,hash:x,state:v,key:_},navigationType:n}},[u,h,p,x,v,_,n]);return Yn(N!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:C.createElement(ei.Provider,{value:f},C.createElement(cd.Provider,{children:e,value:N}))}function s4({children:s,location:e}){return BI(O0(s),e)}function O0(s,e=[]){let t=[];return C.Children.forEach(s,(n,r)=>{if(!C.isValidElement(n))return;let o=[...e,r];if(n.type===C.Fragment){t.push.apply(t,O0(n.props.children,o));return}Mt(n.type===ft,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=O0(n.props.children,o)),t.push(u)}),t}var uf="get",df="application/x-www-form-urlencoded";function hm(s){return s!=null&&typeof s.tagName=="string"}function n4(s){return hm(s)&&s.tagName.toLowerCase()==="button"}function i4(s){return hm(s)&&s.tagName.toLowerCase()==="form"}function r4(s){return hm(s)&&s.tagName.toLowerCase()==="input"}function a4(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function l4(s,e){return s.button===0&&(!e||e==="_self")&&!a4(s)}var Zh=null;function o4(){if(Zh===null)try{new FormData(document.createElement("form"),0),Zh=!1}catch{Zh=!0}return Zh}var c4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i0(s){return s!=null&&!c4.has(s)?(Yn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${df}"`),null):s}function u4(s,e){let t,n,r,o,u;if(i4(s)){let f=s.getAttribute("action");n=f?dr(f,e):null,t=s.getAttribute("method")||uf,r=i0(s.getAttribute("enctype"))||df,o=new FormData(s)}else if(n4(s)||r4(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||f.getAttribute("action");if(n=h?dr(h,e):null,t=s.getAttribute("formmethod")||f.getAttribute("method")||uf,r=i0(s.getAttribute("formenctype"))||i0(f.getAttribute("enctype"))||df,o=new FormData(f,s),!o4()){let{name:p,type:x,value:v}=s;if(x==="image"){let _=p?`${p}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else p&&o.append(p,v)}}else{if(hm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uf,n=null,r=df,u=s}return o&&r==="text/plain"&&(u=o,o=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:o,body:u}}function Vx(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function d4(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function h4(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function f4(s,e,t){let n=await Promise.all(s.map(async r=>{let o=e.routes[r.route.id];if(o){let u=await d4(o,t);return u.links?u.links():[]}return[]}));return x4(n.flat(1).filter(h4).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Ww(s,e,t,n,r,o){let u=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,f=(h,p)=>{var x;return t[p].pathname!==h.pathname||((x=t[p].route.path)==null?void 0:x.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>u(h,p)||f(h,p)):o==="data"?e.filter((h,p)=>{var v;let x=n.routes[h.route.id];if(!x||!x.hasLoader)return!1;if(u(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let _=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function m4(s,e,{includeHydrateFallback:t}={}){return p4(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function p4(s){return[...new Set(s)]}function g4(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function x4(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let o=JSON.stringify(g4(r));return t.has(o)||(t.add(o),n.push({key:o,link:r})),n},[])}function y4(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&dr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function OE(){let s=C.useContext(Xo);return Vx(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function v4(){let s=C.useContext(dm);return Vx(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var zx=C.createContext(void 0);zx.displayName="FrameworkContext";function ME(){let s=C.useContext(zx);return Vx(s,"You must render this element inside a <HydratedRouter> element"),s}function b4(s,e){let t=C.useContext(zx),[n,r]=C.useState(!1),[o,u]=C.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:x,onTouchStart:v}=e,_=C.useRef(null);C.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let E=T=>{T.forEach(k=>{u(k.isIntersecting)})},R=new IntersectionObserver(E,{threshold:.5});return _.current&&R.observe(_.current),()=>{R.disconnect()}}},[s]),C.useEffect(()=>{if(n){let E=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(E)}}},[n]);let N=()=>{r(!0)},w=()=>{r(!1),u(!1)};return t?s!=="intent"?[o,_,{}]:[o,_,{onFocus:ju(f,N),onBlur:ju(h,w),onMouseEnter:ju(p,N),onMouseLeave:ju(x,w),onTouchStart:ju(v,N)}]:[!1,_,{}]}function ju(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function _4({page:s,...e}){let{router:t}=OE(),n=C.useMemo(()=>SE(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?C.createElement(N4,{page:s,matches:n,...e}):null}function w4(s){let{manifest:e,routeModules:t}=ME(),[n,r]=C.useState([]);return C.useEffect(()=>{let o=!1;return f4(s,e,t).then(u=>{o||r(u)}),()=>{o=!0}},[s,e,t]),n}function N4({page:s,matches:e,...t}){let n=nn(),{manifest:r,routeModules:o}=ME(),{basename:u}=OE(),{loaderData:f,matches:h}=v4(),p=C.useMemo(()=>Ww(s,e,h,r,n,"data"),[s,e,h,r,n]),x=C.useMemo(()=>Ww(s,e,h,r,n,"assets"),[s,e,h,r,n]),v=C.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let w=new Set,E=!1;if(e.forEach(T=>{var P;let k=r.routes[T.route.id];!k||!k.hasLoader||(!p.some(H=>H.route.id===T.route.id)&&T.route.id in f&&((P=o[T.route.id])!=null&&P.shouldRevalidate)||k.hasClientLoader?E=!0:w.add(T.route.id))}),w.size===0)return[];let R=y4(s,u);return E&&w.size>0&&R.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[R.pathname+R.search]},[u,f,n,r,p,e,s,o]),_=C.useMemo(()=>m4(x,r),[x,r]),N=w4(x);return C.createElement(C.Fragment,null,v.map(w=>C.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),_.map(w=>C.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),N.map(({key:w,link:E})=>C.createElement("link",{key:w,...E})))}function E4(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LE&&(window.__reactRouterVersion="7.5.0")}catch{}function j4({basename:s,children:e,window:t}){let n=C.useRef();n.current==null&&(n.current=fI({window:t,v5Compat:!0}));let r=n.current,[o,u]=C.useState({action:r.action,location:r.location}),f=C.useCallback(h=>{C.startTransition(()=>u(h))},[u]);return C.useLayoutEffect(()=>r.listen(f),[r,f]),C.createElement(t4,{basename:s,children:e,location:o.location,navigationType:o.action,navigator:r})}var VE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=C.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:u,state:f,target:h,to:p,preventScrollReset:x,viewTransition:v,..._},N){let{basename:w}=C.useContext(ei),E=typeof p=="string"&&VE.test(p),R,T=!1;if(typeof p=="string"&&E&&(R=p,LE))try{let I=new URL(window.location.href),O=p.startsWith("//")?new URL(I.protocol+p):new URL(p),L=dr(O.pathname,w);O.origin===I.origin&&L!=null?p=L+O.search+O.hash:T=!0}catch{Yn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=zI(p,{relative:r}),[P,H,B]=b4(n,_),G=A4(p,{replace:u,state:f,target:h,preventScrollReset:x,relative:r,viewTransition:v});function M(I){e&&e(I),I.defaultPrevented||G(I)}let A=C.createElement("a",{..._,...B,href:R||k,onClick:T||o?e:M,ref:E4(N,H),target:h,"data-discover":!E&&t==="render"?"true":void 0});return P&&!E?C.createElement(C.Fragment,null,A,C.createElement(_4,{page:k})):A});Pe.displayName="Link";var S4=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:u,viewTransition:f,children:h,...p},x){let v=ud(u,{relative:p.relative}),_=nn(),N=C.useContext(dm),{navigator:w,basename:E}=C.useContext(ei),R=N!=null&&P4(v)&&f===!0,T=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,k=_.pathname,P=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(k=k.toLowerCase(),P=P?P.toLowerCase():null,T=T.toLowerCase()),P&&E&&(P=dr(P,E)||P);const H=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let B=k===T||!r&&k.startsWith(T)&&k.charAt(H)==="/",G=P!=null&&(P===T||!r&&P.startsWith(T)&&P.charAt(T.length)==="/"),M={isActive:B,isPending:G,isTransitioning:R},A=B?e:void 0,I;typeof n=="function"?I=n(M):I=[n,B?"active":null,G?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(M):o;return C.createElement(Pe,{...p,"aria-current":A,className:I,ref:x,style:O,to:u,viewTransition:f},typeof h=="function"?h(M):h)});S4.displayName="NavLink";var T4=C.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:o,method:u=uf,action:f,onSubmit:h,relative:p,preventScrollReset:x,viewTransition:v,..._},N)=>{let w=k4(),E=D4(f,{relative:p}),R=u.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&VE.test(f),k=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let H=P.nativeEvent.submitter,B=(H==null?void 0:H.getAttribute("formmethod"))||u;w(H||P.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:r,state:o,relative:p,preventScrollReset:x,viewTransition:v})};return C.createElement("form",{ref:N,method:R,action:E,onSubmit:n?h:k,..._,"data-discover":!T&&s==="render"?"true":void 0})});T4.displayName="Form";function C4(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zE(s){let e=C.useContext(Xo);return Mt(e,C4(s)),e}function A4(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:u}={}){let f=es(),h=nn(),p=ud(s,{relative:o});return C.useCallback(x=>{if(l4(x,e)){x.preventDefault();let v=t!==void 0?t:Yu(h)===Yu(p);f(s,{replace:v,state:n,preventScrollReset:r,relative:o,viewTransition:u})}},[h,f,p,t,n,e,s,r,o,u])}var I4=0,R4=()=>`__${String(++I4)}__`;function k4(){let{router:s}=zE("useSubmit"),{basename:e}=C.useContext(ei),t=QI();return C.useCallback(async(n,r={})=>{let{action:o,method:u,encType:f,formData:h,body:p}=u4(n,e);if(r.navigate===!1){let x=r.fetcherKey||R4();await s.fetch(x,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:p,formMethod:r.method||u,formEncType:r.encType||f,flushSync:r.flushSync})}else await s.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:p,formMethod:r.method||u,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[s,e,t])}function D4(s,{relative:e}={}){let{basename:t}=C.useContext(ei),n=C.useContext(ti);Mt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...ud(s||".",{relative:e})},u=nn();if(s==null){o.search=u.search;let f=new URLSearchParams(o.search),h=f.getAll("index");if(h.some(x=>x==="")){f.delete("index"),h.filter(v=>v).forEach(v=>f.append("index",v));let x=f.toString();o.search=x?`?${x}`:""}}return(!s||s===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ar([t,o.pathname])),Yu(o)}function P4(s,e={}){let t=C.useContext(IE);Mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=zE("useViewTransitionState"),r=ud(s,{relative:e.relative});if(!t.isTransitioning)return!1;let o=dr(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=dr(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Ef(r.pathname,u)!=null||Ef(r.pathname,o)!=null}new TextEncoder;/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M4=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Kw=s=>{const e=M4(s);return e.charAt(0).toUpperCase()+e.slice(1)},UE=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=C.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:u,...f},h)=>C.createElement("svg",{ref:h,...L4,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:UE("lucide",r),...f},[...u.map(([p,x])=>C.createElement(p,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(s,e)=>{const t=C.forwardRef(({className:n,...r},o)=>C.createElement(V4,{ref:o,iconNode:e,className:UE(`lucide-${O4(Kw(s))}`,`lucide-${s}`,n),...r}));return t.displayName=Kw(s),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nl=at("arrow-left",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],B4=at("camera",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M0=at("check",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Js=at("chevron-down",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Yw=at("chevron-up",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qw=at("circle-alert",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],W4=at("credit-card",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BE=at("eye-off",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FE=at("eye",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qE=at("funnel",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Z4=at("headphones",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],lr=at("heart",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],tR=at("house",eR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fm=at("image",sR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],HE=at("lock",nR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],rR=at("log-out",iR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],L0=at("mail",aR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],GE=at("map-pin",lR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M5 12h14",key:"1ays0h"}]],dl=at("minus",oR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],uR=at("navigation",cR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],hR=at("phone",dR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kn=at("plus",fR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$E=at("refresh-cw",mR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],WE=at("save",pR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],hr=at("search",gR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],V0=at("shopping-bag",xR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],bt=at("shopping-cart",yR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],KE=at("square-pen",vR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Qn=at("trash",bR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],wR=at("truck",_R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],z0=at("upload",NR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jf=at("user",ER);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],SR=at("wallet",jR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qs=at("x",TR);var YE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Xw=mt.createContext&&mt.createContext(YE),CR=["attr","size","title"];function AR(s,e){if(s==null)return{};var t=IR(s,e),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(t[n]=s[n])}return t}function IR(s,e){if(s==null)return{};var t={};for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){if(e.indexOf(n)>=0)continue;t[n]=s[n]}return t}function Sf(){return Sf=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Sf.apply(this,arguments)}function Zw(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function Tf(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zw(Object(t),!0).forEach(function(n){RR(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Zw(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function RR(s,e,t){return e=kR(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function kR(s){var e=DR(s,"string");return typeof e=="symbol"?e:e+""}function DR(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function QE(s){return s&&s.map((e,t)=>mt.createElement(e.tag,Tf({key:t},e.attr),QE(e.child)))}function ut(s){return e=>mt.createElement(PR,Sf({attr:Tf({},s.attr)},e),QE(s.child))}function PR(s){var e=t=>{var{attr:n,size:r,title:o}=s,u=AR(s,CR),f=r||t.size||"1em",h;return t.className&&(h=t.className),s.className&&(h=(h?h+" ":"")+s.className),mt.createElement("svg",Sf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:h,style:Tf(Tf({color:s.color||t.color},t.style),s.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),o&&mt.createElement("title",null,o),s.children)};return Xw!==void 0?mt.createElement(Xw.Consumer,null,t=>e(t)):e(YE)}function OR(s){return ut({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M9,15 L9,22 L22,22 L22,2 L9,2 L9,9 M18,12 L0,12 M13,7 L18,12 L13,17"},child:[]}]})(s)}const MR=()=>{const s=nn();return a.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white shadow-md border-t flex justify-around py-2 z-50",children:[a.jsxs(Pe,{to:"/",className:"flex flex-col items-center text-sm text-gray-700",children:[a.jsx(tR,{className:`w-6 h-6 ${s.pathname==="/"?"text-purple-600":""}`}),a.jsx("span",{children:"Home"})]}),a.jsxs(Pe,{to:"/cart",className:"flex flex-col items-center text-sm text-gray-700",children:[a.jsx(bt,{className:`w-6 h-6 ${s.pathname==="/cart"?"text-purple-600":""}`}),a.jsx("span",{children:"Cart"})]}),a.jsxs(Pe,{to:"/login",className:"flex flex-col items-center text-sm text-gray-700",children:[a.jsx(OR,{className:`w-6 h-6 ${s.pathname==="/login"?"text-purple-600":""}`}),a.jsx("span",{children:"Login"})]})]})};function ys(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(s)}function br(s){return ut({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(s)}const Xs="/assets/apple-9rFS1-yw.jpeg",LR=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se=function(s,e){if(!s)throw ec(e)},ec=function(s){return new Error("Firebase Database ("+XE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},VR=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=s[t++];e[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=s[t++],u=s[t++],f=s[t++],h=((r&7)<<18|(o&63)<<12|(u&63)<<6|f&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=s[t++],u=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|u&63)}}return e.join("")},Ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const o=s[r],u=r+1<s.length,f=u?s[r+1]:0,h=r+2<s.length,p=h?s[r+2]:0,x=o>>2,v=(o&3)<<4|f>>4;let _=(f&15)<<2|p>>6,N=p&63;h||(N=64,u||(_=64)),n.push(t[x],t[v],t[_],t[N])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ZE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):VR(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const o=t[s.charAt(r++)],f=r<s.length?t[s.charAt(r)]:0;++r;const p=r<s.length?t[s.charAt(r)]:64;++r;const v=r<s.length?t[s.charAt(r)]:64;if(++r,o==null||f==null||p==null||v==null)throw new zR;const _=o<<2|f>>4;if(n.push(_),p!==64){const N=f<<4&240|p>>2;if(n.push(N),v!==64){const w=p<<6&192|v;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class zR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JE=function(s){const e=ZE(s);return Ux.encodeByteArray(e,!0)},Cf=function(s){return JE(s).replace(/\./g,"")},Af=function(s){try{return Ux.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(s){return ej(void 0,s)}function ej(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!BR(t)||(s[t]=ej(s[t],e[t]));return s}function BR(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=()=>FR().__FIREBASE_DEFAULTS__,HR=()=>{if(typeof process>"u"||typeof Jw>"u")return;const s=Jw.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},GR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Af(s[1]);return e&&JSON.parse(e)},mm=()=>{try{return LR()||qR()||HR()||GR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},tj=s=>{var e,t;return(t=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},sj=s=>{const e=tj(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},nj=()=>{var s;return(s=mm())===null||s===void 0?void 0:s.config},ij=s=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,o=s.sub||s.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Cf(JSON.stringify(t)),Cf(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vs())}function $R(){var s;const e=(s=mm())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aj(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function lj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){const s=Vs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function YR(){return XE.NODE_ADMIN===!0}function QR(){return!$R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oj(){try{return typeof indexedDB=="object"}catch{return!1}}function cj(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function XR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="FirebaseError";class si extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=ZR,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],u=o?JR(o,n):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new si(r,f,n)}}function JR(s,e){return s.replace(ek,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const ek=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(s){return JSON.parse(s)}function Es(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=function(s){let e={},t={},n={},r="";try{const o=s.split(".");e=Qu(Af(o[0])||""),t=Qu(Af(o[1])||""),r=o[2],n=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:n,signature:r}},tk=function(s){const e=uj(s),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},sk=function(s){const e=uj(s).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Lo(s,e){if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}function U0(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function If(s,e,t){const n={};for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=e.call(t,s[r],r,s));return n}function Xn(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const o=s[r],u=e[r];if(e1(o)&&e1(u)){if(!Xn(o,u))return!1}else if(o!==u)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function e1(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ku(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,o]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Du(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)n[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)n[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const _=n[v-3]^n[v-8]^n[v-14]^n[v-16];n[v]=(_<<1|_>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],u=this.chain_[2],f=this.chain_[3],h=this.chain_[4],p,x;for(let v=0;v<80;v++){v<40?v<20?(p=f^o&(u^f),x=1518500249):(p=o^u^f,x=1859775393):v<60?(p=o&u|f&(o|u),x=2400959708):(p=o^u^f,x=3395469782);const _=(r<<5|r>>>27)+p+h+x+n[v]&4294967295;h=f,f=u,u=(o<<30|o>>>2)&4294967295,o=r,r=_}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const n=t-this.blockSize;let r=0;const o=this.buf_;let u=this.inbuf_;for(;r<t;){if(u===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(o[u]=e.charCodeAt(r),++u,++r,u===this.blockSize){this.compress_(o),u=0;break}}else for(;r<t;)if(o[u]=e[r],++u,++r,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[r]>>o&255,++n;return e}}function ik(s,e){const t=new rk(s,e);return t.subscribe.bind(t)}class rk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");ak(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=r0),r.error===void 0&&(r.error=r0),r.complete===void 0&&(r.complete=r0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ak(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function r0(){}function lk(s,e){return`${s} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r>=55296&&r<=56319){const o=r-55296;n++,Se(n<s.length,"Surrogate pair missing trail surrogate.");const u=s.charCodeAt(n)-56320;r=65536+(o<<10)+u}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pm=function(s){let e=0;for(let t=0;t<s.length;t++){const n=s.charCodeAt(t);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=1e3,uk=2,dk=4*60*60*1e3,hk=.5;function t1(s,e=ck,t=uk){const n=e*Math.pow(t,s),r=Math.round(hk*n*(Math.random()-.5)*2);return Math.min(dk,n+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s){return s&&s._delegate?s._delegate:s}class Pn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Bx;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pk(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);n===f&&u.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:mk(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mk(s){return s===il?void 0:s}function pk(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Xe||(Xe={}));const xk={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},yk=Xe.INFO,vk={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},bk=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=vk[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dd{constructor(e){this.name=e,this._logLevel=yk,this._logHandler=bk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const _k=(s,e)=>e.some(t=>s instanceof t);let s1,n1;function wk(){return s1||(s1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nk(){return n1||(n1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dj=new WeakMap,B0=new WeakMap,hj=new WeakMap,a0=new WeakMap,qx=new WeakMap;function Ek(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",o),s.removeEventListener("error",u)},o=()=>{t(aa(s.result)),r()},u=()=>{n(s.error),r()};s.addEventListener("success",o),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dj.set(t,s)}).catch(()=>{}),qx.set(e,s),e}function jk(s){if(B0.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",o),s.removeEventListener("error",u),s.removeEventListener("abort",u)},o=()=>{t(),r()},u=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",o),s.addEventListener("error",u),s.addEventListener("abort",u)});B0.set(s,e)}let F0={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return B0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||hj.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return aa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Sk(s){F0=s(F0)}function Tk(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(l0(this),e,...t);return hj.set(n,e.sort?e.sort():[e]),aa(n)}:Nk().includes(s)?function(...e){return s.apply(l0(this),e),aa(dj.get(this))}:function(...e){return aa(s.apply(l0(this),e))}}function Ck(s){return typeof s=="function"?Tk(s):(s instanceof IDBTransaction&&jk(s),_k(s,wk())?new Proxy(s,F0):s)}function aa(s){if(s instanceof IDBRequest)return Ek(s);if(a0.has(s))return a0.get(s);const e=Ck(s);return e!==s&&(a0.set(s,e),qx.set(e,s)),e}const l0=s=>qx.get(s);function fj(s,e,{blocked:t,upgrade:n,blocking:r,terminated:o}={}){const u=indexedDB.open(s,e),f=aa(u);return n&&u.addEventListener("upgradeneeded",h=>{n(aa(u.result),h.oldVersion,h.newVersion,aa(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),f.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const Ak=["get","getKey","getAll","getAllKeys","count"],Ik=["put","add","delete","clear"],o0=new Map;function i1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(o0.get(e))return o0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=Ik.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Ak.includes(t)))return;const o=async function(u,...f){const h=this.transaction(u,r?"readwrite":"readonly");let p=h.store;return n&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),r&&h.done]))[0]};return o0.set(e,o),o}Sk(s=>({...s,get:(e,t,n)=>i1(e,t)||s.get(e,t,n),has:(e,t)=>!!i1(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kk(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function kk(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const q0="@firebase/app",r1="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new dd("@firebase/app"),Dk="@firebase/app-compat",Pk="@firebase/analytics-compat",Ok="@firebase/analytics",Mk="@firebase/app-check-compat",Lk="@firebase/app-check",Vk="@firebase/auth",zk="@firebase/auth-compat",Uk="@firebase/database",Bk="@firebase/data-connect",Fk="@firebase/database-compat",qk="@firebase/functions",Hk="@firebase/functions-compat",Gk="@firebase/installations",$k="@firebase/installations-compat",Wk="@firebase/messaging",Kk="@firebase/messaging-compat",Yk="@firebase/performance",Qk="@firebase/performance-compat",Xk="@firebase/remote-config",Zk="@firebase/remote-config-compat",Jk="@firebase/storage",eD="@firebase/storage-compat",tD="@firebase/firestore",sD="@firebase/vertexai",nD="@firebase/firestore-compat",iD="firebase",rD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="[DEFAULT]",aD={[q0]:"fire-core",[Dk]:"fire-core-compat",[Ok]:"fire-analytics",[Pk]:"fire-analytics-compat",[Lk]:"fire-app-check",[Mk]:"fire-app-check-compat",[Vk]:"fire-auth",[zk]:"fire-auth-compat",[Uk]:"fire-rtdb",[Bk]:"fire-data-connect",[Fk]:"fire-rtdb-compat",[qk]:"fire-fn",[Hk]:"fire-fn-compat",[Gk]:"fire-iid",[$k]:"fire-iid-compat",[Wk]:"fire-fcm",[Kk]:"fire-fcm-compat",[Yk]:"fire-perf",[Qk]:"fire-perf-compat",[Xk]:"fire-rc",[Zk]:"fire-rc-compat",[Jk]:"fire-gcs",[eD]:"fire-gcs-compat",[tD]:"fire-fst",[nD]:"fire-fst-compat",[sD]:"fire-vertex","fire-js":"fire-js",[iD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,lD=new Map,G0=new Map;function a1(s,e){try{s.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Zn(s){const e=s.name;if(G0.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;G0.set(e,s);for(const t of Rf.values())a1(t,s);for(const t of lD.values())a1(t,s);return!0}function va(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ys(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new El("app","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=rD;function mj(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n=Object.assign({name:H0,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw la.create("bad-app-name",{appName:String(r)});if(t||(t=nj()),!t)throw la.create("no-options");const o=Rf.get(r);if(o){if(Xn(t,o.options)&&Xn(n,o.config))return o;throw la.create("duplicate-app",{appName:r})}const u=new gk(r);for(const h of G0.values())u.addComponent(h);const f=new cD(t,n,u);return Rf.set(r,f),f}function gm(s=H0){const e=Rf.get(s);if(!e&&s===H0&&nj())return mj();if(!e)throw la.create("no-app",{appName:s});return e}function en(s,e,t){var n;let r=(n=aD[s])!==null&&n!==void 0?n:s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(f.join(" "));return}Zn(new Pn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="firebase-heartbeat-database",dD=1,Xu="firebase-heartbeat-store";let c0=null;function pj(){return c0||(c0=fj(uD,dD,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Xu)}catch(t){console.warn(t)}}}}).catch(s=>{throw la.create("idb-open",{originalErrorMessage:s.message})})),c0}async function hD(s){try{const t=(await pj()).transaction(Xu),n=await t.objectStore(Xu).get(gj(s));return await t.done,n}catch(e){if(e instanceof si)fr.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(t.message)}}}async function l1(s,e){try{const n=(await pj()).transaction(Xu,"readwrite");await n.objectStore(Xu).put(e,gj(s)),await n.done}catch(t){if(t instanceof si)fr.warn(t.message);else{const n=la.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fr.warn(n.message)}}}function gj(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=1024,mD=30;class pD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xD(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=o1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>mD){const u=yD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=o1(),{heartbeatsToSend:n,unsentEntries:r}=gD(this._heartbeatsCache.heartbeats),o=Cf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return fr.warn(t),""}}}function o1(){return new Date().toISOString().substring(0,10)}function gD(s,e=fD){const t=[];let n=s.slice();for(const r of s){const o=t.find(u=>u.agent===r.agent);if(o){if(o.dates.push(r.date),c1(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),c1(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class xD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oj()?cj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return l1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return l1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function c1(s){return Cf(JSON.stringify({version:2,heartbeats:s})).length}function yD(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(s){Zn(new Pn("platform-logger",e=>new Rk(e),"PRIVATE")),Zn(new Pn("heartbeat",e=>new pD(e),"PRIVATE")),en(q0,r1,s),en(q0,r1,"esm2017"),en("fire-js","")}vD("");function Hx(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function xj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bD=xj,yj=new El("auth","Firebase",xj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new dd("@firebase/auth");function _D(s,...e){kf.logLevel<=Xe.WARN&&kf.warn(`Auth (${jl}): ${s}`,...e)}function hf(s,...e){kf.logLevel<=Xe.ERROR&&kf.error(`Auth (${jl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(s,...e){throw $x(s,...e)}function Wn(s,...e){return $x(s,...e)}function Gx(s,e,t){const n=Object.assign(Object.assign({},bD()),{[e]:t});return new El("auth","Firebase",n).create(e,{appName:s.name})}function or(s){return Gx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wD(s,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&On(s,"argument-error"),Gx(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $x(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return yj.create(s,...e)}function Ue(s,e,...t){if(!s)throw $x(e,...t)}function nr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hf(e),new Error(e)}function mr(s,e){s||nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function ND(){return u1()==="http:"||u1()==="https:"}function u1(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ND()||aj()||"connection"in navigator)?navigator.onLine:!0}function jD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=Fx()||lj()}get(){return ED()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(s,e){mr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CD=new hd(3e4,6e4);function ba(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function wr(s,e,t,n,r={}){return bj(s,r,async()=>{let o={},u={};n&&(e==="GET"?u=n:o={body:JSON.stringify(n)});const f=tc(Object.assign({key:s.config.apiKey},u)).slice(1),h=await s._getAdditionalHeaders();h["Content-Type"]="application/json",s.languageCode&&(h["X-Firebase-Locale"]=s.languageCode);const p=Object.assign({method:e,headers:h},o);return WR()||(p.referrerPolicy="no-referrer"),vj.fetch()(await _j(s,s.config.apiHost,t,f),p)})}async function bj(s,e,t){s._canInitEmulator=!1;const n=Object.assign(Object.assign({},SD),e);try{const r=new ID(s),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Jh(s,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const f=o.ok?u.errorMessage:u.error.message,[h,p]=f.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(s,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw Jh(s,"email-already-in-use",u);if(h==="USER_DISABLED")throw Jh(s,"user-disabled",u);const x=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Gx(s,x,p);On(s,x)}}catch(r){if(r instanceof si)throw r;On(s,"network-request-failed",{message:String(r)})}}async function fd(s,e,t,n,r={}){const o=await wr(s,e,t,n,r);return"mfaPendingCredential"in o&&On(s,"multi-factor-auth-required",{_serverResponse:o}),o}async function _j(s,e,t,n){const r=`${e}${t}?${n}`,o=s,u=o.config.emulator?Wx(s.config,r):`${s.config.apiScheme}://${r}`;return TD.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function AD(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ID{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Wn(this.auth,"network-request-failed")),CD.get())})}}function Jh(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Wn(s,e,n);return r.customData._tokenResponse=t,r}function d1(s){return s!==void 0&&s.enterprise!==void 0}class RD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kD(s,e){return wr(s,"GET","/v2/recaptchaConfig",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(s,e){return wr(s,"POST","/v1/accounts:delete",e)}async function Df(s,e){return wr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PD(s,e=!1){const t=kt(s),n=await t.getIdToken(e),r=Kx(n);Ue(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:r,token:n,authTime:Vu(u0(r.auth_time)),issuedAtTime:Vu(u0(r.iat)),expirationTime:Vu(u0(r.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function u0(s){return Number(s)*1e3}function Kx(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const r=Af(t);return r?JSON.parse(r):(hf("Failed to decode base64 JWT payload"),null)}catch(r){return hf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function h1(s){const e=Kx(s);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof si&&OD(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function OD({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(s){var e;const t=s.auth,n=await s.getIdToken(),r=await Vo(s,Df(t,{idToken:n}));Ue(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wj(o.providerUserInfo):[],f=VD(s.providerData,u),h=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),x=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new W0(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(s,v)}async function LD(s){const e=kt(s);await Pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VD(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function wj(s){return s.map(e=>{var{providerId:t}=e,n=Hx(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(s,e){const t=await bj(s,{},async()=>{const n=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=s.config,u=await _j(s,r,"/v1/token",`key=${o}`),f=await s._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",vj.fetch()(u,{method:"POST",headers:f,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UD(s,e){return wr(s,"POST","/v2/accounts:revokeToken",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=h1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await zD(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,u=new Io;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),u.refreshToken=n),r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),o&&(Ue(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(s,e){Ue(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=Hx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new W0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PD(this,e)}reload(){return LD(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(or(this.auth));const e=await this.getIdToken();return await Vo(this,DD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,u,f,h,p,x;const v=(n=t.displayName)!==null&&n!==void 0?n:void 0,_=(r=t.email)!==null&&r!==void 0?r:void 0,N=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(u=t.photoURL)!==null&&u!==void 0?u:void 0,E=(f=t.tenantId)!==null&&f!==void 0?f:void 0,R=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,T=(p=t.createdAt)!==null&&p!==void 0?p:void 0,k=(x=t.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:P,emailVerified:H,isAnonymous:B,providerData:G,stsTokenManager:M}=t;Ue(P&&M,e,"internal-error");const A=Io.fromJSON(this.name,M);Ue(typeof P=="string",e,"internal-error"),ea(v,e.name),ea(_,e.name),Ue(typeof H=="boolean",e,"internal-error"),Ue(typeof B=="boolean",e,"internal-error"),ea(N,e.name),ea(w,e.name),ea(E,e.name),ea(R,e.name),ea(T,e.name),ea(k,e.name);const I=new Gn({uid:P,auth:e,email:_,emailVerified:H,displayName:v,isAnonymous:B,photoURL:w,phoneNumber:N,tenantId:E,stsTokenManager:A,createdAt:T,lastLoginAt:k});return G&&Array.isArray(G)&&(I.providerData=G.map(O=>Object.assign({},O))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,t,n=!1){const r=new Io;r.updateFromServerResponse(t);const o=new Gn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ue(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?wj(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),f=new Io;f.updateFromIdToken(n);const h=new Gn({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new W0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;function ir(s){mr(s instanceof Function,"Expected a class definition");let e=f1.get(s);return e?(mr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,f1.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nj.type="NONE";const m1=Nj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(s,e,t){return`firebase:${s}:${e}:${t}`}class Ro{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=ff(this.userKey,r.apiKey,o),this.fullPersistenceKey=ff("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Df(this.auth,{idToken:e}).catch(()=>{});return t?Gn._fromGetAccountInfoResponse(this.auth,t,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ro(ir(m1),e,n);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||ir(m1);const u=ff(n,e.config.apiKey,e.name);let f=null;for(const p of t)try{const x=await p._get(u);if(x){let v;if(typeof x=="string"){const _=await Df(e,{idToken:x}).catch(()=>{});if(!_)break;v=await Gn._fromGetAccountInfoResponse(e,_,x)}else v=Gn._fromJSON(e,x);p!==o&&(f=v),o=p;break}}catch{}const h=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ro(o,e,n):(o=h[0],f&&await o._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Ro(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ej(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Aj(e))return"Blackberry";if(Ij(e))return"Webos";if(jj(e))return"Safari";if((e.includes("chrome/")||Sj(e))&&!e.includes("edge/"))return"Chrome";if(Cj(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Ej(s=Vs()){return/firefox\//i.test(s)}function jj(s=Vs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sj(s=Vs()){return/crios\//i.test(s)}function Tj(s=Vs()){return/iemobile/i.test(s)}function Cj(s=Vs()){return/android/i.test(s)}function Aj(s=Vs()){return/blackberry/i.test(s)}function Ij(s=Vs()){return/webos/i.test(s)}function Yx(s=Vs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function BD(s=Vs()){var e;return Yx(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FD(){return KR()&&document.documentMode===10}function Rj(s=Vs()){return Yx(s)||Cj(s)||Ij(s)||Aj(s)||/windows phone/i.test(s)||Tj(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(s,e=[]){let t;switch(s){case"Browser":t=p1(Vs());break;case"Worker":t=`${p1(Vs())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((u,f)=>{try{const h=e(o);u(h)}catch(h){f(h)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(s,e={}){return wr(s,"GET","/v2/passwordPolicy",ba(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=6;class $D{constructor(e){var t,n,r,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:GD,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,u,f;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(u=h.containsNumericCharacter)!==null&&u!==void 0?u:!0),h.isValid&&(h.isValid=(f=h.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),h}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g1(this),this.idTokenSubscription=new g1(this),this.beforeStateQueue=new qD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ir(t)),this._initializationPromise=this.queue(async()=>{var n,r,o;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Df(this,{idToken:e}),n=await Gn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ys(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===f)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(or(this));const t=e?kt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HD(this),t=new $D(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await UD(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ir(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[ir(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(f,this,"internal-error"),f.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,r);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&_D(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _a(s){return kt(s)}class g1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ik(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KD(s){xm=s}function Dj(s){return xm.loadJS(s)}function YD(){return xm.recaptchaEnterpriseScript}function QD(){return xm.gapiScript}function XD(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class ZD{constructor(){this.enterprise=new JD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class JD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eP="recaptcha-enterprise",Pj="NO_RECAPTCHA";class tP{constructor(e){this.type=eP,this.auth=_a(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,f)=>{kD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new RD(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(h=>{f(h)})})}function r(o,u,f){const h=window.grecaptcha;d1(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(Pj)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZD().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{n(this.auth).then(f=>{if(!t&&d1(window.grecaptcha))r(f,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=YD();h.length!==0&&(h+=f),Dj(h).then(()=>{r(f,o,u)}).catch(p=>{u(p)})}}).catch(f=>{u(f)})})}}async function x1(s,e,t,n=!1,r=!1){const o=new tP(s);let u;if(r)u=Pj;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const h=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const h=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return n?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function K0(s,e,t,n,r){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await x1(s,e,t,t==="getOobCode");return n(s,u)}else return n(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await x1(s,e,t,t==="getOobCode");return n(s,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(s,e){const t=va(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(Xn(o,e??{}))return r;On(r,"already-initialized")}return t.initialize({options:e})}function nP(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ir);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function iP(s,e,t){const n=_a(s);Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,o=Oj(e),{host:u,port:f}=rP(e),h=f===null?"":`:${f}`,p={url:`${o}//${u}${h}/`},x=Object.freeze({host:u,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){Ue(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ue(Xn(p,n.config.emulator)&&Xn(x,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=p,n.emulatorConfig=x,n.settings.appVerificationDisabledForTesting=!0,aP()}function Oj(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function rP(s){const e=Oj(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const o=r[1];return{host:o,port:y1(n.substr(o.length+1))}}else{const[o,u]=n.split(":");return{host:o,port:y1(u)}}}function y1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function aP(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,t){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}async function lP(s,e){return wr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(s,e){return fd(s,"POST","/v1/accounts:signInWithPassword",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(s,e){return fd(s,"POST","/v1/accounts:signInWithEmailLink",ba(s,e))}async function uP(s,e){return fd(s,"POST","/v1/accounts:signInWithEmailLink",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Qx{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Zu(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return K0(e,t,"signInWithPassword",oP);case"emailLink":return cP(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return K0(e,n,"signUpPassword",lP);case"emailLink":return uP(e,{idToken:t,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(s,e){return fd(s,"POST","/v1/accounts:signInWithIdp",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="http://localhost";class hl extends Qx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=Hx(t,["providerId","signInMethod"]);if(!n||!r)return null;const u=new hl(n,r);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ko(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:dP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fP(s){const e=ku(Du(s)).link,t=e?ku(Du(e)).deep_link_id:null,n=ku(Du(s)).deep_link_id;return(n?ku(Du(n)).link:null)||n||t||e||s}class Xx{constructor(e){var t,n,r,o,u,f;const h=ku(Du(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,x=(n=h.oobCode)!==null&&n!==void 0?n:null,v=hP((r=h.mode)!==null&&r!==void 0?r:null);Ue(p&&x&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=x,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=h.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(f=h.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=fP(e);try{return new Xx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.providerId=sc.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xx.parseLink(t);return Ue(n,"argument-error"),Zu._fromEmailAndCode(e,n.code,n.tenantId)}}sc.PROVIDER_ID="password";sc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Zx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends md{constructor(){super("facebook.com")}static credential(e){return hl._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends md{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hl._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return sr.credential(t,n)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends md{constructor(){super("github.com")}static credential(e){return hl._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com";sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends md{constructor(){super("twitter.com")}static credential(e,t){return hl._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return na.credential(t,n)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(s,e){return fd(s,"POST","/v1/accounts:signUp",ba(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await Gn._fromIdTokenResponse(e,n,r),u=v1(n);return new fl({user:o,providerId:u,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=v1(n);return new fl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function v1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends si{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Of(e,t,n,r)}}function Mj(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(s,o,e,n):o})}async function pP(s,e,t=!1){const n=await Vo(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return fl._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(s,e,t=!1){const{auth:n}=s;if(Ys(n.app))return Promise.reject(or(n));const r="reauthenticate";try{const o=await Vo(s,Mj(n,r,e,s),t);Ue(o.idToken,n,"internal-error");const u=Kx(o.idToken);Ue(u,n,"internal-error");const{sub:f}=u;return Ue(s.uid===f,n,"user-mismatch"),fl._forOperation(s,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&On(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(s,e,t=!1){if(Ys(s.app))return Promise.reject(or(s));const n="signIn",r=await Mj(s,n,e),o=await fl._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(o.user),o}async function xP(s,e){return Lj(_a(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(s){const e=_a(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yP(s,e,t){if(Ys(s.app))return Promise.reject(or(s));const n=_a(s),u=await K0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Vj(s),h}),f=await fl._fromIdTokenResponse(n,"signIn",u);return await n._updateCurrentUser(f.user),f}function vP(s,e,t){return Ys(s.app)?Promise.reject(or(s)):xP(kt(s),sc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Vj(s),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(s,e){return wr(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=kt(s),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Vo(n,bP(n.auth,o));n.displayName=u.displayName||null,n.photoURL=u.photoUrl||null;const f=n.providerData.find(({providerId:h})=>h==="password");f&&(f.displayName=n.displayName,f.photoURL=n.photoURL),await n._updateTokensIfNecessary(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(s,e){return kt(s).setPersistence(e)}function wP(s,e,t,n){return kt(s).onIdTokenChanged(e,t,n)}function NP(s,e,t){return kt(s).beforeAuthStateChanged(e,t)}function EP(s,e,t,n){return kt(s).onAuthStateChanged(e,t,n)}function jP(s){return kt(s).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=1e3,TP=10;class Bj extends Uj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,h)=>{this.notifyListeners(u,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(n);!t&&this.localCache[n]===u||this.notifyListeners(n,u)},o=this.storage.getItem(n);FD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,TP):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},SP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bj.type="LOCAL";const Jx=Bj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj extends Uj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fj.type="SESSION";const qj=Fj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new ym(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const f=Array.from(u).map(async p=>p(t.origin,o)),h=await CP(f);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,u;return new Promise((f,h)=>{const p=ey("",20);r.port1.start();const x=setTimeout(()=>{h(new Error("unsupported_event"))},n);u={messageChannel:r,onMessage(v){const _=v;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(x),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(_.data.response);break;default:clearTimeout(x),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function IP(s){Ni().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function RP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function DP(){return Hj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="firebaseLocalStorageDb",PP=1,Lf="firebaseLocalStorage",$j="fbase_key";class pd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vm(s,e){return s.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function OP(){const s=indexedDB.deleteDatabase(Gj);return new pd(s).toPromise()}function Y0(){const s=indexedDB.open(Gj,PP);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(Lf,{keyPath:$j})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(Lf)?e(n):(n.close(),await OP(),e(await Y0()))})})}async function b1(s,e,t){const n=vm(s,!0).put({[$j]:e,value:t});return new pd(n).toPromise()}async function MP(s,e){const t=vm(s,!1).get(e),n=await new pd(t).toPromise();return n===void 0?null:n.value}function _1(s,e){const t=vm(s,!0).delete(e);return new pd(t).toPromise()}const LP=800,VP=3;class Wj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>VP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(DP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RP(),!this.activeServiceWorker)return;this.sender=new AP(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y0();return await b1(e,Mf,"1"),await _1(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>b1(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>MP(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=vm(r,!1).getAll();return new pd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wj.type="LOCAL";const zP=Wj;new hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(s,e){return e?ir(e):(Ue(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Qx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UP(s){return Lj(s.auth,new ty(s),s.bypassAuthState)}function BP(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),gP(t,new ty(s),s.bypassAuthState)}async function FP(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),pP(t,new ty(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:u,type:f}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UP;case"linkViaPopup":case"linkViaRedirect":return FP;case"reauthViaPopup":case"reauthViaRedirect":return BP;default:On(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new hd(2e3,1e4);async function HP(s,e,t){if(Ys(s.app))return Promise.reject(Wn(s,"operation-not-supported-in-this-environment"));const n=_a(s);wD(s,e,Zx);const r=Kj(n,t);return new ll(n,"signInViaPopup",e,r).executeNotNull()}class ll extends Yj{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qP.get())};e()}}ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="pendingRedirect",mf=new Map;class $P extends Yj{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const n=await WP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WP(s,e){const t=QP(e),n=YP(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function KP(s,e){mf.set(s._key(),e)}function YP(s){return ir(s._redirectPersistence)}function QP(s){return ff(GP,s.config.apiKey,s.name)}async function XP(s,e,t=!1){if(Ys(s.app))return Promise.reject(or(s));const n=_a(s),r=Kj(n,e),u=await new $P(n,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await n._persistUserIfCurrent(u.user),await n._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=10*60*1e3;class JP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Qj(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZP&&this.cachedEventUids.clear(),this.cachedEventUids.has(w1(e))}saveEventToCache(e){this.cachedEventUids.add(w1(e)),this.lastProcessedEventTime=Date.now()}}function w1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Qj({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qj(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(s,e={}){return wr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n6=/^https?/;async function i6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await t6(s);for(const t of e)try{if(r6(t))return}catch{}On(s,"unauthorized-domain")}function r6(s){const e=$0(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===n}if(!n6.test(t))return!1;if(s6.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new hd(3e4,6e4);function N1(){const s=Ni().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function l6(s){return new Promise((e,t)=>{var n,r,o;function u(){N1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N1(),t(Wn(s,"network-request-failed"))},timeout:a6.get()})}if(!((r=(n=Ni().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Ni().gapi)===null||o===void 0)&&o.load)u();else{const f=XD("iframefcb");return Ni()[f]=()=>{gapi.load?u():t(Wn(s,"network-request-failed"))},Dj(`${QD()}?onload=${f}`).catch(h=>t(h))}}).catch(e=>{throw pf=null,e})}let pf=null;function o6(s){return pf=pf||l6(s),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new hd(5e3,15e3),u6="__/auth/iframe",d6="emulator/auth/iframe",h6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m6(s){const e=s.config;Ue(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Wx(e,d6):`https://${s.config.authDomain}/${u6}`,n={apiKey:e.apiKey,appName:s.name,v:jl},r=f6.get(s.config.apiHost);r&&(n.eid=r);const o=s._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${tc(n).slice(1)}`}async function p6(s){const e=await o6(s),t=Ni().gapi;return Ue(t,s,"internal-error"),e.open({where:document.body,url:m6(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h6,dontclear:!0},n=>new Promise(async(r,o)=>{await n.restyle({setHideOnLeave:!1});const u=Wn(s,"network-request-failed"),f=Ni().setTimeout(()=>{o(u)},c6.get());function h(){Ni().clearTimeout(f),r(n)}n.ping(h).then(h,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x6=500,y6=600,v6="_blank",b6="http://localhost";class E1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _6(s,e,t,n=x6,r=y6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const h=Object.assign(Object.assign({},g6),{width:n.toString(),height:r.toString(),top:o,left:u}),p=Vs().toLowerCase();t&&(f=Sj(p)?v6:t),Ej(p)&&(e=e||b6,h.scrollbars="yes");const x=Object.entries(h).reduce((_,[N,w])=>`${_}${N}=${w},`,"");if(BD(p)&&f!=="_self")return w6(e||"",f),new E1(null);const v=window.open(e||"",f,x);Ue(v,s,"popup-blocked");try{v.focus()}catch{}return new E1(v)}function w6(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="__/auth/handler",E6="emulator/auth/handler",j6=encodeURIComponent("fac");async function j1(s,e,t,n,r,o){Ue(s.config.authDomain,s,"auth-domain-config-required"),Ue(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:jl,eventId:r};if(e instanceof Zx){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",U0(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,v]of Object.entries({}))u[x]=v}if(e instanceof md){const x=e.getScopes().filter(v=>v!=="");x.length>0&&(u.scopes=x.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const x of Object.keys(f))f[x]===void 0&&delete f[x];const h=await s._getAppCheckToken(),p=h?`#${j6}=${encodeURIComponent(h)}`:"";return`${S6(s)}?${tc(f).slice(1)}${p}`}function S6({config:s}){return s.emulator?Wx(s,E6):`https://${s.authDomain}/${N6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="webStorageSupport";class T6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qj,this._completeRedirectFn=XP,this._overrideRedirectResult=KP}async _openPopup(e,t,n,r){var o;mr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await j1(e,t,n,$0(),r);return _6(e,u,ey())}async _openRedirect(e,t,n,r){await this._originValidation(e);const o=await j1(e,t,n,$0(),r);return IP(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(mr(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await p6(e),n=new JP(e);return t.register("authEvent",r=>(Ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(d0,{type:d0},r=>{var o;const u=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[d0];u!==void 0&&t(!!u),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=i6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Rj()||jj()||Yx()}}const C6=T6;var S1="@firebase/auth",T1="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R6(s){Zn(new Pn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=n.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kj(s)},p=new WD(n,r,o,h);return nP(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Zn(new Pn("auth-internal",e=>{const t=_a(e.getProvider("auth").getImmediate());return(n=>new A6(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(S1,T1,I6(s)),en(S1,T1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=5*60,D6=ij("authIdTokenMaxAge")||k6;let C1=null;const P6=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>D6)return;const r=t==null?void 0:t.token;C1!==r&&(C1=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function O6(s=gm()){const e=va(s,"auth");if(e.isInitialized())return e.getImmediate();const t=sP(s,{popupRedirectResolver:C6,persistence:[zP,Jx,qj]}),n=ij("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const u=P6(o.toString());NP(t,u,()=>u(t.currentUser)),wP(t,f=>u(f))}}const r=tj("auth");return r&&iP(t,`http://${r}`),t}function M6(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}KD({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const o=Wn("internal-error");o.customData=r,t(o)},n.type="text/javascript",n.charset="UTF-8",M6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R6("Browser");var L6="firebase",V6="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(L6,V6,"app");const Xj="@firebase/installations",sy="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1e4,Jj=`w:${sy}`,eS="FIS_v2",z6="https://firebaseinstallations.googleapis.com/v1",U6=60*60*1e3,B6="installations",F6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ml=new El(B6,F6,q6);function tS(s){return s instanceof si&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS({projectId:s}){return`${z6}/projects/${s}/installations`}function nS(s){return{token:s.token,requestStatus:2,expiresIn:G6(s.expiresIn),creationTime:Date.now()}}async function iS(s,e){const n=(await e.json()).error;return ml.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function rS({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function H6(s,{refreshToken:e}){const t=rS(s);return t.append("Authorization",$6(e)),t}async function aS(s){const e=await s();return e.status>=500&&e.status<600?s():e}function G6(s){return Number(s.replace("s","000"))}function $6(s){return`${eS} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const n=sS(s),r=rS(s),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const u={fid:t,authVersion:eS,appId:s.appId,sdkVersion:Jj},f={method:"POST",headers:r,body:JSON.stringify(u)},h=await aS(()=>fetch(n,f));if(h.ok){const p=await h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:nS(p.authToken)}}else throw await iS("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=/^[cdef][\w-]{21}$/,Q0="";function Q6(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=X6(s);return Y6.test(t)?t:Q0}catch{return Q0}}function X6(s){return K6(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;function cS(s,e){const t=bm(s);uS(t,e),Z6(t,e)}function uS(s,e){const t=oS.get(s);if(t)for(const n of t)n(e)}function Z6(s,e){const t=J6();t&&t.postMessage({key:s,fid:e}),eO()}let ol=null;function J6(){return!ol&&"BroadcastChannel"in self&&(ol=new BroadcastChannel("[Firebase] FID Change"),ol.onmessage=s=>{uS(s.data.key,s.data.fid)}),ol}function eO(){oS.size===0&&ol&&(ol.close(),ol=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="firebase-installations-database",sO=1,pl="firebase-installations-store";let h0=null;function ny(){return h0||(h0=fj(tO,sO,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(pl)}}})),h0}async function Vf(s,e){const t=bm(s),r=(await ny()).transaction(pl,"readwrite"),o=r.objectStore(pl),u=await o.get(t);return await o.put(e,t),await r.done,(!u||u.fid!==e.fid)&&cS(s,e.fid),e}async function dS(s){const e=bm(s),n=(await ny()).transaction(pl,"readwrite");await n.objectStore(pl).delete(e),await n.done}async function _m(s,e){const t=bm(s),r=(await ny()).transaction(pl,"readwrite"),o=r.objectStore(pl),u=await o.get(t),f=e(u);return f===void 0?await o.delete(t):await o.put(f,t),await r.done,f&&(!u||u.fid!==f.fid)&&cS(s,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(s){let e;const t=await _m(s.appConfig,n=>{const r=nO(n),o=iO(s,r);return e=o.registrationPromise,o.installationEntry});return t.fid===Q0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function nO(s){const e=s||{fid:Q6(),registrationStatus:0};return hS(e)}function iO(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ml.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=rO(s,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aO(s)}:{installationEntry:e}}async function rO(s,e){try{const t=await W6(s,e);return Vf(s.appConfig,t)}catch(t){throw tS(t)&&t.customData.serverCode===409?await dS(s.appConfig):await Vf(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function aO(s){let e=await A1(s.appConfig);for(;e.registrationStatus===1;)await lS(100),e=await A1(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await iy(s);return n||t}return e}function A1(s){return _m(s,e=>{if(!e)throw ml.create("installation-not-found");return hS(e)})}function hS(s){return lO(s)?{fid:s.fid,registrationStatus:0}:s}function lO(s){return s.registrationStatus===1&&s.registrationTime+Zj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO({appConfig:s,heartbeatServiceProvider:e},t){const n=cO(s,t),r=H6(s,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&r.append("x-firebase-client",p)}const u={installation:{sdkVersion:Jj,appId:s.appId}},f={method:"POST",headers:r,body:JSON.stringify(u)},h=await aS(()=>fetch(n,f));if(h.ok){const p=await h.json();return nS(p)}else throw await iS("Generate Auth Token",h)}function cO(s,{fid:e}){return`${sS(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(s,e=!1){let t;const n=await _m(s.appConfig,o=>{if(!fS(o))throw ml.create("not-registered");const u=o.authToken;if(!e&&hO(u))return o;if(u.requestStatus===1)return t=uO(s,e),o;{if(!navigator.onLine)throw ml.create("app-offline");const f=mO(o);return t=dO(s,f),f}});return t?await t:n.authToken}async function uO(s,e){let t=await I1(s.appConfig);for(;t.authToken.requestStatus===1;)await lS(100),t=await I1(s.appConfig);const n=t.authToken;return n.requestStatus===0?ry(s,e):n}function I1(s){return _m(s,e=>{if(!fS(e))throw ml.create("not-registered");const t=e.authToken;return pO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function dO(s,e){try{const t=await oO(s,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Vf(s.appConfig,n),t}catch(t){if(tS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await dS(s.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Vf(s.appConfig,n)}throw t}}function fS(s){return s!==void 0&&s.registrationStatus===2}function hO(s){return s.requestStatus===2&&!fO(s)}function fO(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+U6}function mO(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function pO(s){return s.requestStatus===1&&s.requestTime+Zj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(s){const e=s,{installationEntry:t,registrationPromise:n}=await iy(e);return n?n.catch(console.error):ry(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(s,e=!1){const t=s;return await yO(t),(await ry(t,e)).token}async function yO(s){const{registrationPromise:e}=await iy(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(s){if(!s||!s.options)throw f0("App Configuration");if(!s.name)throw f0("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw f0(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function f0(s){return ml.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="installations",bO="installations-internal",_O=s=>{const e=s.getProvider("app").getImmediate(),t=vO(e),n=va(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},wO=s=>{const e=s.getProvider("app").getImmediate(),t=va(e,mS).getImmediate();return{getId:()=>gO(t),getToken:r=>xO(t,r)}};function NO(){Zn(new Pn(mS,_O,"PUBLIC")),Zn(new Pn(bO,wO,"PRIVATE"))}NO();en(Xj,sy);en(Xj,sy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="analytics",EO="firebase_id",jO="origin",SO=60*1e3,TO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ay="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new dd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new El("analytics","Analytics",CO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(s){if(!s.startsWith(ay)){const e=xn.create("invalid-gtag-resource",{gtagURL:s});return tn.warn(e.message),""}return s}function pS(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function IO(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function RO(s,e){const t=IO("firebase-js-sdk-policy",{createScriptURL:AO}),n=document.createElement("script"),r=`${ay}?l=${s}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function kO(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function DO(s,e,t,n,r,o){const u=n[r];try{if(u)await e[u];else{const h=(await pS(t)).find(p=>p.measurementId===r);h&&await e[h.appId]}}catch(f){tn.error(f)}s("config",r,o)}async function PO(s,e,t,n,r){try{let o=[];if(r&&r.send_to){let u=r.send_to;Array.isArray(u)||(u=[u]);const f=await pS(t);for(const h of u){const p=f.find(v=>v.measurementId===h),x=p&&e[p.appId];if(x)o.push(x);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),s("event",n,r||{})}catch(o){tn.error(o)}}function OO(s,e,t,n){async function r(o,...u){try{if(o==="event"){const[f,h]=u;await PO(s,e,t,f,h)}else if(o==="config"){const[f,h]=u;await DO(s,e,t,n,f,h)}else if(o==="consent"){const[f,h]=u;s("consent",f,h)}else if(o==="get"){const[f,h,p]=u;s("get",f,h,p)}else if(o==="set"){const[f]=u;s("set",f)}else s(o,...u)}catch(f){tn.error(f)}}return r}function MO(s,e,t,n,r){let o=function(...u){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=OO(o,s,e,t),{gtagCore:o,wrappedGtag:window[r]}}function LO(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ay)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=30,zO=1e3;class UO{constructor(e={},t=zO){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const gS=new UO;function BO(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function FO(s){var e;const{appId:t,apiKey:n}=s,r={method:"GET",headers:BO(n)},o=TO.replace("{app-id}",t),u=await fetch(o,r);if(u.status!==200&&u.status!==304){let f="";try{const h=await u.json();!((e=h.error)===null||e===void 0)&&e.message&&(f=h.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()}async function qO(s,e=gS,t){const{appId:n,apiKey:r,measurementId:o}=s.options;if(!n)throw xn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:n};throw xn.create("no-api-key")}const u=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new $O;return setTimeout(async()=>{f.abort()},SO),xS({appId:n,apiKey:r,measurementId:o},u,f,e)}async function xS(s,{throttleEndTimeMillis:e,backoffCount:t},n,r=gS){var o;const{appId:u,measurementId:f}=s;try{await HO(n,e)}catch(h){if(f)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:u,measurementId:f};throw h}try{const h=await FO(s);return r.deleteThrottleMetadata(u),h}catch(h){const p=h;if(!GO(p)){if(r.deleteThrottleMetadata(u),f)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:f};throw h}const x=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?t1(t,r.intervalMillis,VO):t1(t,r.intervalMillis),v={throttleEndTimeMillis:Date.now()+x,backoffCount:t+1};return r.setThrottleMetadata(u,v),tn.debug(`Calling attemptFetch again in ${x} millis`),xS(s,v,n,r)}}function HO(s,e){return new Promise((t,n)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(t,r);s.addEventListener(()=>{clearTimeout(o),n(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GO(s){if(!(s instanceof si)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class $O{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WO(s,e,t,n,r){if(r&&r.global){s("event",t,n);return}else{const o=await e,u=Object.assign(Object.assign({},n),{send_to:o});s("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(){if(oj())try{await cj()}catch(s){return tn.warn(xn.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return tn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YO(s,e,t,n,r,o,u){var f;const h=qO(s);h.then(N=>{t[N.measurementId]=N.appId,s.options.measurementId&&N.measurementId!==s.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>tn.error(N)),e.push(h);const p=KO().then(N=>{if(N)return n.getId()}),[x,v]=await Promise.all([h,p]);LO(o)||RO(o,x.measurementId),r("js",new Date);const _=(f=u==null?void 0:u.config)!==null&&f!==void 0?f:{};return _[jO]="firebase",_.update=!0,v!=null&&(_[EO]=v),r("config",x.measurementId,_),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.app=e}_delete(){return delete zu[this.app.options.appId],Promise.resolve()}}let zu={},R1=[];const k1={};let m0="dataLayer",XO="gtag",D1,yS,P1=!1;function ZO(){const s=[];if(aj()&&s.push("This is a browser extension environment."),XR()||s.push("Cookies are not available."),s.length>0){const e=s.map((n,r)=>`(${r+1}) ${n}`).join(" "),t=xn.create("invalid-analytics-context",{errorInfo:e});tn.warn(t.message)}}function JO(s,e,t){ZO();const n=s.options.appId;if(!n)throw xn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(zu[n]!=null)throw xn.create("already-exists",{id:n});if(!P1){kO(m0);const{wrappedGtag:o,gtagCore:u}=MO(zu,R1,k1,m0,XO);yS=o,D1=u,P1=!0}return zu[n]=YO(s,R1,k1,e,D1,m0,t),new QO(s)}function eM(s=gm()){s=kt(s);const e=va(s,zf);return e.isInitialized()?e.getImmediate():tM(s)}function tM(s,e={}){const t=va(s,zf);if(t.isInitialized()){const r=t.getImmediate();if(Xn(e,t.getOptions()))return r;throw xn.create("already-initialized")}return t.initialize({options:e})}function sM(s,e,t,n){s=kt(s),WO(yS,zu[s.app.options.appId],e,t,n).catch(r=>tn.error(r))}const O1="@firebase/analytics",M1="0.10.12";function nM(){Zn(new Pn(zf,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return JO(n,r,t)},"PUBLIC")),Zn(new Pn("analytics-internal",s,"PRIVATE")),en(O1,M1),en(O1,M1,"esm2017");function s(e){try{const t=e.getProvider(zf).getImmediate();return{logEvent:(n,r,o)=>sM(t,n,r,o)}}catch(t){throw xn.create("interop-component-reg-failed",{reason:t})}}}nM();var L1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oa,vS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,A){function I(){}I.prototype=A.prototype,M.D=A.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(O,L,z){for(var V=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)V[ye-2]=arguments[ye];return A.prototype[L].apply(O,V)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,A,I){I||(I=0);var O=Array(16);if(typeof A=="string")for(var L=0;16>L;++L)O[L]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(L=0;16>L;++L)O[L]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=M.g[0],I=M.g[1],L=M.g[2];var z=M.g[3],V=A+(z^I&(L^z))+O[0]+3614090360&4294967295;A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+O[1]+3905402710&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+O[2]+606105819&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+O[3]+3250441966&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+O[4]+4118548399&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+O[5]+1200080426&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+O[6]+2821735955&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+O[7]+4249261313&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+O[8]+1770035416&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+O[9]+2336552879&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+O[10]+4294925233&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+O[11]+2304563134&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+O[12]+1804603682&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+O[13]+4254626195&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+O[14]+2792965006&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+O[15]+1236535329&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(L^z&(I^L))+O[1]+4129170786&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+O[6]+3225465664&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+O[11]+643717713&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+O[0]+3921069994&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+O[5]+3593408605&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+O[10]+38016083&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+O[15]+3634488961&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+O[4]+3889429448&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+O[9]+568446438&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+O[14]+3275163606&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+O[3]+4107603335&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+O[8]+1163531501&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+O[13]+2850285829&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+O[2]+4243563512&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+O[7]+1735328473&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+O[12]+2368359562&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(I^L^z)+O[5]+4294588738&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+O[8]+2272392833&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+O[11]+1839030562&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+O[14]+4259657740&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+O[1]+2763975236&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+O[4]+1272893353&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+O[7]+4139469664&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+O[10]+3200236656&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+O[13]+681279174&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+O[0]+3936430074&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+O[3]+3572445317&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+O[6]+76029189&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+O[9]+3654602809&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+O[12]+3873151461&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+O[15]+530742520&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+O[2]+3299628645&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(L^(I|~z))+O[0]+4096336452&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+O[7]+1126891415&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+O[14]+2878612391&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+O[5]+4237533241&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+O[12]+1700485571&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+O[3]+2399980690&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+O[10]+4293915773&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+O[1]+2240044497&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+O[8]+1873313359&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+O[15]+4264355552&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+O[6]+2734768916&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+O[13]+1309151649&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+O[4]+4149444226&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+O[11]+3174756917&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+O[2]+718787259&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+A&4294967295,M.g[1]=M.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+z&4294967295}n.prototype.u=function(M,A){A===void 0&&(A=M.length);for(var I=A-this.blockSize,O=this.B,L=this.h,z=0;z<A;){if(L==0)for(;z<=I;)r(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<A;)if(O[L++]=M.charCodeAt(z++),L==this.blockSize){r(this,O),L=0;break}}else for(;z<A;)if(O[L++]=M[z++],L==this.blockSize){r(this,O),L=0;break}}this.h=L,this.o+=A},n.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var A=1;A<M.length-8;++A)M[A]=0;var I=8*this.o;for(A=M.length-8;A<M.length;++A)M[A]=I&255,I/=256;for(this.u(M),M=Array(16),A=I=0;4>A;++A)for(var O=0;32>O;O+=8)M[I++]=this.g[A]>>>O&255;return M};function o(M,A){var I=f;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=A(M)}function u(M,A){this.h=A;for(var I=[],O=!0,L=M.length-1;0<=L;L--){var z=M[L]|0;O&&z==A||(I[L]=z,O=!1)}this.g=I}var f={};function h(M){return-128<=M&&128>M?o(M,function(A){return new u([A|0],0>A?-1:0)}):new u([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return v;if(0>M)return R(p(-M));for(var A=[],I=1,O=0;M>=I;O++)A[O]=M/I|0,I*=4294967296;return new u(A,0)}function x(M,A){if(M.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M.charAt(0)=="-")return R(x(M.substring(1),A));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(A,8)),O=v,L=0;L<M.length;L+=8){var z=Math.min(8,M.length-L),V=parseInt(M.substring(L,L+z),A);8>z?(z=p(Math.pow(A,z)),O=O.j(z).add(p(V))):(O=O.j(I),O=O.add(p(V)))}return O}var v=h(0),_=h(1),N=h(16777216);s=u.prototype,s.m=function(){if(E(this))return-R(this).m();for(var M=0,A=1,I=0;I<this.g.length;I++){var O=this.i(I);M+=(0<=O?O:4294967296+O)*A,A*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(E(this))return"-"+R(this).toString(M);for(var A=p(Math.pow(M,6)),I=this,O="";;){var L=H(I,A).g;I=T(I,L.j(A));var z=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=L,w(I))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(var A=0;A<M.g.length;A++)if(M.g[A]!=0)return!1;return!0}function E(M){return M.h==-1}s.l=function(M){return M=T(this,M),E(M)?-1:w(M)?0:1};function R(M){for(var A=M.g.length,I=[],O=0;O<A;O++)I[O]=~M.g[O];return new u(I,~M.h).add(_)}s.abs=function(){return E(this)?R(this):this},s.add=function(M){for(var A=Math.max(this.g.length,M.g.length),I=[],O=0,L=0;L<=A;L++){var z=O+(this.i(L)&65535)+(M.i(L)&65535),V=(z>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);O=V>>>16,z&=65535,V&=65535,I[L]=V<<16|z}return new u(I,I[I.length-1]&-2147483648?-1:0)};function T(M,A){return M.add(R(A))}s.j=function(M){if(w(this)||w(M))return v;if(E(this))return E(M)?R(this).j(R(M)):R(R(this).j(M));if(E(M))return R(this.j(R(M)));if(0>this.l(N)&&0>M.l(N))return p(this.m()*M.m());for(var A=this.g.length+M.g.length,I=[],O=0;O<2*A;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<M.g.length;L++){var z=this.i(O)>>>16,V=this.i(O)&65535,ye=M.i(L)>>>16,_e=M.i(L)&65535;I[2*O+2*L]+=V*_e,k(I,2*O+2*L),I[2*O+2*L+1]+=z*_e,k(I,2*O+2*L+1),I[2*O+2*L+1]+=V*ye,k(I,2*O+2*L+1),I[2*O+2*L+2]+=z*ye,k(I,2*O+2*L+2)}for(O=0;O<A;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=A;O<2*A;O++)I[O]=0;return new u(I,0)};function k(M,A){for(;(M[A]&65535)!=M[A];)M[A+1]+=M[A]>>>16,M[A]&=65535,A++}function P(M,A){this.g=M,this.h=A}function H(M,A){if(w(A))throw Error("division by zero");if(w(M))return new P(v,v);if(E(M))return A=H(R(M),A),new P(R(A.g),R(A.h));if(E(A))return A=H(M,R(A)),new P(R(A.g),A.h);if(30<M.g.length){if(E(M)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var I=_,O=A;0>=O.l(M);)I=B(I),O=B(O);var L=G(I,1),z=G(O,1);for(O=G(O,2),I=G(I,2);!w(O);){var V=z.add(O);0>=V.l(M)&&(L=L.add(I),z=V),O=G(O,1),I=G(I,1)}return A=T(M,L.j(A)),new P(L,A)}for(L=v;0<=M.l(A);){for(I=Math.max(1,Math.floor(M.m()/A.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=p(I),V=z.j(A);E(V)||0<V.l(M);)I-=O,z=p(I),V=z.j(A);w(z)&&(z=_),L=L.add(z),M=T(M,V)}return new P(L,M)}s.A=function(M){return H(this,M).h},s.and=function(M){for(var A=Math.max(this.g.length,M.g.length),I=[],O=0;O<A;O++)I[O]=this.i(O)&M.i(O);return new u(I,this.h&M.h)},s.or=function(M){for(var A=Math.max(this.g.length,M.g.length),I=[],O=0;O<A;O++)I[O]=this.i(O)|M.i(O);return new u(I,this.h|M.h)},s.xor=function(M){for(var A=Math.max(this.g.length,M.g.length),I=[],O=0;O<A;O++)I[O]=this.i(O)^M.i(O);return new u(I,this.h^M.h)};function B(M){for(var A=M.g.length+1,I=[],O=0;O<A;O++)I[O]=M.i(O)<<1|M.i(O-1)>>>31;return new u(I,M.h)}function G(M,A){var I=A>>5;A%=32;for(var O=M.g.length-I,L=[],z=0;z<O;z++)L[z]=0<A?M.i(z+I)>>>A|M.i(z+I+1)<<32-A:M.i(z+I);return new u(L,M.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,vS=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=x,oa=u}).apply(typeof L1<"u"?L1:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bS,Pu,_S,gf,X0,wS,NS,ES;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,j){return m==Array.prototype||m==Object.prototype||(m[b]=j.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var b=0;b<m.length;++b){var j=m[b];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=t(this);function r(m,b){if(b)e:{var j=n;m=m.split(".");for(var U=0;U<m.length-1;U++){var X=m[U];if(!(X in j))break e;j=j[X]}m=m[m.length-1],U=j[m],b=b(U),b!=U&&b!=null&&e(j,m,{configurable:!0,writable:!0,value:b})}}function o(m,b){m instanceof String&&(m+="");var j=0,U=!1,X={next:function(){if(!U&&j<m.length){var ne=j++;return{value:b(ne,m[ne]),done:!1}}return U=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}r("Array.prototype.values",function(m){return m||function(){return o(this,function(b,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function h(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function p(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function x(m,b,j){return m.call.apply(m.bind,arguments)}function v(m,b,j){if(!m)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,U),m.apply(b,X)}}return function(){return m.apply(b,arguments)}}function _(m,b,j){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:v,_.apply(null,arguments)}function N(m,b){var j=Array.prototype.slice.call(arguments,1);return function(){var U=j.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function w(m,b){function j(){}j.prototype=b.prototype,m.aa=b.prototype,m.prototype=new j,m.prototype.constructor=m,m.Qb=function(U,X,ne){for(var Ee=Array(arguments.length-2),et=2;et<arguments.length;et++)Ee[et-2]=arguments[et];return b.prototype[X].apply(U,Ee)}}function E(m){const b=m.length;if(0<b){const j=Array(b);for(let U=0;U<b;U++)j[U]=m[U];return j}return[]}function R(m,b){for(let j=1;j<arguments.length;j++){const U=arguments[j];if(h(U)){const X=m.length||0,ne=U.length||0;m.length=X+ne;for(let Ee=0;Ee<ne;Ee++)m[X+Ee]=U[Ee]}else m.push(U)}}class T{constructor(b,j){this.i=b,this.j=j,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(m){return/^[\s\xa0]*$/.test(m)}function P(){var m=f.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var B=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function G(m,b,j){for(const U in m)b.call(j,m[U],U,m)}function M(m,b){for(const j in m)b.call(void 0,m[j],j,m)}function A(m){const b={};for(const j in m)b[j]=m[j];return b}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(m,b){let j,U;for(let X=1;X<arguments.length;X++){U=arguments[X];for(j in U)m[j]=U[j];for(let ne=0;ne<I.length;ne++)j=I[ne],Object.prototype.hasOwnProperty.call(U,j)&&(m[j]=U[j])}}function L(m){var b=1;m=m.split(":");const j=[];for(;0<b&&m.length;)j.push(m.shift()),b--;return m.length&&j.push(m.join(":")),j}function z(m){f.setTimeout(()=>{throw m},0)}function V(){var m=we;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class ye{constructor(){this.h=this.g=null}add(b,j){const U=_e.get();U.set(b,j),this.h?this.h.next=U:this.g=U,this.h=U}}var _e=new T(()=>new K,m=>m.reset());class K{constructor(){this.next=this.g=this.h=null}set(b,j){this.h=b,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,le=!1,we=new ye,F=()=>{const m=f.Promise.resolve(void 0);oe=()=>{m.then(re)}};var re=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(j){z(j)}var b=_e;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}le=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const j=()=>{};f.addEventListener("test",j,b),f.removeEventListener("test",j,b)}catch{}return m}();function ke(m,b){if(ge.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var j=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(B){e:{try{H(b.nodeName);var X=!0;break e}catch{}X=!1}X||(b=null)}}else j=="mouseover"?b=m.fromElement:j=="mouseout"&&(b=m.toElement);this.relatedTarget=b,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ce[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ke.aa.h.call(this)}}w(ke,ge);var Ce={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),be=0;function Y(m,b,j,U,X){this.listener=m,this.proxy=null,this.src=b,this.type=j,this.capture=!!U,this.ha=X,this.key=++be,this.da=this.fa=!1}function ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ne(m){this.src=m,this.g={},this.h=0}Ne.prototype.add=function(m,b,j,U,X){var ne=m.toString();m=this.g[ne],m||(m=this.g[ne]=[],this.h++);var Ee=W(m,b,U,X);return-1<Ee?(b=m[Ee],j||(b.fa=!1)):(b=new Y(b,this.src,ne,!!U,X),b.fa=j,m.push(b)),b};function de(m,b){var j=b.type;if(j in m.g){var U=m.g[j],X=Array.prototype.indexOf.call(U,b,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(U,X,1),ne&&(ce(b),m.g[j].length==0&&(delete m.g[j],m.h--))}}function W(m,b,j,U){for(var X=0;X<m.length;++X){var ne=m[X];if(!ne.da&&ne.listener==b&&ne.capture==!!j&&ne.ha==U)return X}return-1}var se="closure_lm_"+(1e6*Math.random()|0),ie={};function xe(m,b,j,U,X){if(Array.isArray(b)){for(var ne=0;ne<b.length;ne++)xe(m,b[ne],j,U,X);return null}return j=Ad(j),m&&m[dt]?m.K(b,j,p(U)?!!U.capture:!1,X):Te(m,b,j,!1,U,X)}function Te(m,b,j,U,X,ne){if(!b)throw Error("Invalid event type");var Ee=p(X)?!!X.capture:!!X,et=jr(m);if(et||(m[se]=et=new Ne(m)),j=et.add(b,j,U,Ee,ne),j.proxy)return j;if(U=Lt(),j.proxy=U,U.src=m,U.listener=j,m.addEventListener)Ae||(X=Ee),X===void 0&&(X=!1),m.addEventListener(b.toString(),U,X);else if(m.attachEvent)m.attachEvent(Ts(b.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return j}function Lt(){function m(j){return b.call(m.src,m.listener,j)}const b=Er;return m}function Nr(m,b,j,U,X){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)Nr(m,b[ne],j,U,X);else U=p(U)?!!U.capture:!!U,j=Ad(j),m&&m[dt]?(m=m.i,b=String(b).toString(),b in m.g&&(ne=m.g[b],j=W(ne,j,U,X),-1<j&&(ce(ne[j]),Array.prototype.splice.call(ne,j,1),ne.length==0&&(delete m.g[b],m.h--)))):m&&(m=jr(m))&&(b=m.g[b.toString()],m=-1,b&&(m=W(b,j,U,X)),(j=-1<m?b[m]:null)&&Ln(j))}function Ln(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[dt])de(b.i,m);else{var j=m.type,U=m.proxy;b.removeEventListener?b.removeEventListener(j,U,m.capture):b.detachEvent?b.detachEvent(Ts(j),U):b.addListener&&b.removeListener&&b.removeListener(U),(j=jr(b))?(de(j,m),j.h==0&&(j.src=null,b[se]=null)):ce(m)}}}function Ts(m){return m in ie?ie[m]:ie[m]="on"+m}function Er(m,b){if(m.da)m=!0;else{b=new ke(b,this);var j=m.listener,U=m.ha||m.src;m.fa&&Ln(m),m=j.call(U,b)}return m}function jr(m){return m=m[se],m instanceof Ne?m:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ad(m){return typeof m=="function"?m:(m[Rl]||(m[Rl]=function(b){return m.handleEvent(b)}),m[Rl])}function zt(){ve.call(this),this.i=new Ne(this),this.M=this,this.F=null}w(zt,ve),zt.prototype[dt]=!0,zt.prototype.removeEventListener=function(m,b,j,U){Nr(this,m,b,j,U)};function xt(m,b){var j,U=m.F;if(U)for(j=[];U;U=U.F)j.push(U);if(m=m.M,U=b.type||b,typeof b=="string")b=new ge(b,m);else if(b instanceof ge)b.target=b.target||m;else{var X=b;b=new ge(U,m),O(b,X)}if(X=!0,j)for(var ne=j.length-1;0<=ne;ne--){var Ee=b.g=j[ne];X=an(Ee,U,!0,b)&&X}if(Ee=b.g=m,X=an(Ee,U,!0,b)&&X,X=an(Ee,U,!1,b)&&X,j)for(ne=0;ne<j.length;ne++)Ee=b.g=j[ne],X=an(Ee,U,!1,b)&&X}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var j=m.g[b],U=0;U<j.length;U++)ce(j[U]);delete m.g[b],m.h--}}this.F=null},zt.prototype.K=function(m,b,j,U){return this.i.add(String(m),b,!1,j,U)},zt.prototype.L=function(m,b,j,U){return this.i.add(String(m),b,!0,j,U)};function an(m,b,j,U){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var X=!0,ne=0;ne<b.length;++ne){var Ee=b[ne];if(Ee&&!Ee.da&&Ee.capture==j){var et=Ee.listener,ss=Ee.ha||Ee.src;Ee.fa&&de(m.i,Ee),X=et.call(ss,U)!==!1&&X}}return X&&!U.defaultPrevented}function Cs(m,b,j){if(typeof m=="function")j&&(m=_(m,j));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:f.setTimeout(m,b||0)}function Id(m){m.g=Cs(()=>{m.g=null,m.i&&(m.i=!1,Id(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Jm extends ve{constructor(b,j){super(),this.m=b,this.l=j,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Id(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ja(m){ve.call(this),this.h=m,this.g={}}w(ja,ve);var Sa=[];function Ta(m){G(m.g,function(b,j){this.g.hasOwnProperty(j)&&Ln(b)},m),m.g={}}ja.prototype.N=function(){ja.aa.N.call(this),Ta(this)},ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=f.JSON.stringify,kl=f.JSON.parse,Ca=class{stringify(m){return f.JSON.stringify(m,void 0)}parse(m){return f.JSON.parse(m,void 0)}};function xc(){}xc.prototype.h=null;function yc(m){return m.h||(m.h=m.i())}function vc(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){ge.call(this,"d")}w(Ii,ge);function bc(){ge.call(this,"c")}w(bc,ge);var ni={},_c=null;function Sr(){return _c=_c||new zt}ni.La="serverreachability";function Dl(m){ge.call(this,ni.La,m)}w(Dl,ge);function Tr(m){const b=Sr();xt(b,new Dl(b))}ni.STAT_EVENT="statevent";function Rd(m,b){ge.call(this,ni.STAT_EVENT,m),this.stat=b}w(Rd,ge);function Pt(m){const b=Sr();xt(b,new Rd(b,m))}ni.Ma="timingevent";function ts(m,b){ge.call(this,ni.Ma,m),this.size=b}w(ts,ge);function $t(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){m()},b)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function wc(m,b,j,U,X,ne){m.info(function(){if(m.g)if(ne)for(var Ee="",et=ne.split("&"),ss=0;ss<et.length;ss++){var tt=et[ss].split("=");if(1<tt.length){var cs=tt[0];tt=tt[1];var ns=cs.split("_");Ee=2<=ns.length&&ns[1]=="type"?Ee+(cs+"="+tt+"&"):Ee+(cs+"=redacted&")}}else Ee=null;else Ee=ne;return"XMLHTTP REQ ("+U+") [attempt "+X+"]: "+b+`
`+j+`
`+Ee})}function ep(m,b,j,U,X,ne,Ee){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+X+"]: "+b+`
`+j+`
`+ne+" "+Ee})}function Cr(m,b,j,U){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Aa(m,j)+(U?" "+U:"")})}function kd(m,b){m.info(function(){return"TIMEOUT: "+b})}vn.prototype.info=function(){};function Aa(m,b){if(!m.g)return b;if(!b)return null;try{var j=JSON.parse(b);if(j){for(m=0;m<j.length;m++)if(Array.isArray(j[m])){var U=j[m];if(!(2>U.length)){var X=U[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Ee=1;Ee<X.length;Ee++)X[Ee]=""}}}}return Vn(j)}catch{return b}}var Ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function ri(){}w(ri,xc),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},ii=new ri;function zs(m,b,j,U){this.j=m,this.i=b,this.l=j,this.R=U||1,this.U=new ja(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Nc={},Pl={};function zn(m,b,j){m.L=1,m.v=Pa(ln(b)),m.m=j,m.P=!0,ki(m,null)}function ki(m,b){m.F=Date.now(),Ia(m),m.A=ln(m.v);var j=m.A,U=m.R;Array.isArray(U)||(U=[String(U)]),Ac(j.i,"t",U),m.C=0,j=m.j.J,m.h=new Ft,m.g=Kd(m.j,j?b:null,!m.m),0<m.O&&(m.M=new Jm(_(m.Y,m,m.g),m.O)),b=m.U,j=m.g,U=m.ca;var X="readystatechange";Array.isArray(X)||(X&&(Sa[0]=X.toString()),X=Sa);for(var ne=0;ne<X.length;ne++){var Ee=xe(j,X[ne],U||b.handleEvent,!1,b.h||b);if(!Ee)break;b.g[Ee.key]=Ee}b=m.H?A(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),Tr(),wc(m.i,m.u,m.A,m.l,m.R,m.m)}zs.prototype.ca=function(m){m=m.target;const b=this.M;b&&Nn(m)==3?b.j():this.Y(m)},zs.prototype.Y=function(m){try{if(m==this.g)e:{const ns=Nn(this.g);var b=this.g.Ba();const Ui=this.g.Z();if(!(3>ns)&&(ns!=3||this.g&&(this.h.h||this.g.oa()||Ud(this.g)))){this.J||ns!=4||b==7||(b==8||0>=Ui?Tr(3):Tr(2)),Ir(this);var j=this.g.Z();this.X=j;t:if(Dd(this)){var U=Ud(this.g);m="";var X=U.length,ne=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vs(this),ai(this);var Ee="";break t}this.h.i=new f.TextDecoder}for(b=0;b<X;b++)this.h.h=!0,m+=this.h.i.decode(U[b],{stream:!(ne&&b==X-1)});U.length=0,this.h.g+=m,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=j==200,ep(this.i,this.u,this.A,this.l,this.R,ns,j),this.o){if(this.T&&!this.K){t:{if(this.g){var et,ss=this.g;if((et=ss.g?ss.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(et)){var tt=et;break t}}tt=null}if(j=tt)Cr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,j);else{this.o=!1,this.s=3,Pt(12),vs(this),ai(this);break e}}if(this.P){j=!0;let bs;for(;!this.J&&this.C<Ee.length;)if(bs=Pd(this,Ee),bs==Pl){ns==4&&(this.s=4,Pt(14),j=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(bs==Nc){this.s=4,Pt(15),Cr(this.i,this.l,Ee,"[Invalid Chunk]"),j=!1;break}else Cr(this.i,this.l,bs,null),Ra(this,bs);if(Dd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ns!=4||Ee.length!=0||this.h.h||(this.s=1,Pt(16),j=!1),this.o=this.o&&j,!j)Cr(this.i,this.l,Ee,"[Invalid Chunked Response]"),vs(this),ai(this);else if(0<Ee.length&&!this.W){this.W=!0;var cs=this.j;cs.g==this&&cs.ba&&!cs.M&&(cs.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),Fa(cs),cs.M=!0,Pt(11))}}else Cr(this.i,this.l,Ee,null),Ra(this,Ee);ns==4&&vs(this),this.o&&!this.J&&(ns==4?Gd(this.j,this):(this.o=!1,Ia(this)))}else rp(this.g),j==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),vs(this),ai(this)}}}catch{}finally{}};function Dd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Pd(m,b){var j=m.C,U=b.indexOf(`
`,j);return U==-1?Pl:(j=Number(b.substring(j,U)),isNaN(j)?Nc:(U+=1,U+j>b.length?Pl:(b=b.slice(U,U+j),m.C=U+j,b)))}zs.prototype.cancel=function(){this.J=!0,vs(this)};function Ia(m){m.S=Date.now()+m.I,Od(m,m.I)}function Od(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=$t(_(m.ba,m),b)}function Ir(m){m.B&&(f.clearTimeout(m.B),m.B=null)}zs.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(kd(this.i,this.A),this.L!=2&&(Tr(),Pt(17)),vs(this),this.s=2,ai(this)):Od(this,this.S-m)};function ai(m){m.j.G==0||m.J||Gd(m.j,m)}function vs(m){Ir(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,Ta(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function Ra(m,b){try{var j=m.j;if(j.G!=0&&(j.g==m||Ec(j.h,m))){if(!m.K&&Ec(j.h,m)&&j.G==3){try{var U=j.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&U.length==3){var X=U;if(X[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<m.F)$l(j),Hl(j);else break e;Pc(j),Pt(18)}}else j.za=X[1],0<j.za-j.T&&37500>X[2]&&j.F&&j.v==0&&!j.C&&(j.C=$t(_(j.Za,j),6e3));if(1>=Ml(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else zi(j,11)}else if((m.K||j.g==m)&&$l(j),!k(b))for(X=j.Da.g.parse(b),b=0;b<X.length;b++){let tt=X[b];if(j.T=tt[0],tt=tt[1],j.G==2)if(tt[0]=="c"){j.K=tt[1],j.ia=tt[2];const cs=tt[3];cs!=null&&(j.la=cs,j.j.info("VER="+j.la));const ns=tt[4];ns!=null&&(j.Aa=ns,j.j.info("SVER="+j.Aa));const Ui=tt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(U=1.5*Ui,j.L=U,j.j.info("backChannelRequestTimeoutMs_="+U)),U=j;const bs=m.g;if(bs){const fi=bs.g?bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var ne=U.h;ne.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Ll(ne,ne.h),ne.h=null))}if(U.D){const Mc=bs.g?bs.g.getResponseHeader("X-HTTP-Session-Id"):null;Mc&&(U.ya=Mc,_t(U.I,U.D,Mc))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-m.F,j.j.info("Handshake RTT: "+j.R+"ms")),U=j;var Ee=m;if(U.qa=Wd(U,U.J?U.ia:null,U.W),Ee.K){Us(U.h,Ee);var et=Ee,ss=U.L;ss&&(et.I=ss),et.B&&(Ir(et),Ia(et)),U.g=Ee}else qd(U);0<j.i.length&&Gl(j)}else tt[0]!="stop"&&tt[0]!="close"||zi(j,7);else j.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?zi(j,7):kc(j):tt[0]!="noop"&&j.l&&j.l.ta(tt),j.v=0)}}Tr(4)}catch{}}var Md=class{constructor(m,b){this.g=m,this.map=b}};function Di(m){this.l=m||10,f.PerformanceNavigationTiming?(m=f.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ol(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ml(m){return m.h?1:m.g?m.g.size:0}function Ec(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Ll(m,b){m.g?m.g.add(b):m.h=b}function Us(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Di.prototype.cancel=function(){if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function jc(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const j of m.g.values())b=b.concat(j.D);return b}return E(m.i)}function tp(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var b=[],j=m.length,U=0;U<j;U++)b.push(m[U]);return b}b=[],j=0;for(U in m)b[j++]=m[U];return b}function Vl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var b=[];m=m.length;for(var j=0;j<m;j++)b.push(j);return b}b=[],j=0;for(const U in m)b[j++]=U;return b}}}function Sc(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var j=Vl(m),U=tp(m),X=U.length,ne=0;ne<X;ne++)b.call(void 0,U[ne],j&&j[ne],m)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sp(m,b){if(m){m=m.split("&");for(var j=0;j<m.length;j++){var U=m[j].indexOf("="),X=null;if(0<=U){var ne=m[j].substring(0,U);X=m[j].substring(U+1)}else ne=m[j];b(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Wt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Wt){this.h=m.h,Da(this,m.j),this.o=m.o,this.g=m.g,Rr(this,m.s),this.l=m.l;var b=m.i,j=new Oi;j.i=b.i,b.g&&(j.g=new Map(b.g),j.h=b.h),Pi(this,j),this.m=m.m}else m&&(b=String(m).match(ka))?(this.h=!1,Da(this,b[1]||"",!0),this.o=bn(b[2]||""),this.g=bn(b[3]||"",!0),Rr(this,b[4]),this.l=bn(b[5]||"",!0),Pi(this,b[6]||"",!0),this.m=bn(b[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}Wt.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Oa(b,Tc,!0),":");var j=this.g;return(j||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Oa(b,Tc,!0),"@"),m.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&m.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&m.push("/"),m.push(Oa(j,j.charAt(0)=="/"?np:Cc,!0))),(j=this.i.toString())&&m.push("?",j),(j=this.m)&&m.push("#",Oa(j,zl)),m.join("")};function ln(m){return new Wt(m)}function Da(m,b,j){m.j=j?bn(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Rr(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function Pi(m,b,j){b instanceof Oi?(m.i=b,Vd(m.i,m.h)):(j||(b=Oa(b,ip)),m.i=new Oi(b,m.h))}function _t(m,b,j){m.i.set(b,j)}function Pa(m){return _t(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function bn(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Oa(m,b,j){return typeof m=="string"?(m=encodeURI(m).replace(b,Ld),j&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ld(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Tc=/[#\/\?@]/g,Cc=/[#\?:]/g,np=/[#\?]/g,ip=/[#\?@]/g,zl=/#/g;function Oi(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function _n(m){m.g||(m.g=new Map,m.h=0,m.i&&sp(m.i,function(b,j){m.add(decodeURIComponent(b.replace(/\+/g," ")),j)}))}s=Oi.prototype,s.add=function(m,b){_n(this),this.i=null,m=li(this,m);var j=this.g.get(m);return j||this.g.set(m,j=[]),j.push(b),this.h+=1,this};function Mi(m,b){_n(m),b=li(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Li(m,b){return _n(m),b=li(m,b),m.g.has(b)}s.forEach=function(m,b){_n(this),this.g.forEach(function(j,U){j.forEach(function(X){m.call(b,X,U,this)},this)},this)},s.na=function(){_n(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),j=[];for(let U=0;U<b.length;U++){const X=m[U];for(let ne=0;ne<X.length;ne++)j.push(b[U])}return j},s.V=function(m){_n(this);let b=[];if(typeof m=="string")Li(this,m)&&(b=b.concat(this.g.get(li(this,m))));else{m=Array.from(this.g.values());for(let j=0;j<m.length;j++)b=b.concat(m[j])}return b},s.set=function(m,b){return _n(this),this.i=null,m=li(this,m),Li(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},s.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Ac(m,b,j){Mi(m,b),0<j.length&&(m.i=null,m.g.set(li(m,b),E(j)),m.h+=j.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var j=0;j<b.length;j++){var U=b[j];const ne=encodeURIComponent(String(U)),Ee=this.V(U);for(U=0;U<Ee.length;U++){var X=ne;Ee[U]!==""&&(X+="="+encodeURIComponent(String(Ee[U]))),m.push(X)}}return this.i=m.join("&")};function li(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Vd(m,b){b&&!m.j&&(_n(m),m.i=null,m.g.forEach(function(j,U){var X=U.toLowerCase();U!=X&&(Mi(this,U),Ac(this,X,j))},m)),m.j=b}function Ma(m,b){const j=new vn;if(f.Image){const U=new Image;U.onload=N(wn,j,"TestLoadImage: loaded",!0,b,U),U.onerror=N(wn,j,"TestLoadImage: error",!1,b,U),U.onabort=N(wn,j,"TestLoadImage: abort",!1,b,U),U.ontimeout=N(wn,j,"TestLoadImage: timeout",!1,b,U),f.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else b(!1)}function Un(m,b){const j=new vn,U=new AbortController,X=setTimeout(()=>{U.abort(),wn(j,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:U.signal}).then(ne=>{clearTimeout(X),ne.ok?wn(j,"TestPingServer: ok",!0,b):wn(j,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),wn(j,"TestPingServer: error",!1,b)})}function wn(m,b,j,U,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),U(j)}catch{}}function La(){this.g=new Ca}function oi(m,b,j){const U=j||"";try{Sc(m,function(X,ne){let Ee=X;p(X)&&(Ee=Vn(X)),b.push(U+ne+"="+encodeURIComponent(Ee))})}catch(X){throw b.push(U+"type="+encodeURIComponent("_badmap")),X}}function kr(m){this.l=m.Ub||null,this.j=m.eb||!1}w(kr,xc),kr.prototype.g=function(){return new Vi(this.l,this.j)},kr.prototype.i=function(m){return function(){return m}}({});function Vi(m,b){zt.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Vi,zt),s=Vi.prototype,s.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,ui(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||f).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},s.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ic(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ic(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}s.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?ci(this):ui(this),this.readyState==3&&Ic(this)}},s.Ra=function(m){this.g&&(this.response=this.responseText=m,ci(this))},s.Qa=function(m){this.g&&(this.response=m,ci(this))},s.ga=function(){this.g&&ci(this)};function ci(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ui(m)}s.setRequestHeader=function(m,b){this.u.append(m,b)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var j=b.next();!j.done;)j=j.value,m.push(j[0]+": "+j[1]),j=b.next();return m.join(`\r
`)};function ui(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Rc(m){let b="";return G(m,function(j,U){b+=U,b+=":",b+=j,b+=`\r
`}),b}function os(m,b,j){e:{for(U in j){var U=!1;break e}U=!0}U||(j=Rc(j),typeof m=="string"?j!=null&&encodeURIComponent(String(j)):_t(m,b,j))}function ht(m){zt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ht,zt);var Ul=/^https?$/i,Va=["POST","PUT"];s=ht.prototype,s.Ha=function(m){this.J=m},s.ea=function(m,b,j,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?yc(this.o):yc(ii),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(ne){zd(this,ne);return}if(m=j||"",j=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var X in U)j.set(X,U[X]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())j.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(j.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=f.FormData&&m instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Va,b,void 0))||U||X||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ee]of j)this.g.setRequestHeader(ne,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{za(this),this.u=!0,this.g.send(m),this.u=!1}catch(ne){zd(this,ne)}};function zd(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,Bl(m),di(m)}function Bl(m){m.A||(m.A=!0,xt(m,"complete"),xt(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,xt(this,"complete"),xt(this,"abort"),di(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),ht.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},s.bb=function(){Fl(this)};function Fl(m){if(m.h&&typeof u<"u"&&(!m.v[1]||Nn(m)!=4||m.Z()!=2)){if(m.u&&Nn(m)==4)Cs(m.Ea,0,m);else if(xt(m,"readystatechange"),Nn(m)==4){m.h=!1;try{const Ee=m.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var j;if(!(j=b)){var U;if(U=Ee===0){var X=String(m.D).match(ka)[1]||null;!X&&f.self&&f.self.location&&(X=f.self.location.protocol.slice(0,-1)),U=!Ul.test(X?X.toLowerCase():"")}j=U}if(j)xt(m,"complete"),xt(m,"success");else{m.m=6;try{var ne=2<Nn(m)?m.g.statusText:""}catch{ne=""}m.l=ne+" ["+m.Z()+"]",Bl(m)}}finally{di(m)}}}}function di(m,b){if(m.g){za(m);const j=m.g,U=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||xt(m,"ready");try{j.onreadystatechange=U}catch{}}}function za(m){m.I&&(f.clearTimeout(m.I),m.I=null)}s.isActive=function(){return!!this.g};function Nn(m){return m.g?m.g.readyState:0}s.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),kl(b)}};function Ud(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function rp(m){const b={};m=(m.g&&2<=Nn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(k(m[U]))continue;var j=L(m[U]);const X=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ne=b[X]||[];b[X]=ne,ne.push(j)}M(b,function(U){return U.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(m,b,j){return j&&j.internalChannelParams&&j.internalChannelParams[m]||b}function ql(m){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,m),this.cb=Ua("retryDelaySeedMs",1e4,m),this.Wa=Ua("forwardChannelMaxRetries",2,m),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Di(m&&m.concurrentRequestLimit),this.Da=new La,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ql.prototype,s.la=8,s.G=1,s.connect=function(m,b,j,U){Pt(0),this.W=m,this.H=b||{},j&&U!==void 0&&(this.H.OSID=j,this.H.OAID=U),this.F=this.X,this.I=Wd(this,null,this.W),Gl(this)};function kc(m){if(Bd(m),m.G==3){var b=m.U++,j=ln(m.I);if(_t(j,"SID",m.K),_t(j,"RID",b),_t(j,"TYPE","terminate"),Ba(m,j),b=new zs(m,m.j,b),b.L=2,b.v=Pa(ln(j)),j=!1,f.navigator&&f.navigator.sendBeacon)try{j=f.navigator.sendBeacon(b.v.toString(),"")}catch{}!j&&f.Image&&(new Image().src=b.v,j=!0),j||(b.g=Kd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ia(b)}$d(m)}function Hl(m){m.g&&(Fa(m),m.g.cancel(),m.g=null)}function Bd(m){Hl(m),m.u&&(f.clearTimeout(m.u),m.u=null),$l(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&f.clearTimeout(m.s),m.s=null)}function Gl(m){if(!Ol(m.h)&&!m.s){m.s=!0;var b=m.Ga;oe||F(),le||(oe(),le=!0),we.add(b,m),m.B=0}}function ap(m,b){return Ml(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=$t(_(m.Ga,m,b),Oc(m,m.B)),m.B++,!0)}s.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const X=new zs(this,this.j,m);let ne=this.o;if(this.S&&(ne?(ne=A(ne),O(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var b=0,j=0;j<this.i.length;j++){t:{var U=this.i[j];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(b+=U,4096<b){b=j;break e}if(b===4096||j===this.i.length-1){b=j+1;break e}}b=1e3}else b=1e3;b=Fd(this,X,b),j=ln(this.I),_t(j,"RID",m),_t(j,"CVER",22),this.D&&_t(j,"X-HTTP-Session-Id",this.D),Ba(this,j),ne&&(this.O?b="headers="+encodeURIComponent(String(Rc(ne)))+"&"+b:this.m&&os(j,this.m,ne)),Ll(this.h,X),this.Ua&&_t(j,"TYPE","init"),this.P?(_t(j,"$req",b),_t(j,"SID","null"),X.T=!0,zn(X,j,null)):zn(X,j,b),this.G=2}}else this.G==3&&(m?Dc(this,m):this.i.length==0||Ol(this.h)||Dc(this))};function Dc(m,b){var j;b?j=b.l:j=m.U++;const U=ln(m.I);_t(U,"SID",m.K),_t(U,"RID",j),_t(U,"AID",m.T),Ba(m,U),m.m&&m.o&&os(U,m.m,m.o),j=new zs(m,m.j,j,m.B+1),m.m===null&&(j.H=m.o),b&&(m.i=b.D.concat(m.i)),b=Fd(m,j,1e3),j.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ll(m.h,j),zn(j,U,b)}function Ba(m,b){m.H&&G(m.H,function(j,U){_t(b,U,j)}),m.l&&Sc({},function(j,U){_t(b,U,j)})}function Fd(m,b,j){j=Math.min(m.i.length,j);var U=m.l?_(m.l.Na,m.l,m):null;e:{var X=m.i;let ne=-1;for(;;){const Ee=["count="+j];ne==-1?0<j?(ne=X[0].g,Ee.push("ofs="+ne)):ne=0:Ee.push("ofs="+ne);let et=!0;for(let ss=0;ss<j;ss++){let tt=X[ss].g;const cs=X[ss].map;if(tt-=ne,0>tt)ne=Math.max(0,X[ss].g-100),et=!1;else try{oi(cs,Ee,"req"+tt+"_")}catch{U&&U(cs)}}if(et){U=Ee.join("&");break e}}}return m=m.i.splice(0,j),b.D=m,U}function qd(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;oe||F(),le||(oe(),le=!0),we.add(b,m),m.v=0}}function Pc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=$t(_(m.Fa,m),Oc(m,m.v)),m.v++,!0)}s.Fa=function(){if(this.u=null,Hd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=$t(_(this.ab,this),m)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Hl(this),Hd(this))};function Fa(m){m.A!=null&&(f.clearTimeout(m.A),m.A=null)}function Hd(m){m.g=new zs(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=ln(m.qa);_t(b,"RID","rpc"),_t(b,"SID",m.K),_t(b,"AID",m.T),_t(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&_t(b,"TO",m.ja),_t(b,"TYPE","xmlhttp"),Ba(m,b),m.m&&m.o&&os(b,m.m,m.o),m.L&&(m.g.I=m.L);var j=m.g;m=m.ia,j.L=1,j.v=Pa(ln(b)),j.m=null,j.P=!0,ki(j,m)}s.Za=function(){this.C!=null&&(this.C=null,Hl(this),Pc(this),Pt(19))};function $l(m){m.C!=null&&(f.clearTimeout(m.C),m.C=null)}function Gd(m,b){var j=null;if(m.g==b){$l(m),Fa(m),m.g=null;var U=2}else if(Ec(m.h,b))j=b.D,Us(m.h,b),U=1;else return;if(m.G!=0){if(b.o)if(U==1){j=b.m?b.m.length:0,b=Date.now()-b.F;var X=m.B;U=Sr(),xt(U,new ts(U,j)),Gl(m)}else qd(m);else if(X=b.s,X==3||X==0&&0<b.X||!(U==1&&ap(m,b)||U==2&&Pc(m)))switch(j&&0<j.length&&(b=m.h,b.i=b.i.concat(j)),X){case 1:zi(m,5);break;case 4:zi(m,10);break;case 3:zi(m,6);break;default:zi(m,2)}}}function Oc(m,b){let j=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(j*=2),j*b}function zi(m,b){if(m.j.info("Error code "+b),b==2){var j=_(m.fb,m),U=m.Xa;const X=!U;U=new Wt(U||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Da(U,"https"),Pa(U),X?Ma(U.toString(),j):Un(U.toString(),j)}else Pt(2);m.G=0,m.l&&m.l.sa(b),$d(m),Bd(m)}s.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function $d(m){if(m.G=0,m.ka=[],m.l){const b=jc(m.h);(b.length!=0||m.i.length!=0)&&(R(m.ka,b),R(m.ka,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.ra()}}function Wd(m,b,j){var U=j instanceof Wt?ln(j):new Wt(j);if(U.g!="")b&&(U.g=b+"."+U.g),Rr(U,U.s);else{var X=f.location;U=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;var ne=new Wt(null);U&&Da(ne,U),b&&(ne.g=b),X&&Rr(ne,X),j&&(ne.l=j),U=ne}return j=m.D,b=m.ya,j&&b&&_t(U,j,b),_t(U,"VER",m.la),Ba(m,U),U}function Kd(m,b,j){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new ht(new kr({eb:j})):new ht(m.pa),b.Ha(m.J),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}s=Yd.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Wl(){}Wl.prototype.g=function(m,b){return new Bs(m,b)};function Bs(m,b){zt.call(this),this.g=new ql(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!k(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!k(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new hi(this)}w(Bs,zt),Bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bs.prototype.close=function(){kc(this.g)},Bs.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var j={};j.__data__=m,m=j}else this.u&&(j={},j.__data__=Vn(m),m=j);b.i.push(new Md(b.Ya++,m)),b.G==3&&Gl(b)},Bs.prototype.N=function(){this.g.l=null,delete this.j,kc(this.g),delete this.g,Bs.aa.N.call(this)};function Qd(m){Ii.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const j in b){m=j;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}w(Qd,Ii);function Xd(){bc.call(this),this.status=1}w(Xd,bc);function hi(m){this.g=m}w(hi,Yd),hi.prototype.ua=function(){xt(this.g,"a")},hi.prototype.ta=function(m){xt(this.g,new Qd(m))},hi.prototype.sa=function(m){xt(this.g,new Xd)},hi.prototype.ra=function(){xt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Bs.prototype.send=Bs.prototype.o,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,ES=function(){return new Wl},NS=function(){return Sr()},wS=ni,X0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,gf=Ar,Ri.COMPLETE="complete",_S=Ri,vc.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",zt.prototype.listen=zt.prototype.K,Pu=vc,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,bS=ht}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const V1="@firebase/firestore",z1="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ks.UNAUTHENTICATED=new ks(null),ks.GOOGLE_CREDENTIALS=new ks("google-credentials-uid"),ks.FIRST_PARTY=new ks("first-party-uid"),ks.MOCK_USER=new ks("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new dd("@firebase/firestore");function Eo(){return gl.logLevel}function Ie(s,...e){if(gl.logLevel<=Xe.DEBUG){const t=e.map(ly);gl.debug(`Firestore (${nc}): ${s}`,...t)}}function pr(s,...e){if(gl.logLevel<=Xe.ERROR){const t=e.map(ly);gl.error(`Firestore (${nc}): ${s}`,...t)}}function zo(s,...e){if(gl.logLevel<=Xe.WARN){const t=e.map(ly);gl.warn(`Firestore (${nc}): ${s}`,...t)}}function ly(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(s="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+s;throw pr(e),new Error(e)}function gt(s,e){s||Fe()}function He(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ks.UNAUTHENTICATED))}shutdown(){}}class rM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aM{constructor(e){this.t=e,this.currentUser=ks.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0);let n=this.i;const r=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>r(this.currentUser))};const u=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},f=h=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(h=>f(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?f(h):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(gt(typeof n.accessToken=="string"),new jS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new ks(e)}}class lM{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ks.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class oM{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new lM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ks.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ys(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0);const n=o=>{o.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,Ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const r=o=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new U1(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt(typeof t.token=="string"),this.R=t.token,new U1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=uM(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function We(s,e){return s<e?-1:s>e?1:0}function Z0(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=s.codePointAt(t),r=e.codePointAt(t);if(n!==r){if(n<128&&r<128)return We(n,r);{const o=SS(),u=dM(o.encode(B1(s,t)),o.encode(B1(e,t)));return u!==0?u:We(n,r)}}t+=n>65535?2:1}return We(s.length,e.length)}function B1(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function dM(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return We(s[t],e[t]);return We(s.length,e.length)}function Uo(s,e,t){return s.length===e.length&&s.every((n,r)=>t(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=-62135596800,q1=1e6;class as{static now(){return as.fromMillis(Date.now())}static fromDate(e){return as.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*q1);return new as(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<F1)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q1}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-F1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new as(0,0))}static max(){return new qe(new as(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="__name__";class vi{constructor(e,t,n){t===void 0?t=0:t>e.length&&Fe(),n===void 0?n=e.length-t:n>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const o=vi.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return We(e.length,t.length)}static compareSegments(e,t){const n=vi.isNumericId(e),r=vi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?vi.extractNumericId(e).compare(vi.extractNumericId(t)):Z0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class Rt extends vi{construct(e,t,n){return new Rt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Re(fe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const hM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class js extends vi{construct(e,t,n){return new js(e,t,n)}static isValidIdentifier(e){return hM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),js.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H1}static keyField(){return new js([H1])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(n.length===0)throw new Re(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Re(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Re(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(n+=f,r++):(o(),r++)}if(o(),u)throw new Re(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new js(t)}static emptyPath(){return new js([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Rt.fromString(e))}static fromName(e){return new Me(Rt.fromString(e).popFirst(5))}static empty(){return new Me(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function fM(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=qe.fromTimestamp(n===1e9?new as(t+1,0):new as(t,n));return new ha(r,Me.empty(),e)}function mM(s){return new ha(s.readTime,s.key,Ju)}class ha{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ha(qe.min(),Me.empty(),Ju)}static max(){return new ha(qe.max(),Me.empty(),Ju)}}function pM(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(s.documentKey,e.documentKey),t!==0?t:We(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(s){if(s.code!==fe.FAILED_PRECONDITION||s.message!==gM)throw s;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,n)=>{t(e)})}static reject(e){return new me((t,n)=>{n(e)})}static waitFor(e){return new me((t,n)=>{let r=0,o=0,u=!1;e.forEach(f=>{++r,f.next(()=>{++o,u&&o===r&&t()},h=>n(h))}),u=!0,o===r&&t()})}static or(e){let t=me.resolve(!1);for(const n of e)t=t.next(r=>r?me.resolve(r):n());return t}static forEach(e,t){const n=[];return e.forEach((r,o)=>{n.push(t.call(this,r,o))}),this.waitFor(n)}static mapArray(e,t){return new me((n,r)=>{const o=e.length,u=new Array(o);let f=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(x=>{u[p]=x,++f,f===o&&n(u)},x=>r(x))}})}static doWhile(e,t){return new me((n,r)=>{const o=()=>{e()===!0?t().next(()=>{o()},r):n()};o()})}}function yM(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rc(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}wm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-1;function Nm(s){return s==null}function Uf(s){return s===0&&1/s==-1/0}function vM(s){return typeof s=="number"&&Number.isInteger(s)&&!Uf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="";function bM(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=G1(e)),e=_M(s.get(t),e);return G1(e)}function _M(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const o=s.charAt(r);switch(o){case"\0":t+="";break;case CS:t+="";break;default:t+=o}}return t}function G1(s){return s+CS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function wa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function AS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class J0{constructor(e,t){this.comparator=e,this.root=t||ca.EMPTY}insert(e,t){return new J0(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ca.BLACK,null,null))}remove(e){return new J0(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ca.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}},tf=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ca=class er{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=n??er.RED,this.left=r??er.EMPTY,this.right=o??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new er(e??this.key,t??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return er.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}};ca.EMPTY=null,ca.RED=!0,ca.BLACK=!1;ca.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,t,n,r,o){return this}insert(e,t,n){return new ca(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W1(this.data.getIterator())}getIteratorFrom(e){return new W1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ls(this.comparator);return t.data=e,t}}class W1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(js.comparator)}static empty(){return new gn([])}unionWith(e){let t=new ls(js.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new IS("Invalid base64 string: "+o):o}}(e);return new Ss(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ss(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ss.EMPTY_BYTE_STRING=new Ss("");const wM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(s){if(gt(!!s),typeof s=="string"){let e=0;const t=wM.exec(s);if(gt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Gt(s.seconds),nanos:Gt(s.nanos)}}function Gt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ma(s){return typeof s=="string"?Ss.fromBase64String(s):Ss.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="server_timestamp",kS="__type__",DS="__previous_value__",PS="__local_write_time__";function cy(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[kS])===null||t===void 0?void 0:t.stringValue)===RS}function Em(s){const e=s.mapValue.fields[DS];return cy(e)?Em(e):e}function ed(s){const e=fa(s.mapValue.fields[PS].timestampValue);return new as(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t,n,r,o,u,f,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=h,this.useFetchStreams=p}}const Bf="(default)";class td{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new td("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof td&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="__type__",EM="__max__",sf={mapValue:{}},MS="__vector__",Ff="value";function pa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?cy(s)?4:SM(s)?9007199254740991:jM(s)?10:11:Fe()}function Ti(s,e){if(s===e)return!0;const t=pa(s);if(t!==pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ed(s).isEqual(ed(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=fa(r.timestampValue),f=fa(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(r,o){return ma(r.bytesValue).isEqual(ma(o.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(r,o){return Gt(r.geoPointValue.latitude)===Gt(o.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(o.geoPointValue.longitude)}(s,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Gt(r.integerValue)===Gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Gt(r.doubleValue),f=Gt(o.doubleValue);return u===f?Uf(u)===Uf(f):isNaN(u)&&isNaN(f)}return!1}(s,e);case 9:return Uo(s.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(r,o){const u=r.mapValue.fields||{},f=o.mapValue.fields||{};if($1(u)!==$1(f))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(f[h]===void 0||!Ti(u[h],f[h])))return!1;return!0}(s,e);default:return Fe()}}function sd(s,e){return(s.values||[]).find(t=>Ti(t,e))!==void 0}function Bo(s,e){if(s===e)return 0;const t=pa(s),n=pa(e);if(t!==n)return We(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(s.booleanValue,e.booleanValue);case 2:return function(o,u){const f=Gt(o.integerValue||o.doubleValue),h=Gt(u.integerValue||u.doubleValue);return f<h?-1:f>h?1:f===h?0:isNaN(f)?isNaN(h)?0:-1:1}(s,e);case 3:return K1(s.timestampValue,e.timestampValue);case 4:return K1(ed(s),ed(e));case 5:return Z0(s.stringValue,e.stringValue);case 6:return function(o,u){const f=ma(o),h=ma(u);return f.compareTo(h)}(s.bytesValue,e.bytesValue);case 7:return function(o,u){const f=o.split("/"),h=u.split("/");for(let p=0;p<f.length&&p<h.length;p++){const x=We(f[p],h[p]);if(x!==0)return x}return We(f.length,h.length)}(s.referenceValue,e.referenceValue);case 8:return function(o,u){const f=We(Gt(o.latitude),Gt(u.latitude));return f!==0?f:We(Gt(o.longitude),Gt(u.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Y1(s.arrayValue,e.arrayValue);case 10:return function(o,u){var f,h,p,x;const v=o.fields||{},_=u.fields||{},N=(f=v[Ff])===null||f===void 0?void 0:f.arrayValue,w=(h=_[Ff])===null||h===void 0?void 0:h.arrayValue,E=We(((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0,((x=w==null?void 0:w.values)===null||x===void 0?void 0:x.length)||0);return E!==0?E:Y1(N,w)}(s.mapValue,e.mapValue);case 11:return function(o,u){if(o===sf.mapValue&&u===sf.mapValue)return 0;if(o===sf.mapValue)return 1;if(u===sf.mapValue)return-1;const f=o.fields||{},h=Object.keys(f),p=u.fields||{},x=Object.keys(p);h.sort(),x.sort();for(let v=0;v<h.length&&v<x.length;++v){const _=Z0(h[v],x[v]);if(_!==0)return _;const N=Bo(f[h[v]],p[x[v]]);if(N!==0)return N}return We(h.length,x.length)}(s.mapValue,e.mapValue);default:throw Fe()}}function K1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return We(s,e);const t=fa(s),n=fa(e),r=We(t.seconds,n.seconds);return r!==0?r:We(t.nanos,n.nanos)}function Y1(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const o=Bo(t[r],n[r]);if(o)return o}return We(t.length,n.length)}function Fo(s){return ex(s)}function ex(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const n=fa(t);return`time(${n.seconds},${n.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return ma(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Me.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let n="[",r=!0;for(const o of t.values||[])r?r=!1:n+=",",n+=ex(o);return n+"]"}(s.arrayValue):"mapValue"in s?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const u of n)o?o=!1:r+=",",r+=`${u}:${ex(t.fields[u])}`;return r+"}"}(s.mapValue):Fe()}function xf(s){switch(pa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(s);return e?16+xf(e):16;case 5:return 2*s.stringValue.length;case 6:return ma(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,o)=>r+xf(o),0)}(s.arrayValue);case 10:case 11:return function(n){let r=0;return wa(n.fields,(o,u)=>{r+=o.length+xf(u)}),r}(s.mapValue);default:throw Fe()}}function Q1(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function tx(s){return!!s&&"integerValue"in s}function uy(s){return!!s&&"arrayValue"in s}function X1(s){return!!s&&"nullValue"in s}function Z1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function yf(s){return!!s&&"mapValue"in s}function jM(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[OS])===null||t===void 0?void 0:t.stringValue)===MS}function Uu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return wa(s.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Uu(n)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(s.arrayValue.values[t]);return e}return Object.assign({},s)}function SM(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===EM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.value=e}static empty(){return new Qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=js.emptyPath(),n={},r=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const h=this.getFieldsMap(t);this.applyChanges(h,n,r),n={},r=[],t=f.popLast()}u?n[f.lastSegment()]=Uu(u):r.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wa(t,(r,o)=>e[r]=o);for(const r of n)delete e[r]}clone(){return new Qs(Uu(this.value))}}function LS(s){const e=[];return wa(s.fields,(t,n)=>{const r=new js([t]);if(yf(n)){const o=LS(n.mapValue).fields;if(o.length===0)e.push(r);else for(const u of o)e.push(r.child(u))}else e.push(r)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,n,r,o,u,f){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Ds(e,0,qe.min(),qe.min(),qe.min(),Qs.empty(),0)}static newFoundDocument(e,t,n,r){return new Ds(e,1,t,qe.min(),n,r,0)}static newNoDocument(e,t){return new Ds(e,2,t,qe.min(),qe.min(),Qs.empty(),0)}static newUnknownDocument(e,t){return new Ds(e,3,t,qe.min(),qe.min(),Qs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ds&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ds(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.position=e,this.inclusive=t}}function J1(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const o=e[r],u=s.position[r];if(o.field.isKeyField()?n=Me.comparator(Me.fromName(u.referenceValue),t.key):n=Bo(u,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function eN(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ti(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function TM(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{}class Xt extends VS{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new AM(e,t,n):t==="array-contains"?new kM(e,n):t==="in"?new DM(e,n):t==="not-in"?new PM(e,n):t==="array-contains-any"?new OM(e,n):new Xt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new IM(e,n):new RM(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bo(t,this.value)):t!==null&&pa(this.value)===pa(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends VS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Jn(e,t)}matches(e){return zS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zS(s){return s.op==="and"}function US(s){return CM(s)&&zS(s)}function CM(s){for(const e of s.filters)if(e instanceof Jn)return!1;return!0}function sx(s){if(s instanceof Xt)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(US(s))return s.filters.map(e=>sx(e)).join(",");{const e=s.filters.map(t=>sx(t)).join(",");return`${s.op}(${e})`}}function BS(s,e){return s instanceof Xt?function(n,r){return r instanceof Xt&&n.op===r.op&&n.field.isEqual(r.field)&&Ti(n.value,r.value)}(s,e):s instanceof Jn?function(n,r){return r instanceof Jn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((o,u,f)=>o&&BS(u,r.filters[f]),!0):!1}(s,e):void Fe()}function FS(s){return s instanceof Xt?function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`}(s):s instanceof Jn?function(t){return t.op.toString()+" {"+t.getFilters().map(FS).join(" ,")+"}"}(s):"Filter"}class AM extends Xt{constructor(e,t,n){super(e,t,n),this.key=Me.fromName(n.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class IM extends Xt{constructor(e,t){super(e,"in",t),this.keys=qS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RM extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=qS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qS(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>Me.fromName(n.referenceValue))}class kM extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uy(t)&&sd(t.arrayValue,this.value)}}class DM extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sd(this.value.arrayValue,t)}}class PM extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!sd(this.value.arrayValue,t)}}class OM extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>sd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,t=null,n=[],r=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=u,this.endAt=f,this.le=null}}function tN(s,e=null,t=[],n=[],r=null,o=null,u=null){return new MM(s,e,t,n,r,o,u)}function dy(s){const e=He(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>sx(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Nm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Fo(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Fo(n)).join(",")),e.le=t}return e.le}function hy(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!TM(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!BS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!eN(s.startAt,e.startAt)&&eN(s.endAt,e.endAt)}function nx(s){return Me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t=null,n=[],r=[],o=null,u="F",f=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function LM(s,e,t,n,r,o,u,f){return new ac(s,e,t,n,r,o,u,f)}function jm(s){return new ac(s)}function sN(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HS(s){return s.collectionGroup!==null}function Bu(s){const e=He(s);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new ls(js.comparator);return u.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new nd(o,n))}),t.has(js.keyField().canonicalString())||e.he.push(new nd(js.keyField(),n))}return e.he}function Ei(s){const e=He(s);return e.Pe||(e.Pe=VM(e,Bu(s))),e.Pe}function VM(s,e){if(s.limitType==="F")return tN(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new nd(r.field,o)});const t=s.endAt?new qf(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new qf(s.startAt.position,s.startAt.inclusive):null;return tN(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function ix(s,e){const t=s.filters.concat([e]);return new ac(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function rx(s,e,t){return new ac(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Sm(s,e){return hy(Ei(s),Ei(e))&&s.limitType===e.limitType}function GS(s){return`${dy(Ei(s))}|lt:${s.limitType}`}function jo(s){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>FS(r)).join(", ")}]`),Nm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Fo(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Fo(r)).join(",")),`Target(${n})`}(Ei(s))}; limitType=${s.limitType})`}function Tm(s,e){return e.isFoundDocument()&&function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Me.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(s,e)&&function(n,r){for(const o of Bu(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(s,e)&&function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0}(s,e)&&function(n,r){return!(n.startAt&&!function(u,f,h){const p=J1(u,f,h);return u.inclusive?p<=0:p<0}(n.startAt,Bu(n),r)||n.endAt&&!function(u,f,h){const p=J1(u,f,h);return u.inclusive?p>=0:p>0}(n.endAt,Bu(n),r))}(s,e)}function zM(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function $S(s){return(e,t)=>{let n=!1;for(const r of Bu(s)){const o=UM(r,e,t);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function UM(s,e,t){const n=s.field.isKeyField()?Me.comparator(e.key,t.key):function(o,u,f){const h=u.data.field(o),p=f.data.field(o);return h!==null&&p!==null?Bo(h,p):Fe()}(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return Fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,o]of n)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(t,n)=>{for(const[r,o]of n)e(r,o)})}isEmpty(){return AS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Jt(Me.comparator);function gr(){return BM}const WS=new Jt(Me.comparator);function Ou(...s){let e=WS;for(const t of s)e=e.insert(t.key,t);return e}function KS(s){let e=WS;return s.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function cl(){return Fu()}function YS(){return Fu()}function Fu(){return new Sl(s=>s.toString(),(s,e)=>s.isEqual(e))}const FM=new Jt(Me.comparator),qM=new ls(Me.comparator);function Ze(...s){let e=qM;for(const t of s)e=e.add(t);return e}const HM=new ls(We);function GM(){return HM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function QS(s){return{integerValue:""+s}}function $M(s,e){return vM(e)?QS(e):fy(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this._=void 0}}function WM(s,e,t){return s instanceof id?function(r,o){const u={fields:{[kS]:{stringValue:RS},[PS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&cy(o)&&(o=Em(o)),o&&(u.fields[DS]=o),{mapValue:u}}(t,e):s instanceof qo?ZS(s,e):s instanceof Ho?JS(s,e):function(r,o){const u=XS(r,o),f=nN(u)+nN(r.Ie);return tx(u)&&tx(r.Ie)?QS(f):fy(r.serializer,f)}(s,e)}function KM(s,e,t){return s instanceof qo?ZS(s,e):s instanceof Ho?JS(s,e):t}function XS(s,e){return s instanceof Hf?function(n){return tx(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class id extends Cm{}class qo extends Cm{constructor(e){super(),this.elements=e}}function ZS(s,e){const t=e2(e);for(const n of s.elements)t.some(r=>Ti(r,n))||t.push(n);return{arrayValue:{values:t}}}class Ho extends Cm{constructor(e){super(),this.elements=e}}function JS(s,e){let t=e2(e);for(const n of s.elements)t=t.filter(r=>!Ti(r,n));return{arrayValue:{values:t}}}class Hf extends Cm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function nN(s){return Gt(s.integerValue||s.doubleValue)}function e2(s){return uy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.field=e,this.transform=t}}function YM(s,e){return s.field.isEqual(e.field)&&function(n,r){return n instanceof qo&&r instanceof qo||n instanceof Ho&&r instanceof Ho?Uo(n.elements,r.elements,Ti):n instanceof Hf&&r instanceof Hf?Ti(n.Ie,r.Ie):n instanceof id&&r instanceof id}(s.transform,e.transform)}class QM{constructor(e,t){this.version=e,this.transformResults=t}}class Dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Am{}function t2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new py(s.key,Dn.none()):new gd(s.key,s.data,Dn.none());{const t=s.data,n=Qs.empty();let r=new ls(js.comparator);for(let o of e.fields)if(!r.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?n.delete(o):n.set(o,u),r=r.add(o)}return new Na(s.key,n,new gn(r.toArray()),Dn.none())}}function XM(s,e,t){s instanceof gd?function(r,o,u){const f=r.value.clone(),h=rN(r.fieldTransforms,o,u.transformResults);f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(s,e,t):s instanceof Na?function(r,o,u){if(!vf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const f=rN(r.fieldTransforms,o,u.transformResults),h=o.data;h.setAll(s2(r)),h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(s,e,t):function(r,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function qu(s,e,t,n){return s instanceof gd?function(o,u,f,h){if(!vf(o.precondition,u))return f;const p=o.value.clone(),x=aN(o.fieldTransforms,h,u);return p.setAll(x),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(s,e,t,n):s instanceof Na?function(o,u,f,h){if(!vf(o.precondition,u))return f;const p=aN(o.fieldTransforms,h,u),x=u.data;return x.setAll(s2(o)),x.setAll(p),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(s,e,t,n):function(o,u,f){return vf(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(s,e,t)}function ZM(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),o=XS(n.transform,r||null);o!=null&&(t===null&&(t=Qs.empty()),t.set(n.field,o))}return t||null}function iN(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Uo(n,r,(o,u)=>YM(o,u))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class gd extends Am{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Na extends Am{constructor(e,t,n,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function s2(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}}),e}function rN(s,e,t){const n=new Map;gt(s.length===t.length);for(let r=0;r<t.length;r++){const o=s[r],u=o.transform,f=e.data.field(o.field);n.set(o.field,KM(u,f,t[r]))}return n}function aN(s,e,t){const n=new Map;for(const r of s){const o=r.transform,u=t.data.field(r.field);n.set(r.field,WM(o,u,e))}return n}class py extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JM extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&XM(o,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=YS();return this.mutations.forEach(r=>{const o=e.get(r.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(r.key)?null:f;const h=t2(u,f);h!==null&&n.set(r.key,h),u.isValidDocument()||u.convertToNoDocument(qe.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(t,n)=>iN(t,n))&&Uo(this.baseMutations,e.baseMutations,(t,n)=>iN(t,n))}}class gy{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){gt(e.mutations.length===n.length);let r=function(){return FM}();const o=e.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,n[u].version);return new gy(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,nt;function n3(s){switch(s){case fe.OK:return Fe();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Fe()}}function n2(s){if(s===void 0)return pr("GRPC error has no .code"),fe.UNKNOWN;switch(s){case Qt.OK:return fe.OK;case Qt.CANCELLED:return fe.CANCELLED;case Qt.UNKNOWN:return fe.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return fe.INTERNAL;case Qt.UNAVAILABLE:return fe.UNAVAILABLE;case Qt.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Qt.NOT_FOUND:return fe.NOT_FOUND;case Qt.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Qt.ABORTED:return fe.ABORTED;case Qt.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Qt.DATA_LOSS:return fe.DATA_LOSS;default:return Fe()}}(nt=Qt||(Qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new oa([4294967295,4294967295],0);function lN(s){const e=SS().encode(s),t=new vS;return t.update(e),new Uint8Array(t.digest())}function oN(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new oa([t,n],0),new oa([r,o],0)]}class xy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(n<0)throw new Mu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=oa.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(oa.fromNumber(n)));return r.compare(i3)===1&&(r=new oa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=lN(e),[n,r]=oN(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(n,r,o);if(!this.Re(u))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new xy(o,r,t);return n.forEach(f=>u.insert(f)),u}insert(e){if(this.Ee===0)return;const t=lN(e),[n,r]=oN(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(n,r,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Im(qe.min(),r,new Jt(We),gr(),Ze())}}class xd{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xd(n,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class i2{constructor(e,t){this.targetId=e,this.ge=t}}class r2{constructor(e,t,n=Ss.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cN{constructor(){this.pe=0,this.ye=uN(),this.we=Ss.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ze(),t=Ze(),n=Ze();return this.ye.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fe()}}),new xd(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=uN()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,gt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class r3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=gr(),this.$e=nf(),this.Ue=nf(),this.Ke=new Jt(We)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Fe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,r)=>{this.Je(r)&&t(r)})}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const o=r.target;if(nx(o))if(n===0){const u=new Me(o.path);this.ze(t,u,Ds.newNoDocument(u,qe.min()))}else gt(n===1);else{const u=this.et(t);if(u!==n){const f=this.tt(e),h=f?this.nt(f,e,u):1;if(h!==0){this.Ye(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let u,f;try{u=ma(n).toUint8Array()}catch(h){if(h instanceof IS)return zo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{f=new xy(u,r,o)}catch(h){return zo(h instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return f.Ee===0?null:f}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach(o=>{const u=this.ke.it(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.ze(t,o,null),r++)}),r}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const f=this.Xe(u);if(f){if(o.current&&nx(f.target)){const h=new Me(f.target.path);this._t(h).has(u)||this.ut(u,h)||this.ze(u,h,Ds.newNoDocument(h,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let n=Ze();this.Ue.forEach((o,u)=>{let f=!0;u.forEachWhile(h=>{const p=this.Xe(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(n=n.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const r=new Im(e,t,this.Ke,this.Qe,n);return this.Qe=gr(),this.$e=nf(),this.Ue=nf(),this.Ke=new Jt(We),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new cN,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new ls(We),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ls(We),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new cN),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function nf(){return new Jt(Me.comparator)}function uN(){return new Jt(Me.comparator)}const a3={asc:"ASCENDING",desc:"DESCENDING"},l3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o3={and:"AND",or:"OR"};class c3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ax(s,e){return s.useProto3Json||Nm(e)?e:{value:e}}function Gf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function u3(s,e){return Gf(s,e.toTimestamp())}function ji(s){return gt(!!s),qe.fromTimestamp(function(t){const n=fa(t);return new as(n.seconds,n.nanos)}(s))}function yy(s,e){return lx(s,e).canonicalString()}function lx(s,e){const t=function(r){return new Rt(["projects",r.projectId,"databases",r.database])}(s).child("documents");return e===void 0?t:t.child(e)}function l2(s){const e=Rt.fromString(s);return gt(h2(e)),e}function ox(s,e){return yy(s.databaseId,e.path)}function p0(s,e){const t=l2(e);if(t.get(1)!==s.databaseId.projectId)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Me(c2(t))}function o2(s,e){return yy(s.databaseId,e)}function d3(s){const e=l2(s);return e.length===4?Rt.emptyPath():c2(e)}function cx(s){return new Rt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function c2(s){return gt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function dN(s,e,t){return{name:ox(s,e),fields:t.value.mapValue.fields}}function h3(s,e){let t;if("targetChange"in e){e.targetChange;const n=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(p,x){return p.useProto3Json?(gt(x===void 0||typeof x=="string"),Ss.fromBase64String(x||"")):(gt(x===void 0||x instanceof Buffer||x instanceof Uint8Array),Ss.fromUint8Array(x||new Uint8Array))}(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(p){const x=p.code===void 0?fe.UNKNOWN:n2(p.code);return new Re(x,p.message||"")}(u);t=new r2(n,r,o,f||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=p0(s,n.document.name),o=ji(n.document.updateTime),u=n.document.createTime?ji(n.document.createTime):qe.min(),f=new Qs({mapValue:{fields:n.document.fields}}),h=Ds.newFoundDocument(r,o,u,f),p=n.targetIds||[],x=n.removedTargetIds||[];t=new bf(p,x,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=p0(s,n.document),o=n.readTime?ji(n.readTime):qe.min(),u=Ds.newNoDocument(r,o),f=n.removedTargetIds||[];t=new bf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=p0(s,n.document),o=n.removedTargetIds||[];t=new bf([],o,r,null)}else{if(!("filter"in e))return Fe();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:o}=n,u=new s3(r,o),f=n.targetId;t=new i2(f,u)}}return t}function f3(s,e){let t;if(e instanceof gd)t={update:dN(s,e.key,e.value)};else if(e instanceof py)t={delete:ox(s,e.key)};else if(e instanceof Na)t={update:dN(s,e.key,e.data),updateMask:w3(e.fieldMask)};else{if(!(e instanceof JM))return Fe();t={verify:ox(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(o,u){const f=u.transform;if(f instanceof id)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ho)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Hf)return{fieldPath:u.field.canonicalString(),increment:f.Ie};throw Fe()}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:u3(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe()}(s,e.precondition)),t}function m3(s,e){return s&&s.length>0?(gt(e!==void 0),s.map(t=>function(r,o){let u=r.updateTime?ji(r.updateTime):ji(o);return u.isEqual(qe.min())&&(u=ji(o)),new QM(u,r.transformResults||[])}(t,e))):[]}function p3(s,e){return{documents:[o2(s,e.path)]}}function g3(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=o2(s,r);const o=function(p){if(p.length!==0)return d2(Jn.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(x=>function(_){return{field:So(_.field),direction:v3(_.dir)}}(x))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=ax(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:r}}function x3(s){let e=d3(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){gt(n===1);const x=t.from[0];x.allDescendants?r=x.collectionId:e=e.child(x.collectionId)}let o=[];t.where&&(o=function(v){const _=u2(v);return _ instanceof Jn&&US(_)?_.getFilters():[_]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(_=>function(w){return new nd(To(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(_))}(t.orderBy));let f=null;t.limit&&(f=function(v){let _;return _=typeof v=="object"?v.value:v,Nm(_)?null:_}(t.limit));let h=null;t.startAt&&(h=function(v){const _=!!v.before,N=v.values||[];return new qf(N,_)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const _=!v.before,N=v.values||[];return new qf(N,_)}(t.endAt)),LM(e,r,u,o,f,"F",h,p)}function y3(s,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u2(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=To(t.unaryFilter.field);return Xt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=To(t.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=To(t.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=To(t.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(s):s.fieldFilter!==void 0?function(t){return Xt.create(To(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Jn.create(t.compositeFilter.filters.map(n=>u2(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe()}}(t.compositeFilter.op))}(s):Fe()}function v3(s){return a3[s]}function b3(s){return l3[s]}function _3(s){return o3[s]}function So(s){return{fieldPath:s.canonicalString()}}function To(s){return js.fromServerFormat(s.fieldPath)}function d2(s){return s instanceof Xt?function(t){if(t.op==="=="){if(Z1(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(X1(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z1(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(X1(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:b3(t.op),value:t.value}}}(s):s instanceof Jn?function(t){const n=t.getFilters().map(r=>d2(r));return n.length===1?n[0]:{compositeFilter:{op:_3(t.op),filters:n}}}(s):Fe()}function w3(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function h2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,n,r,o=qe.min(),u=qe.min(),f=Ss.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=h}withSequenceNumber(e){return new ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.Tt=e}}function E3(s){const e=x3({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?rx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.Tn=new S3}addToCollectionParentIndex(e,t){return this.Tn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(ha.min())}updateCollectionGroup(e,t,n){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class S3{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ls(Rt.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ls(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f2=41943040;class Ks{static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(f2,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Go(0)}static Kn(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="LruGarbageCollector",T3=1048576;function mN([s,e],[t,n]){const r=We(s,t);return r===0?We(e,n):r}class C3{constructor(e){this.Hn=e,this.buffer=new ls(mN),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();mN(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A3{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ie(fN,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rc(t)?Ie(fN,"Ignoring IndexedDB error during garbage collection: ",t):await ic(t)}await this.er(3e5)})}}class I3{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return me.resolve(wm.ae);const n=new C3(t);return this.tr.forEachTarget(e,r=>n.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>n.Zn(r))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(hN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hN):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,o,u,f,h,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,u=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(n=v,f=Date.now(),this.removeTargets(e,n,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,n))).next(v=>(p=Date.now(),Eo()<=Xe.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${o} targets in `+(h-f)+`ms
	Removed ${v} documents in `+(p-h)+`ms
Total Duration: ${p-x}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}}function R3(s,e){return new I3(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ds.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?me.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&qu(n.mutation,r,gn.empty(),as.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Ze()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Ze()){const r=cl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(o=>{let u=Ou();return o.forEach((f,h)=>{u=u.insert(f,h.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=cl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ze()))}populateOverlays(e,t,n){const r=[];return n.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,n,r){let o=gr();const u=Fu(),f=function(){return Fu()}();return t.forEach((h,p)=>{const x=n.get(p.key);r.has(p.key)&&(x===void 0||x.mutation instanceof Na)?o=o.insert(p.key,p):x!==void 0?(u.set(p.key,x.mutation.getFieldMask()),qu(x.mutation,p,x.mutation.getFieldMask(),as.now())):u.set(p.key,gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,x)=>u.set(p,x)),t.forEach((p,x)=>{var v;return f.set(p,new D3(x,(v=u.get(p))!==null&&v!==void 0?v:null))}),f))}recalculateAndSaveOverlays(e,t){const n=Fu();let r=new Jt((u,f)=>u-f),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let x=n.get(h)||gn.empty();x=f.applyToLocalView(p,x),n.set(h,x);const v=(r.get(f.batchId)||Ze()).add(h);r=r.insert(f.batchId,v)})}).next(()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const h=f.getNext(),p=h.key,x=h.value,v=YS();x.forEach(_=>{if(!o.has(_)){const N=t2(t.get(_),n.get(_));N!==null&&v.set(_,N),o=o.add(_)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return me.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(u){return Me.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):me.resolve(cl());let f=Ju,h=o;return u.next(p=>me.forEach(p,(x,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),o.get(x)?me.resolve():this.remoteDocumentCache.getEntry(e,x).next(_=>{h=h.insert(x,_)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Ze())).next(x=>({batchId:f,changes:KS(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(n=>{let r=Ou();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let u=Ou();return this.indexManager.getCollectionParents(e,o).next(f=>me.forEach(f,h=>{const p=function(v,_){return new ac(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,n,r).next(x=>{x.forEach((v,_)=>{u=u.insert(v,_)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r))).next(u=>{o.forEach((h,p)=>{const x=p.getKey();u.get(x)===null&&(u=u.insert(x,Ds.newInvalidDocument(x)))});let f=Ou();return u.forEach((h,p)=>{const x=o.get(h);x!==void 0&&qu(x.mutation,p,gn.empty(),as.now()),Tm(t,p)&&(f=f.insert(h,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return me.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ji(r.createTime)}}(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(r){return{name:r.name,query:E3(r.bundledQuery),readTime:ji(r.readTime)}}(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new Jt(Me.comparator),this.Rr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const n=cl();return me.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,o)=>{this.Et(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(n)),me.resolve()}getOverlaysForCollection(e,t,n){const r=cl(),o=t.length+1,u=new Me(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const h=f.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>n&&r.set(h.getKey(),h)}return me.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new Jt((p,x)=>p-x);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let x=o.get(p.largestBatchId);x===null&&(x=cl(),o=o.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const f=cl(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,x)=>f.set(p,x)),!(f.size()>=r)););return me.resolve(f)}Et(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const u=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new t3(t,n));let o=this.Rr.get(t);o===void 0&&(o=Ze(),this.Rr.set(t,o)),this.Rr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.sessionToken=Ss.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.Vr=new ls(ms.mr),this.gr=new ls(ms.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new ms(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new ms(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new Me(new Rt([])),n=new ms(t,e),r=new ms(t,e+1),o=[];return this.gr.forEachInRange([n,r],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Me(new Rt([])),n=new ms(t,e),r=new ms(t,e+1);let o=Ze();return this.gr.forEachInRange([n,r],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new ms(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ms{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Me.comparator(e.key,t.key)||We(e.Cr,t.Cr)}static pr(e,t){return We(e.Cr,t.Cr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new ls(ms.mr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new e3(o,t,n,r);this.mutationQueue.push(u);for(const f of r)this.Mr=this.Mr.add(new ms(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),o=r<0?0:r;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?oy:this.Fr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ms(t,0),r=new ms(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([n,r],u=>{const f=this.Or(u.Cr);o.push(f)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ls(We);return t.forEach(r=>{const o=new ms(r,0),u=new ms(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],f=>{n=n.add(f.Cr)})}),me.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;Me.isDocumentKey(o)||(o=o.child(""));const u=new ms(new Me(o),0);let f=new ls(We);return this.Mr.forEachWhile(h=>{const p=h.key.path;return!!n.isPrefixOf(p)&&(p.length===r&&(f=f.add(h.Cr)),!0)},u),me.resolve(this.Br(f))}Br(e){const t=[];return e.forEach(n=>{const r=this.Or(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){gt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return me.forEach(t.mutations,r=>{const o=new ms(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new ms(t,0),r=this.Mr.firstAfterOrEqual(n);return me.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.kr=e,this.docs=function(){return new Jt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,u=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return me.resolve(n?n.document.mutableCopy():Ds.newInvalidDocument(t))}getEntries(e,t){let n=gr();return t.forEach(r=>{const o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Ds.newInvalidDocument(r))}),me.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=gr();const u=t.path,f=new Me(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(f);for(;h.hasNext();){const{key:p,value:{document:x}}=h.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||pM(mM(x),n)<=0||(r.has(x.key)||Tm(t,x))&&(o=o.insert(x.key,x.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,n,r){Fe()}qr(e,t){return me.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new U3(this)}getSize(e){return me.resolve(this.size)}}class U3 extends k3{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)}),me.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.persistence=e,this.Qr=new Sl(t=>dy(t),hy),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new vy,this.targetCount=0,this.Kr=Go.Un()}forEachTarget(e,t){return this.Qr.forEach((n,r)=>t(r)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),me.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Go(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.zn(t),me.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.Qr.forEach((u,f)=>{f.sequenceNumber<=t&&n.get(f.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)}),me.waitFor(o).next(()=>r)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return me.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),me.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(u=>{o.push(r.markPotentiallyOrphaned(e,u))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),me.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return me.resolve(n)}containsKey(e,t){return me.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new wm(0),this.zr=!1,this.zr=!0,this.jr=new L3,this.referenceDelegate=e(this),this.Hr=new B3(this),this.indexManager=new j3,this.remoteDocumentCache=function(r){return new z3(r)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new N3(t),this.Yr=new O3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new V3(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ie("MemoryPersistence","Starting transaction:",e);const r=new F3(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next(o=>this.referenceDelegate.Xr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}ei(e,t){return me.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class F3 extends xM{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.ti=new vy,this.ni=null}static ri(e){return new by(e)}get ii(){if(this.ni)return this.ni;throw Fe()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),me.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),me.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(r=>this.ii.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.ii.add(o.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.ii,n=>{const r=Me.fromPath(n);return this.si(e,r).next(o=>{o||t.removeEntry(r,qe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return me.or([()=>me.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class $f{constructor(e,t){this.persistence=e,this.oi=new Sl(n=>bM(n.path),(n,r)=>n.isEqual(r)),this.garbageCollector=R3(this,t)}static ri(e,t){return new $f(e,t)}Zr(){}Xr(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(r=>n+r))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return me.forEach(this.oi,(n,r)=>this.ar(e,n,r).next(o=>o?me.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.qr(e,u=>this.ar(e,u,t).next(f=>{f||(n++,o.removeEntry(u,qe.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),me.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),me.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}ar(e,t,n){return me.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.oi.get(t);return me.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Ze(),r=Ze();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new _y(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return QR()?8:yM(Vs())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,r,n).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new q3;return this._s(e,t,u).next(f=>{if(o.result=f,this.Xi)return this.us(e,t,u,f.size)})}).next(()=>o.result)}us(e,t,n,r){return n.documentReadCount<this.es?(Eo()<=Xe.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),me.resolve()):(Eo()<=Xe.DEBUG&&Ie("QueryEngine","Query:",jo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Eo()<=Xe.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(t))):me.resolve())}rs(e,t){if(sN(t))return me.resolve(null);let n=Ei(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=rx(t,null,"F"),n=Ei(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const u=Ze(...o);return this.ns.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,n).next(h=>{const p=this.cs(t,f);return this.ls(t,p,u,h.readTime)?this.rs(e,rx(t,null,"F")):this.hs(e,p,t,h)}))})))}ss(e,t,n,r){return sN(t)||r.isEqual(qe.min())?me.resolve(null):this.ns.getDocuments(e,n).next(o=>{const u=this.cs(t,o);return this.ls(t,u,n,r)?me.resolve(null):(Eo()<=Xe.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jo(t)),this.hs(e,u,t,fM(r,Ju)).next(f=>f))})}cs(e,t){let n=new ls($S(e));return t.forEach((r,o)=>{Tm(e,o)&&(n=n.add(o))}),n}ls(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}_s(e,t,n){return Eo()<=Xe.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",jo(t)),this.ns.getDocumentsMatchingQuery(e,t,ha.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="LocalStore",G3=3e8;class $3{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Jt(We),this.Is=new Sl(o=>dy(o),hy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function W3(s,e,t,n){return new $3(s,e,t,n)}async function p2(s,e){const t=He(s);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(o=>{const u=[],f=[];let h=Ze();for(const p of r){u.push(p.batchId);for(const x of p.mutations)h=h.add(x.key)}for(const p of o){f.push(p.batchId);for(const x of p.mutations)h=h.add(x.key)}return t.localDocuments.getDocuments(n,h).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:f}))})})}function K3(s,e){const t=He(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(f,h,p,x){const v=p.batch,_=v.keys();let N=me.resolve();return _.forEach(w=>{N=N.next(()=>x.getEntry(h,w)).next(E=>{const R=p.docVersions.get(w);gt(R!==null),E.version.compareTo(R)<0&&(v.applyToRemoteDocument(E,p),E.isValidDocument()&&(E.setReadTime(p.commitVersion),x.addEntry(E)))})}),N.next(()=>f.mutationQueue.removeMutationBatch(h,v))}(t,n,e,o).next(()=>o.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(f){let h=Ze();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(h=h.add(f.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function g2(s){const e=He(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Y3(s,e){const t=He(s),n=e.snapshotVersion;let r=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});r=t.Ts;const f=[];e.targetChanges.forEach((x,v)=>{const _=r.get(v);if(!_)return;f.push(t.Hr.removeMatchingKeys(o,x.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,x.addedDocuments,v)));let N=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?N=N.withResumeToken(Ss.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,n)),r=r.insert(v,N),function(E,R,T){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=G3?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(_,N,x)&&f.push(t.Hr.updateTargetData(o,N))});let h=gr(),p=Ze();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,x))}),f.push(Q3(o,u,e.documentUpdates).next(x=>{h=x.Vs,p=x.fs})),!n.isEqual(qe.min())){const x=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,n));f.push(x)}return me.waitFor(f).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.Ts=r,o))}function Q3(s,e,t){let n=Ze(),r=Ze();return t.forEach(o=>n=n.add(o)),e.getEntries(s,n).next(o=>{let u=gr();return t.forEach((f,h)=>{const p=o.get(f);h.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),h.isNoDocument()&&h.version.isEqual(qe.min())?(e.removeEntry(f,h.readTime),u=u.insert(f,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),u=u.insert(f,h)):Ie(wy,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",h.version)}),{Vs:u,fs:r}})}function X3(s,e){const t=He(s);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=oy),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Z3(s,e){const t=He(s);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Hr.getTargetData(n,e).next(o=>o?(r=o,me.resolve(r)):t.Hr.allocateTargetId(n).next(u=>(r=new ia(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=t.Ts.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function ux(s,e,t){const n=He(s),r=n.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,u=>n.persistence.referenceDelegate.removeTarget(u,r))}catch(u){if(!rc(u))throw u;Ie(wy,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ts=n.Ts.remove(e),n.Is.delete(r.target)}function pN(s,e,t){const n=He(s);let r=qe.min(),o=Ze();return n.persistence.runTransaction("Execute query","readwrite",u=>function(h,p,x){const v=He(h),_=v.Is.get(x);return _!==void 0?me.resolve(v.Ts.get(_)):v.Hr.getTargetData(p,x)}(n,u,Ei(e)).next(f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(u,f.targetId).next(h=>{o=h})}).next(()=>n.Ps.getDocumentsMatchingQuery(u,e,t?r:qe.min(),t?o:Ze())).next(f=>(J3(n,zM(e),f),{documents:f,gs:o})))}function J3(s,e,t){let n=s.Es.get(e)||qe.min();t.forEach((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),s.Es.set(e,n)}class gN{constructor(){this.activeTargetIds=GM()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eL{constructor(){this.ho=new gN,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new gN,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="ConnectivityMonitor";class yN{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ie(xN,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ie(xN,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf=null;function dx(){return rf===null?rf=function(){return 268435456+Math.round(2147483648*Math.random())}():rf++,"0x"+rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="RestConnection",sL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nL{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Bf?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,o){const u=dx(),f=this.bo(e,t.toUriEncodedString());Ie(g0,`Sending RPC '${e}' ${u}:`,f,n);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,r,o),this.vo(e,f,h,n).then(p=>(Ie(g0,`Received RPC '${e}' ${u}: `,p),p),p=>{throw zo(g0,`RPC '${e}' ${u} failed with error: `,p,"url: ",f,"request:",n),p})}Co(e,t,n,r,o,u){return this.So(e,t,n,r,o)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),n&&n.headers.forEach((r,o)=>e[o]=r)}bo(e,t){const n=sL[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="WebChannelConnection";class rL extends nL{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const o=dx();return new Promise((u,f)=>{const h=new bS;h.setWithCredentials(!0),h.listenOnce(_S.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case gf.NO_ERROR:const x=h.getResponseJson();Ie(Rs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(x)),u(x);break;case gf.TIMEOUT:Ie(Rs,`RPC '${e}' ${o} timed out`),f(new Re(fe.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const v=h.getStatus();if(Ie(Rs,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const w=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(T)>=0?T:fe.UNKNOWN}(N.status);f(new Re(w,N.message))}else f(new Re(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Re(fe.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Ie(Rs,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);Ie(Rs,`RPC '${e}' ${o} sending request:`,r),h.send(t,"POST",p,n,15)})}Wo(e,t,n){const r=dx(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ES(),f=NS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const x=o.join("");Ie(Rs,`Creating RPC '${e}' stream ${r}: ${x}`,h);const v=u.createWebChannel(x,h);let _=!1,N=!1;const w=new iL({Fo:R=>{N?Ie(Rs,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(_||(Ie(Rs,`Opening RPC '${e}' stream ${r} transport.`),v.open(),_=!0),Ie(Rs,`RPC '${e}' stream ${r} sending:`,R),v.send(R))},Mo:()=>v.close()}),E=(R,T,k)=>{R.listen(T,P=>{try{k(P)}catch(H){setTimeout(()=>{throw H},0)}})};return E(v,Pu.EventType.OPEN,()=>{N||(Ie(Rs,`RPC '${e}' stream ${r} transport opened.`),w.Qo())}),E(v,Pu.EventType.CLOSE,()=>{N||(N=!0,Ie(Rs,`RPC '${e}' stream ${r} transport closed`),w.Uo())}),E(v,Pu.EventType.ERROR,R=>{N||(N=!0,zo(Rs,`RPC '${e}' stream ${r} transport errored:`,R),w.Uo(new Re(fe.UNAVAILABLE,"The operation could not be completed")))}),E(v,Pu.EventType.MESSAGE,R=>{var T;if(!N){const k=R.data[0];gt(!!k);const P=k,H=(P==null?void 0:P.error)||((T=P[0])===null||T===void 0?void 0:T.error);if(H){Ie(Rs,`RPC '${e}' stream ${r} received error:`,H);const B=H.status;let G=function(I){const O=Qt[I];if(O!==void 0)return n2(O)}(B),M=H.message;G===void 0&&(G=fe.INTERNAL,M="Unknown error status: "+B+" with message "+H.message),N=!0,w.Uo(new Re(G,M)),v.close()}else Ie(Rs,`RPC '${e}' stream ${r} received:`,k),w.Ko(k)}}),E(f,wS.STAT_EVENT,R=>{R.stat===X0.PROXY?Ie(Rs,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===X0.NOPROXY&&Ie(Rs,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function x0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(s){return new c3(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,n=1e3,r=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="PersistentStream";class y2{constructor(e,t,n,r,o,u,f,h){this.Ti=e,this.n_=n,this.r_=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new x2(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.i_===t&&this.V_(n,r)},n=>{e(()=>{const r=new Re(fe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(r)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{n(()=>this.m_(r))}),this.stream.onMessage(r=>{n(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ie(vN,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Ie(vN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aL extends y2{constructor(e,t,n,r,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=h3(this.serializer,e),n=function(o){if(!("targetChange"in o))return qe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?qe.min():u.readTime?ji(u.readTime):qe.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=cx(this.serializer),t.addTarget=function(o,u){let f;const h=u.target;if(f=nx(h)?{documents:p3(o,h)}:{query:g3(o,h).ht},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=a2(o,u.resumeToken);const p=ax(o,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(qe.min())>0){f.readTime=Gf(o,u.snapshotVersion.toTimestamp());const p=ax(o,u.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,e);const n=y3(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=cx(this.serializer),t.removeTarget=e,this.I_(t)}}class lL extends y2{constructor(e,t,n,r,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=m3(e.writeResults,e.commitTime),n=ji(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=cx(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>f3(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{}class cL extends oL{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(e,lx(t,n),r,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(fe.UNKNOWN,o.toString())})}Co(e,t,n,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Co(e,lx(t,n),r,u,f,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(fe.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class uL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(pr(t),this.N_=!1):Ie("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="RemoteStore";class dL{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{n.enqueueAndForget(async()=>{Tl(this)&&(Ie(xl,"Restarting streams for network reachability change."),await async function(h){const p=He(h);p.W_.add(4),await yd(p),p.j_.set("Unknown"),p.W_.delete(4),await km(p)}(this))})}),this.j_=new uL(n,r)}}async function km(s){if(Tl(s))for(const e of s.G_)await e(!0)}async function yd(s){for(const e of s.G_)await e(!1)}function v2(s,e){const t=He(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Sy(t)?jy(t):lc(t).c_()&&Ey(t,e))}function Ny(s,e){const t=He(s),n=lc(t);t.K_.delete(e),n.c_()&&b2(t,e),t.K_.size===0&&(n.c_()?n.P_():Tl(t)&&t.j_.set("Unknown"))}function Ey(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lc(s).y_(e)}function b2(s,e){s.H_.Ne(e),lc(s).w_(e)}function jy(s){s.H_=new r3({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),lc(s).start(),s.j_.B_()}function Sy(s){return Tl(s)&&!lc(s).u_()&&s.K_.size>0}function Tl(s){return He(s).W_.size===0}function _2(s){s.H_=void 0}async function hL(s){s.j_.set("Online")}async function fL(s){s.K_.forEach((e,t)=>{Ey(s,e)})}async function mL(s,e){_2(s),Sy(s)?(s.j_.q_(e),jy(s)):s.j_.set("Unknown")}async function pL(s,e,t){if(s.j_.set("Online"),e instanceof r2&&e.state===2&&e.cause)try{await async function(r,o){const u=o.cause;for(const f of o.targetIds)r.K_.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.K_.delete(f),r.H_.removeTarget(f))}(s,e)}catch(n){Ie(xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wf(s,n)}else if(e instanceof bf?s.H_.We(e):e instanceof i2?s.H_.Ze(e):s.H_.je(e),!t.isEqual(qe.min()))try{const n=await g2(s.localStore);t.compareTo(n)>=0&&await function(o,u){const f=o.H_.ot(u);return f.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const x=o.K_.get(p);x&&o.K_.set(p,x.withResumeToken(h.resumeToken,u))}}),f.targetMismatches.forEach((h,p)=>{const x=o.K_.get(h);if(!x)return;o.K_.set(h,x.withResumeToken(Ss.EMPTY_BYTE_STRING,x.snapshotVersion)),b2(o,h);const v=new ia(x.target,h,p,x.sequenceNumber);Ey(o,v)}),o.remoteSyncer.applyRemoteEvent(f)}(s,t)}catch(n){Ie(xl,"Failed to raise snapshot:",n),await Wf(s,n)}}async function Wf(s,e,t){if(!rc(e))throw e;s.W_.add(1),await yd(s),s.j_.set("Offline"),t||(t=()=>g2(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Ie(xl,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await km(s)})}function w2(s,e){return e().catch(t=>Wf(s,t,e))}async function Dm(s){const e=He(s),t=ga(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:oy;for(;gL(e);)try{const r=await X3(e.localStore,n);if(r===null){e.U_.length===0&&t.P_();break}n=r.batchId,xL(e,r)}catch(r){await Wf(e,r)}N2(e)&&E2(e)}function gL(s){return Tl(s)&&s.U_.length<10}function xL(s,e){s.U_.push(e);const t=ga(s);t.c_()&&t.S_&&t.b_(e.mutations)}function N2(s){return Tl(s)&&!ga(s).u_()&&s.U_.length>0}function E2(s){ga(s).start()}async function yL(s){ga(s).C_()}async function vL(s){const e=ga(s);for(const t of s.U_)e.b_(t.mutations)}async function bL(s,e,t){const n=s.U_.shift(),r=gy.from(n,e,t);await w2(s,()=>s.remoteSyncer.applySuccessfulWrite(r)),await Dm(s)}async function _L(s,e){e&&ga(s).S_&&await async function(n,r){if(function(u){return n3(u)&&u!==fe.ABORTED}(r.code)){const o=n.U_.shift();ga(n).h_(),await w2(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Dm(n)}}(s,e),N2(s)&&E2(s)}async function bN(s,e){const t=He(s);t.asyncQueue.verifyOperationInProgress(),Ie(xl,"RemoteStore received new credentials");const n=Tl(t);t.W_.add(3),await yd(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await km(t)}async function wL(s,e){const t=He(s);e?(t.W_.delete(2),await km(t)):e||(t.W_.add(2),await yd(t),t.j_.set("Unknown"))}function lc(s){return s.J_||(s.J_=function(t,n,r){const o=He(t);return o.M_(),new aL(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(s.datastore,s.asyncQueue,{xo:hL.bind(null,s),No:fL.bind(null,s),Lo:mL.bind(null,s),p_:pL.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),Sy(s)?jy(s):s.j_.set("Unknown")):(await s.J_.stop(),_2(s))})),s.J_}function ga(s){return s.Y_||(s.Y_=function(t,n,r){const o=He(t);return o.M_(),new lL(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:yL.bind(null,s),Lo:_L.bind(null,s),D_:vL.bind(null,s),v_:bL.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await Dm(s)):(await s.Y_.stop(),s.U_.length>0&&(Ie(xl,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const u=Date.now()+n,f=new Ty(e,t,u,r,o);return f.start(n),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cy(s,e){if(pr("AsyncQueue",`${e}: ${s}`),rc(s))return new Re(fe.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Me.comparator(t.key,n.key):(t,n)=>Me.comparator(t.key,n.key),this.keyedMap=Ou(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Do;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.Z_=new Jt(Me.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Fe():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class $o{constructor(e,t,n,r,o,u,f,h,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,r,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new $o(e,t,Do.emptySet(t),u,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class EL{constructor(){this.queries=wN(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const r=He(t),o=r.queries;r.queries=wN(),o.forEach((u,f)=>{for(const h of f.ta)h.onError(n)})})(this,new Re(fe.ABORTED,"Firestore shutting down"))}}function wN(){return new Sl(s=>GS(s),Sm)}async function Ay(s,e){const t=He(s);let n=3;const r=e.query;let o=t.queries.get(r);o?!o.na()&&e.ra()&&(n=2):(o=new NL,n=e.ra()?0:1);try{switch(n){case 0:o.ea=await t.onListen(r,!0);break;case 1:o.ea=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=Cy(u,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Ry(t)}async function Iy(s,e){const t=He(s),n=e.query;let r=3;const o=t.queries.get(n);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?r=e.ra()?0:1:!o.na()&&e.ra()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function jL(s,e){const t=He(s);let n=!1;for(const r of e){const o=r.query,u=t.queries.get(o);if(u){for(const f of u.ta)f.oa(r)&&(n=!0);u.ea=r}}n&&Ry(t)}function SL(s,e,t){const n=He(s),r=n.queries.get(e);if(r)for(const o of r.ta)o.onError(t);n.queries.delete(e)}function Ry(s){s.ia.forEach(e=>{e.next()})}var hx,NN;(NN=hx||(hx={}))._a="default",NN.Cache="cache";class ky{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new $o(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==hx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.key=e}}class S2{constructor(e){this.key=e}}class TL{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ze(),this.mutatedKeys=Ze(),this.ya=$S(e),this.wa=new Do(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new _N,r=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((x,v)=>{const _=r.get(x),N=Tm(this.query,v)?v:null,w=!!_&&this.mutatedKeys.has(_.key),E=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let R=!1;_&&N?_.data.isEqual(N.data)?w!==E&&(n.track({type:3,doc:N}),R=!0):this.va(_,N)||(n.track({type:2,doc:N}),R=!0,(h&&this.ya(N,h)>0||p&&this.ya(N,p)<0)&&(f=!0)):!_&&N?(n.track({type:0,doc:N}),R=!0):_&&!N&&(n.track({type:1,doc:_}),R=!0,(h||p)&&(f=!0)),R&&(N?(u=u.add(N),o=E?o.add(x):o.delete(x)):(u=u.delete(x),o=o.delete(x)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),o=o.delete(x.key),n.track({type:1,doc:x})}return{wa:u,Da:n,ls:f,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((x,v)=>function(N,w){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return E(N)-E(w)}(x.type,v.type)||this.ya(x.doc,v.doc)),this.Ca(n),r=r!=null&&r;const f=t&&!r?this.Fa():[],h=this.pa.size===0&&this.current&&!r?1:0,p=h!==this.ga;return this.ga=h,u.length!==0||p?{snapshot:new $o(this.query,e.wa,o,u,e.mutatedKeys,h===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:f}:{Ma:f}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _N,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ze(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new S2(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new j2(n))}),t}Oa(e){this.fa=e.gs,this.pa=Ze();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return $o.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dy="SyncEngine";class CL{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class AL{constructor(e){this.key=e,this.Ba=!1}}class IL{constructor(e,t,n,r,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Sl(f=>GS(f),Sm),this.qa=new Map,this.Qa=new Set,this.$a=new Jt(Me.comparator),this.Ua=new Map,this.Ka=new vy,this.Wa={},this.Ga=new Map,this.za=Go.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RL(s,e,t=!0){const n=k2(s);let r;const o=n.ka.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Na()):r=await T2(n,e,t,!0),r}async function kL(s,e){const t=k2(s);await T2(t,e,!0,!1)}async function T2(s,e,t,n){const r=await Z3(s.localStore,Ei(e)),o=r.targetId,u=s.sharedClientState.addLocalQueryTarget(o,t);let f;return n&&(f=await DL(s,e,o,u==="current",r.resumeToken)),s.isPrimaryClient&&t&&v2(s.remoteStore,r),f}async function DL(s,e,t,n,r){s.Ha=(v,_,N)=>async function(E,R,T,k){let P=R.view.ba(T);P.ls&&(P=await pN(E.localStore,R.query,!1).then(({documents:M})=>R.view.ba(M,P)));const H=k&&k.targetChanges.get(R.targetId),B=k&&k.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(P,E.isPrimaryClient,H,B);return jN(E,R.targetId,G.Ma),G.snapshot}(s,v,_,N);const o=await pN(s.localStore,e,!0),u=new TL(e,o.gs),f=u.ba(o.documents),h=xd.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),p=u.applyChanges(f,s.isPrimaryClient,h);jN(s,t,p.Ma);const x=new CL(e,t,u);return s.ka.set(e,x),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function PL(s,e,t){const n=He(s),r=n.ka.get(e),o=n.qa.get(r.targetId);if(o.length>1)return n.qa.set(r.targetId,o.filter(u=>!Sm(u,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ux(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&Ny(n.remoteStore,r.targetId),fx(n,r.targetId)}).catch(ic)):(fx(n,r.targetId),await ux(n.localStore,r.targetId,!0))}async function OL(s,e){const t=He(s),n=t.ka.get(e),r=t.qa.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Ny(t.remoteStore,n.targetId))}async function ML(s,e,t){const n=qL(s);try{const r=await function(u,f){const h=He(u),p=as.now(),x=f.reduce((N,w)=>N.add(w.key),Ze());let v,_;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let w=gr(),E=Ze();return h.ds.getEntries(N,x).next(R=>{w=R,w.forEach((T,k)=>{k.isValidDocument()||(E=E.add(T))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,w)).next(R=>{v=R;const T=[];for(const k of f){const P=ZM(k,v.get(k.key).overlayedDocument);P!=null&&T.push(new Na(k.key,P,LS(P.value.mapValue),Dn.exists(!0)))}return h.mutationQueue.addMutationBatch(N,p,T,f)}).next(R=>{_=R;const T=R.applyToLocalDocumentSet(v,E);return h.documentOverlayCache.saveOverlays(N,R.batchId,T)})}).then(()=>({batchId:_.batchId,changes:KS(v)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(u,f,h){let p=u.Wa[u.currentUser.toKey()];p||(p=new Jt(We)),p=p.insert(f,h),u.Wa[u.currentUser.toKey()]=p}(n,r.batchId,t),await vd(n,r.changes),await Dm(n.remoteStore)}catch(r){const o=Cy(r,"Failed to persist write");t.reject(o)}}async function C2(s,e){const t=He(s);try{const n=await Y3(t.localStore,e);e.targetChanges.forEach((r,o)=>{const u=t.Ua.get(o);u&&(gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.Ba=!0:r.modifiedDocuments.size>0?gt(u.Ba):r.removedDocuments.size>0&&(gt(u.Ba),u.Ba=!1))}),await vd(t,n,e)}catch(n){await ic(n)}}function EN(s,e,t){const n=He(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.ka.forEach((o,u)=>{const f=u.view.sa(e);f.snapshot&&r.push(f.snapshot)}),function(u,f){const h=He(u);h.onlineState=f;let p=!1;h.queries.forEach((x,v)=>{for(const _ of v.ta)_.sa(f)&&(p=!0)}),p&&Ry(h)}(n.eventManager,e),r.length&&n.La.p_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function LL(s,e,t){const n=He(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Ua.get(e),o=r&&r.key;if(o){let u=new Jt(Me.comparator);u=u.insert(o,Ds.newNoDocument(o,qe.min()));const f=Ze().add(o),h=new Im(qe.min(),new Map,new Jt(We),u,f);await C2(n,h),n.$a=n.$a.remove(o),n.Ua.delete(e),Py(n)}else await ux(n.localStore,e,!1).then(()=>fx(n,e,t)).catch(ic)}async function VL(s,e){const t=He(s),n=e.batch.batchId;try{const r=await K3(t.localStore,e);I2(t,n,null),A2(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await vd(t,r)}catch(r){await ic(r)}}async function zL(s,e,t){const n=He(s);try{const r=await function(u,f){const h=He(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let x;return h.mutationQueue.lookupMutationBatch(p,f).next(v=>(gt(v!==null),x=v.keys(),h.mutationQueue.removeMutationBatch(p,v))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,x,f)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x)).next(()=>h.localDocuments.getDocuments(p,x))})}(n.localStore,e);I2(n,e,t),A2(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await vd(n,r)}catch(r){await ic(r)}}function A2(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function I2(s,e,t){const n=He(s);let r=n.Wa[n.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),n.Wa[n.currentUser.toKey()]=r}}function fx(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.qa.get(e))s.ka.delete(n),t&&s.La.Ja(n,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(n=>{s.Ka.containsKey(n)||R2(s,n)})}function R2(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(Ny(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),Py(s))}function jN(s,e,t){for(const n of t)n instanceof j2?(s.Ka.addReference(n.key,e),UL(s,n)):n instanceof S2?(Ie(Dy,"Document no longer in limbo: "+n.key),s.Ka.removeReference(n.key,e),s.Ka.containsKey(n.key)||R2(s,n.key)):Fe()}function UL(s,e){const t=e.key,n=t.path.canonicalString();s.$a.get(t)||s.Qa.has(n)||(Ie(Dy,"New document in limbo: "+t),s.Qa.add(n),Py(s))}function Py(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new Me(Rt.fromString(e)),n=s.za.next();s.Ua.set(n,new AL(t)),s.$a=s.$a.insert(t,n),v2(s.remoteStore,new ia(Ei(jm(t.path)),n,"TargetPurposeLimboResolution",wm.ae))}}async function vd(s,e,t){const n=He(s),r=[],o=[],u=[];n.ka.isEmpty()||(n.ka.forEach((f,h)=>{u.push(n.Ha(h,e,t).then(p=>{var x;if((p||t)&&n.isPrimaryClient){const v=p?!p.fromCache:(x=t==null?void 0:t.targetChanges.get(h.targetId))===null||x===void 0?void 0:x.current;n.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(p){r.push(p);const v=_y.Yi(h.targetId,p);o.push(v)}}))}),await Promise.all(u),n.La.p_(r),await async function(h,p){const x=He(h);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>me.forEach(p,_=>me.forEach(_.Hi,N=>x.persistence.referenceDelegate.addReference(v,_.targetId,N)).next(()=>me.forEach(_.Ji,N=>x.persistence.referenceDelegate.removeReference(v,_.targetId,N)))))}catch(v){if(!rc(v))throw v;Ie(wy,"Failed to update sequence numbers: "+v)}for(const v of p){const _=v.targetId;if(!v.fromCache){const N=x.Ts.get(_),w=N.snapshotVersion,E=N.withLastLimboFreeSnapshotVersion(w);x.Ts=x.Ts.insert(_,E)}}}(n.localStore,o))}async function BL(s,e){const t=He(s);if(!t.currentUser.isEqual(e)){Ie(Dy,"User change. New user:",e.toKey());const n=await p2(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(f=>{f.forEach(h=>{h.reject(new Re(fe.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vd(t,n.Rs)}}function FL(s,e){const t=He(s),n=t.Ua.get(e);if(n&&n.Ba)return Ze().add(n.key);{let r=Ze();const o=t.qa.get(e);if(!o)return r;for(const u of o){const f=t.ka.get(u);r=r.unionWith(f.view.Sa)}return r}}function k2(s){const e=He(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=C2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LL.bind(null,e),e.La.p_=jL.bind(null,e.eventManager),e.La.Ja=SL.bind(null,e.eventManager),e}function qL(s){const e=He(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}class Kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return W3(this.persistence,new H3,e.initialUser,this.serializer)}Xa(e){return new m2(by.ri,this.serializer)}Za(e){return new eL}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kf.provider={build:()=>new Kf};class HL extends Kf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){gt(this.persistence.referenceDelegate instanceof $f);const n=this.persistence.referenceDelegate.garbageCollector;return new A3(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new m2(n=>$f.ri(n,t),this.serializer)}}class mx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=BL.bind(null,this.syncEngine),await wL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EL}()}createDatastore(e){const t=Rm(e.databaseInfo.databaseId),n=function(o){return new rL(o)}(e.databaseInfo);return function(o,u,f,h){return new cL(o,u,f,h)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,o,u,f){return new dL(n,r,o,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>EN(this.syncEngine,t,0),function(){return yN.D()?new yN:new tL}())}createSyncEngine(e,t){return function(r,o,u,f,h,p,x){const v=new IL(r,o,u,f,h,p);return x&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const o=He(r);Ie(xl,"RemoteStore shutting down."),o.W_.add(5),await yd(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}mx.provider={build:()=>new mx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="FirestoreClient";class GL{constructor(e,t,n,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ks.UNAUTHENTICATED,this.clientId=TS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async u=>{Ie(xa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(Ie(xa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cy(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function y0(s,e){s.asyncQueue.verifyOperationInProgress(),Ie(xa,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener(async r=>{n.isEqual(r)||(await p2(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function SN(s,e){s.asyncQueue.verifyOperationInProgress();const t=await $L(s);Ie(xa,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(n=>bN(e.remoteStore,n)),s.setAppCheckTokenChangeListener((n,r)=>bN(e.remoteStore,r)),s._onlineComponents=e}async function $L(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ie(xa,"Using user provided OfflineComponentProvider");try{await y0(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===fe.FAILED_PRECONDITION||r.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;zo("Error using user provided cache. Falling back to memory cache: "+t),await y0(s,new Kf)}}else Ie(xa,"Using default OfflineComponentProvider"),await y0(s,new HL(void 0));return s._offlineComponents}async function D2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ie(xa,"Using user provided OnlineComponentProvider"),await SN(s,s._uninitializedComponentsProvider._online)):(Ie(xa,"Using default OnlineComponentProvider"),await SN(s,new mx))),s._onlineComponents}function WL(s){return D2(s).then(e=>e.syncEngine)}async function Yf(s){const e=await D2(s),t=e.eventManager;return t.onListen=RL.bind(null,e.syncEngine),t.onUnlisten=PL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OL.bind(null,e.syncEngine),t}function KL(s,e,t={}){const n=new cr;return s.asyncQueue.enqueueAndForget(async()=>function(o,u,f,h,p){const x=new Oy({next:_=>{x.su(),u.enqueueAndForget(()=>Iy(o,v));const N=_.docs.has(f);!N&&_.fromCache?p.reject(new Re(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&_.fromCache&&h&&h.source==="server"?p.reject(new Re(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),v=new ky(jm(f.path),x,{includeMetadataChanges:!0,Ta:!0});return Ay(o,v)}(await Yf(s),s.asyncQueue,e,t,n)),n.promise}function YL(s,e,t={}){const n=new cr;return s.asyncQueue.enqueueAndForget(async()=>function(o,u,f,h,p){const x=new Oy({next:_=>{x.su(),u.enqueueAndForget(()=>Iy(o,v)),_.fromCache&&h.source==="server"?p.reject(new Re(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),v=new ky(f,x,{includeMetadataChanges:!0,Ta:!0});return Ay(o,v)}(await Yf(s),s.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(s,e,t){if(!t)throw new Re(fe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function QL(s,e,t,n){if(e===!0&&n===!0)throw new Re(fe.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function CN(s){if(!Me.isDocumentKey(s))throw new Re(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function AN(s){if(Me.isDocumentKey(s))throw new Re(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Pm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Fe()}function sn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Re(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pm(s);throw new Re(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firestore.googleapis.com",IN=!0;class RN{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M2,this.ssl=IN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:IN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T3)throw new Re(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P2((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Om{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new iM;switch(n.type){case"firstParty":return new oM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Re(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=TN.get(t);n&&(Ie("ComponentProvider","Removing Datastore"),TN.delete(t),n.terminate())}(this),Promise.resolve()}}function XL(s,e,t,n={}){var r;const o=(s=sn(s,Om))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:s._getEmulatorOptions()}),f=`${e}:${t}`;o.host!==M2&&o.host!==f&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:f,ssl:!1,emulatorOptions:n});if(!Xn(h,u)&&(s._setSettings(h),n.mockUserToken)){let p,x;if(typeof n.mockUserToken=="string")p=n.mockUserToken,x=ks.MOCK_USER;else{p=rj(n.mockUserToken,(r=s._app)===null||r===void 0?void 0:r.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new Re(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ks(v)}s._authCredentials=new rM(new jS(p,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Ls{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ls(this.firestore,e,this._key)}}class ua extends Ea{constructor(e,t,n){super(e,t,jm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ls(this.firestore,null,new Me(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function ot(s,e,...t){if(s=kt(s),O2("collection","path",e),s instanceof Om){const n=Rt.fromString(e,...t);return AN(n),new ua(s,null,n)}{if(!(s instanceof Ls||s instanceof ua))throw new Re(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Rt.fromString(e,...t));return AN(n),new ua(s.firestore,null,n)}}function je(s,e,...t){if(s=kt(s),arguments.length===1&&(e=TS.newId()),O2("doc","path",e),s instanceof Om){const n=Rt.fromString(e,...t);return CN(n),new Ls(s,null,new Me(n))}{if(!(s instanceof Ls||s instanceof ua))throw new Re(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Rt.fromString(e,...t));return CN(n),new Ls(s.firestore,s instanceof ua?s.converter:null,new Me(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="AsyncQueue";class DN{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new x2(this,"async_queue_retry"),this.Su=()=>{const n=x0();n&&Ie(kN,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=x0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=x0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new cr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!rc(e))throw e;Ie(kN,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const r=function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f}(n);throw pr("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Ty.createAndSchedule(this,e,t,n,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&Fe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function PN(s){return function(t,n){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of n)if(o in r&&typeof r[o]=="function")return!0;return!1}(s,["next","error","complete"])}class xr extends Om{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new DN,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DN(e),this._firestoreClient=void 0,await e}}}function ZL(s,e){const t=typeof s=="object"?s:gm(),n=typeof s=="string"?s:Bf,r=va(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const o=sj("firestore");o&&XL(r,...o)}return r}function Mm(s){if(s._terminated)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||JL(s),s._firestoreClient}function JL(s){var e,t,n;const r=s._freezeSettings(),o=function(f,h,p,x){return new NM(f,h,p,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,P2(x.experimentalLongPollingOptions),x.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,r);s._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(s._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),s._firestoreClient=new GL(s._authCredentials,s._appCheckCredentials,s._queue,o,s._componentsProvider&&function(f){const h=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(h),_online:h}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Ss.fromBase64String(e))}catch(t){throw new Re(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wo(Ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new js(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=/^__.*__$/;class t5{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new gd(e,this.data,t,this.fieldTransforms)}}class L2{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function V2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class Vm{constructor(e,t,n,r,o,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Qf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(V2(this.Lu)&&e5.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class s5{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rm(e)}ju(e,t,n,r=!1){return new Vm({Lu:e,methodName:t,zu:n,path:js.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zm(s){const e=s._freezeSettings(),t=Rm(s._databaseId);return new s5(s._databaseId,!!e.ignoreUndefinedProperties,t)}function z2(s,e,t,n,r,o={}){const u=s.ju(o.merge||o.mergeFields?2:0,e,t,r);By("Data must be an object, but it was:",u,n);const f=B2(n,u);let h,p;if(o.merge)h=new gn(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const x=[];for(const v of o.mergeFields){const _=px(e,v,t);if(!u.contains(_))throw new Re(fe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);q2(x,_)||x.push(_)}h=new gn(x),p=u.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=u.fieldTransforms;return new t5(new Qs(f),h,p)}class Um extends oc{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Um}}function U2(s,e,t){return new Vm({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vy extends oc{_toFieldTransform(e){return new my(e.path,new id)}isEqual(e){return e instanceof Vy}}class zy extends oc{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=U2(this,e,!0),n=this.Hu.map(o=>Cl(o,t)),r=new qo(n);return new my(e.path,r)}isEqual(e){return e instanceof zy&&Xn(this.Hu,e.Hu)}}class Uy extends oc{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=U2(this,e,!0),n=this.Hu.map(o=>Cl(o,t)),r=new Ho(n);return new my(e.path,r)}isEqual(e){return e instanceof Uy&&Xn(this.Hu,e.Hu)}}function n5(s,e,t,n){const r=s.ju(1,e,t);By("Data must be an object, but it was:",r,n);const o=[],u=Qs.empty();wa(n,(h,p)=>{const x=Fy(e,h,t);p=kt(p);const v=r.Uu(x);if(p instanceof Um)o.push(x);else{const _=Cl(p,v);_!=null&&(o.push(x),u.set(x,_))}});const f=new gn(o);return new L2(u,f,r.fieldTransforms)}function i5(s,e,t,n,r,o){const u=s.ju(1,e,t),f=[px(e,n,t)],h=[r];if(o.length%2!=0)throw new Re(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)f.push(px(e,o[_])),h.push(o[_+1]);const p=[],x=Qs.empty();for(let _=f.length-1;_>=0;--_)if(!q2(p,f[_])){const N=f[_];let w=h[_];w=kt(w);const E=u.Uu(N);if(w instanceof Um)p.push(N);else{const R=Cl(w,E);R!=null&&(p.push(N),x.set(N,R))}}const v=new gn(p);return new L2(x,v,u.fieldTransforms)}function r5(s,e,t,n=!1){return Cl(t,s.ju(n?4:3,e))}function Cl(s,e){if(F2(s=kt(s)))return By("Unsupported field value:",e,s),B2(s,e);if(s instanceof oc)return function(n,r){if(!V2(r.Lu))throw r.Wu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,r){const o=[];let u=0;for(const f of n){let h=Cl(f,r.Ku(u));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),u++}return{arrayValue:{values:o}}}(s,e)}return function(n,r){if((n=kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return $M(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=as.fromDate(n);return{timestampValue:Gf(r.serializer,o)}}if(n instanceof as){const o=new as(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gf(r.serializer,o)}}if(n instanceof My)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wo)return{bytesValue:a2(r.serializer,n._byteString)};if(n instanceof Ls){const o=r.databaseId,u=n.firestore._databaseId;if(!u.isEqual(o))throw r.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yy(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Ly)return function(u,f){return{mapValue:{fields:{[OS]:{stringValue:MS},[Ff]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw f.Wu("VectorValues must only contain numeric values.");return fy(f.serializer,p)})}}}}}}(n,r);throw r.Wu(`Unsupported field value: ${Pm(n)}`)}(s,e)}function B2(s,e){const t={};return AS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(s,(n,r)=>{const o=Cl(r,e.qu(n));o!=null&&(t[n]=o)}),{mapValue:{fields:t}}}function F2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof as||s instanceof My||s instanceof Wo||s instanceof Ls||s instanceof oc||s instanceof Ly)}function By(s,e,t){if(!F2(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const n=Pm(t);throw n==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+n)}}function px(s,e,t){if((e=kt(e))instanceof Lm)return e._internalPath;if(typeof e=="string")return Fy(s,e);throw Qf("Field path arguments must be of type string or ",s,!1,void 0,t)}const a5=new RegExp("[~\\*/\\[\\]]");function Fy(s,e,t){if(e.search(a5)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Lm(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Qf(s,e,t,n,r){const o=n&&!n.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let h="";return(o||u)&&(h+=" (found",o&&(h+=` in field ${n}`),u&&(h+=` in document ${r}`),h+=")"),new Re(fe.INVALID_ARGUMENT,f+s+h)}function q2(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class l5 extends H2{data(){return super.data()}}function Bm(s,e){return typeof e=="string"?Fy(s,e):e instanceof Lm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Re(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class $2 extends qy{}function yr(s,e,...t){let n=[];e instanceof qy&&n.push(e),n=n.concat(t),function(o){const u=o.filter(h=>h instanceof Hy).length,f=o.filter(h=>h instanceof Fm).length;if(u>1||u>0&&f>0)throw new Re(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)s=r._apply(s);return s}class Fm extends $2{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fm(e,t,n)}_apply(e){const t=this._parse(e);return W2(e._query,t),new Ea(e.firestore,e.converter,ix(e._query,t))}_parse(e){const t=zm(e.firestore);return function(o,u,f,h,p,x,v){let _;if(p.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Re(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){MN(v,x);const w=[];for(const E of v)w.push(ON(h,o,E));_={arrayValue:{values:w}}}else _=ON(h,o,v)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||MN(v,x),_=r5(f,u,v,x==="in"||x==="not-in");return Xt.create(p,x,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bi(s,e,t){const n=e,r=Bm("where",s);return Fm._create(r,n,t)}class Hy extends qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hy(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let u=r;const f=o.getFlattenedFilters();for(const h of f)W2(u,h),u=ix(u,h)}(e._query,t),new Ea(e.firestore,e.converter,ix(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gy extends $2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gy(e,t)}_apply(e){const t=function(r,o,u){if(r.startAt!==null)throw new Re(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Re(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nd(o,u)}(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ac(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function $y(s,e="asc"){const t=e,n=Bm("orderBy",s);return Gy._create(n,t)}function ON(s,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new Re(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HS(e)&&t.indexOf("/")!==-1)throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Rt.fromString(t));if(!Me.isDocumentKey(n))throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Q1(s,new Me(n))}if(t instanceof Ls)return Q1(s,t._key);throw new Re(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pm(t)}.`)}function MN(s,e){if(!Array.isArray(s)||s.length===0)throw new Re(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W2(s,e){const t=function(r,o){for(const u of r)for(const f of u.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null}(s.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Re(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class o5{convertValue(e,t="none"){switch(pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return wa(e,(r,o)=>{n[r]=this.convertValue(o,t)}),n}convertVectorValue(e){var t,n,r;const o=(r=(n=(t=e.fields)===null||t===void 0?void 0:t[Ff].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(u=>Gt(u.doubleValue));return new Ly(o)}convertGeoPoint(e){return new My(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Em(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const t=fa(e);return new as(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rt.fromString(e);gt(h2(n));const r=new td(n.get(1),n.get(3)),o=new Me(n.popFirst(5));return r.isEqual(t)||pr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(s,e,t){let n;return n=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y2 extends H2{constructor(e,t,n,r,o,u){super(e,t,n,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _f extends Y2{data(e={}){return super.data(e)}}class Q2{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new _f(this._firestore,this._userDataWriter,n.key,n,new Lu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(f=>{const h=new _f(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Lu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}})}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>o||f.type!==3).map(f=>{const h=new _f(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Lu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,x=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),x=u.indexOf(f.doc.key)),{type:c5(f.type),doc:h,oldIndex:p,newIndex:x}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c5(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(s){s=sn(s,Ls);const e=sn(s.firestore,xr);return KL(Mm(e),s._key).then(t=>X2(e,s,t))}class Wy extends o5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}function Tt(s){s=sn(s,Ea);const e=sn(s.firestore,xr),t=Mm(e),n=new Wy(e);return G2(s._query),YL(t,s._query).then(r=>new Q2(e,n,s,r))}function u5(s,e,t){s=sn(s,Ls);const n=sn(s.firestore,xr),r=K2(s.converter,e,t);return qm(n,[z2(zm(n),"setDoc",s._key,r,s.converter!==null,t).toMutation(s._key,Dn.none())])}function ze(s,e,t,...n){s=sn(s,Ls);const r=sn(s.firestore,xr),o=zm(r);let u;return u=typeof(e=kt(e))=="string"||e instanceof Lm?i5(o,"updateDoc",s._key,e,t,n):n5(o,"updateDoc",s._key,e),qm(r,[u.toMutation(s._key,Dn.exists(!0))])}function cc(s){return qm(sn(s.firestore,xr),[new py(s._key,Dn.none())])}function uc(s,e){const t=sn(s.firestore,xr),n=je(s),r=K2(s.converter,e);return qm(t,[z2(zm(s.firestore),"addDoc",n._key,r,s.converter!==null,{}).toMutation(n._key,Dn.exists(!1))]).then(()=>n)}function d5(s,...e){var t,n,r;s=kt(s);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||PN(e[u])||(o=e[u],u++);const f={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(PN(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(n=v.error)===null||n===void 0?void 0:n.bind(v),e[u+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let h,p,x;if(s instanceof Ls)p=sn(s.firestore,xr),x=jm(s._key.path),h={next:v=>{e[u]&&e[u](X2(p,s,v))},error:e[u+1],complete:e[u+2]};else{const v=sn(s,Ea);p=sn(v.firestore,xr),x=v._query;const _=new Wy(p);h={next:N=>{e[u]&&e[u](new Q2(p,_,v,N))},error:e[u+1],complete:e[u+2]},G2(s._query)}return function(_,N,w,E){const R=new Oy(E),T=new ky(N,R,w);return _.asyncQueue.enqueueAndForget(async()=>Ay(await Yf(_),T)),()=>{R.su(),_.asyncQueue.enqueueAndForget(async()=>Iy(await Yf(_),T))}}(Mm(p),x,f,h)}function qm(s,e){return function(n,r){const o=new cr;return n.asyncQueue.enqueueAndForget(async()=>ML(await WL(n),r,o)),o.promise}(Mm(s),e)}function X2(s,e,t){const n=t.docs.get(e._key),r=new Wy(s);return new Y2(s,r,e._key,n,new Lu(t.hasPendingWrites,t.fromCache),e.converter)}function h5(){return new Vy("serverTimestamp")}function dc(...s){return new zy("arrayUnion",s)}function hc(...s){return new Uy("arrayRemove",s)}(function(e,t=!0){(function(r){nc=r})(jl),Zn(new Pn("firestore",(n,{instanceIdentifier:r,options:o})=>{const u=n.getProvider("app").getImmediate(),f=new xr(new aM(n.getProvider("auth-internal")),new cM(u,n.getProvider("app-check-internal")),function(p,x){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Re(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(p.options.projectId,x)}(u,r),u);return o=Object.assign({useFetchStreams:t},o),f._setSettings(o),f},"PUBLIC").setMultipleInstances(!0)),en(V1,z1,e),en(V1,z1,"esm2017")})();var LN={};const VN="@firebase/database",zN="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2="";function f5(s){Z2=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Es(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Qu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return _r(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const e=window[s];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new m5(e)}}catch{}return new p5},ul=J2("localStorage"),g5=J2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new dd("@firebase/database"),x5=function(){let s=1;return function(){return s++}}(),eT=function(s){const e=ok(s),t=new nk;t.update(e);const n=t.digest();return Ux.encodeByteArray(n)},bd=function(...s){let e="";for(let t=0;t<s.length;t++){const n=s[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=bd.apply(null,n):typeof n=="object"?e+=Es(n):e+=n,e+=" "}return e};let Hu=null,UN=!0;const y5=function(s,e){Se(!0,"Can't turn on custom loggers persistently."),Po.logLevel=Xe.VERBOSE,Hu=Po.log.bind(Po)},Ps=function(...s){if(UN===!0&&(UN=!1,Hu===null&&g5.get("logging_enabled")===!0&&y5()),Hu){const e=bd.apply(null,s);Hu(e)}},_d=function(s){return function(...e){Ps(s,...e)}},gx=function(...s){const e="FIREBASE INTERNAL ERROR: "+bd(...s);Po.error(e)},vr=function(...s){const e=`FIREBASE FATAL ERROR: ${bd(...s)}`;throw Po.error(e),new Error(e)},yn=function(...s){const e="FIREBASE WARNING: "+bd(...s);Po.warn(e)},v5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tT=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},b5=function(s){if(document.readyState==="complete")s();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ko="[MIN_NAME]",yl="[MAX_NAME]",fc=function(s,e){if(s===e)return 0;if(s===Ko||e===yl)return-1;if(e===Ko||s===yl)return 1;{const t=BN(s),n=BN(e);return t!==null?n!==null?t-n===0?s.length-e.length:t-n:-1:n!==null?1:s<e?-1:1}},_5=function(s,e){return s===e?0:s<e?-1:1},Su=function(s,e){if(e&&s in e)return e[s];throw new Error("Missing required key ("+s+") in object: "+Es(e))},Ky=function(s){if(typeof s!="object"||s===null)return Es(s);const e=[];for(const n in s)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=Es(e[n]),t+=":",t+=Ky(s[e[n]]);return t+="}",t},sT=function(s,e){const t=s.length;if(t<=e)return[s];const n=[];for(let r=0;r<t;r+=e)r+e>t?n.push(s.substring(r,t)):n.push(s.substring(r,r+e));return n};function Mn(s,e){for(const t in s)s.hasOwnProperty(t)&&e(t,s[t])}const nT=function(s){Se(!tT(s),"Invalid JSON number");const e=11,t=52,n=(1<<e-1)-1;let r,o,u,f,h;s===0?(o=0,u=0,r=1/s===-1/0?1:0):(r=s<0,s=Math.abs(s),s>=Math.pow(2,1-n)?(f=Math.min(Math.floor(Math.log(s)/Math.LN2),n),o=f+n,u=Math.round(s*Math.pow(2,t-f)-Math.pow(2,t))):(o=0,u=Math.round(s/Math.pow(2,1-n-t))));const p=[];for(h=t;h;h-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(h=e;h;h-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(r?1:0),p.reverse();const x=p.join("");let v="";for(h=0;h<64;h+=8){let _=parseInt(x.substr(h,8),2).toString(16);_.length===1&&(_="0"+_),v=v+_}return v.toLowerCase()},w5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},N5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},E5=new RegExp("^-?(0*)\\d{1,10}$"),j5=-2147483648,S5=2147483647,BN=function(s){if(E5.test(s)){const e=Number(s);if(e>=j5&&e<=S5)return e}return null},wd=function(s){try{s()}catch(e){setTimeout(()=>{const t=e.stack||"";throw yn("Exception was thrown by user callback.",t),e},Math.floor(0))}},T5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gu=function(s,e){const t=setTimeout(s,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Ys(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){yn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ps("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yn(e)}}class wf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}wf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="5",iT="v",rT="s",aT="r",lT="f",oT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cT="ls",uT="p",xx="ac",dT="websocket",hT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t,n,r,o=!1,u="",f=!1,h=!1,p=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=h,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ul.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ul.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function I5(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function mT(s,e,t){Se(typeof e=="string","typeof type must == string"),Se(typeof t=="object","typeof params must == object");let n;if(e===dT)n=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(e===hT)n=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);I5(s)&&(t.ns=s.namespace);const r=[];return Mn(t,(o,u)=>{r.push(o+"="+u)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(){this.counters_={}}incrementCounter(e,t=1){_r(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return UR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0={},b0={};function Qy(s){const e=s.toString();return v0[e]||(v0[e]=new R5),v0[e]}function k5(s,e){const t=s.toString();return b0[t]||(b0[t]=e()),b0[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&wd(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="start",P5="close",O5="pLPCommand",M5="pRTLPCB",pT="id",gT="pw",xT="ser",L5="cb",V5="seg",z5="ts",U5="d",B5="dframe",yT=1870,vT=30,F5=yT-vT,q5=25e3,H5=3e4;class Co{constructor(e,t,n,r,o,u,f){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(e),this.stats_=Qy(t),this.urlFn=h=>(this.appCheckToken&&(h[xx]=this.appCheckToken),mT(t,hT,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new D5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(H5)),b5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xy((...o)=>{const[u,f,h,p,x]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===FN)this.id=f,this.password=h;else if(u===P5)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const n={};n[FN]="t",n[xT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[L5]=this.scriptTagHolder.uniqueCallbackIdentifier),n[iT]=Yy,this.transportSessionId&&(n[rT]=this.transportSessionId),this.lastSessionId&&(n[cT]=this.lastSessionId),this.applicationId&&(n[uT]=this.applicationId),this.appCheckToken&&(n[xx]=this.appCheckToken),typeof location<"u"&&location.hostname&&oT.test(location.hostname)&&(n[aT]=lT);const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Co.forceAllow_=!0}static forceDisallow(){Co.forceDisallow_=!0}static isAvailable(){return Co.forceAllow_?!0:!Co.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!w5()&&!N5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Es(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=JE(t),r=sT(n,F5);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={};n[B5]="t",n[pT]=e,n[gT]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Es(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Xy{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=x5(),window[O5+this.uniqueCallbackIdentifier]=e,window[M5+this.uniqueCallbackIdentifier]=t,this.myIFrame=Xy.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Ps("frame writing exception"),f.stack&&Ps(f.stack),Ps(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ps("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[pT]=this.myID,e[gT]=this.myPW,e[xT]=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vT+n.length<=yT;){const u=this.pendingSegs.shift();n=n+"&"+V5+r+"="+u.seg+"&"+z5+r+"="+u.ts+"&"+U5+r+"="+u.d,r++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(q5)),o=()=>{clearTimeout(r),n()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ps("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=16384,$5=45e3;let Xf=null;typeof MozWebSocket<"u"?Xf=MozWebSocket:typeof WebSocket<"u"&&(Xf=WebSocket);class Hn{constructor(e,t,n,r,o,u,f){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=Qy(t),this.connURL=Hn.connectionURL_(t,u,f,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,o){const u={};return u[iT]=Yy,typeof location<"u"&&location.hostname&&oT.test(location.hostname)&&(u[aT]=lT),t&&(u[rT]=t),n&&(u[cT]=n),r&&(u[xx]=r),o&&(u[uT]=o),mT(e,dT,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ul.set("previous_websocket_failure",!0);try{let n;YR(),this.mySock=new Xf(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Xf!==null&&!Hn.forceDisallow_}static previouslyFailed(){return ul.isInMemoryStorage||ul.get("previous_websocket_failure")===!0}markConnectionHealthy(){ul.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const n=Qu(t);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Se(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const n=this.extractFrameCount_(t);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const t=Es(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=sT(t,G5);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($5))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hn.responsesRequiredToBeHealthy=2;Hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static get ALL_TRANSPORTS(){return[Co,Hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Hn&&Hn.isAvailable();let n=t&&!Hn.previouslyFailed();if(e.webSocketOnly&&(t||yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Hn];else{const r=this.transports_=[];for(const o of rd.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);rd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}rd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=6e4,K5=5e3,Y5=10*1024,Q5=100*1024,_0="t",qN="d",X5="s",HN="r",Z5="e",GN="o",$N="a",WN="n",KN="p",J5="h";class e9{constructor(e,t,n,r,o,u,f,h,p,x){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=h,this.onKill_=p,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new rd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Gu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Q5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Y5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_0 in e){const t=e[_0];t===$N?this.upgradeIfSecondaryHealthy_():t===HN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===GN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Su("t",e),n=Su("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$N,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:WN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Su("t",e),n=Su("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Su(_0,e);if(qN in e){const n=e[qN];if(t===J5){const r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===WN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===X5?this.onConnectionShutdown_(n):t===HN?this.onReset_(n):t===Z5?gx("Server Error: "+n):t===GN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Yy!==n&&yn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Gu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(W5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(K5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KN,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ul.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.allowedEvents_=e,this.listeners_={},Se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].context)){r.splice(o,1);return}}validateEventType_(e){Se(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends _T{static getInstance(){return new Zf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=32,QN=768;class Dt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function jt(){return new Dt("")}function it(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function ya(s){return s.pieces_.length-s.pieceNum_}function It(s){let e=s.pieceNum_;return e<s.pieces_.length&&e++,new Dt(s.pieces_,e)}function wT(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function t9(s){let e="";for(let t=s.pieceNum_;t<s.pieces_.length;t++)s.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(s.pieces_[t])));return e||"/"}function NT(s,e=0){return s.pieces_.slice(s.pieceNum_+e)}function ET(s){if(s.pieceNum_>=s.pieces_.length)return null;const e=[];for(let t=s.pieceNum_;t<s.pieces_.length-1;t++)e.push(s.pieces_[t]);return new Dt(e,0)}function xs(s,e){const t=[];for(let n=s.pieceNum_;n<s.pieces_.length;n++)t.push(s.pieces_[n]);if(e instanceof Dt)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{const n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&t.push(n[r])}return new Dt(t,0)}function Je(s){return s.pieceNum_>=s.pieces_.length}function Rn(s,e){const t=it(s),n=it(e);if(t===null)return e;if(t===n)return Rn(It(s),It(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+s+")")}function jT(s,e){if(ya(s)!==ya(e))return!1;for(let t=s.pieceNum_,n=e.pieceNum_;t<=s.pieces_.length;t++,n++)if(s.pieces_[t]!==e.pieces_[n])return!1;return!0}function $n(s,e){let t=s.pieceNum_,n=e.pieceNum_;if(ya(s)>ya(e))return!1;for(;t<s.pieces_.length;){if(s.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}class s9{constructor(e,t){this.errorPrefix_=t,this.parts_=NT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=pm(this.parts_[n]);ST(this)}}function n9(s,e){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(e),s.byteLength_+=pm(e),ST(s)}function i9(s){const e=s.parts_.pop();s.byteLength_-=pm(e),s.parts_.length>0&&(s.byteLength_-=1)}function ST(s){if(s.byteLength_>QN)throw new Error(s.errorPrefix_+"has a key path longer than "+QN+" bytes ("+s.byteLength_+").");if(s.parts_.length>YN)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YN+") or object contains a cycle "+rl(s))}function rl(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends _T{static getInstance(){return new Zy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return Se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=1e3,r9=60*5*1e3,XN=30*1e3,a9=1.3,l9=3e4,o9="server_kill",ZN=3;class ur extends bT{constructor(e,t,n,r,o,u,f,h){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=h,this.id=ur.nextPersistentConnectionId_++,this.log_=_d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tu,this.maxReconnectDelay_=r9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Zf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,o={r,a:e,b:t};this.log_(Es(o)),Se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Bx,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,n,r){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Se(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const f={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(u).set(o,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const o={p:n},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,f=>{const h=f.d,p=f.s;ur.warnOnListenWarnings_(h,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",f),p!=="ok"&&this.removeListen_(n,r),e.onComplete&&e.onComplete(p,h))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&_r(e,"w")){const n=Lo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();yn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=XN)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=tk(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(t,n,r=>{const o=r.s,u=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";r&&(o.q=n,o.t=r),this.sendRequest(u,o)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const o={p:t,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{r&&setTimeout(()=>{r(u.s,u.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,o){this.initConnection_();const u={p:t,d:n};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:r}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Es(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):gx("Unrecognized action received from server: "+Es(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>l9&&(this.reconnectDelay_=Tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*a9)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ur.nextConnectionId_++,o=this.lastSessionId;let u=!1,f=null;const h=function(){f?f.close():(u=!0,n())},p=function(v){Se(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(v)};this.realtime_={close:h,sendRequest:p};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,_]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);u?Ps("getToken() completed but was canceled"):(Ps("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=_&&_.token,f=new e9(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,N=>{yn(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(o9)},o))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&yn(v),h())}}}interrupt(e){Ps("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ps("Resuming connection for reason: "+e),delete this.interruptReasons_[e],U0(this.interruptReasons_)&&(this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;t?n=t.map(o=>Ky(o)).join("$"):n="default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Dt(e).toString();let r;if(this.listens.has(n)){const o=this.listens.get(n);r=o.get(t),o.delete(t),o.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Ps("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZN&&(this.reconnectDelay_=XN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ps("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Z2.replace(/\./g,"-")]=1,Fx()?e["framework.cordova"]=1:lj()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Zf.getInstance().currentlyOnline();return U0(this.interruptReasons_)&&e}}ur.nextPersistentConnectionId_=0;ur.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new rt(Ko,e),r=new rt(Ko,t);return this.compare(n,r)!==0}minPost(){return rt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;class TT extends Hm{static get __EMPTY_NODE(){return af}static set __EMPTY_NODE(e){af=e}compare(e,t){return fc(e.name,t.name)}isDefinedOn(e){throw ec("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rt.MIN}maxPost(){return new rt(yl,af)}makePost(e,t){return Se(typeof e=="string","KeyIndex indexValue must always be a string."),new rt(e,af)}toString(){return".key"}}const Oo=new TT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,n,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?n(e.key,t):1,r&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gs{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=n??gs.RED,this.left=r??Zs.EMPTY_NODE,this.right=o??Zs.EMPTY_NODE}copy(e,t,n,r,o){return new gs(e??this.key,t??this.value,n??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,t,n),null):o===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return Zs.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gs.RED=!0;gs.BLACK=!1;class c9{copy(e,t,n,r,o){return this}insert(e,t,n){return new gs(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Zs{constructor(e,t=Zs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Zs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gs.BLACK,null,null))}remove(e){return new Zs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gs.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lf(this.root_,null,this.comparator_,!0,e)}}Zs.EMPTY_NODE=new c9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(s,e){return fc(s.name,e.name)}function Jy(s,e){return fc(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yx;function d9(s){yx=s}const CT=function(s){return typeof s=="number"?"number:"+nT(s):"string:"+s},AT=function(s){if(s.isLeafNode()){const e=s.val();Se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_r(e,".sv"),"Priority must be a string or number.")}else Se(s===yx||s.isEmpty(),"priority of unexpected type.");Se(s===yx||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JN;class fs{static set __childrenNodeConstructor(e){JN=e}static get __childrenNodeConstructor(){return JN}constructor(e,t=fs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),AT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:it(e)===".priority"?this.priorityNode_:fs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:fs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=it(e);return n===null?t:t.isEmpty()&&n!==".priority"?this:(Se(n!==".priority"||ya(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,fs.__childrenNodeConstructor.EMPTY_NODE.updateChild(It(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+CT(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=nT(this.value_):e+=this.value_,this.lazyHash_=eT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fs.__childrenNodeConstructor?-1:(Se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=fs.VALUE_TYPE_ORDER.indexOf(t),o=fs.VALUE_TYPE_ORDER.indexOf(n);return Se(r>=0,"Unknown leaf type: "+t),Se(o>=0,"Unknown leaf type: "+n),r===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}fs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IT,RT;function h9(s){IT=s}function f9(s){RT=s}class m9 extends Hm{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),o=n.compareTo(r);return o===0?fc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rt.MIN}maxPost(){return new rt(yl,new fs("[PRIORITY-POST]",RT))}makePost(e,t){const n=IT(e);return new rt(t,new fs("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ms=new m9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=Math.log(2);class g9{constructor(e){const t=o=>parseInt(Math.log(o)/p9,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jf=function(s,e,t,n){s.sort(e);const r=function(h,p){const x=p-h;let v,_;if(x===0)return null;if(x===1)return v=s[h],_=t?t(v):v,new gs(_,v.node,gs.BLACK,null,null);{const N=parseInt(x/2,10)+h,w=r(h,N),E=r(N+1,p);return v=s[N],_=t?t(v):v,new gs(_,v.node,gs.BLACK,w,E)}},o=function(h){let p=null,x=null,v=s.length;const _=function(w,E){const R=v-w,T=v;v-=w;const k=r(R+1,T),P=s[R],H=t?t(P):P;N(new gs(H,P.node,E,null,k))},N=function(w){p?(p.left=w,p=w):(x=w,p=w)};for(let w=0;w<h.count;++w){const E=h.nextBitIsOne(),R=Math.pow(2,h.count-(w+1));E?_(R,gs.BLACK):(_(R,gs.BLACK),_(R,gs.RED))}return x},u=new g9(s.length),f=o(u);return new Zs(n||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w0;const No={};class rr{static get Default(){return Se(No&&Ms,"ChildrenNode.ts has not been loaded"),w0=w0||new rr({".priority":No},{".priority":Ms}),w0}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Lo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zs?t:null}hasIndex(e){return _r(this.indexSet_,e.toString())}addIndex(e,t){Se(e!==Oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const o=t.getIterator(rt.Wrap);let u=o.getNext();for(;u;)r=r||e.isDefinedOn(u.node),n.push(u),u=o.getNext();let f;r?f=Jf(n,e.getCompare()):f=No;const h=e.toString(),p=Object.assign({},this.indexSet_);p[h]=e;const x=Object.assign({},this.indexes_);return x[h]=f,new rr(x,p)}addToIndexes(e,t){const n=If(this.indexes_,(r,o)=>{const u=Lo(this.indexSet_,o);if(Se(u,"Missing index implementation for "+o),r===No)if(u.isDefinedOn(e.node)){const f=[],h=t.getIterator(rt.Wrap);let p=h.getNext();for(;p;)p.name!==e.name&&f.push(p),p=h.getNext();return f.push(e),Jf(f,u.getCompare())}else return No;else{const f=t.get(e.name);let h=r;return f&&(h=h.remove(new rt(e.name,f))),h.insert(e,e.node)}});return new rr(n,this.indexSet_)}removeFromIndexes(e,t){const n=If(this.indexes_,r=>{if(r===No)return r;{const o=t.get(e.name);return o?r.remove(new rt(e.name,o)):r}});return new rr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu;class pt{static get EMPTY_NODE(){return Cu||(Cu=new pt(new Zs(Jy),null,rr.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&AT(this.priorityNode_),this.children_.isEmpty()&&Se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cu}updatePriority(e){return this.children_.isEmpty()?this:new pt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Cu:t}}getChild(e){const t=it(e);return t===null?this:this.getImmediateChild(t).getChild(It(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Se(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const n=new rt(e,t);let r,o;t.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(n,this.children_));const u=r.isEmpty()?Cu:this.priorityNode_;return new pt(r,u,o)}}updateChild(e,t){const n=it(e);if(n===null)return t;{Se(it(e)!==".priority"||ya(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(It(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,o=!0;if(this.forEachChild(Ms,(u,f)=>{t[u]=f.val(e),n++,o&&pt.INTEGER_REGEXP_.test(u)?r=Math.max(r,Number(u)):o=!1}),!e&&o&&r<2*n){const u=[];for(const f in t)u[f]=t[f];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+CT(this.getPriority().val())+":"),this.forEachChild(Ms,(t,n)=>{const r=n.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":eT(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const o=r.getPredecessorKey(new rt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new rt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new rt(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,rt.Wrap);let o=r.peek();for(;o!=null&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,rt.Wrap);let o=r.peek();for(;o!=null&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Nd?-1:0}withIndex(e){if(e===Oo||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new pt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Oo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const n=this.getIterator(Ms),r=t.getIterator(Ms);let o=n.getNext(),u=r.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=n.getNext(),u=r.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Oo?null:this.indexMap_.get(e.toString())}}pt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class x9 extends pt{constructor(){super(new Zs(Jy),pt.EMPTY_NODE,rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pt.EMPTY_NODE}isEmpty(){return!1}}const Nd=new x9;Object.defineProperties(rt,{MIN:{value:new rt(Ko,pt.EMPTY_NODE)},MAX:{value:new rt(yl,Nd)}});TT.__EMPTY_NODE=pt.EMPTY_NODE;fs.__childrenNodeConstructor=pt;d9(Nd);f9(Nd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=!0;function Os(s,e=null){if(s===null)return pt.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(e=s[".priority"]),Se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const t=s;return new fs(t,Os(e))}if(!(s instanceof Array)&&y9){const t=[];let n=!1;if(Mn(s,(u,f)=>{if(u.substring(0,1)!=="."){const h=Os(f);h.isEmpty()||(n=n||!h.getPriority().isEmpty(),t.push(new rt(u,h)))}}),t.length===0)return pt.EMPTY_NODE;const o=Jf(t,u9,u=>u.name,Jy);if(n){const u=Jf(t,Ms.getCompare());return new pt(o,Os(e),new rr({".priority":u},{".priority":Ms}))}else return new pt(o,Os(e),rr.Default)}else{let t=pt.EMPTY_NODE;return Mn(s,(n,r)=>{if(_r(s,n)&&n.substring(0,1)!=="."){const o=Os(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(n,o))}}),t.updatePriority(Os(e))}}h9(Os);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9 extends Hm{constructor(e){super(),this.indexPath_=e,Se(!Je(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r);return o===0?fc(e.name,t.name):o}makePost(e,t){const n=Os(e),r=pt.EMPTY_NODE.updateChild(this.indexPath_,n);return new rt(t,r)}maxPost(){const e=pt.EMPTY_NODE.updateChild(this.indexPath_,Nd);return new rt(yl,e)}toString(){return NT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9 extends Hm{compare(e,t){const n=e.node.compareTo(t.node);return n===0?fc(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rt.MIN}maxPost(){return rt.MAX}makePost(e,t){const n=Os(e);return new rt(t,n)}toString(){return".value"}}const _9=new b9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(s){return{type:"value",snapshotNode:s}}function N9(s,e){return{type:"child_added",snapshotNode:e,childName:s}}function E9(s,e){return{type:"child_removed",snapshotNode:e,childName:s}}function eE(s,e,t){return{type:"child_changed",snapshotNode:e,childName:s,oldSnap:t}}function j9(s,e){return{type:"child_moved",snapshotNode:e,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ms}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ko}hasEnd(){return this.endSet_}getIndexEndValue(){return Se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ms}copy(){const e=new ev;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tE(s){const e={};if(s.isDefault())return e;let t;if(s.index_===Ms?t="$priority":s.index_===_9?t="$value":s.index_===Oo?t="$key":(Se(s.index_ instanceof v9,"Unrecognized index type!"),t=s.index_.toString()),e.orderBy=Es(t),s.startSet_){const n=s.startAfterSet_?"startAfter":"startAt";e[n]=Es(s.indexStartValue_),s.startNameSet_&&(e[n]+=","+Es(s.indexStartName_))}if(s.endSet_){const n=s.endBeforeSet_?"endBefore":"endAt";e[n]=Es(s.indexEndValue_),s.endNameSet_&&(e[n]+=","+Es(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?e.limitToFirst=s.limit_:e.limitToLast=s.limit_),e}function sE(s){const e={};if(s.startSet_&&(e.sp=s.indexStartValue_,s.startNameSet_&&(e.sn=s.indexStartName_),e.sin=!s.startAfterSet_),s.endSet_&&(e.ep=s.indexEndValue_,s.endNameSet_&&(e.en=s.indexEndName_),e.ein=!s.endBeforeSet_),s.limitSet_){e.l=s.limit_;let t=s.viewFrom_;t===""&&(s.isViewFromLeft()?t="l":t="r"),e.vf=t}return s.index_!==Ms&&(e.i=s.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends bT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=_d("p:rest:"),this.listens_={}}listen(e,t,n,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=em.getListenId_(e,n),f={};this.listens_[u]=f;const h=tE(e._queryParams);this.restRequest_(o+".json",h,(p,x)=>{let v=x;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(o,v,!1,n),Lo(this.listens_,u)===f){let _;p?p===401?_="permission_denied":_="rest_error:"+p:_="ok",r(_,null)}})}unlisten(e,t){const n=em.getListenId_(e,t);delete this.listens_[n]}get(e){const t=tE(e._queryParams),n=e._path.toString(),r=new Bx;return this.restRequest_(n+".json",t,(o,u)=>{let f=u;o===404&&(f=null,o=null),o===null?(this.onDataUpdate_(n,f,!1,null),r.resolve(f)):r.reject(new Error(f))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+tc(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(n&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let h=null;if(f.status>=200&&f.status<300){try{h=Qu(f.responseText)}catch{yn("Failed to parse JSON response for "+u+": "+f.responseText)}n(null,h)}else f.status!==401&&f.status!==404&&yn("Got unsuccessful REST response for "+u+" Status: "+f.status),n(f.status);n=null}},f.open("GET",u,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this.rootNode_=pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){return{value:null,children:new Map}}function kT(s,e,t){if(Je(e))s.value=t,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(e,t);else{const n=it(e);s.children.has(n)||s.children.set(n,tm());const r=s.children.get(n);e=It(e),kT(r,e,t)}}function vx(s,e,t){s.value!==null?t(e,s.value):T9(s,(n,r)=>{const o=new Dt(e.toString()+"/"+n);vx(r,o,t)})}function T9(s,e){s.children.forEach((t,n)=>{e(n,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mn(this.last_,(n,r)=>{t[n]=t[n]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=10*1e3,A9=30*1e3,I9=5*60*1e3;class R9{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new C9(e);const n=nE+(A9-nE)*Math.random();Gu(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Mn(e,(r,o)=>{o>0&&_r(this.statsToReport_,r)&&(t[r]=o,n=!0)}),n&&this.server_.reportStats(t),Gu(this.reportStats_.bind(this),Math.floor(Math.random()*2*I9))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_i||(_i={}));function DT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function PT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function OT(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=_i.ACK_USER_WRITE,this.source=DT()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return Se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dt(e));return new sm(jt(),t,this.revert)}}else return Se(it(this.path)===e,"operationForChild called for unrelated child."),new sm(It(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=_i.OVERWRITE}operationForChild(e){return Je(this.path)?new vl(this.source,jt(),this.snap.getImmediateChild(e)):new vl(this.source,It(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=_i.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new Dt(e));return t.isEmpty()?null:t.value?new vl(this.source,jt(),t.value):new ad(this.source,jt(),t)}else return Se(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ad(this.source,It(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=it(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function k9(s,e,t,n){const r=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&s.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(j9(u.childName,u.snapshotNode))}),Au(s,r,"child_removed",e,n,t),Au(s,r,"child_added",e,n,t),Au(s,r,"child_moved",o,n,t),Au(s,r,"child_changed",e,n,t),Au(s,r,"value",e,n,t),r}function Au(s,e,t,n,r,o){const u=n.filter(f=>f.type===t);u.sort((f,h)=>P9(s,f,h)),u.forEach(f=>{const h=D9(s,f,o);r.forEach(p=>{p.respondsTo(f.type)&&e.push(p.createEvent(h,s.query_))})})}function D9(s,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,s.index_)),e}function P9(s,e,t){if(e.childName==null||t.childName==null)throw ec("Should only compare child_ events.");const n=new rt(e.childName,e.snapshotNode),r=new rt(t.childName,t.snapshotNode);return s.index_.compare(n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(s,e){return{eventCache:s,serverCache:e}}function $u(s,e,t,n){return MT(new tv(e,t,n),s.serverCache)}function LT(s,e,t,n){return MT(s.eventCache,new tv(e,t,n))}function bx(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function bl(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0;const O9=()=>(N0||(N0=new Zs(_5)),N0);class At{static fromObject(e){let t=new At(null);return Mn(e,(n,r)=>{t=t.set(new Dt(n),r)}),t}constructor(e,t=O9()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:jt(),value:this.value};if(Je(e))return null;{const n=it(e),r=this.children.get(n);if(r!==null){const o=r.findRootMostMatchingPathAndValue(It(e),t);return o!=null?{path:xs(new Dt(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=it(e),n=this.children.get(t);return n!==null?n.subtree(It(e)):new At(null)}}set(e,t){if(Je(e))return new At(t,this.children);{const n=it(e),o=(this.children.get(n)||new At(null)).set(It(e),t),u=this.children.insert(n,o);return new At(this.value,u)}}remove(e){if(Je(e))return this.children.isEmpty()?new At(null):new At(null,this.children);{const t=it(e),n=this.children.get(t);if(n){const r=n.remove(It(e));let o;return r.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,r),this.value===null&&o.isEmpty()?new At(null):new At(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=it(e),n=this.children.get(t);return n?n.get(It(e)):null}}setTree(e,t){if(Je(e))return t;{const n=it(e),o=(this.children.get(n)||new At(null)).setTree(It(e),t);let u;return o.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,o),new At(this.value,u)}}fold(e){return this.fold_(jt(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,o)=>{n[r]=o.fold_(xs(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,jt(),t)}findOnPath_(e,t,n){const r=this.value?n(t,this.value):!1;if(r)return r;if(Je(e))return null;{const o=it(e),u=this.children.get(o);return u?u.findOnPath_(It(e),xs(t,o),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,jt(),t)}foreachOnPath_(e,t,n){if(Je(e))return this;{this.value&&n(t,this.value);const r=it(e),o=this.children.get(r);return o?o.foreachOnPath_(It(e),xs(t,r),n):new At(null)}}foreach(e){this.foreach_(jt(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(xs(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.writeTree_=e}static empty(){return new Kn(new At(null))}}function Wu(s,e,t){if(Je(e))return new Kn(new At(t));{const n=s.writeTree_.findRootMostValueAndPath(e);if(n!=null){const r=n.path;let o=n.value;const u=Rn(r,e);return o=o.updateChild(u,t),new Kn(s.writeTree_.set(r,o))}else{const r=new At(t),o=s.writeTree_.setTree(e,r);return new Kn(o)}}}function iE(s,e,t){let n=s;return Mn(t,(r,o)=>{n=Wu(n,xs(e,r),o)}),n}function rE(s,e){if(Je(e))return Kn.empty();{const t=s.writeTree_.setTree(e,new At(null));return new Kn(t)}}function _x(s,e){return Al(s,e)!=null}function Al(s,e){const t=s.writeTree_.findRootMostValueAndPath(e);return t!=null?s.writeTree_.get(t.path).getChild(Rn(t.path,e)):null}function aE(s){const e=[],t=s.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ms,(n,r)=>{e.push(new rt(n,r))}):s.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new rt(n,r.value))}),e}function da(s,e){if(Je(e))return s;{const t=Al(s,e);return t!=null?new Kn(new At(t)):new Kn(s.writeTree_.subtree(e))}}function wx(s){return s.writeTree_.isEmpty()}function Yo(s,e){return VT(jt(),s.writeTree_,e)}function VT(s,e,t){if(e.value!=null)return t.updateChild(s,e.value);{let n=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(Se(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):t=VT(xs(s,r),o,t)}),!t.getChild(s).isEmpty()&&n!==null&&(t=t.updateChild(xs(s,".priority"),n)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(s,e){return HT(e,s)}function M9(s,e,t,n,r){Se(n>s.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),s.allWrites.push({path:e,snap:t,writeId:n,visible:r}),r&&(s.visibleWrites=Wu(s.visibleWrites,e,t)),s.lastWriteId=n}function L9(s,e){for(let t=0;t<s.allWrites.length;t++){const n=s.allWrites[t];if(n.writeId===e)return n}return null}function V9(s,e){const t=s.allWrites.findIndex(f=>f.writeId===e);Se(t>=0,"removeWrite called with nonexistent writeId.");const n=s.allWrites[t];s.allWrites.splice(t,1);let r=n.visible,o=!1,u=s.allWrites.length-1;for(;r&&u>=0;){const f=s.allWrites[u];f.visible&&(u>=t&&z9(f,n.path)?r=!1:$n(n.path,f.path)&&(o=!0)),u--}if(r){if(o)return U9(s),!0;if(n.snap)s.visibleWrites=rE(s.visibleWrites,n.path);else{const f=n.children;Mn(f,h=>{s.visibleWrites=rE(s.visibleWrites,xs(n.path,h))})}return!0}else return!1}function z9(s,e){if(s.snap)return $n(s.path,e);for(const t in s.children)if(s.children.hasOwnProperty(t)&&$n(xs(s.path,t),e))return!0;return!1}function U9(s){s.visibleWrites=UT(s.allWrites,B9,jt()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function B9(s){return s.visible}function UT(s,e,t){let n=Kn.empty();for(let r=0;r<s.length;++r){const o=s[r];if(e(o)){const u=o.path;let f;if(o.snap)$n(t,u)?(f=Rn(t,u),n=Wu(n,f,o.snap)):$n(u,t)&&(f=Rn(u,t),n=Wu(n,jt(),o.snap.getChild(f)));else if(o.children){if($n(t,u))f=Rn(t,u),n=iE(n,f,o.children);else if($n(u,t))if(f=Rn(u,t),Je(f))n=iE(n,jt(),o.children);else{const h=Lo(o.children,it(f));if(h){const p=h.getChild(It(f));n=Wu(n,jt(),p)}}}else throw ec("WriteRecord should have .snap or .children")}}return n}function BT(s,e,t,n,r){if(!n&&!r){const o=Al(s.visibleWrites,e);if(o!=null)return o;{const u=da(s.visibleWrites,e);if(wx(u))return t;if(t==null&&!_x(u,jt()))return null;{const f=t||pt.EMPTY_NODE;return Yo(u,f)}}}else{const o=da(s.visibleWrites,e);if(!r&&wx(o))return t;if(!r&&t==null&&!_x(o,jt()))return null;{const u=function(p){return(p.visible||r)&&(!n||!~n.indexOf(p.writeId))&&($n(p.path,e)||$n(e,p.path))},f=UT(s.allWrites,u,e),h=t||pt.EMPTY_NODE;return Yo(f,h)}}}function F9(s,e,t){let n=pt.EMPTY_NODE;const r=Al(s.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ms,(o,u)=>{n=n.updateImmediateChild(o,u)}),n;if(t){const o=da(s.visibleWrites,e);return t.forEachChild(Ms,(u,f)=>{const h=Yo(da(o,new Dt(u)),f);n=n.updateImmediateChild(u,h)}),aE(o).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}else{const o=da(s.visibleWrites,e);return aE(o).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}}function q9(s,e,t,n,r){Se(n||r,"Either existingEventSnap or existingServerSnap must exist");const o=xs(e,t);if(_x(s.visibleWrites,o))return null;{const u=da(s.visibleWrites,o);return wx(u)?r.getChild(t):Yo(u,r.getChild(t))}}function H9(s,e,t,n){const r=xs(e,t),o=Al(s.visibleWrites,r);if(o!=null)return o;if(n.isCompleteForChild(t)){const u=da(s.visibleWrites,r);return Yo(u,n.getNode().getImmediateChild(t))}else return null}function G9(s,e){return Al(s.visibleWrites,e)}function $9(s,e,t,n,r,o,u){let f;const h=da(s.visibleWrites,e),p=Al(h,jt());if(p!=null)f=p;else if(t!=null)f=Yo(h,t);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const x=[],v=u.getCompare(),_=o?f.getReverseIteratorFrom(n,u):f.getIteratorFrom(n,u);let N=_.getNext();for(;N&&x.length<r;)v(N,n)!==0&&x.push(N),N=_.getNext();return x}else return[]}function W9(){return{visibleWrites:Kn.empty(),allWrites:[],lastWriteId:-1}}function Nx(s,e,t,n){return BT(s.writeTree,s.treePath,e,t,n)}function FT(s,e){return F9(s.writeTree,s.treePath,e)}function lE(s,e,t,n){return q9(s.writeTree,s.treePath,e,t,n)}function nm(s,e){return G9(s.writeTree,xs(s.treePath,e))}function K9(s,e,t,n,r,o){return $9(s.writeTree,s.treePath,e,t,n,r,o)}function sv(s,e,t){return H9(s.writeTree,s.treePath,e,t)}function qT(s,e){return HT(xs(s.treePath,e),s.writeTree)}function HT(s,e){return{treePath:s,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Se(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Se(n!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const o=r.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(n,eE(n,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(n,E9(n,r.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(n,N9(n,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(n,eE(n,e.snapshotNode,r.oldSnap));else throw ec("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}}const GT=new Q9;class nv{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new tv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sv(this.writes_,e,n)}}getChildAfterChild(e,t,n){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bl(this.viewCache_),o=K9(this.writes_,r,t,1,n,e);return o.length===0?null:o[0]}}function X9(s,e){Se(e.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Se(e.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function Z9(s,e,t,n,r){const o=new Y9;let u,f;if(t.type===_i.OVERWRITE){const p=t;p.source.fromUser?u=Ex(s,e,p.path,p.snap,n,r,o):(Se(p.source.fromServer,"Unknown source."),f=p.source.tagged||e.serverCache.isFiltered()&&!Je(p.path),u=im(s,e,p.path,p.snap,n,r,f,o))}else if(t.type===_i.MERGE){const p=t;p.source.fromUser?u=eV(s,e,p.path,p.children,n,r,o):(Se(p.source.fromServer,"Unknown source."),f=p.source.tagged||e.serverCache.isFiltered(),u=jx(s,e,p.path,p.children,n,r,f,o))}else if(t.type===_i.ACK_USER_WRITE){const p=t;p.revert?u=nV(s,e,p.path,n,r,o):u=tV(s,e,p.path,p.affectedTree,n,r,o)}else if(t.type===_i.LISTEN_COMPLETE)u=sV(s,e,t.path,n,o);else throw ec("Unknown operation type: "+t.type);const h=o.getChanges();return J9(e,u,h),{viewCache:u,changes:h}}function J9(s,e,t){const n=e.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=bx(s);(t.length>0||!s.eventCache.isFullyInitialized()||r&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&t.push(w9(bx(e)))}}function $T(s,e,t,n,r,o){const u=e.eventCache;if(nm(n,t)!=null)return e;{let f,h;if(Je(t))if(Se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=bl(e),x=p instanceof pt?p:pt.EMPTY_NODE,v=FT(n,x);f=s.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const p=Nx(n,bl(e));f=s.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=it(t);if(p===".priority"){Se(ya(t)===1,"Can't have a priority with additional path components");const x=u.getNode();h=e.serverCache.getNode();const v=lE(n,t,x,h);v!=null?f=s.filter.updatePriority(x,v):f=u.getNode()}else{const x=It(t);let v;if(u.isCompleteForChild(p)){h=e.serverCache.getNode();const _=lE(n,t,u.getNode(),h);_!=null?v=u.getNode().getImmediateChild(p).updateChild(x,_):v=u.getNode().getImmediateChild(p)}else v=sv(n,p,e.serverCache);v!=null?f=s.filter.updateChild(u.getNode(),p,v,x,r,o):f=u.getNode()}}return $u(e,f,u.isFullyInitialized()||Je(t),s.filter.filtersNodes())}}function im(s,e,t,n,r,o,u,f){const h=e.serverCache;let p;const x=u?s.filter:s.filter.getIndexedFilter();if(Je(t))p=x.updateFullNode(h.getNode(),n,null);else if(x.filtersNodes()&&!h.isFiltered()){const N=h.getNode().updateChild(t,n);p=x.updateFullNode(h.getNode(),N,null)}else{const N=it(t);if(!h.isCompleteForPath(t)&&ya(t)>1)return e;const w=It(t),R=h.getNode().getImmediateChild(N).updateChild(w,n);N===".priority"?p=x.updatePriority(h.getNode(),R):p=x.updateChild(h.getNode(),N,R,w,GT,null)}const v=LT(e,p,h.isFullyInitialized()||Je(t),x.filtersNodes()),_=new nv(r,v,o);return $T(s,v,t,r,_,f)}function Ex(s,e,t,n,r,o,u){const f=e.eventCache;let h,p;const x=new nv(r,e,o);if(Je(t))p=s.filter.updateFullNode(e.eventCache.getNode(),n,u),h=$u(e,p,!0,s.filter.filtersNodes());else{const v=it(t);if(v===".priority")p=s.filter.updatePriority(e.eventCache.getNode(),n),h=$u(e,p,f.isFullyInitialized(),f.isFiltered());else{const _=It(t),N=f.getNode().getImmediateChild(v);let w;if(Je(_))w=n;else{const E=x.getCompleteChild(v);E!=null?wT(_)===".priority"&&E.getChild(ET(_)).isEmpty()?w=E:w=E.updateChild(_,n):w=pt.EMPTY_NODE}if(N.equals(w))h=e;else{const E=s.filter.updateChild(f.getNode(),v,w,_,x,u);h=$u(e,E,f.isFullyInitialized(),s.filter.filtersNodes())}}}return h}function oE(s,e){return s.eventCache.isCompleteForChild(e)}function eV(s,e,t,n,r,o,u){let f=e;return n.foreach((h,p)=>{const x=xs(t,h);oE(e,it(x))&&(f=Ex(s,f,x,p,r,o,u))}),n.foreach((h,p)=>{const x=xs(t,h);oE(e,it(x))||(f=Ex(s,f,x,p,r,o,u))}),f}function cE(s,e,t){return t.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function jx(s,e,t,n,r,o,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,p;Je(t)?p=n:p=new At(null).setTree(t,n);const x=e.serverCache.getNode();return p.children.inorderTraversal((v,_)=>{if(x.hasChild(v)){const N=e.serverCache.getNode().getImmediateChild(v),w=cE(s,N,_);h=im(s,h,new Dt(v),w,r,o,u,f)}}),p.children.inorderTraversal((v,_)=>{const N=!e.serverCache.isCompleteForChild(v)&&_.value===null;if(!x.hasChild(v)&&!N){const w=e.serverCache.getNode().getImmediateChild(v),E=cE(s,w,_);h=im(s,h,new Dt(v),E,r,o,u,f)}}),h}function tV(s,e,t,n,r,o,u){if(nm(r,t)!=null)return e;const f=e.serverCache.isFiltered(),h=e.serverCache;if(n.value!=null){if(Je(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return im(s,e,t,h.getNode().getChild(t),r,o,f,u);if(Je(t)){let p=new At(null);return h.getNode().forEachChild(Oo,(x,v)=>{p=p.set(new Dt(x),v)}),jx(s,e,t,p,r,o,f,u)}else return e}else{let p=new At(null);return n.foreach((x,v)=>{const _=xs(t,x);h.isCompleteForPath(_)&&(p=p.set(x,h.getNode().getChild(_)))}),jx(s,e,t,p,r,o,f,u)}}function sV(s,e,t,n,r){const o=e.serverCache,u=LT(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return $T(s,u,t,n,GT,r)}function nV(s,e,t,n,r,o){let u;if(nm(n,t)!=null)return e;{const f=new nv(n,e,r),h=e.eventCache.getNode();let p;if(Je(t)||it(t)===".priority"){let x;if(e.serverCache.isFullyInitialized())x=Nx(n,bl(e));else{const v=e.serverCache.getNode();Se(v instanceof pt,"serverChildren would be complete if leaf node"),x=FT(n,v)}x=x,p=s.filter.updateFullNode(h,x,o)}else{const x=it(t);let v=sv(n,x,e.serverCache);v==null&&e.serverCache.isCompleteForChild(x)&&(v=h.getImmediateChild(x)),v!=null?p=s.filter.updateChild(h,x,v,It(t),f,o):e.eventCache.getNode().hasChild(x)?p=s.filter.updateChild(h,x,pt.EMPTY_NODE,It(t),f,o):p=h,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Nx(n,bl(e)),u.isLeafNode()&&(p=s.filter.updateFullNode(p,u,o)))}return u=e.serverCache.isFullyInitialized()||nm(n,jt())!=null,$u(e,p,u,s.filter.filtersNodes())}}function iV(s,e){const t=bl(s.viewCache_);return t&&(s.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(it(e)).isEmpty())?t.getChild(e):null}function uE(s,e,t,n){e.type===_i.MERGE&&e.source.queryId!==null&&(Se(bl(s.viewCache_),"We should always have a full cache before handling merges"),Se(bx(s.viewCache_),"Missing event cache, even though we have a server cache"));const r=s.viewCache_,o=Z9(s.processor_,r,e,t,n);return X9(s.processor_,o.viewCache),Se(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=o.viewCache,rV(s,o.changes,o.viewCache.eventCache.getNode())}function rV(s,e,t,n){const r=s.eventRegistrations_;return k9(s.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dE;function aV(s){Se(!dE,"__referenceConstructor has already been defined"),dE=s}function iv(s,e,t,n){const r=e.source.queryId;if(r!==null){const o=s.views.get(r);return Se(o!=null,"SyncTree gave us an op for an invalid query."),uE(o,e,t,n)}else{let o=[];for(const u of s.views.values())o=o.concat(uE(u,e,t,n));return o}}function rv(s,e){let t=null;for(const n of s.views.values())t=t||iV(n,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hE;function lV(s){Se(!hE,"__referenceConstructor has already been defined"),hE=s}class fE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new At(null),this.pendingWriteTree_=W9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oV(s,e,t,n,r){return M9(s.pendingWriteTree_,e,t,n,r),r?$m(s,new vl(DT(),e,t)):[]}function Ao(s,e,t=!1){const n=L9(s.pendingWriteTree_,e);if(V9(s.pendingWriteTree_,e)){let o=new At(null);return n.snap!=null?o=o.set(jt(),!0):Mn(n.children,u=>{o=o.set(new Dt(u),!0)}),$m(s,new sm(n.path,o,t))}else return[]}function Gm(s,e,t){return $m(s,new vl(PT(),e,t))}function cV(s,e,t){const n=At.fromObject(t);return $m(s,new ad(PT(),e,n))}function uV(s,e,t,n){const r=QT(s,n);if(r!=null){const o=XT(r),u=o.path,f=o.queryId,h=Rn(u,e),p=new vl(OT(f),h,t);return ZT(s,u,p)}else return[]}function dV(s,e,t,n){const r=QT(s,n);if(r){const o=XT(r),u=o.path,f=o.queryId,h=Rn(u,e),p=At.fromObject(t),x=new ad(OT(f),h,p);return ZT(s,u,x)}else return[]}function WT(s,e,t){const r=s.pendingWriteTree_,o=s.syncPointTree_.findOnPath(e,(u,f)=>{const h=Rn(u,e),p=rv(f,h);if(p)return p});return BT(r,e,o,t,!0)}function $m(s,e){return KT(e,s.syncPointTree_,null,zT(s.pendingWriteTree_,jt()))}function KT(s,e,t,n){if(Je(s.path))return YT(s,e,t,n);{const r=e.get(jt());t==null&&r!=null&&(t=rv(r,jt()));let o=[];const u=it(s.path),f=s.operationForChild(u),h=e.children.get(u);if(h&&f){const p=t?t.getImmediateChild(u):null,x=qT(n,u);o=o.concat(KT(f,h,p,x))}return r&&(o=o.concat(iv(r,s,n,t))),o}}function YT(s,e,t,n){const r=e.get(jt());t==null&&r!=null&&(t=rv(r,jt()));let o=[];return e.children.inorderTraversal((u,f)=>{const h=t?t.getImmediateChild(u):null,p=qT(n,u),x=s.operationForChild(u);x&&(o=o.concat(YT(x,f,h,p)))}),r&&(o=o.concat(iv(r,s,n,t))),o}function QT(s,e){return s.tagToQueryMap.get(e)}function XT(s){const e=s.indexOf("$");return Se(e!==-1&&e<s.length-1,"Bad queryKey."),{queryId:s.substr(e+1),path:new Dt(s.substr(0,e))}}function ZT(s,e,t){const n=s.syncPointTree_.get(e);Se(n,"Missing sync point for query tag that we're tracking");const r=zT(s.pendingWriteTree_,e);return iv(n,t,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new av(t)}node(){return this.node_}}class lv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xs(this.path_,e);return new lv(this.syncTree_,t)}node(){return WT(this.syncTree_,this.path_)}}const hV=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},mE=function(s,e,t){if(!s||typeof s!="object")return s;if(Se(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return fV(s[".sv"],e,t);if(typeof s[".sv"]=="object")return mV(s[".sv"],e);Se(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},fV=function(s,e,t){switch(s){case"timestamp":return t.timestamp;default:Se(!1,"Unexpected server value: "+s)}},mV=function(s,e,t){s.hasOwnProperty("increment")||Se(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const n=s.increment;typeof n!="number"&&Se(!1,"Unexpected increment value: "+n);const r=e.node();if(Se(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const u=r.getValue();return typeof u!="number"?n:u+n},pV=function(s,e,t,n){return ov(e,new lv(t,s),n)},gV=function(s,e,t){return ov(s,new av(e),t)};function ov(s,e,t){const n=s.getPriority().val(),r=mE(n,e.getImmediateChild(".priority"),t);let o;if(s.isLeafNode()){const u=s,f=mE(u.getValue(),e,t);return f!==u.getValue()||r!==u.getPriority().val()?new fs(f,Os(r)):s}else{const u=s;return o=u,r!==u.getPriority().val()&&(o=o.updatePriority(new fs(r))),u.forEachChild(Ms,(f,h)=>{const p=ov(h,e.getImmediateChild(f),t);p!==h&&(o=o.updateImmediateChild(f,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function uv(s,e){let t=e instanceof Dt?e:new Dt(e),n=s,r=it(t);for(;r!==null;){const o=Lo(n.node.children,r)||{children:{},childCount:0};n=new cv(r,n,o),t=It(t),r=it(t)}return n}function mc(s){return s.node.value}function JT(s,e){s.node.value=e,Sx(s)}function eC(s){return s.node.childCount>0}function xV(s){return mc(s)===void 0&&!eC(s)}function Wm(s,e){Mn(s.node.children,(t,n)=>{e(new cv(t,s,n))})}function tC(s,e,t,n){t&&e(s),Wm(s,r=>{tC(r,e,!0)})}function yV(s,e,t){let n=s.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Ed(s){return new Dt(s.parent===null?s.name:Ed(s.parent)+"/"+s.name)}function Sx(s){s.parent!==null&&vV(s.parent,s.name,s)}function vV(s,e,t){const n=xV(t),r=_r(s.node.children,e);n&&r?(delete s.node.children[e],s.node.childCount--,Sx(s)):!n&&!r&&(s.node.children[e]=t.node,s.node.childCount++,Sx(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=/[\[\].#$\/\u0000-\u001F\u007F]/,_V=/[\[\].#$\u0000-\u001F\u007F]/,E0=10*1024*1024,sC=function(s){return typeof s=="string"&&s.length!==0&&!bV.test(s)},wV=function(s){return typeof s=="string"&&s.length!==0&&!_V.test(s)},NV=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),wV(s)},nC=function(s,e,t){const n=t instanceof Dt?new s9(t,s):t;if(e===void 0)throw new Error(s+"contains undefined "+rl(n));if(typeof e=="function")throw new Error(s+"contains a function "+rl(n)+" with contents = "+e.toString());if(tT(e))throw new Error(s+"contains "+e.toString()+" "+rl(n));if(typeof e=="string"&&e.length>E0/3&&pm(e)>E0)throw new Error(s+"contains a string greater than "+E0+" utf8 bytes "+rl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Mn(e,(u,f)=>{if(u===".value")r=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!sC(u)))throw new Error(s+" contains an invalid key ("+u+") "+rl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);n9(n,u),nC(s,f,n),i9(n)}),r&&o)throw new Error(s+' contains ".value" child '+rl(n)+" in addition to actual children.")}},EV=function(s,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!NV(t))throw new Error(lk(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SV(s,e){let t=null;for(let n=0;n<e.length;n++){const r=e[n],o=r.getPath();t!==null&&!jT(o,t.path)&&(s.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(r)}t&&s.eventLists_.push(t)}function Il(s,e,t){SV(s,t),TV(s,n=>$n(n,e)||$n(e,n))}function TV(s,e){s.recursionDepth_++;let t=!0;for(let n=0;n<s.eventLists_.length;n++){const r=s.eventLists_[n];if(r){const o=r.path;e(o)?(CV(s.eventLists_[n]),s.eventLists_[n]=null):t=!1}}t&&(s.eventLists_=[]),s.recursionDepth_--}function CV(s){for(let e=0;e<s.events.length;e++){const t=s.events[e];if(t!==null){s.events[e]=null;const n=t.getEventRunner();Hu&&Ps("event: "+t.toString()),wd(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="repo_interrupt",IV=25;class RV{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tm(),this.transactionQueueTree_=new cv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kV(s,e,t){if(s.stats_=Qy(s.repoInfo_),s.forceRestClient_||T5())s.server_=new em(s.repoInfo_,(n,r,o,u)=>{pE(s,n,r,o,u)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>gE(s,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Es(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}s.persistentConnection_=new ur(s.repoInfo_,e,(n,r,o,u)=>{pE(s,n,r,o,u)},n=>{gE(s,n)},n=>{PV(s,n)},s.authTokenProvider_,s.appCheckProvider_,t),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(n=>{s.server_.refreshAuthToken(n)}),s.appCheckProvider_.addTokenChangeListener(n=>{s.server_.refreshAppCheckToken(n.token)}),s.statsReporter_=k5(s.repoInfo_,()=>new R9(s.stats_,s.server_)),s.infoData_=new S9,s.infoSyncTree_=new fE({startListening:(n,r,o,u)=>{let f=[];const h=s.infoData_.getNode(n._path);return h.isEmpty()||(f=Gm(s.infoSyncTree_,n._path,h),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),dv(s,"connected",!1),s.serverSyncTree_=new fE({startListening:(n,r,o,u)=>(s.server_.listen(n,o,r,(f,h)=>{const p=u(f,h);Il(s.eventQueue_,n._path,p)}),[]),stopListening:(n,r)=>{s.server_.unlisten(n,r)}})}function DV(s){const t=s.infoData_.getNode(new Dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function iC(s){return hV({timestamp:DV(s)})}function pE(s,e,t,n,r){s.dataUpdateCount++;const o=new Dt(e);t=s.interceptServerDataCallback_?s.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(n){const h=If(t,p=>Os(p));u=dV(s.serverSyncTree_,o,h,r)}else{const h=Os(t);u=uV(s.serverSyncTree_,o,h,r)}else if(n){const h=If(t,p=>Os(p));u=cV(s.serverSyncTree_,o,h)}else{const h=Os(t);u=Gm(s.serverSyncTree_,o,h)}let f=o;u.length>0&&(f=fv(s,o)),Il(s.eventQueue_,f,u)}function gE(s,e){dv(s,"connected",e),e===!1&&MV(s)}function PV(s,e){Mn(e,(t,n)=>{dv(s,t,n)})}function dv(s,e,t){const n=new Dt("/.info/"+e),r=Os(t);s.infoData_.updateSnapshot(n,r);const o=Gm(s.infoSyncTree_,n,r);Il(s.eventQueue_,n,o)}function OV(s){return s.nextWriteId_++}function MV(s){rC(s,"onDisconnectEvents");const e=iC(s),t=tm();vx(s.onDisconnect_,jt(),(r,o)=>{const u=pV(r,o,s.serverSyncTree_,e);kT(t,r,u)});let n=[];vx(t,jt(),(r,o)=>{n=n.concat(Gm(s.serverSyncTree_,r,o));const u=UV(s,r);fv(s,u)}),s.onDisconnect_=tm(),Il(s.eventQueue_,jt(),n)}function LV(s){s.persistentConnection_&&s.persistentConnection_.interrupt(AV)}function rC(s,...e){let t="";s.persistentConnection_&&(t=s.persistentConnection_.id+":"),Ps(t,...e)}function aC(s,e,t){return WT(s.serverSyncTree_,e,t)||pt.EMPTY_NODE}function hv(s,e=s.transactionQueueTree_){if(e||Km(s,e),mc(e)){const t=oC(s,e);Se(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&VV(s,Ed(e),t)}else eC(e)&&Wm(e,t=>{hv(s,t)})}function VV(s,e,t){const n=t.map(p=>p.currentWriteId),r=aC(s,e,n);let o=r;const u=r.hash();for(let p=0;p<t.length;p++){const x=t[p];Se(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const v=Rn(e,x.path);o=o.updateChild(v,x.currentOutputSnapshotRaw)}const f=o.val(!0),h=e;s.server_.put(h.toString(),f,p=>{rC(s,"transaction put response",{path:h.toString(),status:p});let x=[];if(p==="ok"){const v=[];for(let _=0;_<t.length;_++)t[_].status=2,x=x.concat(Ao(s.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&v.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();Km(s,uv(s.transactionQueueTree_,e)),hv(s,s.transactionQueueTree_),Il(s.eventQueue_,e,x);for(let _=0;_<v.length;_++)wd(v[_])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{yn("transaction at "+h.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}fv(s,e)}},u)}function fv(s,e){const t=lC(s,e),n=Ed(t),r=oC(s,t);return zV(s,r,n),n}function zV(s,e,t){if(e.length===0)return;const n=[];let r=[];const u=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const h=e[f],p=Rn(t,h.path);let x=!1,v;if(Se(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)x=!0,v=h.abortReason,r=r.concat(Ao(s.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=IV)x=!0,v="maxretry",r=r.concat(Ao(s.serverSyncTree_,h.currentWriteId,!0));else{const _=aC(s,h.path,u);h.currentInputSnapshot=_;const N=e[f].update(_.val());if(N!==void 0){nC("transaction failed: Data returned ",N,h.path);let w=Os(N);typeof N=="object"&&N!=null&&_r(N,".priority")||(w=w.updatePriority(_.getPriority()));const R=h.currentWriteId,T=iC(s),k=gV(w,_,T);h.currentOutputSnapshotRaw=w,h.currentOutputSnapshotResolved=k,h.currentWriteId=OV(s),u.splice(u.indexOf(R),1),r=r.concat(oV(s.serverSyncTree_,h.path,k,h.currentWriteId,h.applyLocally)),r=r.concat(Ao(s.serverSyncTree_,R,!0))}else x=!0,v="nodata",r=r.concat(Ao(s.serverSyncTree_,h.currentWriteId,!0))}Il(s.eventQueue_,t,r),r=[],x&&(e[f].status=2,function(_){setTimeout(_,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(v==="nodata"?n.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):n.push(()=>e[f].onComplete(new Error(v),!1,null))))}Km(s,s.transactionQueueTree_);for(let f=0;f<n.length;f++)wd(n[f]);hv(s,s.transactionQueueTree_)}function lC(s,e){let t,n=s.transactionQueueTree_;for(t=it(e);t!==null&&mc(n)===void 0;)n=uv(n,t),e=It(e),t=it(e);return n}function oC(s,e){const t=[];return cC(s,e,t),t.sort((n,r)=>n.order-r.order),t}function cC(s,e,t){const n=mc(e);if(n)for(let r=0;r<n.length;r++)t.push(n[r]);Wm(e,r=>{cC(s,r,t)})}function Km(s,e){const t=mc(e);if(t){let n=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[n]=t[r],n++);t.length=n,JT(e,t.length>0?t:void 0)}Wm(e,n=>{Km(s,n)})}function UV(s,e){const t=Ed(lC(s,e)),n=uv(s.transactionQueueTree_,e);return yV(n,r=>{j0(s,r)}),j0(s,n),tC(n,r=>{j0(s,r)}),t}function j0(s,e){const t=mc(e);if(t){const n=[];let r=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(Se(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(Se(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(Ao(s.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&n.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?JT(e,void 0):t.length=o+1,Il(s.eventQueue_,Ed(e),r);for(let u=0;u<n.length;u++)wd(n[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(s){let e="";const t=s.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let r=t[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function FV(s){const e={};s.charAt(0)==="?"&&(s=s.substring(1));for(const t of s.split("&")){if(t.length===0)continue;const n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):yn(`Invalid query segment '${t}' in query '${s}'`)}return e}const xE=function(s,e){const t=qV(s),n=t.namespace;t.domain==="firebase.com"&&vr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||v5();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new fT(t.host,t.secure,n,r,e,"",n!==t.subdomain),path:new Dt(t.pathString)}},qV=function(s){let e="",t="",n="",r="",o="",u=!0,f="https",h=443;if(typeof s=="string"){let p=s.indexOf("//");p>=0&&(f=s.substring(0,p-1),s=s.substring(p+2));let x=s.indexOf("/");x===-1&&(x=s.length);let v=s.indexOf("?");v===-1&&(v=s.length),e=s.substring(0,Math.min(x,v)),x<v&&(r=BV(s.substring(x,v)));const _=FV(s.substring(Math.min(s.length,v)));p=e.indexOf(":"),p>=0?(u=f==="https"||f==="wss",h=parseInt(e.substring(p+1),10)):p=e.length;const N=e.slice(0,p);if(N.toLowerCase()==="localhost")t="localhost";else if(N.split(".").length<=2)t=N;else{const w=e.indexOf(".");n=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=n}"ns"in _&&(o=_.ns)}return{host:e,port:h,domain:t,subdomain:n,secure:u,scheme:f,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Je(this._path)?null:wT(this._path)}get ref(){return new pc(this._repo,this._path)}get _queryIdentifier(){const e=sE(this._queryParams),t=Ky(e);return t==="{}"?"default":t}get _queryObject(){return sE(this._queryParams)}isEqual(e){if(e=kt(e),!(e instanceof mv))return!1;const t=this._repo===e._repo,n=jT(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+t9(this._path)}}class pc extends mv{constructor(e,t){super(e,t,new ev,!1)}get parent(){const e=ET(this._path);return e===null?null:new pc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}aV(pc);lV(pc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="FIREBASE_DATABASE_EMULATOR_HOST",Tx={};let GV=!1;function $V(s,e,t,n){s.repoInfo_=new fT(e,!1,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,t),n&&(s.authTokenProvider_=n)}function WV(s,e,t,n,r){let o=n||s.options.databaseURL;o===void 0&&(s.options.projectId||vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ps("Using default host for project ",s.options.projectId),o=`${s.options.projectId}-default-rtdb.firebaseio.com`);let u=xE(o,r),f=u.repoInfo,h;typeof process<"u"&&LN&&(h=LN[HV]),h?(o=`http://${h}?ns=${f.namespace}`,u=xE(o,r),f=u.repoInfo):u.repoInfo.secure;const p=new A5(s.name,s.options,e);EV("Invalid Firebase Database URL",u),Je(u.path)||vr("Database URL must point to the root of a Firebase Database (not including a child path).");const x=YV(f,s,p,new C5(s,t));return new QV(x,s)}function KV(s,e){const t=Tx[e];(!t||t[s.key]!==s)&&vr(`Database ${e}(${s.repoInfo_}) has already been deleted.`),LV(s),delete t[s.key]}function YV(s,e,t,n){let r=Tx[e.name];r||(r={},Tx[e.name]=r);let o=r[s.toURLString()];return o&&vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new RV(s,GV,t,n),r[s.toURLString()]=o,o}class QV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pc(this._repo,jt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(KV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vr("Cannot call "+e+" on a deleted database.")}}function XV(s=gm(),e){const t=va(s,"database").getImmediate({identifier:e});if(!t._instanceStarted){const n=sj("database");n&&ZV(t,...n)}return t}function ZV(s,e,t,n={}){s=kt(s),s._checkNotDeleted("useEmulator");const r=`${e}:${t}`,o=s._repoInternal;if(s._instanceStarted){if(r===s._repoInternal.repoInfo_.host&&Xn(n,o.repoInfo_.emulatorOptions))return;vr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)n.mockUserToken&&vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new wf(wf.OWNER);else if(n.mockUserToken){const f=typeof n.mockUserToken=="string"?n.mockUserToken:rj(n.mockUserToken,s.app.options.projectId);u=new wf(f)}$V(o,r,n,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(s){f5(jl),Zn(new Pn("database",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return WV(n,r,o,t)},"PUBLIC").setMultipleInstances(!0)),en(VN,zN,s),en(VN,zN,"esm2017")}ur.prototype.simpleListen=function(s,e){this.sendRequest("q",{p:s},e)};ur.prototype.echo=function(s,e){this.sendRequest("echo",{d:s},e)};JV();const e7={apiKey:"AIzaSyC4utyKH_Spo7QCkjpDMtRxLkMTUyn9DGs",authDomain:"chinju-39519.firebaseapp.com",databaseURL:"https://chinju-39519-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chinju-39519",storageBucket:"chinju-39519.appspot.com",messagingSenderId:"260308970196",appId:"1:260308970196:web:4cc4537677b9eabf9aa941",measurementId:"G-48S7RFF1ES"},Ym=mj(e7);eM(Ym);const al=O6(Ym);XV(Ym);const pe=ZL(Ym);zj(al,Jx).then(()=>{console.log("Firebase persistence enabled")}).catch(s=>{console.error("Error enabling persistence:",s)});const uC=C.createContext(),rn=()=>C.useContext(uC),t7=({children:s})=>{const[e,t]=C.useState(null),[n,r]=C.useState(!0),[o,u]=C.useState(""),f=async(N,w={})=>{if(!N)return;const E=je(pe,"users",N.uid);await u5(E,{uid:N.uid,email:N.email,displayName:N.displayName||w.displayName||"",photoURL:N.photoURL||"",createdAt:new Date().toISOString(),...w},{merge:!0})},h=async(N,w)=>{try{u("");const E=await vP(al,N,w);return await f(E.user),E.user}catch(E){throw u("Failed to sign in: "+E.message),console.error("Email sign in error:",E),E}},p=async(N,w,E)=>{try{u("");const R=await yP(al,N,w);return await _P(R.user,{displayName:E}),await f(R.user,{displayName:E}),await R.user.reload(),R.user}catch(R){throw u("Failed to create account: "+R.message),console.error("Email sign up error:",R),R}},x=async()=>{const N=new sr;try{u(""),await zj(al,Jx);const w=await HP(al,N);return await f(w.user),w.user}catch(w){throw w.code==="auth/popup-closed-by-user"?u("Login popup was closed"):w.message.includes("Cross-Origin-Opener-Policy")?u("Please try again"):u("Failed to sign in with Google: "+w.message),console.error("Google sign in error:",w),w}},v=async()=>{try{u(""),await jP(al)}catch(N){throw u("Failed to log out: "+N.message),console.error("Logout error:",N),N}};C.useEffect(()=>{const N=EP(al,async w=>{if(w){await f(w);const E=await Zt(je(pe,"users",w.uid));E.exists()&&t({...w,cartItems:E.data().cartItems||[]})}else t(null);r(!1)});return()=>N()},[]);const _={currentUser:e,userId:e==null?void 0:e.uid,login:h,signup:p,signInWithGoogle:x,logout:v,loading:n,error:o};return a.jsx(uC.Provider,{value:_,children:!n&&s})};function pv(s){return ut({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(s)}function s7(s){return ut({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35V7zM7 17c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1z"},child:[]},{tag:"path",attr:{d:"M5 6h5v2H5zM19 13c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"},child:[]}]})(s)}function yE(s){return s!==null&&typeof s=="object"&&"constructor"in s&&s.constructor===Object}function gv(s,e){s===void 0&&(s={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof s[n]>"u"?s[n]=e[n]:yE(e[n])&&yE(s[n])&&Object.keys(e[n]).length>0&&gv(s[n],e[n])})}const dC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Si(){const s=typeof document<"u"?document:{};return gv(s,dC),s}const n7={document:dC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(s){return typeof setTimeout>"u"?(s(),null):setTimeout(s,0)},cancelAnimationFrame(s){typeof setTimeout>"u"||clearTimeout(s)}};function Hs(){const s=typeof window<"u"?window:{};return gv(s,n7),s}function i7(s){return s===void 0&&(s=""),s.trim().split(" ").filter(e=>!!e.trim())}function r7(s){const e=s;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Cx(s,e){return e===void 0&&(e=0),setTimeout(s,e)}function rm(){return Date.now()}function a7(s){const e=Hs();let t;return e.getComputedStyle&&(t=e.getComputedStyle(s,null)),!t&&s.currentStyle&&(t=s.currentStyle),t||(t=s.style),t}function l7(s,e){e===void 0&&(e="x");const t=Hs();let n,r,o;const u=a7(s);return t.WebKitCSSMatrix?(r=u.transform||u.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(f=>f.replace(",",".")).join(", ")),o=new t.WebKitCSSMatrix(r==="none"?"":r)):(o=u.MozTransform||u.OTransform||u.MsTransform||u.msTransform||u.transform||u.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=o.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?r=o.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5])),r||0}function of(s){return typeof s=="object"&&s!==null&&s.constructor&&Object.prototype.toString.call(s).slice(8,-1)==="Object"}function o7(s){return typeof window<"u"&&typeof window.HTMLElement<"u"?s instanceof HTMLElement:s&&(s.nodeType===1||s.nodeType===11)}function pn(){const s=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!o7(n)){const r=Object.keys(Object(n)).filter(o=>e.indexOf(o)<0);for(let o=0,u=r.length;o<u;o+=1){const f=r[o],h=Object.getOwnPropertyDescriptor(n,f);h!==void 0&&h.enumerable&&(of(s[f])&&of(n[f])?n[f].__swiper__?s[f]=n[f]:pn(s[f],n[f]):!of(s[f])&&of(n[f])?(s[f]={},n[f].__swiper__?s[f]=n[f]:pn(s[f],n[f])):s[f]=n[f])}}}return s}function cf(s,e,t){s.style.setProperty(e,t)}function hC(s){let{swiper:e,targetPosition:t,side:n}=s;const r=Hs(),o=-e.translate;let u=null,f;const h=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const p=t>o?"next":"prev",x=(_,N)=>p==="next"&&_>=N||p==="prev"&&_<=N,v=()=>{f=new Date().getTime(),u===null&&(u=f);const _=Math.max(Math.min((f-u)/h,1),0),N=.5-Math.cos(_*Math.PI)/2;let w=o+N*(t-o);if(x(w,t)&&(w=t),e.wrapperEl.scrollTo({[n]:w}),x(w,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:w})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(v)};v()}function wi(s,e){e===void 0&&(e="");const t=Hs(),n=[...s.children];return t.HTMLSlotElement&&s instanceof HTMLSlotElement&&n.push(...s.assignedElements()),e?n.filter(r=>r.matches(e)):n}function c7(s,e){const t=[e];for(;t.length>0;){const n=t.shift();if(s===n)return!0;t.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function u7(s,e){const t=Hs();let n=e.contains(s);return!n&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(n=[...e.assignedElements()].includes(s),n||(n=c7(s,e))),n}function am(s){try{console.warn(s);return}catch{}}function lm(s,e){e===void 0&&(e=[]);const t=document.createElement(s);return t.classList.add(...Array.isArray(e)?e:i7(e)),t}function d7(s,e){const t=[];for(;s.previousElementSibling;){const n=s.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),s=n}return t}function h7(s,e){const t=[];for(;s.nextElementSibling;){const n=s.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),s=n}return t}function ra(s,e){return Hs().getComputedStyle(s,null).getPropertyValue(e)}function om(s){let e=s,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function fC(s,e){const t=[];let n=s.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function Ax(s,e,t){const n=Hs();return s[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ps(s){return(Array.isArray(s)?s:[s]).filter(e=>!!e)}let S0;function f7(){const s=Hs(),e=Si();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in s||s.DocumentTouch&&e instanceof s.DocumentTouch)}}function mC(){return S0||(S0=f7()),S0}let T0;function m7(s){let{userAgent:e}=s===void 0?{}:s;const t=mC(),n=Hs(),r=n.navigator.platform,o=e||n.navigator.userAgent,u={ios:!1,android:!1},f=n.screen.width,h=n.screen.height,p=o.match(/(Android);?[\s\/]+([\d.]+)?/);let x=o.match(/(iPad).*OS\s([\d_]+)/);const v=o.match(/(iPod)(.*OS\s([\d_]+))?/),_=!x&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),N=r==="Win32";let w=r==="MacIntel";const E=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!x&&w&&t.touch&&E.indexOf(`${f}x${h}`)>=0&&(x=o.match(/(Version)\/([\d.]+)/),x||(x=[0,1,"13_0_0"]),w=!1),p&&!N&&(u.os="android",u.android=!0),(x||_||v)&&(u.os="ios",u.ios=!0),u}function pC(s){return s===void 0&&(s={}),T0||(T0=m7(s)),T0}let C0;function p7(){const s=Hs(),e=pC();let t=!1;function n(){const f=s.navigator.userAgent.toLowerCase();return f.indexOf("safari")>=0&&f.indexOf("chrome")<0&&f.indexOf("android")<0}if(n()){const f=String(s.navigator.userAgent);if(f.includes("Version/")){const[h,p]=f.split("Version/")[1].split(" ")[0].split(".").map(x=>Number(x));t=h<16||h===16&&p<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(s.navigator.userAgent),o=n(),u=o||r&&e.ios;return{isSafari:t||o,needPerspectiveFix:t,need3dFix:u,isWebView:r}}function gC(){return C0||(C0=p7()),C0}function g7(s){let{swiper:e,on:t,emit:n}=s;const r=Hs();let o=null,u=null;const f=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},h=()=>{!e||e.destroyed||!e.initialized||(o=new ResizeObserver(v=>{u=r.requestAnimationFrame(()=>{const{width:_,height:N}=e;let w=_,E=N;v.forEach(R=>{let{contentBoxSize:T,contentRect:k,target:P}=R;P&&P!==e.el||(w=k?k.width:(T[0]||T).inlineSize,E=k?k.height:(T[0]||T).blockSize)}),(w!==_||E!==N)&&f()})}),o.observe(e.el))},p=()=>{u&&r.cancelAnimationFrame(u),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null)},x=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){h();return}r.addEventListener("resize",f),r.addEventListener("orientationchange",x)}),t("destroy",()=>{p(),r.removeEventListener("resize",f),r.removeEventListener("orientationchange",x)})}function x7(s){let{swiper:e,extendParams:t,on:n,emit:r}=s;const o=[],u=Hs(),f=function(x,v){v===void 0&&(v={});const _=u.MutationObserver||u.WebkitMutationObserver,N=new _(w=>{if(e.__preventObserver__)return;if(w.length===1){r("observerUpdate",w[0]);return}const E=function(){r("observerUpdate",w[0])};u.requestAnimationFrame?u.requestAnimationFrame(E):u.setTimeout(E,0)});N.observe(x,{attributes:typeof v.attributes>"u"?!0:v.attributes,childList:e.isElement||(typeof v.childList>"u"?!0:v).childList,characterData:typeof v.characterData>"u"?!0:v.characterData}),o.push(N)},h=()=>{if(e.params.observer){if(e.params.observeParents){const x=fC(e.hostEl);for(let v=0;v<x.length;v+=1)f(x[v])}f(e.hostEl,{childList:e.params.observeSlideChildren}),f(e.wrapperEl,{attributes:!1})}},p=()=>{o.forEach(x=>{x.disconnect()}),o.splice(0,o.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",h),n("destroy",p)}var y7={on(s,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const r=t?"unshift":"push";return s.split(" ").forEach(o=>{n.eventsListeners[o]||(n.eventsListeners[o]=[]),n.eventsListeners[o][r](e)}),n},once(s,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function r(){n.off(s,r),r.__emitterProxy&&delete r.__emitterProxy;for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];e.apply(n,u)}return r.__emitterProxy=e,n.on(s,r,t)},onAny(s,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof s!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(s)<0&&t.eventsAnyListeners[n](s),t},offAny(s){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(s);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(s,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||s.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((r,o)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[n].splice(o,1)})}),t},emit(){const s=this;if(!s.eventsListeners||s.destroyed||!s.eventsListeners)return s;let e,t,n;for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return typeof o[0]=="string"||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=s):(e=o[0].events,t=o[0].data,n=o[0].context||s),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(h=>{s.eventsAnyListeners&&s.eventsAnyListeners.length&&s.eventsAnyListeners.forEach(p=>{p.apply(n,[h,...t])}),s.eventsListeners&&s.eventsListeners[h]&&s.eventsListeners[h].forEach(p=>{p.apply(n,t)})}),s}};function v7(){const s=this;let e,t;const n=s.el;typeof s.params.width<"u"&&s.params.width!==null?e=s.params.width:e=n.clientWidth,typeof s.params.height<"u"&&s.params.height!==null?t=s.params.height:t=n.clientHeight,!(e===0&&s.isHorizontal()||t===0&&s.isVertical())&&(e=e-parseInt(ra(n,"padding-left")||0,10)-parseInt(ra(n,"padding-right")||0,10),t=t-parseInt(ra(n,"padding-top")||0,10)-parseInt(ra(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(s,{width:e,height:t,size:s.isHorizontal()?e:t}))}function b7(){const s=this;function e(O,L){return parseFloat(O.getPropertyValue(s.getDirectionLabel(L))||0)}const t=s.params,{wrapperEl:n,slidesEl:r,size:o,rtlTranslate:u,wrongRTL:f}=s,h=s.virtual&&t.virtual.enabled,p=h?s.virtual.slides.length:s.slides.length,x=wi(r,`.${s.params.slideClass}, swiper-slide`),v=h?s.virtual.slides.length:x.length;let _=[];const N=[],w=[];let E=t.slidesOffsetBefore;typeof E=="function"&&(E=t.slidesOffsetBefore.call(s));let R=t.slidesOffsetAfter;typeof R=="function"&&(R=t.slidesOffsetAfter.call(s));const T=s.snapGrid.length,k=s.slidesGrid.length;let P=t.spaceBetween,H=-E,B=0,G=0;if(typeof o>"u")return;typeof P=="string"&&P.indexOf("%")>=0?P=parseFloat(P.replace("%",""))/100*o:typeof P=="string"&&(P=parseFloat(P)),s.virtualSize=-P,x.forEach(O=>{u?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(cf(n,"--swiper-centered-offset-before",""),cf(n,"--swiper-centered-offset-after",""));const M=t.grid&&t.grid.rows>1&&s.grid;M?s.grid.initSlides(x):s.grid&&s.grid.unsetSlides();let A;const I=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(O=>typeof t.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<v;O+=1){A=0;let L;if(x[O]&&(L=x[O]),M&&s.grid.updateSlide(O,L,x),!(x[O]&&ra(L,"display")==="none")){if(t.slidesPerView==="auto"){I&&(x[O].style[s.getDirectionLabel("width")]="");const z=getComputedStyle(L),V=L.style.transform,ye=L.style.webkitTransform;if(V&&(L.style.transform="none"),ye&&(L.style.webkitTransform="none"),t.roundLengths)A=s.isHorizontal()?Ax(L,"width"):Ax(L,"height");else{const _e=e(z,"width"),K=e(z,"padding-left"),oe=e(z,"padding-right"),le=e(z,"margin-left"),we=e(z,"margin-right"),F=z.getPropertyValue("box-sizing");if(F&&F==="border-box")A=_e+le+we;else{const{clientWidth:re,offsetWidth:ve}=L;A=_e+K+oe+le+we+(ve-re)}}V&&(L.style.transform=V),ye&&(L.style.webkitTransform=ye),t.roundLengths&&(A=Math.floor(A))}else A=(o-(t.slidesPerView-1)*P)/t.slidesPerView,t.roundLengths&&(A=Math.floor(A)),x[O]&&(x[O].style[s.getDirectionLabel("width")]=`${A}px`);x[O]&&(x[O].swiperSlideSize=A),w.push(A),t.centeredSlides?(H=H+A/2+B/2+P,B===0&&O!==0&&(H=H-o/2-P),O===0&&(H=H-o/2-P),Math.abs(H)<1/1e3&&(H=0),t.roundLengths&&(H=Math.floor(H)),G%t.slidesPerGroup===0&&_.push(H),N.push(H)):(t.roundLengths&&(H=Math.floor(H)),(G-Math.min(s.params.slidesPerGroupSkip,G))%s.params.slidesPerGroup===0&&_.push(H),N.push(H),H=H+A+P),s.virtualSize+=A+P,B=A,G+=1}}if(s.virtualSize=Math.max(s.virtualSize,o)+R,u&&f&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${s.virtualSize+P}px`),t.setWrapperSize&&(n.style[s.getDirectionLabel("width")]=`${s.virtualSize+P}px`),M&&s.grid.updateWrapperSize(A,_),!t.centeredSlides){const O=[];for(let L=0;L<_.length;L+=1){let z=_[L];t.roundLengths&&(z=Math.floor(z)),_[L]<=s.virtualSize-o&&O.push(z)}_=O,Math.floor(s.virtualSize-o)-Math.floor(_[_.length-1])>1&&_.push(s.virtualSize-o)}if(h&&t.loop){const O=w[0]+P;if(t.slidesPerGroup>1){const L=Math.ceil((s.virtual.slidesBefore+s.virtual.slidesAfter)/t.slidesPerGroup),z=O*t.slidesPerGroup;for(let V=0;V<L;V+=1)_.push(_[_.length-1]+z)}for(let L=0;L<s.virtual.slidesBefore+s.virtual.slidesAfter;L+=1)t.slidesPerGroup===1&&_.push(_[_.length-1]+O),N.push(N[N.length-1]+O),s.virtualSize+=O}if(_.length===0&&(_=[0]),P!==0){const O=s.isHorizontal()&&u?"marginLeft":s.getDirectionLabel("marginRight");x.filter((L,z)=>!t.cssMode||t.loop?!0:z!==x.length-1).forEach(L=>{L.style[O]=`${P}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let O=0;w.forEach(z=>{O+=z+(P||0)}),O-=P;const L=O>o?O-o:0;_=_.map(z=>z<=0?-E:z>L?L+R:z)}if(t.centerInsufficientSlides){let O=0;w.forEach(z=>{O+=z+(P||0)}),O-=P;const L=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(O+L<o){const z=(o-O-L)/2;_.forEach((V,ye)=>{_[ye]=V-z}),N.forEach((V,ye)=>{N[ye]=V+z})}}if(Object.assign(s,{slides:x,snapGrid:_,slidesGrid:N,slidesSizesGrid:w}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){cf(n,"--swiper-centered-offset-before",`${-_[0]}px`),cf(n,"--swiper-centered-offset-after",`${s.size/2-w[w.length-1]/2}px`);const O=-s.snapGrid[0],L=-s.slidesGrid[0];s.snapGrid=s.snapGrid.map(z=>z+O),s.slidesGrid=s.slidesGrid.map(z=>z+L)}if(v!==p&&s.emit("slidesLengthChange"),_.length!==T&&(s.params.watchOverflow&&s.checkOverflow(),s.emit("snapGridLengthChange")),N.length!==k&&s.emit("slidesGridLengthChange"),t.watchSlidesProgress&&s.updateSlidesOffset(),s.emit("slidesUpdated"),!h&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const O=`${t.containerModifierClass}backface-hidden`,L=s.el.classList.contains(O);v<=t.maxBackfaceHiddenSlides?L||s.el.classList.add(O):L&&s.el.classList.remove(O)}}function _7(s){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let r=0,o;typeof s=="number"?e.setTransition(s):s===!0&&e.setTransition(e.params.speed);const u=f=>n?e.slides[e.getSlideIndexByData(f)]:e.slides[f];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(f=>{t.push(f)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const f=e.activeIndex+o;if(f>e.slides.length&&!n)break;t.push(u(f))}else t.push(u(e.activeIndex));for(o=0;o<t.length;o+=1)if(typeof t[o]<"u"){const f=t[o].offsetHeight;r=f>r?f:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function w7(){const s=this,e=s.slides,t=s.isElement?s.isHorizontal()?s.wrapperEl.offsetLeft:s.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(s.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-s.cssOverflowAdjustment()}const vE=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function N7(s){s===void 0&&(s=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:r,snapGrid:o}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let u=-s;r&&(u=s),e.visibleSlidesIndexes=[],e.visibleSlides=[];let f=t.spaceBetween;typeof f=="string"&&f.indexOf("%")>=0?f=parseFloat(f.replace("%",""))/100*e.size:typeof f=="string"&&(f=parseFloat(f));for(let h=0;h<n.length;h+=1){const p=n[h];let x=p.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(x-=n[0].swiperSlideOffset);const v=(u+(t.centeredSlides?e.minTranslate():0)-x)/(p.swiperSlideSize+f),_=(u-o[0]+(t.centeredSlides?e.minTranslate():0)-x)/(p.swiperSlideSize+f),N=-(u-x),w=N+e.slidesSizesGrid[h],E=N>=0&&N<=e.size-e.slidesSizesGrid[h],R=N>=0&&N<e.size-1||w>1&&w<=e.size||N<=0&&w>=e.size;R&&(e.visibleSlides.push(p),e.visibleSlidesIndexes.push(h)),vE(p,R,t.slideVisibleClass),vE(p,E,t.slideFullyVisibleClass),p.progress=r?-v:v,p.originalProgress=r?-_:_}}function E7(s){const e=this;if(typeof s>"u"){const x=e.rtlTranslate?-1:1;s=e&&e.translate&&e.translate*x||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:o,isEnd:u,progressLoop:f}=e;const h=o,p=u;if(n===0)r=0,o=!0,u=!0;else{r=(s-e.minTranslate())/n;const x=Math.abs(s-e.minTranslate())<1,v=Math.abs(s-e.maxTranslate())<1;o=x||r<=0,u=v||r>=1,x&&(r=0),v&&(r=1)}if(t.loop){const x=e.getSlideIndexByData(0),v=e.getSlideIndexByData(e.slides.length-1),_=e.slidesGrid[x],N=e.slidesGrid[v],w=e.slidesGrid[e.slidesGrid.length-1],E=Math.abs(s);E>=_?f=(E-_)/w:f=(E+w-N)/w,f>1&&(f-=1)}Object.assign(e,{progress:r,progressLoop:f,isBeginning:o,isEnd:u}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(s),o&&!h&&e.emit("reachBeginning toEdge"),u&&!p&&e.emit("reachEnd toEdge"),(h&&!o||p&&!u)&&e.emit("fromEdge"),e.emit("progress",r)}const A0=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function j7(){const s=this,{slides:e,params:t,slidesEl:n,activeIndex:r}=s,o=s.virtual&&t.virtual.enabled,u=s.grid&&t.grid&&t.grid.rows>1,f=v=>wi(n,`.${t.slideClass}${v}, swiper-slide${v}`)[0];let h,p,x;if(o)if(t.loop){let v=r-s.virtual.slidesBefore;v<0&&(v=s.virtual.slides.length+v),v>=s.virtual.slides.length&&(v-=s.virtual.slides.length),h=f(`[data-swiper-slide-index="${v}"]`)}else h=f(`[data-swiper-slide-index="${r}"]`);else u?(h=e.find(v=>v.column===r),x=e.find(v=>v.column===r+1),p=e.find(v=>v.column===r-1)):h=e[r];h&&(u||(x=h7(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!x&&(x=e[0]),p=d7(h,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!p===0&&(p=e[e.length-1]))),e.forEach(v=>{A0(v,v===h,t.slideActiveClass),A0(v,v===x,t.slideNextClass),A0(v,v===p,t.slidePrevClass)}),s.emitSlidesClasses()}const Nf=(s,e)=>{if(!s||s.destroyed||!s.params)return;const t=()=>s.isElement?"swiper-slide":`.${s.params.slideClass}`,n=e.closest(t());if(n){let r=n.querySelector(`.${s.params.lazyPreloaderClass}`);!r&&s.isElement&&(n.shadowRoot?r=n.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(r=n.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},I0=(s,e)=>{if(!s.slides[e])return;const t=s.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Ix=s=>{if(!s||s.destroyed||!s.params)return;let e=s.params.lazyPreloadPrevNext;const t=s.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(s.params.slidesPerView),r=s.activeIndex;if(s.params.grid&&s.params.grid.rows>1){const u=r,f=[u-e];f.push(...Array.from({length:e}).map((h,p)=>u+n+p)),s.slides.forEach((h,p)=>{f.includes(h.column)&&I0(s,p)});return}const o=r+n-1;if(s.params.rewind||s.params.loop)for(let u=r-e;u<=o+e;u+=1){const f=(u%t+t)%t;(f<r||f>o)&&I0(s,f)}else for(let u=Math.max(r-e,0);u<=Math.min(o+e,t-1);u+=1)u!==r&&(u>o||u<r)&&I0(s,u)};function S7(s){const{slidesGrid:e,params:t}=s,n=s.rtlTranslate?s.translate:-s.translate;let r;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?n>=e[o]&&n<e[o+1]-(e[o+1]-e[o])/2?r=o:n>=e[o]&&n<e[o+1]&&(r=o+1):n>=e[o]&&(r=o);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function T7(s){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:r,activeIndex:o,realIndex:u,snapIndex:f}=e;let h=s,p;const x=N=>{let w=N-e.virtual.slidesBefore;return w<0&&(w=e.virtual.slides.length+w),w>=e.virtual.slides.length&&(w-=e.virtual.slides.length),w};if(typeof h>"u"&&(h=S7(e)),n.indexOf(t)>=0)p=n.indexOf(t);else{const N=Math.min(r.slidesPerGroupSkip,h);p=N+Math.floor((h-N)/r.slidesPerGroup)}if(p>=n.length&&(p=n.length-1),h===o&&!e.params.loop){p!==f&&(e.snapIndex=p,e.emit("snapIndexChange"));return}if(h===o&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=x(h);return}const v=e.grid&&r.grid&&r.grid.rows>1;let _;if(e.virtual&&r.virtual.enabled&&r.loop)_=x(h);else if(v){const N=e.slides.find(E=>E.column===h);let w=parseInt(N.getAttribute("data-swiper-slide-index"),10);Number.isNaN(w)&&(w=Math.max(e.slides.indexOf(N),0)),_=Math.floor(w/r.grid.rows)}else if(e.slides[h]){const N=e.slides[h].getAttribute("data-swiper-slide-index");N?_=parseInt(N,10):_=h}else _=h;Object.assign(e,{previousSnapIndex:f,snapIndex:p,previousRealIndex:u,realIndex:_,previousIndex:o,activeIndex:h}),e.initialized&&Ix(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(u!==_&&e.emit("realIndexChange"),e.emit("slideChange"))}function C7(s,e){const t=this,n=t.params;let r=s.closest(`.${n.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(s)&&[...e.slice(e.indexOf(s)+1,e.length)].forEach(f=>{!r&&f.matches&&f.matches(`.${n.slideClass}, swiper-slide`)&&(r=f)});let o=!1,u;if(r){for(let f=0;f<t.slides.length;f+=1)if(t.slides[f]===r){o=!0,u=f;break}}if(r&&o)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=u;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var A7={updateSize:v7,updateSlides:b7,updateAutoHeight:_7,updateSlidesOffset:w7,updateSlidesProgress:N7,updateProgress:E7,updateSlidesClasses:j7,updateActiveIndex:T7,updateClickedSlide:C7};function I7(s){s===void 0&&(s=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:r,wrapperEl:o}=e;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let u=l7(o,s);return u+=e.cssOverflowAdjustment(),n&&(u=-u),u||0}function R7(s,e){const t=this,{rtlTranslate:n,params:r,wrapperEl:o,progress:u}=t;let f=0,h=0;const p=0;t.isHorizontal()?f=n?-s:s:h=s,r.roundLengths&&(f=Math.floor(f),h=Math.floor(h)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?f:h,r.cssMode?o[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-f:-h:r.virtualTranslate||(t.isHorizontal()?f-=t.cssOverflowAdjustment():h-=t.cssOverflowAdjustment(),o.style.transform=`translate3d(${f}px, ${h}px, ${p}px)`);let x;const v=t.maxTranslate()-t.minTranslate();v===0?x=0:x=(s-t.minTranslate())/v,x!==u&&t.updateProgress(s),t.emit("setTranslate",t.translate,e)}function k7(){return-this.snapGrid[0]}function D7(){return-this.snapGrid[this.snapGrid.length-1]}function P7(s,e,t,n,r){s===void 0&&(s=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const o=this,{params:u,wrapperEl:f}=o;if(o.animating&&u.preventInteractionOnTransition)return!1;const h=o.minTranslate(),p=o.maxTranslate();let x;if(n&&s>h?x=h:n&&s<p?x=p:x=s,o.updateProgress(x),u.cssMode){const v=o.isHorizontal();if(e===0)f[v?"scrollLeft":"scrollTop"]=-x;else{if(!o.support.smoothScroll)return hC({swiper:o,targetPosition:-x,side:v?"left":"top"}),!0;f.scrollTo({[v?"left":"top"]:-x,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(x),t&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(x),t&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(_){!o||o.destroyed||_.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,t&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var O7={getTranslate:I7,setTranslate:R7,minTranslate:k7,maxTranslate:D7,translateTo:P7};function M7(s,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${s}ms`,t.wrapperEl.style.transitionDelay=s===0?"0ms":""),t.emit("setTransition",s,e)}function xC(s){let{swiper:e,runCallbacks:t,direction:n,step:r}=s;const{activeIndex:o,previousIndex:u}=e;let f=n;if(f||(o>u?f="next":o<u?f="prev":f="reset"),e.emit(`transition${r}`),t&&o!==u){if(f==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),f==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function L7(s,e){s===void 0&&(s=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),xC({swiper:t,runCallbacks:s,direction:e,step:"Start"}))}function V7(s,e){s===void 0&&(s=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),xC({swiper:t,runCallbacks:s,direction:e,step:"End"}))}var z7={setTransition:M7,transitionStart:L7,transitionEnd:V7};function U7(s,e,t,n,r){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));const o=this;let u=s;u<0&&(u=0);const{params:f,snapGrid:h,slidesGrid:p,previousIndex:x,activeIndex:v,rtlTranslate:_,wrapperEl:N,enabled:w}=o;if(!w&&!n&&!r||o.destroyed||o.animating&&f.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=o.params.speed);const E=Math.min(o.params.slidesPerGroupSkip,u);let R=E+Math.floor((u-E)/o.params.slidesPerGroup);R>=h.length&&(R=h.length-1);const T=-h[R];if(f.normalizeSlideIndex)for(let M=0;M<p.length;M+=1){const A=-Math.floor(T*100),I=Math.floor(p[M]*100),O=Math.floor(p[M+1]*100);typeof p[M+1]<"u"?A>=I&&A<O-(O-I)/2?u=M:A>=I&&A<O&&(u=M+1):A>=I&&(u=M)}if(o.initialized&&u!==v&&(!o.allowSlideNext&&(_?T>o.translate&&T>o.minTranslate():T<o.translate&&T<o.minTranslate())||!o.allowSlidePrev&&T>o.translate&&T>o.maxTranslate()&&(v||0)!==u))return!1;u!==(x||0)&&t&&o.emit("beforeSlideChangeStart"),o.updateProgress(T);let k;u>v?k="next":u<v?k="prev":k="reset";const P=o.virtual&&o.params.virtual.enabled;if(!(P&&r)&&(_&&-T===o.translate||!_&&T===o.translate))return o.updateActiveIndex(u),f.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),f.effect!=="slide"&&o.setTranslate(T),k!=="reset"&&(o.transitionStart(t,k),o.transitionEnd(t,k)),!1;if(f.cssMode){const M=o.isHorizontal(),A=_?T:-T;if(e===0)P&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),P&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{N[M?"scrollLeft":"scrollTop"]=A})):N[M?"scrollLeft":"scrollTop"]=A,P&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return hC({swiper:o,targetPosition:A,side:M?"left":"top"}),!0;N.scrollTo({[M?"left":"top"]:A,behavior:"smooth"})}return!0}const G=gC().isSafari;return P&&!r&&G&&o.isElement&&o.virtual.update(!1,!1,u),o.setTransition(e),o.setTranslate(T),o.updateActiveIndex(u),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,n),o.transitionStart(t,k),e===0?o.transitionEnd(t,k):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(A){!o||o.destroyed||A.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(t,k))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function B7(s,e,t,n){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const o=r.grid&&r.params.grid&&r.params.grid.rows>1;let u=s;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)u=u+r.virtual.slidesBefore;else{let f;if(o){const _=u*r.params.grid.rows;f=r.slides.find(N=>N.getAttribute("data-swiper-slide-index")*1===_).column}else f=r.getSlideIndexByData(u);const h=o?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:p}=r.params;let x=r.params.slidesPerView;x==="auto"?x=r.slidesPerViewDynamic():(x=Math.ceil(parseFloat(r.params.slidesPerView,10)),p&&x%2===0&&(x=x+1));let v=h-f<x;if(p&&(v=v||f<Math.ceil(x/2)),n&&p&&r.params.slidesPerView!=="auto"&&!o&&(v=!1),v){const _=p?f<r.activeIndex?"prev":"next":f-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:_,slideTo:!0,activeSlideIndex:_==="next"?f+1:f-h+1,slideRealIndex:_==="next"?r.realIndex:void 0})}if(o){const _=u*r.params.grid.rows;u=r.slides.find(N=>N.getAttribute("data-swiper-slide-index")*1===_).column}else u=r.getSlideIndexByData(u)}return requestAnimationFrame(()=>{r.slideTo(u,e,t,n)}),r}function F7(s,e,t){e===void 0&&(e=!0);const n=this,{enabled:r,params:o,animating:u}=n;if(!r||n.destroyed)return n;typeof s>"u"&&(s=n.params.speed);let f=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(f=Math.max(n.slidesPerViewDynamic("current",!0),1));const h=n.activeIndex<o.slidesPerGroupSkip?1:f,p=n.virtual&&o.virtual.enabled;if(o.loop){if(u&&!p&&o.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+h,s,e,t)}),!0}return o.rewind&&n.isEnd?n.slideTo(0,s,e,t):n.slideTo(n.activeIndex+h,s,e,t)}function q7(s,e,t){e===void 0&&(e=!0);const n=this,{params:r,snapGrid:o,slidesGrid:u,rtlTranslate:f,enabled:h,animating:p}=n;if(!h||n.destroyed)return n;typeof s>"u"&&(s=n.params.speed);const x=n.virtual&&r.virtual.enabled;if(r.loop){if(p&&!x&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const v=f?n.translate:-n.translate;function _(k){return k<0?-Math.floor(Math.abs(k)):Math.floor(k)}const N=_(v),w=o.map(k=>_(k)),E=r.freeMode&&r.freeMode.enabled;let R=o[w.indexOf(N)-1];if(typeof R>"u"&&(r.cssMode||E)){let k;o.forEach((P,H)=>{N>=P&&(k=H)}),typeof k<"u"&&(R=E?o[k]:o[k>0?k-1:k])}let T=0;if(typeof R<"u"&&(T=u.indexOf(R),T<0&&(T=n.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(T=T-n.slidesPerViewDynamic("previous",!0)+1,T=Math.max(T,0))),r.rewind&&n.isBeginning){const k=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(k,s,e,t)}else if(r.loop&&n.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(T,s,e,t)}),!0;return n.slideTo(T,s,e,t)}function H7(s,e,t){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof s>"u"&&(s=n.params.speed),n.slideTo(n.activeIndex,s,e,t)}function G7(s,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const r=this;if(r.destroyed)return;typeof s>"u"&&(s=r.params.speed);let o=r.activeIndex;const u=Math.min(r.params.slidesPerGroupSkip,o),f=u+Math.floor((o-u)/r.params.slidesPerGroup),h=r.rtlTranslate?r.translate:-r.translate;if(h>=r.snapGrid[f]){const p=r.snapGrid[f],x=r.snapGrid[f+1];h-p>(x-p)*n&&(o+=r.params.slidesPerGroup)}else{const p=r.snapGrid[f-1],x=r.snapGrid[f];h-p<=(x-p)*n&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,s,e,t)}function $7(){const s=this;if(s.destroyed)return;const{params:e,slidesEl:t}=s,n=e.slidesPerView==="auto"?s.slidesPerViewDynamic():e.slidesPerView;let r=s.clickedIndex,o;const u=s.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(s.animating)return;o=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<s.loopedSlides-n/2||r>s.slides.length-s.loopedSlides+n/2?(s.loopFix(),r=s.getSlideIndex(wi(t,`${u}[data-swiper-slide-index="${o}"]`)[0]),Cx(()=>{s.slideTo(r)})):s.slideTo(r):r>s.slides.length-n?(s.loopFix(),r=s.getSlideIndex(wi(t,`${u}[data-swiper-slide-index="${o}"]`)[0]),Cx(()=>{s.slideTo(r)})):s.slideTo(r)}else s.slideTo(r)}var W7={slideTo:U7,slideToLoop:B7,slideNext:F7,slidePrev:q7,slideReset:H7,slideToClosest:G7,slideToClickedSlide:$7};function K7(s,e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const o=()=>{wi(r,`.${n.slideClass}, swiper-slide`).forEach((_,N)=>{_.setAttribute("data-swiper-slide-index",N)})},u=t.grid&&n.grid&&n.grid.rows>1,f=n.slidesPerGroup*(u?n.grid.rows:1),h=t.slides.length%f!==0,p=u&&t.slides.length%n.grid.rows!==0,x=v=>{for(let _=0;_<v;_+=1){const N=t.isElement?lm("swiper-slide",[n.slideBlankClass]):lm("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(N)}};if(h){if(n.loopAddBlankSlides){const v=f-t.slides.length%f;x(v),t.recalcSlides(),t.updateSlides()}else am("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(p){if(n.loopAddBlankSlides){const v=n.grid.rows-t.slides.length%n.grid.rows;x(v),t.recalcSlides(),t.updateSlides()}else am("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();t.loopFix({slideRealIndex:s,direction:n.centeredSlides?void 0:"next",initial:e})}function Y7(s){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:r,activeSlideIndex:o,initial:u,byController:f,byMousewheel:h}=s===void 0?{}:s;const p=this;if(!p.params.loop)return;p.emit("beforeLoopFix");const{slides:x,allowSlidePrev:v,allowSlideNext:_,slidesEl:N,params:w}=p,{centeredSlides:E,initialSlide:R}=w;if(p.allowSlidePrev=!0,p.allowSlideNext=!0,p.virtual&&w.virtual.enabled){t&&(!w.centeredSlides&&p.snapIndex===0?p.slideTo(p.virtual.slides.length,0,!1,!0):w.centeredSlides&&p.snapIndex<w.slidesPerView?p.slideTo(p.virtual.slides.length+p.snapIndex,0,!1,!0):p.snapIndex===p.snapGrid.length-1&&p.slideTo(p.virtual.slidesBefore,0,!1,!0)),p.allowSlidePrev=v,p.allowSlideNext=_,p.emit("loopFix");return}let T=w.slidesPerView;T==="auto"?T=p.slidesPerViewDynamic():(T=Math.ceil(parseFloat(w.slidesPerView,10)),E&&T%2===0&&(T=T+1));const k=w.slidesPerGroupAuto?T:w.slidesPerGroup;let P=k;P%k!==0&&(P+=k-P%k),P+=w.loopAdditionalSlides,p.loopedSlides=P;const H=p.grid&&w.grid&&w.grid.rows>1;x.length<T+P||p.params.effect==="cards"&&x.length<T+P*2?am("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):H&&w.grid.fill==="row"&&am("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const B=[],G=[],M=H?Math.ceil(x.length/w.grid.rows):x.length,A=u&&M-R<T&&!E;let I=A?R:p.activeIndex;typeof o>"u"?o=p.getSlideIndex(x.find(K=>K.classList.contains(w.slideActiveClass))):I=o;const O=n==="next"||!n,L=n==="prev"||!n;let z=0,V=0;const _e=(H?x[o].column:o)+(E&&typeof r>"u"?-T/2+.5:0);if(_e<P){z=Math.max(P-_e,k);for(let K=0;K<P-_e;K+=1){const oe=K-Math.floor(K/M)*M;if(H){const le=M-oe-1;for(let we=x.length-1;we>=0;we-=1)x[we].column===le&&B.push(we)}else B.push(M-oe-1)}}else if(_e+T>M-P){V=Math.max(_e-(M-P*2),k),A&&(V=Math.max(V,T-M+R+1));for(let K=0;K<V;K+=1){const oe=K-Math.floor(K/M)*M;H?x.forEach((le,we)=>{le.column===oe&&G.push(we)}):G.push(oe)}}if(p.__preventObserver__=!0,requestAnimationFrame(()=>{p.__preventObserver__=!1}),p.params.effect==="cards"&&x.length<T+P*2&&(G.includes(o)&&G.splice(G.indexOf(o),1),B.includes(o)&&B.splice(B.indexOf(o),1)),L&&B.forEach(K=>{x[K].swiperLoopMoveDOM=!0,N.prepend(x[K]),x[K].swiperLoopMoveDOM=!1}),O&&G.forEach(K=>{x[K].swiperLoopMoveDOM=!0,N.append(x[K]),x[K].swiperLoopMoveDOM=!1}),p.recalcSlides(),w.slidesPerView==="auto"?p.updateSlides():H&&(B.length>0&&L||G.length>0&&O)&&p.slides.forEach((K,oe)=>{p.grid.updateSlide(oe,K,p.slides)}),w.watchSlidesProgress&&p.updateSlidesOffset(),t){if(B.length>0&&L){if(typeof e>"u"){const K=p.slidesGrid[I],le=p.slidesGrid[I+z]-K;h?p.setTranslate(p.translate-le):(p.slideTo(I+Math.ceil(z),0,!1,!0),r&&(p.touchEventsData.startTranslate=p.touchEventsData.startTranslate-le,p.touchEventsData.currentTranslate=p.touchEventsData.currentTranslate-le))}else if(r){const K=H?B.length/w.grid.rows:B.length;p.slideTo(p.activeIndex+K,0,!1,!0),p.touchEventsData.currentTranslate=p.translate}}else if(G.length>0&&O)if(typeof e>"u"){const K=p.slidesGrid[I],le=p.slidesGrid[I-V]-K;h?p.setTranslate(p.translate-le):(p.slideTo(I-V,0,!1,!0),r&&(p.touchEventsData.startTranslate=p.touchEventsData.startTranslate-le,p.touchEventsData.currentTranslate=p.touchEventsData.currentTranslate-le))}else{const K=H?G.length/w.grid.rows:G.length;p.slideTo(p.activeIndex-K,0,!1,!0)}}if(p.allowSlidePrev=v,p.allowSlideNext=_,p.controller&&p.controller.control&&!f){const K={slideRealIndex:e,direction:n,setTranslate:r,activeSlideIndex:o,byController:!0};Array.isArray(p.controller.control)?p.controller.control.forEach(oe=>{!oe.destroyed&&oe.params.loop&&oe.loopFix({...K,slideTo:oe.params.slidesPerView===w.slidesPerView?t:!1})}):p.controller.control instanceof p.constructor&&p.controller.control.params.loop&&p.controller.control.loopFix({...K,slideTo:p.controller.control.params.slidesPerView===w.slidesPerView?t:!1})}p.emit("loopFix")}function Q7(){const s=this,{params:e,slidesEl:t}=s;if(!e.loop||!t||s.virtual&&s.params.virtual.enabled)return;s.recalcSlides();const n=[];s.slides.forEach(r=>{const o=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;n[o]=r}),s.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),n.forEach(r=>{t.append(r)}),s.recalcSlides(),s.slideTo(s.realIndex,0)}var X7={loopCreate:K7,loopFix:Y7,loopDestroy:Q7};function Z7(s){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=s?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function J7(){const s=this;s.params.watchOverflow&&s.isLocked||s.params.cssMode||(s.isElement&&(s.__preventObserver__=!0),s[s.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",s.isElement&&requestAnimationFrame(()=>{s.__preventObserver__=!1}))}var ez={setGrabCursor:Z7,unsetGrabCursor:J7};function tz(s,e){e===void 0&&(e=this);function t(n){if(!n||n===Si()||n===Hs())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(s);return!r&&!n.getRootNode?null:r||t(n.getRootNode().host)}return t(e)}function bE(s,e,t){const n=Hs(),{params:r}=s,o=r.edgeSwipeDetection,u=r.edgeSwipeThreshold;return o&&(t<=u||t>=n.innerWidth-u)?o==="prevent"?(e.preventDefault(),!0):!1:!0}function sz(s){const e=this,t=Si();let n=s;n.originalEvent&&(n=n.originalEvent);const r=e.touchEventsData;if(n.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==n.pointerId)return;r.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(r.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){bE(e,n,n.targetTouches[0].pageX);return}const{params:o,touches:u,enabled:f}=e;if(!f||!o.simulateTouch&&n.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let h=n.target;if(o.touchEventsTarget==="wrapper"&&!u7(h,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||r.isTouched&&r.isMoved)return;const p=!!o.noSwipingClass&&o.noSwipingClass!=="",x=n.composedPath?n.composedPath():n.path;p&&n.target&&n.target.shadowRoot&&x&&(h=x[0]);const v=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,_=!!(n.target&&n.target.shadowRoot);if(o.noSwiping&&(_?tz(v,h):h.closest(v))){e.allowClick=!0;return}if(o.swipeHandler&&!h.closest(o.swipeHandler))return;u.currentX=n.pageX,u.currentY=n.pageY;const N=u.currentX,w=u.currentY;if(!bE(e,n,N))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),u.startX=N,u.startY=w,r.touchStartTime=rm(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let E=!0;h.matches(r.focusableElements)&&(E=!1,h.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==h&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!h.matches(r.focusableElements))&&t.activeElement.blur();const R=E&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||R)&&!h.isContentEditable&&n.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function nz(s){const e=Si(),t=this,n=t.touchEventsData,{params:r,touches:o,rtlTranslate:u,enabled:f}=t;if(!f||!r.simulateTouch&&s.pointerType==="mouse")return;let h=s;if(h.originalEvent&&(h=h.originalEvent),h.type==="pointermove"&&(n.touchId!==null||h.pointerId!==n.pointerId))return;let p;if(h.type==="touchmove"){if(p=[...h.changedTouches].find(B=>B.identifier===n.touchId),!p||p.identifier!==n.touchId)return}else p=h;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",h);return}const x=p.pageX,v=p.pageY;if(h.preventedByNestedSwiper){o.startX=x,o.startY=v;return}if(!t.allowTouchMove){h.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(o,{startX:x,startY:v,currentX:x,currentY:v}),n.touchStartTime=rm());return}if(r.touchReleaseOnEdges&&!r.loop)if(t.isVertical()){if(v<o.startY&&t.translate<=t.maxTranslate()||v>o.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else{if(u&&(x>o.startX&&-t.translate<=t.maxTranslate()||x<o.startX&&-t.translate>=t.minTranslate()))return;if(!u&&(x<o.startX&&t.translate<=t.maxTranslate()||x>o.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==h.target&&h.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&h.target===e.activeElement&&h.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",h),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=x,o.currentY=v;const _=o.currentX-o.startX,N=o.currentY-o.startY;if(t.params.threshold&&Math.sqrt(_**2+N**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let B;t.isHorizontal()&&o.currentY===o.startY||t.isVertical()&&o.currentX===o.startX?n.isScrolling=!1:_*_+N*N>=25&&(B=Math.atan2(Math.abs(N),Math.abs(_))*180/Math.PI,n.isScrolling=t.isHorizontal()?B>r.touchAngle:90-B>r.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",h),typeof n.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(n.startMoving=!0),n.isScrolling||h.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!r.cssMode&&h.cancelable&&h.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&h.stopPropagation();let w=t.isHorizontal()?_:N,E=t.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(w=Math.abs(w)*(u?1:-1),E=Math.abs(E)*(u?1:-1)),o.diff=w,w*=r.touchRatio,u&&(w=-w,E=-E);const R=t.touchesDirection;t.swipeDirection=w>0?"prev":"next",t.touchesDirection=E>0?"prev":"next";const T=t.params.loop&&!r.cssMode,k=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(T&&k&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const B=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(B)}n.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",h)}if(new Date().getTime(),r._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&R!==t.touchesDirection&&T&&k&&Math.abs(w)>=1){Object.assign(o,{startX:x,startY:v,currentX:x,currentY:v,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",h),n.isMoved=!0,n.currentTranslate=w+n.startTranslate;let P=!0,H=r.resistanceRatio;if(r.touchReleaseOnEdges&&(H=0),w>0?(T&&k&&n.allowThresholdMove&&n.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(P=!1,r.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+w)**H))):w<0&&(T&&k&&n.allowThresholdMove&&n.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(P=!1,r.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-w)**H))),P&&(h.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),r.threshold>0)if(Math.abs(w)>r.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,n.currentTranslate=n.startTranslate,o.diff=t.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{n.currentTranslate=n.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function iz(s){const e=this,t=e.touchEventsData;let n=s;n.originalEvent&&(n=n.originalEvent);let r;if(n.type==="touchend"||n.type==="touchcancel"){if(r=[...n.changedTouches].find(B=>B.identifier===t.touchId),!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;r=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:u,touches:f,rtlTranslate:h,slidesGrid:p,enabled:x}=e;if(!x||!u.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&u.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}u.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const v=rm(),_=v-t.touchStartTime;if(e.allowClick){const B=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(B&&B[0]||n.target,B),e.emit("tap click",n),_<300&&v-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=rm(),Cx(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||f.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let N;if(u.followFinger?N=h?e.translate:-e.translate:N=-t.currentTranslate,u.cssMode)return;if(u.freeMode&&u.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:N});return}const w=N>=-e.maxTranslate()&&!e.params.loop;let E=0,R=e.slidesSizesGrid[0];for(let B=0;B<p.length;B+=B<u.slidesPerGroupSkip?1:u.slidesPerGroup){const G=B<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;typeof p[B+G]<"u"?(w||N>=p[B]&&N<p[B+G])&&(E=B,R=p[B+G]-p[B]):(w||N>=p[B])&&(E=B,R=p[p.length-1]-p[p.length-2])}let T=null,k=null;u.rewind&&(e.isBeginning?k=u.virtual&&u.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(T=0));const P=(N-p[E])/R,H=E<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;if(_>u.longSwipesMs){if(!u.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(P>=u.longSwipesRatio?e.slideTo(u.rewind&&e.isEnd?T:E+H):e.slideTo(E)),e.swipeDirection==="prev"&&(P>1-u.longSwipesRatio?e.slideTo(E+H):k!==null&&P<0&&Math.abs(P)>u.longSwipesRatio?e.slideTo(k):e.slideTo(E))}else{if(!u.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(E+H):e.slideTo(E):(e.swipeDirection==="next"&&e.slideTo(T!==null?T:E+H),e.swipeDirection==="prev"&&e.slideTo(k!==null?k:E))}}function _E(){const s=this,{params:e,el:t}=s;if(t&&t.offsetWidth===0)return;e.breakpoints&&s.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:r,snapGrid:o}=s,u=s.virtual&&s.params.virtual.enabled;s.allowSlideNext=!0,s.allowSlidePrev=!0,s.updateSize(),s.updateSlides(),s.updateSlidesClasses();const f=u&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&s.isEnd&&!s.isBeginning&&!s.params.centeredSlides&&!f?s.slideTo(s.slides.length-1,0,!1,!0):s.params.loop&&!u?s.slideToLoop(s.realIndex,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0),s.autoplay&&s.autoplay.running&&s.autoplay.paused&&(clearTimeout(s.autoplay.resizeTimeout),s.autoplay.resizeTimeout=setTimeout(()=>{s.autoplay&&s.autoplay.running&&s.autoplay.paused&&s.autoplay.resume()},500)),s.allowSlidePrev=r,s.allowSlideNext=n,s.params.watchOverflow&&o!==s.snapGrid&&s.checkOverflow()}function rz(s){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&s.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(s.stopPropagation(),s.stopImmediatePropagation())))}function az(){const s=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=s;if(!n)return;s.previousTranslate=s.translate,s.isHorizontal()?s.translate=-e.scrollLeft:s.translate=-e.scrollTop,s.translate===0&&(s.translate=0),s.updateActiveIndex(),s.updateSlidesClasses();let r;const o=s.maxTranslate()-s.minTranslate();o===0?r=0:r=(s.translate-s.minTranslate())/o,r!==s.progress&&s.updateProgress(t?-s.translate:s.translate),s.emit("setTranslate",s.translate,!1)}function lz(s){const e=this;Nf(e,s.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function oz(){const s=this;s.documentTouchHandlerProceeded||(s.documentTouchHandlerProceeded=!0,s.params.touchReleaseOnEdges&&(s.el.style.touchAction="auto"))}const yC=(s,e)=>{const t=Si(),{params:n,el:r,wrapperEl:o,device:u}=s,f=!!n.nested,h=e==="on"?"addEventListener":"removeEventListener",p=e;!r||typeof r=="string"||(t[h]("touchstart",s.onDocumentTouchStart,{passive:!1,capture:f}),r[h]("touchstart",s.onTouchStart,{passive:!1}),r[h]("pointerdown",s.onTouchStart,{passive:!1}),t[h]("touchmove",s.onTouchMove,{passive:!1,capture:f}),t[h]("pointermove",s.onTouchMove,{passive:!1,capture:f}),t[h]("touchend",s.onTouchEnd,{passive:!0}),t[h]("pointerup",s.onTouchEnd,{passive:!0}),t[h]("pointercancel",s.onTouchEnd,{passive:!0}),t[h]("touchcancel",s.onTouchEnd,{passive:!0}),t[h]("pointerout",s.onTouchEnd,{passive:!0}),t[h]("pointerleave",s.onTouchEnd,{passive:!0}),t[h]("contextmenu",s.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&r[h]("click",s.onClick,!0),n.cssMode&&o[h]("scroll",s.onScroll),n.updateOnWindowResize?s[p](u.ios||u.android?"resize orientationchange observerUpdate":"resize observerUpdate",_E,!0):s[p]("observerUpdate",_E,!0),r[h]("load",s.onLoad,{capture:!0}))};function cz(){const s=this,{params:e}=s;s.onTouchStart=sz.bind(s),s.onTouchMove=nz.bind(s),s.onTouchEnd=iz.bind(s),s.onDocumentTouchStart=oz.bind(s),e.cssMode&&(s.onScroll=az.bind(s)),s.onClick=rz.bind(s),s.onLoad=lz.bind(s),yC(s,"on")}function uz(){yC(this,"off")}var dz={attachEvents:cz,detachEvents:uz};const wE=(s,e)=>s.grid&&e.grid&&e.grid.rows>1;function hz(){const s=this,{realIndex:e,initialized:t,params:n,el:r}=s,o=n.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const u=Si(),f=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",h=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?s.el:u.querySelector(n.breakpointsBase),p=s.getBreakpoint(o,f,h);if(!p||s.currentBreakpoint===p)return;const v=(p in o?o[p]:void 0)||s.originalParams,_=wE(s,n),N=wE(s,v),w=s.params.grabCursor,E=v.grabCursor,R=n.enabled;_&&!N?(r.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),s.emitContainerClasses()):!_&&N&&(r.classList.add(`${n.containerModifierClass}grid`),(v.grid.fill&&v.grid.fill==="column"||!v.grid.fill&&n.grid.fill==="column")&&r.classList.add(`${n.containerModifierClass}grid-column`),s.emitContainerClasses()),w&&!E?s.unsetGrabCursor():!w&&E&&s.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(G=>{if(typeof v[G]>"u")return;const M=n[G]&&n[G].enabled,A=v[G]&&v[G].enabled;M&&!A&&s[G].disable(),!M&&A&&s[G].enable()});const T=v.direction&&v.direction!==n.direction,k=n.loop&&(v.slidesPerView!==n.slidesPerView||T),P=n.loop;T&&t&&s.changeDirection(),pn(s.params,v);const H=s.params.enabled,B=s.params.loop;Object.assign(s,{allowTouchMove:s.params.allowTouchMove,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev}),R&&!H?s.disable():!R&&H&&s.enable(),s.currentBreakpoint=p,s.emit("_beforeBreakpoint",v),t&&(k?(s.loopDestroy(),s.loopCreate(e),s.updateSlides()):!P&&B?(s.loopCreate(e),s.updateSlides()):P&&!B&&s.loopDestroy()),s.emit("breakpoint",v)}function fz(s,e,t){if(e===void 0&&(e="window"),!s||e==="container"&&!t)return;let n=!1;const r=Hs(),o=e==="window"?r.innerHeight:t.clientHeight,u=Object.keys(s).map(f=>{if(typeof f=="string"&&f.indexOf("@")===0){const h=parseFloat(f.substr(1));return{value:o*h,point:f}}return{value:f,point:f}});u.sort((f,h)=>parseInt(f.value,10)-parseInt(h.value,10));for(let f=0;f<u.length;f+=1){const{point:h,value:p}=u[f];e==="window"?r.matchMedia(`(min-width: ${p}px)`).matches&&(n=h):p<=t.clientWidth&&(n=h)}return n||"max"}var mz={setBreakpoint:hz,getBreakpoint:fz};function pz(s,e){const t=[];return s.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(r=>{n[r]&&t.push(e+r)}):typeof n=="string"&&t.push(e+n)}),t}function gz(){const s=this,{classNames:e,params:t,rtl:n,el:r,device:o}=s,u=pz(["initialized",t.direction,{"free-mode":s.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...u),r.classList.add(...e),s.emitContainerClasses()}function xz(){const s=this,{el:e,classNames:t}=s;!e||typeof e=="string"||(e.classList.remove(...t),s.emitContainerClasses())}var yz={addClasses:gz,removeClasses:xz};function vz(){const s=this,{isLocked:e,params:t}=s,{slidesOffsetBefore:n}=t;if(n){const r=s.slides.length-1,o=s.slidesGrid[r]+s.slidesSizesGrid[r]+n*2;s.isLocked=s.size>o}else s.isLocked=s.snapGrid.length===1;t.allowSlideNext===!0&&(s.allowSlideNext=!s.isLocked),t.allowSlidePrev===!0&&(s.allowSlidePrev=!s.isLocked),e&&e!==s.isLocked&&(s.isEnd=!1),e!==s.isLocked&&s.emit(s.isLocked?"lock":"unlock")}var bz={checkOverflow:vz},Rx={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function _z(s,e){return function(n){n===void 0&&(n={});const r=Object.keys(n)[0],o=n[r];if(typeof o!="object"||o===null){pn(e,n);return}if(s[r]===!0&&(s[r]={enabled:!0}),r==="navigation"&&s[r]&&s[r].enabled&&!s[r].prevEl&&!s[r].nextEl&&(s[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&s[r]&&s[r].enabled&&!s[r].el&&(s[r].auto=!0),!(r in s&&"enabled"in o)){pn(e,n);return}typeof s[r]=="object"&&!("enabled"in s[r])&&(s[r].enabled=!0),s[r]||(s[r]={enabled:!1}),pn(e,n)}}const R0={eventsEmitter:y7,update:A7,translate:O7,transition:z7,slide:W7,loop:X7,grabCursor:ez,events:dz,breakpoints:mz,checkOverflow:bz,classes:yz},k0={};let xv=class tr{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=pn({},t),e&&!t.el&&(t.el=e);const u=Si();if(t.el&&typeof t.el=="string"&&u.querySelectorAll(t.el).length>1){const x=[];return u.querySelectorAll(t.el).forEach(v=>{const _=pn({},t,{el:v});x.push(new tr(_))}),x}const f=this;f.__swiper__=!0,f.support=mC(),f.device=pC({userAgent:t.userAgent}),f.browser=gC(),f.eventsListeners={},f.eventsAnyListeners=[],f.modules=[...f.__modules__],t.modules&&Array.isArray(t.modules)&&f.modules.push(...t.modules);const h={};f.modules.forEach(x=>{x({params:t,swiper:f,extendParams:_z(t,h),on:f.on.bind(f),once:f.once.bind(f),off:f.off.bind(f),emit:f.emit.bind(f)})});const p=pn({},Rx,h);return f.params=pn({},p,k0,t),f.originalParams=pn({},f.params),f.passedParams=pn({},t),f.params&&f.params.on&&Object.keys(f.params.on).forEach(x=>{f.on(x,f.params.on[x])}),f.params&&f.params.onAny&&f.onAny(f.params.onAny),Object.assign(f,{enabled:f.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return f.params.direction==="horizontal"},isVertical(){return f.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:f.params.allowSlideNext,allowSlidePrev:f.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:f.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:f.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),f.emit("_swiper"),f.params.init&&f.init(),f}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=wi(t,`.${n.slideClass}, swiper-slide`),o=om(r[0]);return om(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=wi(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),u=(n.maxTranslate()-r)*e+r;n.translateTo(u,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:r,slides:o,slidesGrid:u,slidesSizesGrid:f,size:h,activeIndex:p}=n;let x=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let v=o[p]?Math.ceil(o[p].swiperSlideSize):0,_;for(let N=p+1;N<o.length;N+=1)o[N]&&!_&&(v+=Math.ceil(o[N].swiperSlideSize),x+=1,v>h&&(_=!0));for(let N=p-1;N>=0;N-=1)o[N]&&!_&&(v+=o[N].swiperSlideSize,x+=1,v>h&&(_=!0))}else if(e==="current")for(let v=p+1;v<o.length;v+=1)(t?u[v]+f[v]-u[p]<h:u[v]-u[p]<h)&&(x+=1);else for(let v=p-1;v>=0;v-=1)u[p]-u[v]<h&&(x+=1);return x}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(u=>{u.complete&&Nf(e,u)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const u=e.rtlTranslate?e.translate*-1:e.translate,f=Math.min(Math.max(u,e.maxTranslate()),e.minTranslate());e.setTranslate(f),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const u=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(u.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,r=n.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${r}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let u=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(r()):wi(n,r())[0];return!u&&t.params.createElements&&(u=lm("div",t.params.wrapperClass),n.append(u),wi(n,`.${t.params.slideClass}`).forEach(f=>{u.append(f)})),Object.assign(t,{el:n,wrapperEl:u,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:u,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||ra(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||ra(n,"direction")==="rtl"),wrongRTL:ra(u,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(o=>{o.complete?Nf(t,o):o.addEventListener("load",u=>{Nf(t,u.target)})}),Ix(t),t.initialized=!0,Ix(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:r,el:o,wrapperEl:u,slides:f}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),u&&u.removeAttribute("style"),f&&f.length&&f.forEach(h=>{h.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),h.removeAttribute("style"),h.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(h=>{n.off(h)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),r7(n)),n.destroyed=!0),null}static extendDefaults(e){pn(k0,e)}static get extendedDefaults(){return k0}static get defaults(){return Rx}static installModule(e){tr.prototype.__modules__||(tr.prototype.__modules__=[]);const t=tr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>tr.installModule(t)),tr):(tr.installModule(e),tr)}};Object.keys(R0).forEach(s=>{Object.keys(R0[s]).forEach(e=>{xv.prototype[e]=R0[s][e]})});xv.use([g7,x7]);const vC=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function _l(s){return typeof s=="object"&&s!==null&&s.constructor&&Object.prototype.toString.call(s).slice(8,-1)==="Object"&&!s.__swiper__}function Mo(s,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof s[n]>"u"?s[n]=e[n]:_l(e[n])&&_l(s[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?s[n]=e[n]:Mo(s[n],e[n]):s[n]=e[n]})}function bC(s){return s===void 0&&(s={}),s.navigation&&typeof s.navigation.nextEl>"u"&&typeof s.navigation.prevEl>"u"}function _C(s){return s===void 0&&(s={}),s.pagination&&typeof s.pagination.el>"u"}function wC(s){return s===void 0&&(s={}),s.scrollbar&&typeof s.scrollbar.el>"u"}function NC(s){s===void 0&&(s="");const e=s.split(" ").map(n=>n.trim()).filter(n=>!!n),t=[];return e.forEach(n=>{t.indexOf(n)<0&&t.push(n)}),t.join(" ")}function wz(s){return s===void 0&&(s=""),s?s.includes("swiper-wrapper")?s:`swiper-wrapper ${s}`:"swiper-wrapper"}function Nz(s){let{swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:o,prevEl:u,scrollbarEl:f,paginationEl:h}=s;const p=r.filter(I=>I!=="children"&&I!=="direction"&&I!=="wrapperClass"),{params:x,pagination:v,navigation:_,scrollbar:N,virtual:w,thumbs:E}=e;let R,T,k,P,H,B,G,M;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&x.thumbs&&(!x.thumbs.swiper||x.thumbs.swiper.destroyed)&&(R=!0),r.includes("controller")&&n.controller&&n.controller.control&&x.controller&&!x.controller.control&&(T=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||h)&&(x.pagination||x.pagination===!1)&&v&&!v.el&&(k=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||f)&&(x.scrollbar||x.scrollbar===!1)&&N&&!N.el&&(P=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||u)&&(n.navigation.nextEl||o)&&(x.navigation||x.navigation===!1)&&_&&!_.prevEl&&!_.nextEl&&(H=!0);const A=I=>{e[I]&&(e[I].destroy(),I==="navigation"?(e.isElement&&(e[I].prevEl.remove(),e[I].nextEl.remove()),x[I].prevEl=void 0,x[I].nextEl=void 0,e[I].prevEl=void 0,e[I].nextEl=void 0):(e.isElement&&e[I].el.remove(),x[I].el=void 0,e[I].el=void 0))};r.includes("loop")&&e.isElement&&(x.loop&&!n.loop?B=!0:!x.loop&&n.loop?G=!0:M=!0),p.forEach(I=>{if(_l(x[I])&&_l(n[I]))Object.assign(x[I],n[I]),(I==="navigation"||I==="pagination"||I==="scrollbar")&&"enabled"in n[I]&&!n[I].enabled&&A(I);else{const O=n[I];(O===!0||O===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?O===!1&&A(I):x[I]=n[I]}}),p.includes("controller")&&!T&&e.controller&&e.controller.control&&x.controller&&x.controller.control&&(e.controller.control=x.controller.control),r.includes("children")&&t&&w&&x.virtual.enabled?(w.slides=t,w.update(!0)):r.includes("virtual")&&w&&x.virtual.enabled&&(t&&(w.slides=t),w.update(!0)),r.includes("children")&&t&&x.loop&&(M=!0),R&&E.init()&&E.update(!0),T&&(e.controller.control=x.controller.control),k&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-pagination"),h.part.add("pagination"),e.el.appendChild(h)),h&&(x.pagination.el=h),v.init(),v.render(),v.update()),P&&(e.isElement&&(!f||typeof f=="string")&&(f=document.createElement("div"),f.classList.add("swiper-scrollbar"),f.part.add("scrollbar"),e.el.appendChild(f)),f&&(x.scrollbar.el=f),N.init(),N.updateSize(),N.setTranslate()),H&&(e.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=e.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),e.el.appendChild(o)),(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-prev"),u.innerHTML=e.hostEl.constructor.prevButtonSvg,u.part.add("button-prev"),e.el.appendChild(u))),o&&(x.navigation.nextEl=o),u&&(x.navigation.prevEl=u),_.init(),_.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),(B||M)&&e.loopDestroy(),(G||M)&&e.loopCreate(),e.update()}function Ez(s,e){s===void 0&&(s={}),e===void 0&&(e=!0);const t={on:{}},n={},r={};Mo(t,Rx),t._emitClasses=!0,t.init=!1;const o={},u=vC.map(h=>h.replace(/_/,"")),f=Object.assign({},s);return Object.keys(f).forEach(h=>{typeof s[h]>"u"||(u.indexOf(h)>=0?_l(s[h])?(t[h]={},r[h]={},Mo(t[h],s[h]),Mo(r[h],s[h])):(t[h]=s[h],r[h]=s[h]):h.search(/on[A-Z]/)===0&&typeof s[h]=="function"?e?n[`${h[2].toLowerCase()}${h.substr(3)}`]=s[h]:t.on[`${h[2].toLowerCase()}${h.substr(3)}`]=s[h]:o[h]=s[h])}),["navigation","pagination","scrollbar"].forEach(h=>{t[h]===!0&&(t[h]={}),t[h]===!1&&delete t[h]}),{params:t,passedParams:r,rest:o,events:n}}function jz(s,e){let{el:t,nextEl:n,prevEl:r,paginationEl:o,scrollbarEl:u,swiper:f}=s;bC(e)&&n&&r&&(f.params.navigation.nextEl=n,f.originalParams.navigation.nextEl=n,f.params.navigation.prevEl=r,f.originalParams.navigation.prevEl=r),_C(e)&&o&&(f.params.pagination.el=o,f.originalParams.pagination.el=o),wC(e)&&u&&(f.params.scrollbar.el=u,f.originalParams.scrollbar.el=u),f.init(t)}function Sz(s,e,t,n,r){const o=[];if(!e)return o;const u=h=>{o.indexOf(h)<0&&o.push(h)};if(t&&n){const h=n.map(r),p=t.map(r);h.join("")!==p.join("")&&u("children"),n.length!==t.length&&u("children")}return vC.filter(h=>h[0]==="_").map(h=>h.replace(/_/,"")).forEach(h=>{if(h in s&&h in e)if(_l(s[h])&&_l(e[h])){const p=Object.keys(s[h]),x=Object.keys(e[h]);p.length!==x.length?u(h):(p.forEach(v=>{s[h][v]!==e[h][v]&&u(h)}),x.forEach(v=>{s[h][v]!==e[h][v]&&u(h)}))}else s[h]!==e[h]&&u(h)}),o}const Tz=s=>{!s||s.destroyed||!s.params.virtual||s.params.virtual&&!s.params.virtual.enabled||(s.updateSlides(),s.updateProgress(),s.updateSlidesClasses(),s.parallax&&s.params.parallax&&s.params.parallax.enabled&&s.parallax.setTranslate())};function cm(){return cm=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},cm.apply(this,arguments)}function EC(s){return s.type&&s.type.displayName&&s.type.displayName.includes("SwiperSlide")}function jC(s){const e=[];return mt.Children.toArray(s).forEach(t=>{EC(t)?e.push(t):t.props&&t.props.children&&jC(t.props.children).forEach(n=>e.push(n))}),e}function Cz(s){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return mt.Children.toArray(s).forEach(n=>{if(EC(n))e.push(n);else if(n.props&&n.props.slot&&t[n.props.slot])t[n.props.slot].push(n);else if(n.props&&n.props.children){const r=jC(n.props.children);r.length>0?r.forEach(o=>e.push(o)):t["container-end"].push(n)}else t["container-end"].push(n)}),{slides:e,slots:t}}function Az(s,e,t){if(!t)return null;const n=x=>{let v=x;return x<0?v=e.length+x:v>=e.length&&(v=v-e.length),v},r=s.isHorizontal()?{[s.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:o,to:u}=t,f=s.params.loop?-e.length:0,h=s.params.loop?e.length*2:e.length,p=[];for(let x=f;x<h;x+=1)x>=o&&x<=u&&p.push(e[n(x)]);return p.map((x,v)=>mt.cloneElement(x,{swiper:s,style:r,key:x.props.virtualIndex||x.key||`slide-${v}`}))}function Ku(s,e){return typeof window>"u"?C.useEffect(s,e):C.useLayoutEffect(s,e)}const NE=C.createContext(null),Iz=C.createContext(null),yv=C.forwardRef(function(s,e){let{className:t,tag:n="div",wrapperTag:r="div",children:o,onSwiper:u,...f}=s===void 0?{}:s,h=!1;const[p,x]=C.useState("swiper"),[v,_]=C.useState(null),[N,w]=C.useState(!1),E=C.useRef(!1),R=C.useRef(null),T=C.useRef(null),k=C.useRef(null),P=C.useRef(null),H=C.useRef(null),B=C.useRef(null),G=C.useRef(null),M=C.useRef(null),{params:A,passedParams:I,rest:O,events:L}=Ez(f),{slides:z,slots:V}=Cz(o),ye=()=>{w(!N)};Object.assign(A.on,{_containerClasses(we,F){x(F)}});const _e=()=>{Object.assign(A.on,L),h=!0;const we={...A};if(delete we.wrapperClass,T.current=new xv(we),T.current.virtual&&T.current.params.virtual.enabled){T.current.virtual.slides=z;const F={cache:!1,slides:z,renderExternal:_,renderExternalUpdate:!1};Mo(T.current.params.virtual,F),Mo(T.current.originalParams.virtual,F)}};R.current||_e(),T.current&&T.current.on("_beforeBreakpoint",ye);const K=()=>{h||!L||!T.current||Object.keys(L).forEach(we=>{T.current.on(we,L[we])})},oe=()=>{!L||!T.current||Object.keys(L).forEach(we=>{T.current.off(we,L[we])})};C.useEffect(()=>()=>{T.current&&T.current.off("_beforeBreakpoint",ye)}),C.useEffect(()=>{!E.current&&T.current&&(T.current.emitSlidesClasses(),E.current=!0)}),Ku(()=>{if(e&&(e.current=R.current),!!R.current)return T.current.destroyed&&_e(),jz({el:R.current,nextEl:H.current,prevEl:B.current,paginationEl:G.current,scrollbarEl:M.current,swiper:T.current},A),u&&!T.current.destroyed&&u(T.current),()=>{T.current&&!T.current.destroyed&&T.current.destroy(!0,!1)}},[]),Ku(()=>{K();const we=Sz(I,k.current,z,P.current,F=>F.key);return k.current=I,P.current=z,we.length&&T.current&&!T.current.destroyed&&Nz({swiper:T.current,slides:z,passedParams:I,changedParams:we,nextEl:H.current,prevEl:B.current,scrollbarEl:M.current,paginationEl:G.current}),()=>{oe()}}),Ku(()=>{Tz(T.current)},[v]);function le(){return A.virtual?Az(T.current,z,v):z.map((we,F)=>mt.cloneElement(we,{swiper:T.current,swiperSlideIndex:F}))}return mt.createElement(n,cm({ref:R,className:NC(`${p}${t?` ${t}`:""}`)},O),mt.createElement(Iz.Provider,{value:T.current},V["container-start"],mt.createElement(r,{className:wz(A.wrapperClass)},V["wrapper-start"],le(),V["wrapper-end"]),bC(A)&&mt.createElement(mt.Fragment,null,mt.createElement("div",{ref:B,className:"swiper-button-prev"}),mt.createElement("div",{ref:H,className:"swiper-button-next"})),wC(A)&&mt.createElement("div",{ref:M,className:"swiper-scrollbar"}),_C(A)&&mt.createElement("div",{ref:G,className:"swiper-pagination"}),V["container-end"]))});yv.displayName="Swiper";const vv=C.forwardRef(function(s,e){let{tag:t="div",children:n,className:r="",swiper:o,zoom:u,lazy:f,virtualIndex:h,swiperSlideIndex:p,...x}=s===void 0?{}:s;const v=C.useRef(null),[_,N]=C.useState("swiper-slide"),[w,E]=C.useState(!1);function R(H,B,G){B===v.current&&N(G)}Ku(()=>{if(typeof p<"u"&&(v.current.swiperSlideIndex=p),e&&(e.current=v.current),!(!v.current||!o)){if(o.destroyed){_!=="swiper-slide"&&N("swiper-slide");return}return o.on("_slideClass",R),()=>{o&&o.off("_slideClass",R)}}}),Ku(()=>{o&&v.current&&!o.destroyed&&N(o.getSlideClasses(v.current))},[o]);const T={isActive:_.indexOf("swiper-slide-active")>=0,isVisible:_.indexOf("swiper-slide-visible")>=0,isPrev:_.indexOf("swiper-slide-prev")>=0,isNext:_.indexOf("swiper-slide-next")>=0},k=()=>typeof n=="function"?n(T):n,P=()=>{E(!0)};return mt.createElement(t,cm({ref:v,className:NC(`${_}${r?` ${r}`:""}`),"data-swiper-slide-index":h,onLoad:P},x),u&&mt.createElement(NE.Provider,{value:T},mt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof u=="number"?u:void 0},k(),f&&!w&&mt.createElement("div",{className:"swiper-lazy-preloader"}))),!u&&mt.createElement(NE.Provider,{value:T},k(),f&&!w&&mt.createElement("div",{className:"swiper-lazy-preloader"})))});vv.displayName="SwiperSlide";function SC(s,e,t,n){return s.params.createElements&&Object.keys(n).forEach(r=>{if(!t[r]&&t.auto===!0){let o=wi(s.el,`.${n[r]}`)[0];o||(o=lm("div",n[r]),o.className=n[r],s.el.append(o)),t[r]=o,e[r]=o}}),t}function Rz(s){let{swiper:e,extendParams:t,on:n,emit:r}=s;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function o(w){let E;return w&&typeof w=="string"&&e.isElement&&(E=e.el.querySelector(w)||e.hostEl.querySelector(w),E)?E:(w&&(typeof w=="string"&&(E=[...document.querySelectorAll(w)]),e.params.uniqueNavElements&&typeof w=="string"&&E&&E.length>1&&e.el.querySelectorAll(w).length===1?E=e.el.querySelector(w):E&&E.length===1&&(E=E[0])),w&&!E?w:E)}function u(w,E){const R=e.params.navigation;w=ps(w),w.forEach(T=>{T&&(T.classList[E?"add":"remove"](...R.disabledClass.split(" ")),T.tagName==="BUTTON"&&(T.disabled=E),e.params.watchOverflow&&e.enabled&&T.classList[e.isLocked?"add":"remove"](R.lockClass))})}function f(){const{nextEl:w,prevEl:E}=e.navigation;if(e.params.loop){u(E,!1),u(w,!1);return}u(E,e.isBeginning&&!e.params.rewind),u(w,e.isEnd&&!e.params.rewind)}function h(w){w.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function p(w){w.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function x(){const w=e.params.navigation;if(e.params.navigation=SC(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(w.nextEl||w.prevEl))return;let E=o(w.nextEl),R=o(w.prevEl);Object.assign(e.navigation,{nextEl:E,prevEl:R}),E=ps(E),R=ps(R);const T=(k,P)=>{k&&k.addEventListener("click",P==="next"?p:h),!e.enabled&&k&&k.classList.add(...w.lockClass.split(" "))};E.forEach(k=>T(k,"next")),R.forEach(k=>T(k,"prev"))}function v(){let{nextEl:w,prevEl:E}=e.navigation;w=ps(w),E=ps(E);const R=(T,k)=>{T.removeEventListener("click",k==="next"?p:h),T.classList.remove(...e.params.navigation.disabledClass.split(" "))};w.forEach(T=>R(T,"next")),E.forEach(T=>R(T,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?N():(x(),f())}),n("toEdge fromEdge lock unlock",()=>{f()}),n("destroy",()=>{v()}),n("enable disable",()=>{let{nextEl:w,prevEl:E}=e.navigation;if(w=ps(w),E=ps(E),e.enabled){f();return}[...w,...E].filter(R=>!!R).forEach(R=>R.classList.add(e.params.navigation.lockClass))}),n("click",(w,E)=>{let{nextEl:R,prevEl:T}=e.navigation;R=ps(R),T=ps(T);const k=E.target;let P=T.includes(k)||R.includes(k);if(e.isElement&&!P){const H=E.path||E.composedPath&&E.composedPath();H&&(P=H.find(B=>R.includes(B)||T.includes(B)))}if(e.params.navigation.hideOnClick&&!P){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===k||e.pagination.el.contains(k)))return;let H;R.length?H=R[0].classList.contains(e.params.navigation.hiddenClass):T.length&&(H=T[0].classList.contains(e.params.navigation.hiddenClass)),r(H===!0?"navigationShow":"navigationHide"),[...R,...T].filter(B=>!!B).forEach(B=>B.classList.toggle(e.params.navigation.hiddenClass))}});const _=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),x(),f()},N=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),v()};Object.assign(e.navigation,{enable:_,disable:N,update:f,init:x,destroy:v})}function Iu(s){return s===void 0&&(s=""),`.${s.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function kz(s){let{swiper:e,extendParams:t,on:n,emit:r}=s;const o="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:k=>k,formatFractionTotal:k=>k,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let u,f=0;function h(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function p(k,P){const{bulletActiveClass:H}=e.params.pagination;k&&(k=k[`${P==="prev"?"previous":"next"}ElementSibling`],k&&(k.classList.add(`${H}-${P}`),k=k[`${P==="prev"?"previous":"next"}ElementSibling`],k&&k.classList.add(`${H}-${P}-${P}`)))}function x(k,P,H){if(k=k%H,P=P%H,P===k+1)return"next";if(P===k-1)return"previous"}function v(k){const P=k.target.closest(Iu(e.params.pagination.bulletClass));if(!P)return;k.preventDefault();const H=om(P)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===H)return;const B=x(e.realIndex,H,e.slides.length);B==="next"?e.slideNext():B==="previous"?e.slidePrev():e.slideToLoop(H)}else e.slideTo(H)}function _(){const k=e.rtl,P=e.params.pagination;if(h())return;let H=e.pagination.el;H=ps(H);let B,G;const M=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,A=e.params.loop?Math.ceil(M/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(G=e.previousRealIndex||0,B=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(B=e.snapIndex,G=e.previousSnapIndex):(G=e.previousIndex||0,B=e.activeIndex||0),P.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const I=e.pagination.bullets;let O,L,z;if(P.dynamicBullets&&(u=Ax(I[0],e.isHorizontal()?"width":"height"),H.forEach(V=>{V.style[e.isHorizontal()?"width":"height"]=`${u*(P.dynamicMainBullets+4)}px`}),P.dynamicMainBullets>1&&G!==void 0&&(f+=B-(G||0),f>P.dynamicMainBullets-1?f=P.dynamicMainBullets-1:f<0&&(f=0)),O=Math.max(B-f,0),L=O+(Math.min(I.length,P.dynamicMainBullets)-1),z=(L+O)/2),I.forEach(V=>{const ye=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(_e=>`${P.bulletActiveClass}${_e}`)].map(_e=>typeof _e=="string"&&_e.includes(" ")?_e.split(" "):_e).flat();V.classList.remove(...ye)}),H.length>1)I.forEach(V=>{const ye=om(V);ye===B?V.classList.add(...P.bulletActiveClass.split(" ")):e.isElement&&V.setAttribute("part","bullet"),P.dynamicBullets&&(ye>=O&&ye<=L&&V.classList.add(...`${P.bulletActiveClass}-main`.split(" ")),ye===O&&p(V,"prev"),ye===L&&p(V,"next"))});else{const V=I[B];if(V&&V.classList.add(...P.bulletActiveClass.split(" ")),e.isElement&&I.forEach((ye,_e)=>{ye.setAttribute("part",_e===B?"bullet-active":"bullet")}),P.dynamicBullets){const ye=I[O],_e=I[L];for(let K=O;K<=L;K+=1)I[K]&&I[K].classList.add(...`${P.bulletActiveClass}-main`.split(" "));p(ye,"prev"),p(_e,"next")}}if(P.dynamicBullets){const V=Math.min(I.length,P.dynamicMainBullets+4),ye=(u*V-u)/2-z*u,_e=k?"right":"left";I.forEach(K=>{K.style[e.isHorizontal()?_e:"top"]=`${ye}px`})}}H.forEach((I,O)=>{if(P.type==="fraction"&&(I.querySelectorAll(Iu(P.currentClass)).forEach(L=>{L.textContent=P.formatFractionCurrent(B+1)}),I.querySelectorAll(Iu(P.totalClass)).forEach(L=>{L.textContent=P.formatFractionTotal(A)})),P.type==="progressbar"){let L;P.progressbarOpposite?L=e.isHorizontal()?"vertical":"horizontal":L=e.isHorizontal()?"horizontal":"vertical";const z=(B+1)/A;let V=1,ye=1;L==="horizontal"?V=z:ye=z,I.querySelectorAll(Iu(P.progressbarFillClass)).forEach(_e=>{_e.style.transform=`translate3d(0,0,0) scaleX(${V}) scaleY(${ye})`,_e.style.transitionDuration=`${e.params.speed}ms`})}P.type==="custom"&&P.renderCustom?(I.innerHTML=P.renderCustom(e,B+1,A),O===0&&r("paginationRender",I)):(O===0&&r("paginationRender",I),r("paginationUpdate",I)),e.params.watchOverflow&&e.enabled&&I.classList[e.isLocked?"add":"remove"](P.lockClass)})}function N(){const k=e.params.pagination;if(h())return;const P=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let H=e.pagination.el;H=ps(H);let B="";if(k.type==="bullets"){let G=e.params.loop?Math.ceil(P/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&G>P&&(G=P);for(let M=0;M<G;M+=1)k.renderBullet?B+=k.renderBullet.call(e,M,k.bulletClass):B+=`<${k.bulletElement} ${e.isElement?'part="bullet"':""} class="${k.bulletClass}"></${k.bulletElement}>`}k.type==="fraction"&&(k.renderFraction?B=k.renderFraction.call(e,k.currentClass,k.totalClass):B=`<span class="${k.currentClass}"></span> / <span class="${k.totalClass}"></span>`),k.type==="progressbar"&&(k.renderProgressbar?B=k.renderProgressbar.call(e,k.progressbarFillClass):B=`<span class="${k.progressbarFillClass}"></span>`),e.pagination.bullets=[],H.forEach(G=>{k.type!=="custom"&&(G.innerHTML=B||""),k.type==="bullets"&&e.pagination.bullets.push(...G.querySelectorAll(Iu(k.bulletClass)))}),k.type!=="custom"&&r("paginationRender",H[0])}function w(){e.params.pagination=SC(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const k=e.params.pagination;if(!k.el)return;let P;typeof k.el=="string"&&e.isElement&&(P=e.el.querySelector(k.el)),!P&&typeof k.el=="string"&&(P=[...document.querySelectorAll(k.el)]),P||(P=k.el),!(!P||P.length===0)&&(e.params.uniqueNavElements&&typeof k.el=="string"&&Array.isArray(P)&&P.length>1&&(P=[...e.el.querySelectorAll(k.el)],P.length>1&&(P=P.find(H=>fC(H,".swiper")[0]===e.el))),Array.isArray(P)&&P.length===1&&(P=P[0]),Object.assign(e.pagination,{el:P}),P=ps(P),P.forEach(H=>{k.type==="bullets"&&k.clickable&&H.classList.add(...(k.clickableClass||"").split(" ")),H.classList.add(k.modifierClass+k.type),H.classList.add(e.isHorizontal()?k.horizontalClass:k.verticalClass),k.type==="bullets"&&k.dynamicBullets&&(H.classList.add(`${k.modifierClass}${k.type}-dynamic`),f=0,k.dynamicMainBullets<1&&(k.dynamicMainBullets=1)),k.type==="progressbar"&&k.progressbarOpposite&&H.classList.add(k.progressbarOppositeClass),k.clickable&&H.addEventListener("click",v),e.enabled||H.classList.add(k.lockClass)}))}function E(){const k=e.params.pagination;if(h())return;let P=e.pagination.el;P&&(P=ps(P),P.forEach(H=>{H.classList.remove(k.hiddenClass),H.classList.remove(k.modifierClass+k.type),H.classList.remove(e.isHorizontal()?k.horizontalClass:k.verticalClass),k.clickable&&(H.classList.remove(...(k.clickableClass||"").split(" ")),H.removeEventListener("click",v))})),e.pagination.bullets&&e.pagination.bullets.forEach(H=>H.classList.remove(...k.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const k=e.params.pagination;let{el:P}=e.pagination;P=ps(P),P.forEach(H=>{H.classList.remove(k.horizontalClass,k.verticalClass),H.classList.add(e.isHorizontal()?k.horizontalClass:k.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?T():(w(),N(),_())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&_()}),n("snapIndexChange",()=>{_()}),n("snapGridLengthChange",()=>{N(),_()}),n("destroy",()=>{E()}),n("enable disable",()=>{let{el:k}=e.pagination;k&&(k=ps(k),k.forEach(P=>P.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{_()}),n("click",(k,P)=>{const H=P.target,B=ps(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&B&&B.length>0&&!H.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&H===e.navigation.nextEl||e.navigation.prevEl&&H===e.navigation.prevEl))return;const G=B[0].classList.contains(e.params.pagination.hiddenClass);r(G===!0?"paginationShow":"paginationHide"),B.forEach(M=>M.classList.toggle(e.params.pagination.hiddenClass))}});const R=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:k}=e.pagination;k&&(k=ps(k),k.forEach(P=>P.classList.remove(e.params.pagination.paginationDisabledClass))),w(),N(),_()},T=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:k}=e.pagination;k&&(k=ps(k),k.forEach(P=>P.classList.add(e.params.pagination.paginationDisabledClass))),E()};Object.assign(e.pagination,{enable:R,disable:T,render:N,update:_,init:w,destroy:E})}function Dz(s){let{swiper:e,extendParams:t,on:n,emit:r,params:o}=s;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let u,f,h=o&&o.autoplay?o.autoplay.delay:3e3,p=o&&o.autoplay?o.autoplay.delay:3e3,x,v=new Date().getTime(),_,N,w,E,R,T,k;function P(le){!e||e.destroyed||!e.wrapperEl||le.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",P),!(k||le.detail&&le.detail.bySwiperTouchMove)&&O())}const H=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?_=!0:_&&(p=x,_=!1);const le=e.autoplay.paused?x:v+p-new Date().getTime();e.autoplay.timeLeft=le,r("autoplayTimeLeft",le,le/h),f=requestAnimationFrame(()=>{H()})},B=()=>{let le;return e.virtual&&e.params.virtual.enabled?le=e.slides.find(F=>F.classList.contains("swiper-slide-active")):le=e.slides[e.activeIndex],le?parseInt(le.getAttribute("data-swiper-autoplay"),10):void 0},G=le=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(f),H();let we=typeof le>"u"?e.params.autoplay.delay:le;h=e.params.autoplay.delay,p=e.params.autoplay.delay;const F=B();!Number.isNaN(F)&&F>0&&typeof le>"u"&&(we=F,h=F,p=F),x=we;const re=e.params.speed,ve=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(re,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,re,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(re,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,re,!0,!0),r("autoplay")),e.params.cssMode&&(v=new Date().getTime(),requestAnimationFrame(()=>{G()})))};return we>0?(clearTimeout(u),u=setTimeout(()=>{ve()},we)):requestAnimationFrame(()=>{ve()}),we},M=()=>{v=new Date().getTime(),e.autoplay.running=!0,G(),r("autoplayStart")},A=()=>{e.autoplay.running=!1,clearTimeout(u),cancelAnimationFrame(f),r("autoplayStop")},I=(le,we)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(u),le||(T=!0);const F=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",P):O()};if(e.autoplay.paused=!0,we){R&&(x=e.params.autoplay.delay),R=!1,F();return}x=(x||e.params.autoplay.delay)-(new Date().getTime()-v),!(e.isEnd&&x<0&&!e.params.loop)&&(x<0&&(x=0),F())},O=()=>{e.isEnd&&x<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(v=new Date().getTime(),T?(T=!1,G(x)):G(),e.autoplay.paused=!1,r("autoplayResume"))},L=()=>{if(e.destroyed||!e.autoplay.running)return;const le=Si();le.visibilityState==="hidden"&&(T=!0,I(!0)),le.visibilityState==="visible"&&O()},z=le=>{le.pointerType==="mouse"&&(T=!0,k=!0,!(e.animating||e.autoplay.paused)&&I(!0))},V=le=>{le.pointerType==="mouse"&&(k=!1,e.autoplay.paused&&O())},ye=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",z),e.el.addEventListener("pointerleave",V))},_e=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",z),e.el.removeEventListener("pointerleave",V))},K=()=>{Si().addEventListener("visibilitychange",L)},oe=()=>{Si().removeEventListener("visibilitychange",L)};n("init",()=>{e.params.autoplay.enabled&&(ye(),K(),M())}),n("destroy",()=>{_e(),oe(),e.autoplay.running&&A()}),n("_freeModeStaticRelease",()=>{(w||T)&&O()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?A():I(!0,!0)}),n("beforeTransitionStart",(le,we,F)=>{e.destroyed||!e.autoplay.running||(F||!e.params.autoplay.disableOnInteraction?I(!0,!0):A())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){A();return}N=!0,w=!1,T=!1,E=setTimeout(()=>{T=!0,w=!0,I(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!N)){if(clearTimeout(E),clearTimeout(u),e.params.autoplay.disableOnInteraction){w=!1,N=!1;return}w&&e.params.cssMode&&O(),w=!1,N=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(R=!0)}),Object.assign(e.autoplay,{start:M,stop:A,pause:I,resume:O})}function jd(s){return ut({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09.016.016.032.016.032.032.144.112.288.224.448.336.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16.144-.111.304-.223.448-.335.016-.016.032-.016.032-.032 1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816.24-.24.528-.463.816-.639.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023.144-.32.336-.607.576-.847.24-.24.528-.431.848-.575.32-.144.672-.208 1.024-.208.368 0 .704.064 1.024.208.32.144.608.336.848.575.24.24.432.528.576.847.144.32.208.672.208 1.023 0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848 2.84 2.84 0 0 1-.848.575 2.715 2.715 0 0 1-2.064 0 2.84 2.84 0 0 1-.848-.575 2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406 4.883 4.883 0 0 0-1.088-1.135 5.207 5.207 0 0 0-1.04-.608 2.82 2.82 0 0 0 .464-.383 4.2 4.2 0 0 0 .624-.784 3.624 3.624 0 0 0 .528-1.934 3.71 3.71 0 0 0-.288-1.47 3.799 3.799 0 0 0-.816-1.199 3.845 3.845 0 0 0-1.2-.8 3.72 3.72 0 0 0-1.472-.287 3.72 3.72 0 0 0-1.472.288 3.631 3.631 0 0 0-1.2.815 3.84 3.84 0 0 0-.8 1.199 3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007.096.336.224.64.4.927.16.288.384.544.624.784.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"},child:[]}]})(s)}const bv="/assets/allproduct-C9Iuyu-p.jpeg",Pz=()=>{const[s,e]=C.useState(null),[t,n]=C.useState(!1),[r,o]=C.useState(!1),[u,f]=C.useState([]),{currentUser:h,signInWithGoogle:p,logout:x}=rn(),[v,_]=C.useState([]),[N,w]=C.useState(!1),[E,R]=C.useState([]),[T,k]=C.useState([]),[P,H]=C.useState("All"),[B,G]=C.useState(""),[M,A]=C.useState(!1),[I,O]=C.useState([]),L=es(),[z,V]=C.useState({address:"Round North, Kodaly, Kerala",deliveryTime:"9 mins"}),[ye,_e]=C.useState(!1),K=(W,se)=>{se.target.closest("button")||L(`/product/${W}`)};C.useEffect(()=>{window.scrollTo(0,0)},[]);const le=(()=>{let W=P==="All"||P==="All Products"?E:E.filter(se=>se.category===P);if(B&&B.trim().length>0){const se=B.toLowerCase().trim();W=W.filter(ie=>{var xe;return ie.name&&ie.name.toLowerCase().includes(se)||ie.category&&ie.category.toLowerCase().includes(se)||ie.description&&((xe=ie.description)==null?void 0:xe.toLowerCase().includes(se))})}return W})();C.useEffect(()=>{(async()=>{try{const ie=(await Tt(ot(pe,"products"))).docs.map(xe=>({id:xe.id,...xe.data()}));R(ie)}catch(se){console.error("Error fetching products:",se)}})()},[]),C.useEffect(()=>{(async()=>{try{const ie=(await Tt(ot(pe,"categories"))).docs.map(xe=>({id:xe.id,...xe.data()}));_([{id:"all",name:"All Products",imageBase64:bv},...ie])}catch(se){console.error("Error fetching categories:",se)}})()},[]),C.useEffect(()=>{(async()=>{try{const ie=(await Tt(ot(pe,"banners"))).docs.map(xe=>({id:xe.id,...xe.data()}));k(ie)}catch(se){console.error("Error fetching banners:",se)}})()},[]);const we=E.reduce((W,se)=>{const ie=se.category||"Uncategorized";return W[ie]||(W[ie]=[]),W[ie].push(se),W},{}),F=async()=>{try{await p(),n(!1)}catch(W){console.error("Google Sign-In Error:",W)}},re=async()=>{await x(),w(!1),f([])};C.useEffect(()=>{h!=null&&h.cartItems?f(h.cartItems):f([]),h!=null&&h.wishlist?O(h.wishlist):O([])},[h]);const ve=async(W,se)=>{if(h)try{const ie=u.map(xe=>xe.id===W?{...xe,quantity:se}:xe);h!=null&&h.uid&&await ze(je(pe,"users",h.uid),{cartItems:ie}),f(ie)}catch(ie){console.error("Error updating quantity:",ie)}},ge=async W=>{if(!h){n(!0);return}try{const se=[...u],ie=se.findIndex(xe=>xe.id===W.id);ie>=0?se[ie].quantity+=1:se.push({...W,quantity:1,addedAt:new Date().toISOString()}),await ze(je(pe,"users",h.uid),{cartItems:se}),f(se)}catch(se){console.error("Error adding to cart:",se)}},Ae=async W=>{if(h)try{const se=await Zt(je(pe,"users",h.uid));if(se.exists()){const xe=(se.data().cartItems||[]).filter(Te=>Te.id!==W);await ze(je(pe,"users",h.uid),{cartItems:xe}),f(xe)}}catch(se){console.error("Error removing from cart:",se)}},ke=async W=>{try{const se=u.filter(ie=>ie.id!==W);h!=null&&h.uid&&await ze(je(pe,"users",h.uid),{cartItems:se}),f(se)}catch(se){console.error("Error removing item:",se)}},Ce=async W=>{if(!h){n(!0);return}try{A(!0);const se=await Zt(je(pe,"users",h.uid));se.exists()&&((se.data().wishlist||[]).some(Te=>Te.id===W.id)?(await ze(je(pe,"users",h.uid),{wishlist:hc(W)}),O(Te=>Te.filter(Lt=>Lt.id!==W.id))):(await ze(je(pe,"users",h.uid),{wishlist:dc(W)}),O(Te=>[...Te,W])))}catch(se){console.error("Error toggling wishlist:",se)}finally{A(!1)}},dt=()=>{_e(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async W=>{try{const{latitude:se,longitude:ie}=W.coords;V({address:`Location detected (${se.toFixed(4)}, ${ie.toFixed(4)})`,deliveryTime:"9 mins"}),h!=null&&h.uid&&await ze(je(pe,"users",h.uid),{location:{address:`Location detected (${se.toFixed(4)}, ${ie.toFixed(4)})`,coordinates:{lat:se,lng:ie}}})}catch(se){console.error("Error setting location:",se),alert("Could not detect your precise location. Using default address.")}finally{_e(!1)}},W=>{console.error("Error getting location:",W),alert("Location permission denied. Please allow location access to use this feature."),_e(!1)}):(alert("Geolocation is not supported by this browser."),_e(!1))};C.useEffect(()=>{(async()=>{if(h!=null&&h.uid){_e(!0);try{const se=await Zt(je(pe,"users",h.uid));se.exists()&&se.data().location&&V(se.data().location)}catch(se){console.error("Error fetching user location:",se)}finally{_e(!1)}}})()},[h]);const be=W=>{const se=[],ie=Math.floor(W),xe=W%1>=.5;for(let Te=0;Te<5;Te++)Te<ie?se.push(a.jsx("span",{className:"text-yellow-400",children:"★"},Te)):Te===ie&&xe?se.push(a.jsx("span",{className:"text-yellow-400",children:"★"},Te)):se.push(a.jsx("span",{className:"text-gray-300",children:"★"},Te));return a.jsx("div",{className:"flex text-xs",children:se})},Y=()=>{h?o(!0):n(!0)},ce=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>w(!N),className:"flex items-center space-x-2 cursor-pointer group",children:[h!=null&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(h==null?void 0:h.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:re,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),Ne=()=>t?a.jsx("div",{className:"fixed inset-0 bg-transparent z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-50  rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>n(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jd,{className:"text-white text-3xl"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:F,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-[#fff] transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>n(!1),className:"w-full text-[#fff] border border-[#fff] py-3 rounded-lg hover:bg-[#fff] hover:text-black hover:bg-opacity-10 hover:border-[#fff] transition duration-200 font-medium",children:"Cancel"})]})]})}):null,de=()=>{if(!r)return null;const W=()=>u.reduce((se,ie)=>se+ie.salePrice*ie.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",u.length>0?`(${u.length})`:""]}),a.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),u.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>o(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.map(se=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:se.imageBase64||Xs,alt:se.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:se.name}),a.jsx("p",{className:"text-xs text-gray-500",children:se.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",se.salePrice||se.originalPrice]}),se.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",se.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>ke(se.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>ve(se.id,Math.max(1,se.quantity-1)),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:se.quantity}),a.jsx("button",{onClick:()=>ve(se.id,se.quantity+1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},se.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",W()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",W()+40]})]}),a.jsx("button",{onClick:()=>L("/order-confirm"),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})};return a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsxs("div",{className:"flex items-center bg-gray-50 px-4 py-2 rounded-lg",children:[a.jsxs("div",{className:"mr-3",children:[a.jsxs("div",{className:"text-blue-600 font-bold",children:["Delivery in ",z.deliveryTime]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("span",{children:z.address}),a.jsx(Js,{size:16,className:"ml-1"})]})]}),a.jsx("div",{className:"h-8 w-px bg-gray-300 mx-2"}),a.jsx("button",{onClick:dt,disabled:ye,className:"text-indigo-500 font-medium flex items-center hover:text-indigo-600",children:ye?"Loading...":"Change"})]}),a.jsxs("div",{className:"bg-gray-50 flex items-center gap-2 px-4 py-3 rounded-lg border border-gray-200 focus-within:border-blue-400 focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[a.jsx(hr,{size:20,className:"text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search for products...",className:"bg-transparent outline-none w-full text-gray-700",value:B||"",onChange:W=>G(W.target.value)})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[h?a.jsx(ce,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>n(!0),children:[a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:Y,children:[a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Your"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Cart"})]})]}),a.jsx("div",{className:"flex items-center space-x-2 cursor-pointer group",children:a.jsxs(Pe,{to:"/login",className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:a.jsx(pv,{className:"text-xl text-[#1a7e74]"})}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Login"})]})})]})]})}),a.jsx("div",{className:"hidden md:block bg-white border-t border-gray-100 overflow-x-auto hideScrollbar flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto flex-shrink-0 overflow-x-auto hideScrollbar",children:a.jsx("div",{className:"flex items-center justify-between px-4 py-3 overflow-x-auto hideScrollbar gap-10",children:v.map(W=>a.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${P===W.name?" text-yellow-500":"hover:text-blue-500"}`,onClick:()=>H(W.name),children:[W.imageBase64&&a.jsx("img",{src:W.imageBase64,alt:W.name,className:"w-12 h-12 object-contain rounded-full"}),a.jsx("span",{className:"font-sm leading-tight",children:W.name})]},W.id))})})}),a.jsxs("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("div",{className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!h&&n(!0),children:h&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>w(!N)}):a.jsx(ys,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:Y,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]})]})]}),N&&h&&a.jsxs("div",{className:"absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:re,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),a.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4 backdrop-blur-sm flex items-center",children:[a.jsxs("div",{className:"flex flex-col flex-1",children:[a.jsxs("div",{className:"text-white font-bold flex items-center",children:[a.jsxs("span",{className:"mr-2",children:["Delivery in ",z.deliveryTime]}),a.jsx("span",{className:"bg-white text-[#1a7e74] text-xs px-2 py-0.5 rounded-full",children:"FAST"})]}),a.jsxs("div",{className:"flex items-center text-sm md:text-white text-black",children:[a.jsx("span",{children:z.address}),a.jsx(Js,{size:14,className:"ml-1"})]})]}),a.jsx("button",{onClick:dt,disabled:ye,className:"bg-white px-3 py-1 rounded-lg text-[#1a7e74] font-medium text-sm",children:ye?"Loading...":"Change"})]}),a.jsxs("div",{className:"bg-gray-50 flex items-center gap-2 px-4 py-3 mb-2 rounded-lg border border-gray-200 focus-within:border-blue-400 focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[a.jsx(hr,{size:20,className:"text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search for products or categories...",className:"bg-transparent outline-none w-full text-gray-700",value:B,onChange:W=>G(W.target.value)})]}),a.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2 scrollbar-hide",children:v.map(W=>a.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${P===W.name?"text-yellow-400":"text-white text-opacity-90 hover:text-opacity-100"}`,onClick:()=>H(W.name),children:[a.jsx("div",{className:`mb-2 w-14 h-14 rounded-full flex items-center justify-center shadow-md ${P===W.name?"bg-yellow-50 border-2 border-yellow-400":"bg-white"}`,children:W.imageBase64&&a.jsx("img",{src:W.imageBase64,alt:W.name,className:"w-full h-full object-cover rounded-full"})}),a.jsx("span",{className:"text-xs font-medium whitespace-nowrap text-center",children:W.name})]},W.id))})]}),a.jsx(Ne,{}),a.jsx(de,{isOpen:r,onClose:()=>o(!1)}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:a.jsx("div",{className:"rounded-2xl overflow-hidden",children:a.jsx(yv,{modules:[Dz,kz],autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{clickable:!0},loop:T.length>1,className:"w-full h-[200px]  md:h-[500px]",children:T.map(W=>a.jsx(vv,{children:a.jsx("img",{src:W.imageBase64,alt:"Banner",className:"w-full h-full object-contain "})},W.id))})})}),P==="All Products"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-12",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"font-bold text-xl md:text-2xl text-gray-800",children:"All Products"}),a.jsxs(Pe,{to:"/productviewall",className:"text-blue-600 font-medium flex items-center hover:text-blue-700 transition-colors",children:["See All",a.jsx("span",{className:"ml-1",children:"→"})]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 md:grid-cols-3 gap-4",children:E.slice(0,5).map(W=>a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all cursor-pointer",onMouseEnter:()=>e(W.id),onMouseLeave:()=>e(null),onClick:se=>K(W.id,se),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:W.imageBase64||Xs,alt:W.name,className:"w-full h-40 md:h-44 object-contain"}),W.offer>0&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[W.offer,"% OFF"]}),s===W.id&&a.jsx("div",{className:"absolute top-3 right-3 md:flex items-center justify-center hidden",children:a.jsx("button",{onClick:()=>Ce(W),disabled:M,className:`absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-colors ${I.some(se=>se.id===W.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:a.jsx(lr,{size:16,fill:I.some(se=>se.id===W.id)?"currentColor":"none"})})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:W.name}),a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:W.weight}),be(W.rating||4),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",W.salePrice||W.originalPrice]}),W.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",W.originalPrice]})]})," ",a.jsx("button",{onClick:()=>{u.some(ie=>ie.id===W.id)?Ae(W.id):ge(W)},className:`w-full rounded-lg py-2 mt-3 text-sm font-medium transition-colors flex items-center justify-center ${u.some(se=>se.id===W.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u.some(se=>se.id===W.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})})]})]},W.id))})]}),Object.entries(we).map(([W,se])=>a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-12",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"font-bold text-xl md:text-2xl text-gray-800",children:W}),a.jsxs(Pe,{to:`/category/${encodeURIComponent(W)}`,className:"text-blue-600 font-medium flex items-center hover:text-blue-700 transition-colors",children:["See All",a.jsx("span",{className:"ml-1",children:"→"})]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 md:grid-cols-3 gap-4",children:se.slice(0,5).map(ie=>a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all cursor-pointer",onMouseEnter:()=>e(ie.id),onMouseLeave:()=>e(null),onClick:xe=>K(ie.id,xe),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:ie.imageBase64||Xs,alt:ie.name,className:"w-full h-40 md:h-44 object-contain"}),ie.offer>0&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[ie.offer,"% OFF"]}),s===ie.id&&a.jsx("div",{className:"absolute top-3 right-3 md:flex items-center justify-center hidden",children:a.jsx("button",{onClick:()=>Ce(ie),disabled:M,className:`absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-colors ${I.some(xe=>xe.id===ie.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:a.jsx(lr,{size:16,fill:I.some(xe=>xe.id===ie.id)?"currentColor":"none"})})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:ie.name}),a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:ie.weight}),be(ie.rating||4),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",ie.salePrice||ie.originalPrice]}),ie.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",ie.originalPrice]})]}),a.jsx("button",{onClick:()=>{u.some(Te=>Te.id===ie.id)?Ae(ie.id):ge(ie)},className:`w-full rounded-lg py-2 mt-3 text-sm font-medium transition-colors flex items-center justify-center ${u.some(xe=>xe.id===ie.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u.some(xe=>xe.id===ie.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})})]})]},ie.id))})]},W))]}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-12",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"font-bold text-xl md:text-2xl text-gray-800",children:P}),a.jsx("button",{onClick:()=>H("All Products"),className:"text-blue-600 font-medium flex items-center hover:text-blue-700 transition-colors",children:"Back to All Categories"})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 md:grid-cols-3 gap-4",children:le.map(W=>a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all cursor-pointer",onMouseEnter:()=>e(W.id),onMouseLeave:()=>e(null),onClick:se=>K(W.id,se),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:W.imageBase64||Xs,alt:W.name,className:"w-full h-40 md:h-44 object-contain"}),W.offer&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[W.offer,"% OFF"]}),s===W.id&&a.jsx("div",{className:"absolute top-3 right-3 md:flex items-center justify-center hidden",children:a.jsx("button",{onClick:()=>Ce(W),disabled:M,className:`absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-colors ${I.some(se=>se.id===W.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:a.jsx(lr,{size:16,fill:I.some(se=>se.id===W.id)?"currentColor":"none"})})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:W.name}),a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:W.weight}),be(W.rating||4),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",W.salePrice||W.price]}),W.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",W.originalPrice]})]}),a.jsx("button",{onClick:()=>{u.some(ie=>ie.id===W.id)?Ae(W.id):ge(W)},className:`w-full rounded-lg py-2 mt-3 text-sm font-medium transition-colors flex items-center justify-center ${u.some(se=>se.id===W.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u.some(se=>se.id===W.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})})]})]},W.id))})]}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-12",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm flex items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-4",children:a.jsx("span",{className:"text-xl",children:"⚡"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:"Ultrafast Delivery"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Get your groceries in minutes"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm flex items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 mr-4",children:a.jsx("span",{className:"text-xl",children:"🥦"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:"Farm Fresh"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"100% fresh products daily"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm flex items-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-4",children:a.jsx("span",{className:"text-xl",children:"💰"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:"Best Prices"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Save more with exclusive deals"})]})]})]})})]})};function Oz(s){return ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(s)}function Sd(s){return ut({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M295.6 163.7c-5.1 5-5.1 13.3-.1 18.4l60.8 60.9H124.9c-7.1 0-12.9 5.8-12.9 13s5.8 13 12.9 13h231.3l-60.8 60.9c-5 5.1-4.9 13.3.1 18.4 5.1 5 13.2 5 18.3-.1l82.4-83c1.1-1.2 2-2.5 2.7-4.1.7-1.6 1-3.3 1-5 0-3.4-1.3-6.6-3.7-9.1l-82.4-83c-4.9-5.2-13.1-5.3-18.2-.3z"},child:[]}]})(s)}const Mz=()=>{const{signInWithGoogle:s}=rn(),e=es(),[t,n]=C.useState(""),[r,o]=C.useState(""),[u,f]=C.useState(""),[h,p]=C.useState(""),[x,v]=C.useState(!1),[_,N]=C.useState(""),[w,E]=C.useState(!1),[R,T]=C.useState("admin"),k=async B=>{B.preventDefault(),N(""),E(!0);try{if(t==="admin@gmail.com"&&r==="123456"){localStorage.setItem("isAdmin","true"),e("/dashboard",{replace:!0});return}else N("Invalid admin credentials")}catch{N("Failed to login. Please try again.")}E(!1)},P=async B=>{B.preventDefault(),N(""),E(!0);try{if(!u||!h){N("Please enter name and phone number");return}const G=ot(pe,"deliveryBoys"),A=(await Tt(G)).docs.find(I=>I.data().name===u&&I.data().phone===h);A&&A.data().status==="active"?(localStorage.setItem("isDelivery","true"),localStorage.setItem("deliveryName",u),localStorage.setItem("deliveryPhone",h),localStorage.setItem("deliveryBoyId",A.id),e("/delivery-dashboard",{replace:!0})):A&&A.data().status!=="active"?N("Your account is currently inactive. Please contact admin."):N("Invalid credentials. Please check your name and phone number.")}catch(G){N("Failed to login. Please try again."),console.error("Login error:",G)}E(!1)},H=async()=>{try{E(!0),await s(),e("/")}catch{N("Google Sign-In Error. Please try again.")}finally{E(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-lg",children:[a.jsx("div",{children:a.jsxs(Pe,{to:"/",children:[" ",a.jsx(Oz,{className:"hover:text-blue-500"})]})}),a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsx("button",{onClick:()=>T("admin"),className:`px-4 py-2 rounded-lg ${R==="admin"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Admin Login"}),a.jsx("button",{onClick:()=>T("delivery"),className:`px-4 py-2 rounded-lg ${R==="delivery"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Delivery Login"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:R==="admin"?"Admin Login":"Delivery Login"}),a.jsx("p",{className:"mt-2 text-gray-600",children:R==="admin"?"Sign in to access admin dashboard":"Sign in to manage deliveries"})]}),_&&a.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-lg text-sm",children:_}),R==="admin"?a.jsxs("form",{onSubmit:k,className:"mt-8 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(L0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"email",value:t,onChange:B=>n(B.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Admin Email"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(HE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:x?"text":"password",value:r,onChange:B=>o(B.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Password"}),a.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?a.jsx(BE,{size:20}):a.jsx(FE,{size:20})})]})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400",children:w?"Signing in...":"Sign in as Admin"})]}):a.jsxs("form",{onSubmit:P,className:"mt-8 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(jf,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",value:u,onChange:B=>f(B.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your Name"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(hR,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"tel",value:h,onChange:B=>p(B.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Phone Number"})]})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400",children:w?"Signing in...":"Sign in as Delivery"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),a.jsxs("button",{onClick:H,disabled:w,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-gray-100 disabled:text-gray-400",children:[a.jsx(br,{size:24}),a.jsx("span",{children:"Continue with Google"})]})]})})};function gc(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function Ci(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Lz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(s)}function Vz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function TC(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function Qm(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(s)}function zz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(s)}function wl(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(s)}function Uz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(s)}function Bz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function Fz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function qz(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function CC(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function Xm(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function Td(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function D0(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(s)}function EE(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function _v(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function Zm(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function ld(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function jE(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function Cd(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}function um(s){return ut({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 5h-11h3a4 4 0 0 1 0 8h-3l6 6"},child:[]},{tag:"path",attr:{d:"M7 9l11 0"},child:[]}]})(s)}const Hz=()=>{const s=es(),e=nn(),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(0),[h,p]=C.useState([]),[x,v]=C.useState([]),[_,N]=C.useState([]),[w,E]=C.useState([]),[R,T]=C.useState(!0),[k,P]=C.useState(""),[H,B]=C.useState({totalSales:0,totalOrders:0,totalProducts:0,totalCustomers:0,salesGrowth:0,ordersGrowth:8.2,productsGrowth:5.7,customersGrowth:14.2});C.useEffect(()=>{G(),M()},[]);const G=async()=>{try{T(!0);const z=yr(ot(pe,"orders"),$y("createdAt","desc")),ye=(await Tt(z)).docs.map(ke=>({id:ke.id,...ke.data()}));v(ye);const K=(await Tt(ot(pe,"products"))).docs.map(ke=>({id:ke.id,...ke.data()}));N(K);const le=(await Tt(ot(pe,"users"))).docs.map(ke=>({id:ke.id,...ke.data()}));E(le);const we=new Date,F=new Date(we.setMonth(we.getMonth()-1)),re=ye.filter(ke=>{var Ce;return new Date((Ce=ke.createdAt)==null?void 0:Ce.toDate())>F}),ve=ye.reduce((ke,Ce)=>ke+(Ce.total||0),0),ge=re.reduce((ke,Ce)=>ke+(Ce.total||0),0),Ae=((ve-ge)/ge*100).toFixed(1);B({totalSales:ve,totalOrders:ye.length,totalProducts:K.length,totalCustomers:le.length,salesGrowth:parseFloat(Ae)||0,ordersGrowth:8.2,productsGrowth:5.7,customersGrowth:14.2}),P("")}catch(z){P("Failed to fetch data: "+z.message)}finally{T(!1)}},M=()=>{const z=yr(ot(pe,"orders"),bi("isRead","==",!1));return d5(z,V=>{const ye=V.docs.map(_e=>({id:_e.id,..._e.data()}));p(ye),f(V.docs.length)})},A=()=>{s("/login")},I=async()=>{try{const z=h.map(V=>ze(je(pe,"orders",V.id),{isRead:!0}));await Promise.all(z),s("/dashboard/orderdetails")}catch(z){console.error("Error marking orders as read:",z)}},O=[{label:"Dashboard",path:"/dashboard",icon:a.jsx(zz,{})},{label:"Categories",path:"/dashboard/view-category",icon:a.jsx(Uz,{})},{label:"Products",path:"/dashboard/view-product",icon:a.jsx(D0,{})},{label:"Banners",path:"/dashboard/view-banner",icon:a.jsx(wl,{})},{label:"Orders",path:"/dashboard/orderdetails",icon:a.jsx(EE,{})},{label:"Users",path:"/dashboard/users",icon:a.jsx(jE,{})},{label:"Delivery Boys",path:"/dashboard/delivery-boys",icon:a.jsx(s7,{})}],L=z=>e.pathname===z;return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsxs("div",{className:`bg-white shadow-lg transition-all duration-300 ${t?"w-64":"w-20"} flex flex-col`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-100",children:[t&&a.jsx("div",{className:"text-xl font-bold text-blue-600",children:"AdminPanel"}),a.jsx("button",{onClick:()=>n(!t),className:"p-2 rounded-md hover:bg-gray-100",children:t?a.jsx(Cd,{size:20}):a.jsx(Fz,{size:20})})]}),a.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:O.map((z,V)=>a.jsxs(Pe,{to:z.path,className:`flex items-center p-3 rounded-md transition-colors ${L(z.path)?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xl",children:z.icon}),t&&a.jsx("span",{className:"ml-4",children:z.label})]},V))}),a.jsx("div",{className:"p-4 border-t border-gray-100",children:a.jsxs("button",{onClick:A,className:`flex items-center w-full p-3 rounded-md text-red-500 hover:bg-red-50 transition-colors ${!t&&"justify-center"}`,children:[a.jsx(Bz,{size:20}),t&&a.jsx("span",{className:"ml-3",children:"Logout"})]})})]}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsxs("header",{className:"flex items-center justify-between h-16 px-6 bg-white shadow-sm",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Dashboard"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:r,onChange:z=>o(z.target.value),placeholder:"Search...",className:"w-64 px-10 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(Td,{className:"absolute left-3 top-2.5 text-gray-400"})]}),a.jsx("div",{className:"relative",children:a.jsxs("button",{onClick:I,className:"relative",children:[a.jsx(Vz,{size:20,className:"text-gray-600 cursor-pointer"}),u>0&&a.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center w-4 h-4 text-xs text-white bg-red-500 rounded-full transform translate-x-1 -translate-y-1",children:u})]})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white",children:a.jsx(ld,{})}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Admin"})]})]})]}),a.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Overview"}),a.jsx("p",{className:"text-gray-500",children:"Welcome back, here's what's happening today."})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6 lg:grid-cols-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),a.jsx("div",{className:"p-2 bg-blue-100 rounded-md text-blue-600",children:a.jsx(um,{size:18})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{children:a.jsx(um,{})}),a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:H.totalSales.toFixed(2)})]})]}),a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Orders"}),a.jsx("div",{className:"p-2 bg-purple-100 rounded-md text-purple-600",children:a.jsx(EE,{size:18})})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:H.totalOrders})]}),a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Products"}),a.jsx("div",{className:"p-2 bg-yellow-100 rounded-md text-yellow-600",children:a.jsx(D0,{size:18})})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:H.totalProducts})]}),a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Customers"}),a.jsx("div",{className:"p-2 bg-green-100 rounded-md text-green-600",children:a.jsx(jE,{size:18})})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:H.totalCustomers})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Sales Overview"}),a.jsxs("select",{className:"px-3 py-1 text-sm border rounded-md focus:outline-none",children:[a.jsx("option",{children:"Last 7 Days"}),a.jsx("option",{children:"Last 30 Days"}),a.jsx("option",{children:"Last 90 Days"})]})]}),a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[a.jsx(Lz,{size:48}),a.jsx("p",{className:"mt-2",children:"Sales chart visualization"})]})})]}),a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Top Products"}),a.jsxs("select",{className:"px-3 py-1 text-sm border rounded-md focus:outline-none",children:[a.jsx("option",{children:"Last 7 Days"}),a.jsx("option",{children:"Last 30 Days"}),a.jsx("option",{children:"Last 90 Days"})]})]}),a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[a.jsx(D0,{size:48}),a.jsx("p",{className:"mt-2",children:"Product performance chart"})]})})]})]}),a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Recent Activity"}),a.jsx(Pe,{to:"/dashboard/orderdetails",className:"text-sm text-blue-600 hover:underline",children:"View All"})]}),k&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsx("p",{className:"text-sm",children:k})}),a.jsx("div",{className:"overflow-x-auto",children:R?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):x.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders found"}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Order ID"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Product"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.slice(0,3).map(z=>{var V,ye,_e,K;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:["#",z.id]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:a.jsx(ld,{size:14})}),a.jsx("div",{className:"ml-3",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:(V=z.shippingDetails)==null?void 0:V.fullName})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[(_e=(ye=z.items)==null?void 0:ye[0])==null?void 0:_e.name,((K=z.items)==null?void 0:K.length)>1&&` +${z.items.length-1} more`]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[(z.total+40||0).toFixed(2),"/-"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 text-xs font-medium ${Gz(z.status)} rounded-full`,children:z.status})})]},z.id)})})]})})]})]})]})]})},Gz=s=>{switch(s==null?void 0:s.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"shipped":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"accept":return"bg-emerald-100 text-emerald-800";case"reject":return"bg-rose-100 text-rose-800";default:return"bg-gray-100 text-gray-800"}},$z=({isOpen:s,onClose:e})=>{const{currentUser:t}=rn(),[n,r]=C.useState([]),[o,u]=C.useState(!0),[f,h]=C.useState(!1);C.useEffect(()=>{s&&(async()=>{if(!(t!=null&&t.uid)){r([]),u(!1);return}try{const w=await Zt(je(pe,"users",t.uid));w.exists()&&r(w.data().cartItems||[])}catch(w){console.error("Error fetching cart items:",w)}finally{u(!1)}})()},[s,t]);const p=async(N,w)=>{if(!(w<1))try{const E=n.map(R=>R.id===N?{...R,quantity:w}:R);t!=null&&t.uid&&await ze(je(pe,"users",t.uid),{cartItems:E}),r(E)}catch(E){console.error("Error updating quantity:",E)}},x=async N=>{try{const w=n.filter(E=>E.id!==N);t!=null&&t.uid&&await ze(je(pe,"users",t.uid),{cartItems:w}),r(w)}catch(w){console.error("Error removing item:",w)}},v=()=>n.reduce((N,w)=>N+w.salePrice*w.quantity,0),_=async()=>{var N;if(t!=null&&t.uid){h(!0);try{const E=(N=(await Zt(je(pe,"users",t.uid))).data())==null?void 0:N.shippingDetails;if(!E)throw new Error("Please add shipping details before checkout");const R={id:`ORD-${Date.now()}`,userId:t.uid,date:new Date().toISOString(),items:n,total:v()+40,status:"Processing",shippingDetails:E,isRead:!1};await Promise.all([addDoc(collection(pe,"orders"),R),ze(je(pe,"users",t.uid),{cartItems:[]})]),r([]),e()}catch(w){console.error("Checkout error:",w)}finally{h(!1)}}};return s?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/3 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",n.length>0?`(${n.length})`:""]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),o?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:e,className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.map(N=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:N.imageBase64||"/placeholder-product.jpg",alt:N.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:N.name}),a.jsx("p",{className:"text-xs text-gray-500",children:N.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",N.salePrice||N.originalPrice]}),N.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",N.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>x(N.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>p(N.id,N.quantity-1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",disabled:N.quantity<=1,children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:N.quantity}),a.jsx("button",{onClick:()=>p(N.id,N.quantity+1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},N.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",v()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",v()+40]})]}),a.jsx("button",{onClick:_,disabled:f,className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200 flex items-center justify-center",children:f?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Proceed to Checkout"})]})]})]})}):null},AC=({onSelectAddress:s,selectedAddressId:e,hideAddressForm:t=!1})=>{const{currentUser:n}=rn(),[r,o]=C.useState([]),[u,f]=C.useState(!1),[h,p]=C.useState(!1),[x,v]=C.useState({fullName:"",phone:"",address:"",city:"",pincode:"",type:"manual"}),[_,N]=C.useState(null),[w,E]=C.useState(null);C.useEffect(()=>{(async()=>{if(n!=null&&n.uid){f(!0);try{const G=ot(pe,"addresses"),M=yr(G,bi("userId","==",n.uid)),I=(await Tt(M)).docs.map(L=>({id:L.id,...L.data()})),O=await Zt(je(pe,"users",n.uid));if(O.exists()){const L=O.data();if(L.address||L.city||L.pincode){const z={id:"profile",fullName:`${L.firstName||""} ${L.lastName||""}`.trim(),phone:L.mobile||"",address:L.address||"",city:L.place||L.city||"",pincode:L.pincode||"",type:"profile",createdAt:L.updatedAt||L.createdAt||new Date};N(z)}if(L.location){const z={id:"location",fullName:`${L.firstName||""} ${L.lastName||""}`.trim(),phone:L.mobile||"",address:L.location.address||"",city:"",pincode:"",type:"location",coordinates:L.location.coordinates,createdAt:L.location.updatedAt||new Date};E(z)}}o(I)}catch(G){console.error("Error fetching addresses:",G)}finally{f(!1)}}})()},[n]);const R=[...r,..._?[_]:[],...w?[w]:[]].sort((B,G)=>new Date(G.createdAt)-new Date(B.createdAt)),T=B=>{const{name:G,value:M}=B.target;v(A=>({...A,[G]:M}))},k=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async B=>{const{latitude:G,longitude:M}=B.coords;try{const A=`Lat: ${G.toFixed(4)}, Long: ${M.toFixed(4)}`;v({fullName:(n==null?void 0:n.displayName)||"",phone:"",address:A,city:"",pincode:"",type:"location",coordinates:{latitude:G,longitude:M}}),p(!0)}catch(A){console.error("Error getting address from coordinates:",A),alert("Could not get your address. Please enter manually.")}},B=>{console.error("Error getting location:",B),alert("Could not get your location. Please try again or enter manually.")}):alert("Geolocation is not supported by your browser. Please enter manually.")},P=async B=>{if(B.preventDefault(),!!(n!=null&&n.uid))try{f(!0);const G={...x,userId:n.uid,createdAt:new Date},A={id:(await uc(ot(pe,"addresses"),G)).id,...G};o(I=>[...I,A]),p(!1),v({fullName:"",phone:"",address:"",city:"",pincode:"",type:"manual"})}catch(G){console.error("Error adding address:",G)}finally{f(!1)}},H=async B=>{if(window.confirm("Are you sure you want to delete this address?"))try{f(!0),await cc(je(pe,"addresses",B)),o(G=>G.filter(M=>M.id!==B))}catch(G){console.error("Error deleting address:",G)}finally{f(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-4",children:R.map(B=>a.jsx("div",{className:`border rounded-lg p-4 cursor-pointer ${e===B.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>s&&s(B),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium",children:B.fullName||"No name"}),B.type==="profile"&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"Profile"}),B.type==="location"&&a.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Location"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:B.phone}),a.jsx("p",{className:"text-sm text-gray-600",children:B.address}),a.jsxs("p",{className:"text-sm text-gray-600",children:[B.city," ",B.pincode&&`- ${B.pincode}`]})]}),B.type==="manual"&&!t&&a.jsx("button",{onClick:G=>{G.stopPropagation(),H(B.id)},className:"text-red-500 hover:text-red-700",children:a.jsx(Qn,{size:18})})]})},B.id))}),!t&&(h?a.jsxs("form",{onSubmit:P,className:"space-y-4 border rounded-lg p-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",name:"fullName",required:!0,value:x.fullName,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",name:"phone",required:!0,value:x.phone,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("input",{type:"text",name:"address",required:!0,value:x.address,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",name:"city",required:!0,value:x.city,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN Code"}),a.jsx("input",{type:"text",name:"pincode",required:!0,value:x.pincode,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:u?"Saving...":"Save Address"})]})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:k,className:"flex items-center gap-2 text-green-600 hover:text-green-700",children:[a.jsx(uR,{size:20}),"Use Current Location"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[a.jsx(kn,{size:20}),"Add New Address"]})]}))]})},Wz=()=>{const{currentUser:s,logout:e,signInWithGoogle:t}=rn(),[n,r]=C.useState(!1),o=nn(),u=()=>r(!n),[f,h]=C.useState(null),[p,x]=C.useState(!1),[v,_]=C.useState(!1),[N,w]=C.useState([]),[E,R]=C.useState([]),[T,k]=C.useState(!1),[P,H]=C.useState([]),[B,G]=C.useState("All"),[M,A]=C.useState("profile"),[I,O]=C.useState([]),[L,z]=C.useState(!1),[V,ye]=C.useState([]),[_e,K]=C.useState(!0),[oe,le]=C.useState(null);C.useEffect(()=>{s!=null&&s.cartItems?w(s.cartItems):w([]),s!=null&&s.wishlist?O(s.wishlist):O([])},[s]);const we=async(ie,xe)=>{if(s!=null&&s.uid)try{const Te=N.map(Lt=>Lt.id===ie?{...Lt,quantity:xe}:Lt);await ze(je(pe,"users",s.uid),{cartItems:Te}),w(Te)}catch(Te){console.error("Error updating quantity:",Te)}},F=async ie=>{try{const xe=N.filter(Te=>Te.id!==ie);s!=null&&s.uid&&await ze(je(pe,"users",s.uid),{cartItems:xe}),w(xe)}catch(xe){console.error("Error removing item:",xe)}};C.useEffect(()=>{(async()=>{if(s!=null&&s.uid){z(!0);try{const xe=await Zt(je(pe,"users",s.uid));xe.exists()&&O(xe.data().wishlist||[])}catch(xe){console.error("Error fetching wishlist:",xe)}finally{z(!1)}}})()},[s]),C.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid)){ye([]),K(!1);return}try{K(!0),le(null);const xe=ot(pe,"orders");let Te=[];try{const Lt=yr(xe,bi("userId","==",s.uid),$y("createdAt","desc"));Te=(await Tt(Lt)).docs.map(Ln=>{var Ts;return{id:Ln.id,...Ln.data(),createdAt:((Ts=Ln.data().createdAt)==null?void 0:Ts.toDate().toLocaleDateString())||new Date().toLocaleDateString()}})}catch{console.log("Index not yet ready, falling back to basic query");const Nr=yr(xe,bi("userId","==",s.uid));Te=(await Tt(Nr)).docs.map(Ts=>{var Er;return{id:Ts.id,...Ts.data(),createdAt:((Er=Ts.data().createdAt)==null?void 0:Er.toDate().toLocaleDateString())||new Date().toLocaleDateString()}}),Te.sort((Ts,Er)=>{const jr=new Date(Ts.createdAt);return new Date(Er.createdAt)-jr})}ye(Te)}catch(xe){console.error("Error fetching orders:",xe),le("Failed to load orders. Please try again.")}finally{K(!1)}})()},[s]);const re=async ie=>{try{const xe=I.find(Te=>Te.id===ie);if(!xe)return;await ze(je(pe,"users",s.uid),{wishlist:hc(xe)}),O(Te=>Te.filter(Lt=>Lt.id!==ie))}catch(xe){console.error("Remove from wishlist error:",xe)}},ve=async ie=>{try{if(N.find(Te=>Te.id===ie.id)){const Te=N.map(Lt=>Lt.id===ie.id?{...Lt,quantity:Lt.quantity+1}:Lt);await ze(je(pe,"users",s.uid),{cartItems:Te}),w(Te)}else{const Te={...ie,quantity:1,addedAt:new Date().toISOString()};await ze(je(pe,"users",s.uid),{cartItems:dc(Te)}),w(Lt=>[...Lt,Te])}await re(ie.id)}catch(xe){console.error("Move to cart error:",xe)}},ge=[{id:"profile",label:"Profile",icon:a.jsx(jf,{size:20})},{id:"orders",label:"Orders",icon:a.jsx(V0,{size:20})},{id:"support",label:"Customer Support",icon:a.jsx(Z4,{size:20})},{id:"wishlist",label:"Wishlist",icon:a.jsx(lr,{size:20})},{id:"addresses",label:"Addresses",icon:a.jsx(GE,{size:20})}],Ae=async()=>{try{await t(),x(!1)}catch(ie){console.error("Google Sign-In Error:",ie)}},ke=async()=>{await e(),k(!1),w([]),O([])},Ce=()=>{s?_(!0):x(!0)},dt=()=>{if(!v)return null;const ie=()=>N.reduce((xe,Te)=>xe+Te.salePrice*Te.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",N.length>0?`(${N.length})`:""]}),a.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),N.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>_(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:N.map(xe=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:xe.imageBase64||Xs,alt:xe.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:xe.name}),a.jsx("p",{className:"text-xs text-gray-500",children:xe.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",xe.salePrice||xe.originalPrice]}),xe.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",xe.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>F(xe.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>we(xe.id,Math.max(1,xe.quantity-1)),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:xe.quantity}),a.jsx("button",{onClick:()=>we(xe.id,xe.quantity+1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},xe.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",ie()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",ie()+40]})]}),a.jsx("button",{className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})},be=()=>p?a.jsx("div",{className:"fixed inset-0 bg-transparent z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-50 rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>x(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jf,{size:24,className:"text-white"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:Ae,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-[#fff] transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>x(!1),className:"w-full text-[#fff] border border-[#fff] py-3 rounded-lg hover:bg-[#fff] hover:text-black hover:bg-opacity-10 hover:border-[#fff] transition duration-200 font-medium",children:"Cancel"})]})]})}):null,[Y,ce]=C.useState({firstName:"",lastName:"",gender:"Female",mobile:"",address:"",place:"",pincode:"",landmark:""}),[Ne,de]=C.useState(!1);C.useEffect(()=>{(async()=>{if(s!=null&&s.uid)try{const xe=await Zt(je(pe,"users",s.uid));if(xe.exists()){const Te=xe.data();ce({firstName:Te.firstName||"",lastName:Te.lastName||"",gender:Te.gender||"Female",mobile:Te.mobile||"",address:Te.address||"",place:Te.place||"",pincode:Te.pincode||"",landmark:Te.landmark||""})}}catch(xe){console.error("Error fetching profile data:",xe)}})()},[s]);const W=async()=>{if(s!=null&&s.uid)try{await ze(je(pe,"users",s.uid),{...Y,updatedAt:new Date}),de(!1)}catch(ie){console.error("Error updating profile:",ie)}},se=ie=>{const{name:xe,value:Te}=ie.target;ce(Lt=>({...Lt,[xe]:Te}))};return o.pathname==="/profile"?a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsx("div",{className:"flex items-center space-x-6",children:a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:Ce,children:[a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),N.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:N.length})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Your"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Cart"})]})]})})]})}),a.jsx(be,{}),a.jsx(dt,{}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hover:text-blue-500",children:a.jsx(Pe,{to:"/",children:"Home"})}),a.jsx("div",{children:a.jsx(Sd,{className:"text-lg"})}),a.jsx("div",{children:"User Profile"})]})}),a.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:flex md:space-x-6",children:[a.jsxs("div",{className:"w-full md:w-72 bg-white rounded-lg shadow-sm p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s!=null&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-20 h-20 rounded-full border-2 border-purple-100"}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-purple-100 flex items-center justify-center",children:a.jsx(ys,{className:"text-4xl text-purple-600"})}),a.jsx("h2",{className:"text-xl font-medium mt-4",children:(s==null?void 0:s.displayName)||"sona dsilva"}),a.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||"example@gmail.com"})]}),a.jsx("nav",{className:"mt-6",children:ge.map(ie=>a.jsxs("button",{onClick:()=>A(ie.id),className:`w-full flex items-center px-4 py-3 text-left rounded-lg transition-colors ${M===ie.id?"bg-blue-50 border-l-4 border-blue-500 text-blue-700":"hover:bg-gray-100 text-gray-800"}`,children:[a.jsx("span",{className:"mr-3 text-gray-600",children:ie.icon}),a.jsx("span",{className:"font-medium",children:ie.label})]},ie.id))}),a.jsx("div",{className:"pt-6 border-t mt-6",children:a.jsxs("button",{onClick:ke,className:"flex items-center text-gray-700 hover:text-red-600 font-medium transition-colors",children:[a.jsx(rR,{size:20,className:"mr-2"}),a.jsx("span",{children:"Log Out"})]})})]}),a.jsxs("div",{className:"flex-1 mt-6 md:mt-0",children:[M==="orders"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"My Orders"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Track and view your order history"}),_e?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):oe?a.jsx("div",{className:"text-center text-red-600 py-8",children:oe}):V.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(V0,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start shopping to see your orders here."}),a.jsx(Pe,{to:"/",className:"mt-4 inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]}):a.jsx("div",{className:"space-y-6",children:V.map(ie=>a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-100",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Order #",ie.id]}),a.jsx("p",{className:"text-sm text-gray-500",children:ie.createdAt})]}),a.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${ie.status==="Processing"?"bg-blue-100 text-blue-800":ie.status==="Delivered"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ie.status})]}),a.jsx("div",{className:"border-t border-gray-200 pt-4",children:ie.items.map((xe,Te)=>a.jsxs("div",{className:"flex items-center py-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:xe.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",xe.quantity]})]}),a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",xe.salePrice*xe.quantity]})]},Te))}),a.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Total Amount"}),a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",ie.total]})]})}),ie.shippingDetails&&a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping Details"}),a.jsx("p",{className:"text-sm text-gray-500",children:ie.shippingDetails.fullName}),a.jsx("p",{className:"text-sm text-gray-500",children:ie.shippingDetails.address}),a.jsxs("p",{className:"text-sm text-gray-500",children:[ie.shippingDetails.city,", ",ie.shippingDetails.pincode]}),a.jsx("p",{className:"text-sm text-gray-500",children:ie.shippingDetails.phone})]})]})},ie.id))})]}),M==="support"&&a.jsx("div",{className:"bg-white p-8 rounded shadow",children:"Customer Support Page"}),M==="wishlist"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"My Wishlist"}),L?a.jsx("div",{className:"flex justify-center items-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):I.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lr,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Your wishlist is empty"}),a.jsx(Pe,{to:"/",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:I.map(ie=>a.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"aspect-w-1 aspect-h-1",children:a.jsx("img",{src:ie.imageBase64,alt:ie.name,className:"w-full h-52 object-contain"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:ie.name}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",ie.salePrice]}),ie.originalPrice&&a.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["₹",ie.originalPrice]})]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>ve(ie),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[a.jsx(bt,{size:16}),"Add to Cart"]}),a.jsx("button",{onClick:()=>re(ie.id),className:"p-2 text-gray-500 hover:text-red-500 border border-gray-200 rounded-lg transition-colors",children:a.jsx(Qn,{size:16})})]})]})]},ie.id))})]}),M==="addresses"&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsx(AC,{})}),M==="profile"&&a.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Personal Information"}),a.jsx("button",{onClick:()=>Ne?W():de(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:Ne?"Save":"Edit"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),a.jsx("input",{type:"text",name:"firstName",value:Y.firstName,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),a.jsx("input",{type:"text",name:"lastName",value:Y.lastName,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"gender",value:"Male",checked:Y.gender==="Male",onChange:se,disabled:!Ne,className:"mr-2"}),"Male"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"gender",value:"Female",checked:Y.gender==="Female",onChange:se,disabled:!Ne,className:"mr-2"}),"Female"]})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:"w-full p-2 border rounded bg-gray-100"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),a.jsx("input",{type:"tel",name:"mobile",value:Y.mobile,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("textarea",{name:"address",value:Y.address,onChange:se,disabled:!Ne,rows:"3",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Place"}),a.jsx("input",{type:"text",name:"place",value:Y.place,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),a.jsx("input",{type:"text",name:"pincode",value:Y.pincode,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landmark"}),a.jsx("input",{type:"text",name:"landmark",value:Y.landmark,onChange:se,disabled:!Ne,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]})]})]})]})]})]}):a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:u,className:"flex items-center space-x-2 cursor-pointer group",children:[s!=null&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-purple-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-purple-600 transition-colors",children:(s==null?void 0:s.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),n&&a.jsxs("div",{className:"absolute right-0 mt-2 w-52 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:(s==null?void 0:s.displayName)||"sona dsilva"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:(s==null?void 0:s.email)||"user@example.com"})]}),a.jsx(Pe,{to:"/account",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Account"}),a.jsx(Pe,{to:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx(Pe,{to:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:a.jsx("button",{onClick:ke,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})})]})]})},Kz=({showLoginModal:s,setShowLoginModal:e})=>{const[t,n]=C.useState(!0),[r,o]=C.useState(!1),[u,f]=C.useState(""),[h,p]=C.useState(""),[x,v]=C.useState(""),[_,N]=C.useState(!1),[w,E]=C.useState(!1),[R,T]=C.useState(""),k=es(),{login:P,signup:H,resetPassword:B,signInWithGoogle:G}=rn();if(!s)return null;const M=async O=>{O.preventDefault(),T(""),E(!0);try{r?(await B(u),T("Password reset email sent! Check your inbox.")):t?(await P(u,h),e(!1),k("/")):(await H(u,h,x),T("Account created successfully!"),n(!0))}catch(L){T(L.message||"An error occurred")}E(!1)},A=async()=>{try{E(!0),await G(),e(!1),k("/")}catch{T("Failed to sign in with Google")}finally{E(!1)}},I=()=>r?a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),a.jsxs("div",{className:"relative",children:[a.jsx(L0,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:u,onChange:O=>f(O.target.value),placeholder:"Email address",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200 disabled:bg-blue-400",children:w?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",onClick:()=>o(!1),className:"w-full text-gray-600 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200 mt-2",children:"Back to Login"})]}):a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t?"Sign in to Zepto":"Create an Account"}),!t&&a.jsxs("div",{className:"relative",children:[a.jsx(jf,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:x,onChange:O=>v(O.target.value),placeholder:"Full name",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(L0,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:u,onChange:O=>f(O.target.value),placeholder:"Email address",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(HE,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:_?"text":"password",value:h,onChange:O=>p(O.target.value),placeholder:"Password",required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{type:"button",onClick:()=>N(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:_?a.jsx(BE,{size:18}):a.jsx(FE,{size:18})})]}),t&&a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-sm text-blue-600 hover:text-blue-800",children:"Forgot password?"})}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200 disabled:bg-blue-400",children:w?"Processing...":t?"Sign In":"Create Account"}),a.jsxs("div",{className:"flex items-center my-4",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("button",{type:"button",onClick:A,disabled:w,className:"w-full flex items-center justify-center gap-2 border border-gray-300 rounded-lg py-3 px-4 text-gray-700 hover:bg-gray-50 transition duration-200 disabled:bg-gray-100 disabled:text-gray-400",children:[a.jsx(br,{size:24}),a.jsx("span",{children:"Continue with Google"})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{type:"button",onClick:()=>n(!t),className:"text-blue-600 hover:text-blue-800",children:t?"Don't have an account? Sign up":"Already have an account? Sign in"})})]});return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md shadow-xl p-6 transform transition-all",children:[a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})}),R&&a.jsx("div",{className:`p-3 rounded-lg mb-4 ${R.toLowerCase().includes("error")||R.toLowerCase().includes("failed")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:R}),I()]})})},Yz=()=>{const{currentUser:s,signInWithGoogle:e,logout:t}=rn(),[n,r]=C.useState(!1),[o,u]=C.useState(!1),[f,h]=C.useState([]),[p,x]=C.useState(!1),[v,_]=C.useState([]),[N,w]=C.useState(!0),[E,R]=C.useState(null),[T,k]=C.useState({address:"Select your location",deliveryTime:"-- mins"}),[P,H]=C.useState(!1);es(),C.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid)){_([]),w(!1);return}try{w(!0),R(null);const z=ot(pe,"orders");let V=[];try{const ye=yr(z,bi("userId","==",s.uid),$y("createdAt","desc"));V=(await Tt(ye)).docs.map(K=>{var oe;return{id:K.id,...K.data(),createdAt:((oe=K.data().createdAt)==null?void 0:oe.toDate().toLocaleDateString())||new Date().toLocaleDateString()}})}catch{console.log("Index not yet ready, falling back to basic query");const _e=yr(z,bi("userId","==",s.uid));V=(await Tt(_e)).docs.map(oe=>{var le;return{id:oe.id,...oe.data(),createdAt:((le=oe.data().createdAt)==null?void 0:le.toDate().toLocaleDateString())||new Date().toLocaleDateString()}}),V.sort((oe,le)=>{const we=new Date(oe.createdAt);return new Date(le.createdAt)-we})}_(V)}catch(z){console.error("Error fetching orders:",z),R("Failed to load orders. Please try again.")}finally{w(!1)}})()},[s]);const B=async()=>{try{await e(),r(!1)}catch(L){console.error("Google Sign-In Error:",L)}},G=async()=>{await t(),x(!1),h([])},M=()=>{H(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async L=>{try{const{latitude:z,longitude:V}=L.coords;k({address:`Location detected (${z.toFixed(4)}, ${V.toFixed(4)})`,deliveryTime:"9 mins"}),s!=null&&s.uid&&await ze(je(pe,"users",s.uid),{location:{address:`Location detected (${z.toFixed(4)}, ${V.toFixed(4)})`,coordinates:{lat:z,lng:V}}})}catch(z){console.error("Error setting location:",z),alert("Could not detect your precise location. Using default address.")}finally{H(!1)}},L=>{console.error("Error getting location:",L),alert("Location permission denied. Please allow location access to use this feature."),H(!1)}):(alert("Geolocation is not supported by this browser."),H(!1))};C.useEffect(()=>{var L;(L=s==null?void 0:s.location)!=null&&L.address&&k({address:s.location.address,deliveryTime:"9 mins"})},[s]);const A=()=>{s?u(!0):r(!0)},I=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>x(!p),className:"flex items-center space-x-2 cursor-pointer group",children:[s!=null&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(s==null?void 0:s.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),p&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:s==null?void 0:s.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:G,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),O=()=>n?a.jsx("div",{className:"fixed inset-0 bg-transparent z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-50 rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>r(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jd,{className:"text-white text-3xl"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-[#fff] transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>r(!1),className:"w-full text-[#fff] border border-[#fff] py-3 rounded-lg hover:bg-[#fff] hover:text-black hover:bg-opacity-10 hover:border-[#fff] transition duration-200 font-medium",children:"Cancel"})]})]})}):null;return a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsx("div",{className:"flex items-center space-x-6",children:s?a.jsx(I,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>r(!0),children:[a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]})})]})}),a.jsxs("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("div",{className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!s&&r(!0),children:s&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>x(!p)}):a.jsx(ys,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:A,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),f.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:f.length})]})]})]}),p&&s&&a.jsxs("div",{className:"absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:s==null?void 0:s.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:G,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),a.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4 backdrop-blur-sm flex items-center",children:[a.jsxs("div",{className:"flex flex-col flex-1",children:[a.jsxs("div",{className:"text-white font-bold flex items-center",children:[a.jsxs("span",{className:"mr-2",children:["Delivery in ",T.deliveryTime]}),a.jsx("span",{className:"bg-white text-[#1a7e74] text-xs px-2 py-0.5 rounded-full",children:"FAST"})]}),a.jsxs("div",{className:"flex items-center text-sm md:text-white text-black",children:[a.jsx("span",{children:T.address}),a.jsx(Js,{size:14,className:"ml-1"})]})]}),a.jsx("button",{onClick:M,disabled:P,className:"bg-white px-3 py-1 rounded-lg text-[#1a7e74] font-medium text-sm",children:P?"Loading...":"Change"})]})]}),a.jsx(O,{}),o&&a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",f.length>0?`(${f.length})`:""]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),f.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>u(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsx("div",{className:"p-4 text-center",children:a.jsx("p",{className:"text-gray-600",children:"Cart functionality would be implemented here"})})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hover:text-blue-500",children:a.jsx(Pe,{to:"/",children:"Home"})}),a.jsx("div",{children:a.jsx(Sd,{className:"text-lg"})}),a.jsx("div",{children:"Orders"})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),a.jsx("p",{className:"text-gray-600",children:"Track and view your order history"})]}),N?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):E?a.jsx("div",{className:"text-center text-red-600 py-8",children:E}):v.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(V0,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start shopping to see your orders here."})]}):a.jsx("div",{className:"space-y-6",children:v.map(L=>a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Order #",L.id]}),a.jsx("p",{className:"text-sm text-gray-500",children:L.createdAt})]}),a.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${L.status==="Processing"?"bg-blue-100 text-blue-800":L.status==="Delivered"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]}),a.jsx("div",{className:"border-t border-gray-200 pt-4",children:L.items.map((z,V)=>a.jsxs("div",{className:"flex items-center py-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",z.quantity]})]}),a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",z.salePrice*z.quantity]})]},V))}),a.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Total Amount"}),a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",L.total]})]})}),L.shippingDetails&&a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping Details"}),a.jsx("p",{className:"text-sm text-gray-500",children:L.shippingDetails.fullName}),a.jsx("p",{className:"text-sm text-gray-500",children:L.shippingDetails.address}),a.jsxs("p",{className:"text-sm text-gray-500",children:[L.shippingDetails.city,", ",L.shippingDetails.pincode]}),a.jsx("p",{className:"text-sm text-gray-500",children:L.shippingDetails.phone})]})]})},L.id))})]})]})},Qz=()=>{const{currentUser:s,userId:e,signInWithGoogle:t,logout:n}=rn(),[r,o]=C.useState([]),[u,f]=C.useState([]),[h,p]=C.useState(!0),[x,v]=C.useState(!1),[_,N]=C.useState(!1),[w,E]=C.useState(!1),[R,T]=C.useState({address:"Select your location",deliveryTime:"-- mins"}),[k,P]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!e){o([]),f([]),p(!1);return}try{const V=await Zt(je(pe,"users",e));V.exists()&&(o(V.data().wishlist||[]),f(V.data().cartItems||[]))}catch(V){console.error("Error fetching user data:",V)}finally{p(!1)}})()},[e]);const H=async z=>{try{const V=r.find(ye=>ye.id===z);if(!V)return;await ze(je(pe,"users",e),{wishlist:hc(V)}),o(ye=>ye.filter(_e=>_e.id!==z))}catch(V){console.error("Remove from wishlist error:",V)}},B=async z=>{try{if(u.find(ye=>ye.id===z.id)){const ye=u.map(_e=>_e.id===z.id?{..._e,quantity:_e.quantity+1}:_e);await ze(je(pe,"users",e),{cartItems:ye}),f(ye)}else{const ye={...z,quantity:1,addedAt:new Date().toISOString()},_e=[...u,ye];await ze(je(pe,"users",e),{cartItems:_e}),f(_e)}await H(z.id)}catch(V){console.error("Add to cart error:",V)}},G=async()=>{try{await t(),N(!1)}catch(z){console.error("Google Sign-In Error:",z)}},M=async()=>{await n(),v(!1),f([]),o([])},A=()=>{s?E(!0):N(!0)},I=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>v(!x),className:"flex items-center space-x-2 cursor-pointer group",children:[s!=null&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(s==null?void 0:s.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),x&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:s==null?void 0:s.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:M,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),O=()=>_?a.jsx("div",{className:"fixed inset-0 bg-transparent z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-50 rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>N(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jd,{className:"text-white text-3xl"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:G,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-[#fff] transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>N(!1),className:"w-full text-[#fff] border border-[#fff] py-3 rounded-lg hover:bg-[#fff] hover:text-black hover:bg-opacity-10 hover:border-[#fff] transition duration-200 font-medium",children:"Cancel"})]})]})}):null,L=()=>{if(!w)return null;const z=()=>u.reduce((V,ye)=>V+ye.price*ye.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",u.length>0?`(${u.length})`:""]}),a.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),u.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>E(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.map(V=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:V.imageBase64||Xs,alt:V.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:V.name}),a.jsx("p",{className:"text-xs text-gray-500",children:V.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",V.price]}),V.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",V.originalPrice]})]})]})]},V.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",z()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",z()+40]})]}),a.jsx("button",{className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})};return h?a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs(Pe,{to:"/",className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsx("div",{className:"flex items-center space-x-6",children:s?a.jsx(I,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>N(!0),children:[a.jsx(ProfileIcon,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]})})]})}),a.jsxs("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Pe,{to:"/",className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!s&&N(!0),children:s&&s.photoURL?a.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>v(!x)}):a.jsx(ProfileIcon,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:A,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]})]})]}),x&&s&&a.jsxs("div",{className:"absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:s==null?void 0:s.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:M,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),a.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4 backdrop-blur-sm flex items-center",children:[a.jsxs("div",{className:"flex flex-col flex-1",children:[a.jsxs("div",{className:"text-white font-bold flex items-center",children:[a.jsx("span",{className:"mr-2",children:"Delivery in 9 mins"}),a.jsx("span",{className:"bg-white text-[#1a7e74] text-xs px-2 py-0.5 rounded-full",children:"FAST"})]}),a.jsxs("div",{className:"flex items-center text-sm md:text-white text-black",children:[a.jsx("span",{children:"Round North, Kodaly, Kerala"}),a.jsx(Js,{size:14,className:"ml-1"})]})]}),a.jsx("div",{className:"bg-white px-3 py-1 rounded-lg text-[#1a7e74] font-medium text-sm",children:"Change"})]}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(hr,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search for products...",className:"bg-white w-full pl-10 pr-4 py-3 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-300 text-gray-700"})]})]}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hover:text-blue-500",children:a.jsx(Pe,{to:"/",children:"Home"})}),a.jsx("div",{children:a.jsx(Sd,{className:"text-lg"})}),a.jsx("div",{children:"My Wishlist"})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Wishlist"}),a.jsx("p",{className:"text-gray-600",children:"Save items you love to shop later"})]}),r.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[a.jsx(lr,{className:"mx-auto text-gray-400 mb-4",size:48}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Your wishlist is empty"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Save your favorite items to shop them later"}),a.jsx(Pe,{to:"/",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:r.map(z=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:z.imageBase64||Xs,alt:z.name,className:"w-full h-40 object-contain"}),z.discount&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[z.discount," OFF"]}),a.jsx("button",{onClick:()=>H(z.id),className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-white shadow-md flex items-center justify-center text-red-500 hover:bg-red-50 transition-colors",children:a.jsx(Qn,{size:16})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h3",{className:"font-medium text-gray-800",children:z.name}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:z.weight}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",z.price||z.salePrice||z.originalPrice]}),z.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",z.originalPrice]})]}),a.jsxs("button",{onClick:()=>B(z),className:"w-full bg-blue-600 text-white rounded-lg py-2 mt-3 text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})]})]},z.id))})]}),a.jsx(O,{}),a.jsx(L,{})]})},Xz=()=>{const[s,e]=C.useState(""),[t,n]=C.useState(null),[r,o]=C.useState(null),[u,f]=C.useState(!1),[h,p]=C.useState(""),x=es(),v=w=>{const E=w.target.files[0];E&&(n(E),o(URL.createObjectURL(E)))},_=()=>{o(null),n(null)},N=async w=>{w.preventDefault(),p(""),f(!0);try{if(!s.trim())throw new Error("Category name is required");let E="";if(t){const T=new FileReader,k=new Promise((P,H)=>{T.onload=()=>P(T.result),T.onerror=B=>H(B)});T.readAsDataURL(t),E=await k}const R={name:s.trim(),imageBase64:E,createdAt:new Date().toISOString()};await uc(ot(pe,"categories"),R),x("/dashboard/view-category")}catch(E){p("Failed to add category: "+E.message)}finally{f(!1)}};return mt.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/view-category",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Category"})]}),h&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:h})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name"}),a.jsx("input",{type:"text",id:"categoryName",value:s,onChange:w=>e(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter category name",required:!0,disabled:u})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"categoryImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Image"}),a.jsx("input",{type:"file",id:"categoryImage",accept:"image/*",onChange:v,className:"hidden",disabled:u}),r?a.jsxs("div",{className:"relative border border-gray-200 rounded-lg p-2 mt-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:a.jsx("img",{src:r,alt:"Preview",className:"h-full w-full object-cover"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Image Selected"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click below to change or remove the image"})]})]}),a.jsxs("div",{className:"mt-3 flex space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>document.getElementById("categoryImage").click(),className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:u,children:[a.jsx(Zm,{size:14,className:"mr-1"}),"Change"]}),a.jsxs("button",{type:"button",onClick:_,className:"flex items-center px-3 py-1.5 text-sm text-red-600 border border-red-300 rounded-md hover:bg-red-50 transition-colors",disabled:u,children:[a.jsx(Cd,{size:14,className:"mr-1"}),"Remove"]})]})]}):a.jsx("div",{onClick:()=>!u&&document.getElementById("categoryImage").click(),className:"mt-2 flex justify-center px-6 py-8 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"space-y-2 text-center",children:[a.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-700",children:"Click to upload an image"})," ","or drag and drop"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/view-category",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Category"})]})]})})})]})},Zz=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(""),[h,p]=C.useState(!1);C.useEffect(()=>{x()},[]);const x=async()=>{try{p(!0);const w=(await Tt(ot(pe,"categories"))).docs.map(E=>({id:E.id,...E.data()}));e(w),o("")}catch(N){o("Failed to fetch categories: "+N.message)}finally{n(!1),p(!1)}},v=async N=>{if(window.confirm("Are you sure you want to delete this category?"))try{await cc(je(pe,"categories",N)),e(w=>w.filter(E=>E.id!==N))}catch(w){o("Failed to delete category: "+w.message)}},_=s.filter(N=>N.name.toLowerCase().includes(u.toLowerCase()));return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Categories"})]}),a.jsxs(Pe,{to:"/dashboard/add-category",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(CC,{size:16,className:"mr-2"}),"Add New Category"]})]}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(Td,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search categories...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:N=>f(N.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:x,disabled:h,children:[a.jsx(Xm,{size:16,className:`mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(Qm,{size:16,className:"mr-2"}),"Filter"]})]})]})}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):_.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(wl,{size:48,className:"mb-4 text-gray-300"}),u?"No categories found matching your search.":"No categories found. Add your first category!"]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"h-12 w-12 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:N.imageBase64?a.jsx("img",{src:N.imageBase64,alt:N.name,className:"h-full w-full object-cover"}):a.jsx(wl,{size:20,className:"text-gray-400"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:new Date(N.createdAt).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx(Pe,{to:`/dashboard/edit-category/${N.id}`,className:"flex items-center text-indigo-600 hover:text-indigo-900",title:"Edit",children:a.jsx(TC,{size:18})}),a.jsx("button",{onClick:()=>v(N.id),className:"flex items-center text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(_v,{size:18})})]})})]},N.id))})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:_.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," categories"]})})]})]})},Jz=()=>{const{id:s}=Jo(),e=es(),[t,n]=C.useState(""),[r,o]=C.useState(null),[u,f]=C.useState(null),[h,p]=C.useState(!1),[x,v]=C.useState("");C.useEffect(()=>{(async()=>{try{const R=je(pe,"categories",s),T=await Zt(R);if(T.exists()){const k=T.data();n(k.name),f(k.imageBase64)}else v("Category not found")}catch(R){v("Failed to fetch category: "+R.message)}})()},[s]);const _=E=>{const R=E.target.files[0];R&&(o(R),f(URL.createObjectURL(R)))},N=()=>{f(null),o(null)},w=async E=>{E.preventDefault(),v(""),p(!0);try{if(!t.trim())throw new Error("Category name is required");let R=u;if(r){const k=new FileReader,P=new Promise((H,B)=>{k.onload=()=>H(k.result),k.onerror=G=>B(G)});k.readAsDataURL(r),R=await P}const T=je(pe,"categories",s);await ze(T,{name:t.trim(),imageBase64:R,updatedAt:new Date().toISOString()}),e("/dashboard/view-category")}catch(R){v("Failed to update category: "+R.message)}finally{p(!1)}};return mt.useEffect(()=>()=>{u&&r&&URL.revokeObjectURL(u)},[u,r]),a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/view-category",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Category"})]}),x&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:x})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name"}),a.jsx("input",{type:"text",id:"categoryName",value:t,onChange:E=>n(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter category name",required:!0,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"categoryImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Image"}),a.jsx("input",{type:"file",id:"categoryImage",accept:"image/*",onChange:_,className:"hidden",disabled:h}),u?a.jsxs("div",{className:"relative border border-gray-200 rounded-lg p-2 mt-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:a.jsx("img",{src:u,alt:"Preview",className:"h-full w-full object-cover"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Image Selected"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click below to change or remove the image"})]})]}),a.jsxs("div",{className:"mt-3 flex space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>document.getElementById("categoryImage").click(),className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:h,children:[a.jsx(Zm,{size:14,className:"mr-1"}),"Change"]}),a.jsxs("button",{type:"button",onClick:N,className:"flex items-center px-3 py-1.5 text-sm text-red-600 border border-red-300 rounded-md hover:bg-red-50 transition-colors",disabled:h,children:[a.jsx(Cd,{size:14,className:"mr-1"}),"Remove"]})]})]}):a.jsx("div",{onClick:()=>!h&&document.getElementById("categoryImage").click(),className:"mt-2 flex justify-center px-6 py-8 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"space-y-2 text-center",children:[a.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-700",children:"Click to upload an image"})," ","or drag and drop"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/view-category",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Category"})]})]})})})]})},e8=()=>{const[s,e]=C.useState(""),[t,n]=C.useState(null),[r,o]=C.useState(null),[u,f]=C.useState(!1),[h,p]=C.useState(""),x=es(),v=w=>{const E=w.target.files[0];E&&(n(E),o(URL.createObjectURL(E)))},_=()=>{o(null),n(null)},N=async w=>{w.preventDefault(),p(""),f(!0);try{if(!s.trim())throw new Error("Banner title is required");let E="";if(t){const T=new FileReader,k=new Promise((P,H)=>{T.onload=()=>P(T.result),T.onerror=B=>H(B)});T.readAsDataURL(t),E=await k}const R={title:s.trim(),imageBase64:E,createdAt:new Date().toISOString()};await uc(ot(pe,"banners"),R),x("/dashboard/view-banner")}catch(E){p("Failed to add banner: "+E.message)}finally{f(!1)}};return mt.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/view-banner",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Banner"})]}),h&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:h})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bannerTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Title"}),a.jsx("input",{type:"text",id:"bannerTitle",value:s,onChange:w=>e(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter banner title",required:!0,disabled:u})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bannerImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Image"}),a.jsx("input",{type:"file",id:"bannerImage",accept:"image/*",onChange:v,className:"hidden",disabled:u}),r?a.jsxs("div",{className:"relative border border-gray-200 rounded-lg p-2 mt-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:a.jsx("img",{src:r,alt:"Preview",className:"h-full w-full object-cover"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Image Selected"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click below to change or remove the image"})]})]}),a.jsxs("div",{className:"mt-3 flex space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>document.getElementById("bannerImage").click(),className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:u,children:[a.jsx(Zm,{size:14,className:"mr-1"}),"Change"]}),a.jsxs("button",{type:"button",onClick:_,className:"flex items-center px-3 py-1.5 text-sm text-red-600 border border-red-300 rounded-md hover:bg-red-50 transition-colors",disabled:u,children:[a.jsx(Cd,{size:14,className:"mr-1"}),"Remove"]})]})]}):a.jsx("div",{onClick:()=>!u&&document.getElementById("bannerImage").click(),className:"mt-2 flex justify-center px-6 py-8 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"space-y-2 text-center",children:[a.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-700",children:"Click to upload an image"})," ","or drag and drop"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/view-banner",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Banner"})]})]})})})]})},t8=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(null),[h,p]=C.useState(""),[x,v]=C.useState(!1);C.useEffect(()=>{_()},[]);const _=async()=>{try{v(!0);const R=(await Tt(ot(pe,"banners"))).docs.map(T=>({id:T.id,...T.data()}));e(R),o("")}catch(E){o("Failed to fetch banners: "+E.message)}finally{n(!1),v(!1)}},N=s.filter(E=>(E.title||"").toLowerCase().includes(h.toLowerCase())),w=async E=>{if(window.confirm("Are you sure you want to delete this banner?"))try{await cc(je(pe,"banners",E)),e(R=>R.filter(T=>T.id!==E))}catch(R){o("Failed to delete banner: "+R.message)}};return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Nl,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Banners"})]}),a.jsxs(Pe,{to:"/dashboard/add-banner",className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(kn,{size:16,className:"mr-2"}),"Add New Banner"]})]}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(hr,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search banners...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",value:h,onChange:E=>p(E.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:_,disabled:x,children:[a.jsx($E,{size:16,className:`mr-2 ${x?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(qE,{size:16,className:"mr-2"}),"Filter"]})]})]})}),r&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:r}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):N.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(fm,{size:48,className:"mb-4 text-gray-300"}),h?"No banners found matching your search.":"No banners found. Add your first banner!"]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"h-20 w-80 rounded-lg overflow-hidden",children:a.jsx("img",{src:E.imageBase64,alt:"Banner",className:"h-full w-full object-cover cursor-pointer",onClick:()=>f(E.imageBase64)})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(Pe,{to:`/dashboard/edit-banner/${E.id}`,className:"text-indigo-600 hover:text-indigo-900 flex items-center",children:[a.jsx(KE,{size:16,className:"mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>w(E.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[a.jsx(Qn,{size:16,className:"mr-1"}),"Delete"]})]})})]},E.id))})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:N.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," banners"]})})]}),u&&a.jsx("div",{className:"fixed inset-0 z-50 bg-transparent bg-opacity-50 flex items-center justify-center",onClick:()=>f(null),children:a.jsxs("div",{className:"relative bg-white p-4 rounded-lg max-w-3xl max-h-[90vh] overflow-auto",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:()=>f(null),className:"absolute top-2 right-2 text-gray-600 hover:text-red-600 text-lg font-bold",children:"✕"}),a.jsx("img",{src:u,alt:"Preview",className:"w-full h-auto rounded"})]})})]})},s8=()=>{const{id:s}=Jo(),e=es(),[t,n]=C.useState(""),[r,o]=C.useState(null),[u,f]=C.useState(null),[h,p]=C.useState(!1),[x,v]=C.useState("");C.useEffect(()=>{(async()=>{try{const R=je(pe,"banners",s),T=await Zt(R);if(T.exists()){const k=T.data();n(k.title),f(k.imageBase64)}else v("Banner not found")}catch(R){v("Failed to fetch banner: "+R.message)}})()},[s]);const _=E=>{const R=E.target.files[0];R&&(o(R),f(URL.createObjectURL(R)))},N=()=>{f(null),o(null)},w=async E=>{E.preventDefault(),v(""),p(!0);try{if(!t.trim())throw new Error("Banner title is required");let R=u;if(r){const k=new FileReader,P=new Promise((H,B)=>{k.onload=()=>H(k.result),k.onerror=G=>B(G)});k.readAsDataURL(r),R=await P}const T=je(pe,"banners",s);await ze(T,{title:t.trim(),imageBase64:R,updatedAt:new Date().toISOString()}),e("/dashboard/view-banner")}catch(R){v("Failed to update banner: "+R.message)}finally{p(!1)}};return mt.useEffect(()=>()=>{u&&r&&URL.revokeObjectURL(u)},[u,r]),a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/view-banner",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Banner"})]}),x&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:x})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bannerTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Title"}),a.jsx("input",{type:"text",id:"bannerTitle",value:t,onChange:E=>n(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter banner title",required:!0,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bannerImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Image"}),a.jsx("input",{type:"file",id:"bannerImage",accept:"image/*",onChange:_,className:"hidden",disabled:h}),u?a.jsxs("div",{className:"relative border border-gray-200 rounded-lg p-2 mt-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:a.jsx("img",{src:u,alt:"Preview",className:"h-full w-full object-cover"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Image Selected"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click below to change or remove the image"})]})]}),a.jsxs("div",{className:"mt-3 flex space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>document.getElementById("bannerImage").click(),className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:h,children:[a.jsx(Zm,{size:14,className:"mr-1"}),"Change"]}),a.jsxs("button",{type:"button",onClick:N,className:"flex items-center px-3 py-1.5 text-sm text-red-600 border border-red-300 rounded-md hover:bg-red-50 transition-colors",disabled:h,children:[a.jsx(Cd,{size:14,className:"mr-1"}),"Remove"]})]})]}):a.jsx("div",{onClick:()=>!h&&document.getElementById("bannerImage").click(),className:"mt-2 flex justify-center px-6 py-8 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"space-y-2 text-center",children:[a.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-700",children:"Click to upload an image"})," ","or drag and drop"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/view-banner",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Banner"})]})]})})})]})},IC=(s,e={})=>{const{maxWidth:t=800,maxHeight:n=800,quality:r=.7}=e;return new Promise((o,u)=>{try{const f=new Image;f.src=s,f.onload=()=>{let h=f.width,p=f.height;h>t&&(p=Math.round(p*(t/h)),h=t),p>n&&(h=Math.round(h*(n/p)),p=n);const x=document.createElement("canvas");x.width=h,x.height=p,x.getContext("2d").drawImage(f,0,0,h,p);const _=x.toDataURL("image/jpeg",r);o(_)},f.onerror=h=>{u(new Error("Error loading image for compression: "+h))}}catch(f){u(new Error("Image compression failed: "+f.message))}})},n8=async(s,e={})=>{if(!s||!Array.isArray(s))return[];try{const t=s.map(n=>IC(n,e));return await Promise.all(t)}catch(t){return console.error("Error compressing multiple images:",t),s}},od=async s=>{try{const e={...s};return e.imageBase64&&(e.imageBase64=await IC(e.imageBase64,{maxWidth:600,maxHeight:600,quality:.6})),e.subImagesBase64&&Array.isArray(e.subImagesBase64)&&(e.subImagesBase64=await n8(e.subImagesBase64,{maxWidth:400,maxHeight:400,quality:.6})),e}catch(e){return console.error("Error optimizing product data:",e),s}},i8=()=>{const s=es(),[e,t]=C.useState({name:"",originalPrice:"",offer:0,salePrice:"",description:"",packedDate:"",expiryDate:"",imported:"No",organic:"No",brand:"",shelfLife:"",category:""}),[n,r]=C.useState(null),[o,u]=C.useState([]),[f,h]=C.useState(null),[p,x]=C.useState([]),[v,_]=C.useState(""),[N,w]=C.useState([]),[E,R]=C.useState(!1);C.useEffect(()=>((async()=>{try{const M=(await Tt(ot(pe,"categories"))).docs.map(A=>({id:A.id,name:A.data().name}));w(M)}catch(G){console.error("Error fetching categories:",G),_("Failed to fetch categories: "+G.message)}})(),()=>{f&&URL.revokeObjectURL(f),p.forEach(G=>URL.revokeObjectURL(G))}),[f,p]);const T=B=>{const G=B.target.files[0];G&&(r(G),h(URL.createObjectURL(G)))},k=B=>{const G=Array.from(B.target.files);u(G),x(G.map(M=>URL.createObjectURL(M)))},P=B=>{const{name:G,value:M}=B.target;let A={...e,[G]:M};if(G==="offer"||G==="originalPrice"){const I=parseFloat(A.originalPrice),O=parseFloat(A.offer);!isNaN(I)&&!isNaN(O)&&(A.salePrice=(I-I*O/100).toFixed(2))}t(A)},H=async B=>{if(B.preventDefault(),_(""),R(!0),!n||!e.originalPrice||!e.name){_("Product name, image, and original price are required."),R(!1);return}try{const G=L=>new Promise((z,V)=>{const ye=new FileReader;ye.onload=()=>z(ye.result),ye.onerror=V,ye.readAsDataURL(L)}),M=await G(n),A=await Promise.all(o.map(G)),I={...e,originalPrice:parseFloat(e.originalPrice),offer:parseFloat(e.offer),salePrice:parseFloat(e.salePrice),imageBase64:M,subImagesBase64:A,createdAt:new Date().toISOString()},O=await od(I);await uc(ot(pe,"products"),O),s("/dashboard/view-product")}catch(G){_("Failed to add product: "+G.message)}finally{R(!1)}};return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard/view-product",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Nl,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Product"})]})}),v&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:v})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsxs("form",{onSubmit:H,children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsx("div",{className:"text-sm text-gray-700",children:"Fill in the details to add a new product"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{type:"submit",disabled:E,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(WE,{size:16,className:"mr-2"}),E?"Saving...":"Save Product"]})})]})}),a.jsxs("div",{className:"p-6 grid gap-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block font-medium text-gray-700 mb-2",children:"Product Image *"}),a.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden",id:"mainImage"}),a.jsxs("div",{className:"flex flex-col items-center justify-center cursor-pointer",onClick:()=>document.getElementById("mainImage").click(),children:[f?a.jsx("div",{className:"relative w-full aspect-square mb-2",children:a.jsx("img",{src:f,alt:"Product preview",className:"w-full h-full object-cover rounded-md"})}):a.jsx("div",{className:"w-full aspect-square flex items-center justify-center bg-gray-100 rounded-md mb-2",children:a.jsx(B4,{size:40,className:"text-gray-400"})}),a.jsx("div",{className:"flex items-center justify-center w-full",children:a.jsxs("button",{type:"button",className:"flex items-center text-sm px-3 py-1.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(z0,{size:14,className:"mr-1"}),f?"Change Image":"Upload Image"]})})]})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block font-medium text-gray-700 mb-2",children:"Additional Images"}),a.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.map((B,G)=>a.jsx("div",{className:"w-16 h-16 relative",children:a.jsx("img",{src:B,alt:`Sub image ${G+1}`,className:"w-full h-full object-cover rounded-md"})},G)),p.length===0&&a.jsx("div",{className:"w-full h-24 flex items-center justify-center bg-gray-100 rounded-md",children:a.jsx(fm,{size:24,className:"text-gray-400"})})]}),a.jsxs("div",{className:"flex items-center justify-center w-full",children:[a.jsx("input",{type:"file",multiple:!0,accept:"image/*",id:"subImages",className:"hidden",onChange:k}),a.jsxs("button",{type:"button",onClick:()=>document.getElementById("subImages").click(),className:"flex items-center text-sm px-3 py-1.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(kn,{size:14,className:"mr-1"}),"Add More Images"]})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{id:"name",name:"name",value:e.name,onChange:P,required:!0,placeholder:"Enter product name",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"brand",className:"block font-medium text-gray-700 mb-1",children:"Brand"}),a.jsx("input",{id:"brand",name:"brand",value:e.brand,onChange:P,placeholder:"Enter brand name",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category",className:"block font-medium text-gray-700 mb-1",children:"Category *"}),a.jsxs("select",{id:"category",name:"category",required:!0,value:e.category,onChange:P,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[a.jsx("option",{value:"",children:"Select Category"}),N.map(B=>a.jsx("option",{value:B.name,children:B.name},B.id))]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pricing"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"originalPrice",className:"block font-medium text-gray-700 mb-1",children:"Original Price *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx("span",{className:"text-gray-500",children:"₹"})}),a.jsx("input",{id:"originalPrice",name:"originalPrice",type:"number",value:e.originalPrice,onChange:P,required:!0,placeholder:"0.00",className:"w-full pl-8 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"offer",className:"block font-medium text-gray-700 mb-1",children:"Offer (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"offer",name:"offer",type:"number",value:e.offer||0,onChange:P,placeholder:"0",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:a.jsx("span",{className:"text-gray-500",children:"%"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"salePrice",className:"block font-medium text-gray-700 mb-1",children:"Sale Price"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx("span",{className:"text-gray-500",children:"₹"})}),a.jsx("input",{id:"salePrice",name:"salePrice",type:"number",value:e.salePrice,readOnly:!0,placeholder:"0.00",className:"w-full pl-8 p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Product Dates"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"packedDate",className:"block font-medium text-gray-700 mb-1",children:"Packed Date"}),a.jsx("input",{id:"packedDate",name:"packedDate",type:"date",value:e.packedDate,onChange:P,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"expiryDate",className:"block font-medium text-gray-700 mb-1",children:"Expiry Date"}),a.jsx("input",{id:"expiryDate",name:"expiryDate",type:"date",value:e.expiryDate,onChange:P,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"shelfLife",className:"block font-medium text-gray-700 mb-1",children:"Shelf Life (days)"}),a.jsx("input",{id:"shelfLife",name:"shelfLife",type:"number",value:e.shelfLife,onChange:P,placeholder:"Enter shelf life in days",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Product Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"imported",className:"block font-medium text-gray-700 mb-1",children:"Imported"}),a.jsxs("select",{id:"imported",name:"imported",value:e.imported,onChange:P,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[a.jsx("option",{value:"No",children:"No"}),a.jsx("option",{value:"Yes",children:"Yes"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"organic",className:"block font-medium text-gray-700 mb-1",children:"Organic"}),a.jsxs("select",{id:"organic",name:"organic",value:e.organic,onChange:P,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[a.jsx("option",{value:"No",children:"No"}),a.jsx("option",{value:"Yes",children:"Yes"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block font-medium text-gray-700 mb-1",children:"Product Description"}),a.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:P,placeholder:"Enter detailed product description",rows:4,className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Pe,{to:"/dashboard/view-product",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:E?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Add Product"})]})})]})})]})},r8=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(null),[h,p]=C.useState(""),[x,v]=C.useState(!1);C.useEffect(()=>{_()},[]);const _=async()=>{try{v(!0);const R=(await Tt(ot(pe,"products"))).docs.map(T=>{const k=T.data(),P=k.offer||"",H=P?k.salePrice:k.originalPrice;return{id:T.id,...k,offer:P,salePrice:H}});e(R),o("")}catch(E){o("Failed to fetch products: "+E.message)}finally{n(!1),v(!1)}},N=async E=>{if(window.confirm("Are you sure you want to delete this product?"))try{await cc(je(pe,"products",E)),e(R=>R.filter(T=>T.id!==E))}catch(R){o("Failed to delete product: "+R.message)}},w=s.filter(E=>(E.name||E.productName||"").toLowerCase().includes(h.toLowerCase()));return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Nl,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Products"})]}),a.jsxs(Pe,{to:"/dashboard/add-product",className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(kn,{size:16,className:"mr-2"}),"Add New Product"]})]}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(hr,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search products...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",value:h,onChange:E=>p(E.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:_,disabled:x,children:[a.jsx($E,{size:16,className:`mr-2 ${x?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(qE,{size:16,className:"mr-2"}),"Filter"]})]})]})}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):w.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(fm,{size:48,className:"mb-4 text-gray-300"}),h?"No products found matching your search.":"No products found. Add your first product!"]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sub Images"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(E=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-4",children:a.jsx("div",{className:"h-16 w-16 rounded-lg overflow-hidden",children:a.jsx("img",{src:E.imageBase64,alt:E.name||E.productName,className:"h-full w-full object-cover cursor-pointer",onClick:()=>f(E.imageBase64)})})}),a.jsx("td",{className:"px-4 py-4",children:Array.isArray(E.subImagesBase64)&&E.subImagesBase64.length>0?a.jsx("div",{className:"w-32 relative",children:a.jsx(yv,{spaceBetween:5,slidesPerView:2,modules:[Rz],navigation:!0,className:"subimages-swiper",children:E.subImagesBase64.map((R,T)=>a.jsx(vv,{children:a.jsx("div",{className:"h-12 w-12 rounded overflow-hidden",children:a.jsx("img",{src:R,alt:`${E.name||E.productName}-${T+1}`,className:"h-full w-full object-cover cursor-pointer",onClick:()=>f(R)})})},T))})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"—"})}),a.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900",children:E.name||E.productName}),a.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:E.category||"—"}),a.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:E.brand||"—"}),a.jsxs("td",{className:"px-4 py-4",children:[a.jsxs("div",{className:"text-sm text-gray-900",children:["₹",E.originalPrice]}),E.offer&&a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsxs("span",{className:"text-xs text-green-600 font-medium mr-1",children:[E.offer,"% OFF"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["₹",E.salePrice]})]})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"text-sm text-gray-500",children:[E.organic==="Yes"||E.organic===!0?a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mr-1",children:"Organic"}):null,E.imported==="Yes"||E.imported===!0?a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Imported"}):null]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx(Pe,{to:`/dashboard/edit-product/${E.id}`,className:"flex items-center text-indigo-600 hover:text-indigo-900",title:"Edit",children:a.jsx(KE,{size:18})}),a.jsx("button",{onClick:()=>N(E.id),className:"flex items-center text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(Qn,{size:18})})]})})]},E.id))})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:w.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," products"]})})]}),u&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center",onClick:()=>f(null),children:a.jsxs("div",{className:"relative bg-white p-4 rounded-lg max-w-3xl max-h-[90vh] overflow-auto",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:()=>f(null),className:"absolute top-2 right-2 text-gray-600 hover:text-red-600 text-lg font-bold",children:"✕"}),a.jsx("img",{src:u,alt:"Preview",className:"w-full h-auto rounded"})]})})]})},a8=()=>{const{id:s}=Jo(),e=es(),[t,n]=C.useState({name:"",imageBase64:"",subImagesBase64:[],originalPrice:"",offer:"",salePrice:"",brand:"",description:"",packedDate:"",expiryDate:"",imported:!1,organic:!1,shelfLife:"",category:""}),[r,o]=C.useState([]),[u,f]=C.useState(null),[h,p]=C.useState(""),[x,v]=C.useState(""),[_,N]=C.useState(!0),[w,E]=C.useState(null),[R,T]=C.useState(!1);C.useEffect(()=>{const M=async()=>{try{const O=(await Tt(ot(pe,"categories"))).docs.map(L=>({id:L.id,name:L.data().name}));o(O)}catch(I){console.error("Error fetching categories:",I),p("Failed to load categories. Please try again.")}},A=async()=>{try{const I=je(pe,"products",s),O=await Zt(I);if(O.exists()){const L=O.data();n({...L,subImagesBase64:L.subImagesBase64||[],packedDate:L.packedDate||"",expiryDate:L.expiryDate||"",imported:L.imported||!1,organic:L.organic===!0||L.organic==="Yes",shelfLife:L.shelfLife||""}),f(L.imageBase64||null)}else p("Product not found.")}catch(I){p("Failed to fetch product: "+I.message)}finally{N(!1)}};M(),A()},[s]);const k=M=>{const{name:A,value:I,type:O,checked:L}=M.target;if(n(O==="checkbox"?z=>({...z,[A]:L}):z=>({...z,[A]:I})),A==="originalPrice"||A==="offer"){const z=parseFloat(A==="originalPrice"?I:t.originalPrice),V=parseFloat(A==="offer"?I:t.offer);if(!isNaN(z)&&!isNaN(V)){const ye=z-z*V/100;n(_e=>({..._e,salePrice:ye.toFixed(2)}))}}h&&p(""),x&&v("")},P=M=>{const A=M.target.files[0];if(!A)return;const I=new FileReader;I.onloadend=()=>{n(O=>({...O,imageBase64:I.result})),f(I.result)},I.readAsDataURL(A)},H=M=>{const A=Array.from(M.target.files);A.length!==0&&A.forEach(I=>{const O=new FileReader;O.onloadend=()=>{n(L=>({...L,subImagesBase64:[...L.subImagesBase64,O.result]}))},O.readAsDataURL(I)})},B=M=>{n(A=>({...A,subImagesBase64:A.subImagesBase64.filter((I,O)=>O!==M)}))},G=async M=>{if(M.preventDefault(),!t.name||!t.imageBase64||!t.originalPrice){p("Please fill all required fields."),window.scrollTo(0,0);return}try{T(!0);const A=je(pe,"products",s);await ze(A,t),v("Product updated successfully!"),setTimeout(()=>{e("/dashboard/view-product")},1500)}catch(A){p("Failed to update product: "+A.message),window.scrollTo(0,0)}finally{T(!1)}};return _?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500 mb-4"}),a.jsx("div",{className:"text-lg text-gray-600",children:"Loading product..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs(Pe,{to:"/dashboard/view-product",className:"flex items-center text-gray-600 hover:text-gray-900 mr-6",children:[a.jsx(Nl,{size:20,className:"mr-2"}),"Back to Products"]}),a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Edit Product"})]}),a.jsxs("button",{onClick:G,disabled:R,className:`flex items-center px-4 py-2 rounded-md text-white transition-colors ${R?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[a.jsx(WE,{size:18,className:"mr-2"}),R?"Saving...":"Save Changes"]})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[h&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-md flex items-start",children:[a.jsx(Qw,{size:20,className:"text-red-500 mr-3 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-red-800 font-medium",children:"Error"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:h})]})]}),x&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-md flex items-start",children:[a.jsx(Qw,{size:20,className:"text-green-500 mr-3 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-green-800 font-medium",children:"Success"}),a.jsx("p",{className:"text-green-700 text-sm mt-1",children:x})]})]}),a.jsxs("form",{onSubmit:G,className:"space-y-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Basic Information"})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Product Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:t.name,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),a.jsx("input",{type:"text",name:"brand",value:t.brand,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"category",name:"category",required:!0,value:t.category||"",onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[a.jsx("option",{value:"",children:"Select Category"}),r.map(M=>a.jsx("option",{value:M.name,children:M.name},M.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{name:"description",value:t.description,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:4,placeholder:"Enter product description..."})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Product Images"})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Main Product Image ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:[u?a.jsxs("div",{className:"relative mb-4 md:mb-0",children:[a.jsx("div",{className:"h-48 w-48 rounded-lg overflow-hidden shadow-sm border border-gray-200",children:a.jsx("img",{src:u,alt:"Preview",className:"h-full w-full object-cover cursor-pointer",onClick:()=>E(u)})}),a.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:()=>{f(null),n(M=>({...M,imageBase64:""}))},children:a.jsx(qs,{size:14})})]}):a.jsx("div",{className:"h-48 w-48 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center mb-4 md:mb-0",children:a.jsxs("div",{className:"text-center",children:[a.jsx(fm,{size:36,className:"mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No image selected"})]})}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"main-image",className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[a.jsx(z0,{size:16,className:"mr-2"}),u?"Change Image":"Upload Image"]}),a.jsx("input",{id:"main-image",type:"file",accept:"image/*",onChange:P,className:"sr-only"}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Recommended size: 800x800 pixels"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Additional Images"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"sub-images",className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer inline-block",children:[a.jsx(z0,{size:16,className:"mr-2"}),"Add More Images"]}),a.jsx("input",{id:"sub-images",type:"file",accept:"image/*",onChange:H,multiple:!0,className:"sr-only"})]}),t.subImagesBase64.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Additional Images (",t.subImagesBase64.length,"):"]}),a.jsx("div",{className:"flex flex-wrap gap-4",children:t.subImagesBase64.map((M,A)=>a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-24 w-24 rounded-lg overflow-hidden shadow-sm border border-gray-200",children:a.jsx("img",{src:M,alt:`Sub image ${A+1}`,className:"h-full w-full object-cover cursor-pointer",onClick:()=>E(M)})}),a.jsx("button",{type:"button",onClick:()=>B(A),className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow-md hover:bg-gray-100",children:a.jsx(qs,{size:14})})]},A))})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Pricing"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Original Price (₹) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx("input",{type:"number",name:"originalPrice",value:t.originalPrice,onChange:k,className:"w-full pl-7 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,min:"0",step:"0.01"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",name:"offer",value:t.offer,onChange:k,className:"w-full pr-9 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",min:"0",max:"100",step:"0.01"}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sale Price (₹)"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx("input",{type:"number",name:"salePrice",value:t.salePrice,readOnly:!0,className:"w-full pl-7 p-2 border border-gray-200 rounded-md bg-gray-50 text-gray-700"})]})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Additional Details"})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packed Date"}),a.jsx("input",{type:"date",name:"packedDate",value:t.packedDate,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),a.jsx("input",{type:"date",name:"expiryDate",value:t.expiryDate,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shelf Life (days)"}),a.jsx("input",{type:"number",name:"shelfLife",value:t.shelfLife,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Product Attributes"}),a.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"organic",name:"organic",checked:t.organic,onChange:k,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"organic",className:"ml-2 block text-sm text-gray-700",children:"Organic"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"imported",name:"imported",checked:t.imported,onChange:k,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"imported",className:"ml-2 block text-sm text-gray-700",children:"Imported"})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[a.jsx(Pe,{to:"/dashboard/view-product",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:R,className:`px-6 py-2 rounded-md text-white transition-colors ${R?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:R?"Saving...":"Save Changes"})]})]})]}),w&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center",onClick:()=>E(null),children:a.jsxs("div",{className:"relative bg-white p-4 rounded-lg max-w-3xl max-h-[90vh] overflow-auto",onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:()=>E(null),className:"absolute top-2 right-2 text-gray-600 hover:text-red-600 text-lg font-bold",children:"✕"}),a.jsx("img",{src:w,alt:"Preview",className:"w-full h-auto rounded"})]})})]})},l8=()=>{const[s,e]=C.useState(null),[t,n]=C.useState(!1),[r,o]=C.useState(!1),[u,f]=C.useState([]),{currentUser:h,signInWithGoogle:p,logout:x}=rn(),[v,_]=C.useState([]),[N,w]=C.useState(!1),[E,R]=C.useState([]),[T,k]=C.useState("All Products"),[P,H]=C.useState(!1),[B,G]=C.useState([]),[M,A]=C.useState(""),I=es(),[O,L]=C.useState({address:"Round North, Kodaly, Kerala",deliveryTime:"9 mins"}),[z,V]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const ce=(await Tt(ot(pe,"products"))).docs.map(Ne=>({id:Ne.id,...Ne.data()}));R(ce)}catch(Y){console.error("Error fetching products:",Y)}})()},[]);const ye=()=>{let be=T==="All Products"?E:E.filter(Y=>Y.category===T);if(M&&M.trim().length>0){const Y=M.toLowerCase().trim();be=be.filter(ce=>{var Ne;return ce.name&&ce.name.toLowerCase().includes(Y)||ce.category&&ce.category.toLowerCase().includes(Y)||ce.description&&((Ne=ce.description)==null?void 0:Ne.toLowerCase().includes(Y))})}return be};C.useEffect(()=>{(async()=>{try{const ce=(await Tt(ot(pe,"categories"))).docs.map(Ne=>({id:Ne.id,...Ne.data()}));_([{id:"all",name:"All Products",imageBase64:bv},...ce])}catch(Y){console.error("Error fetching categories:",Y)}})()},[]);const _e=async()=>{try{await p(),n(!1)}catch(be){console.error("Google Sign-In Error:",be)}},K=async()=>{await x(),w(!1),f([]),G([])};C.useEffect(()=>{h!=null&&h.cartItems?f(h.cartItems):f([]),h!=null&&h.wishlist?G(h.wishlist):G([])},[h]);const oe=async be=>{if(!h){n(!0);return}try{const Y=[...u],ce=Y.findIndex(Ne=>Ne.id===be.id);ce>=0?Y[ce].quantity+=1:Y.push({...be,quantity:1,addedAt:new Date().toISOString()}),await ze(je(pe,"users",h.uid),{cartItems:Y}),f(Y)}catch(Y){console.error("Error adding to cart:",Y)}};C.useEffect(()=>{window.scrollTo(0,0)},[]);const le=async be=>{if(h)try{const Y=await Zt(je(pe,"users",h.uid));if(Y.exists()){const Ne=(Y.data().cartItems||[]).filter(de=>de.id!==be);await ze(je(pe,"users",h.uid),{cartItems:Ne}),f(Ne)}}catch(Y){console.error("Error removing from cart:",Y)}},we=async(be,Y)=>{if(h!=null&&h.uid)try{const ce=u.map(Ne=>Ne.id===be?{...Ne,quantity:Y}:Ne);await ze(je(pe,"users",h.uid),{cartItems:ce}),f(ce)}catch(ce){console.error("Error updating quantity:",ce)}},F=async be=>{try{const Y=u.filter(ce=>ce.id!==be);h!=null&&h.uid&&await ze(je(pe,"users",h.uid),{cartItems:Y}),f(Y)}catch(Y){console.error("Error removing item:",Y)}},re=async be=>{if(!h){n(!0);return}try{H(!0);const Y=await Zt(je(pe,"users",h.uid));Y.exists()&&((Y.data().wishlist||[]).some(de=>de.id===be.id)?(await ze(je(pe,"users",h.uid),{wishlist:hc(be)}),G(de=>de.filter(W=>W.id!==be.id))):(await ze(je(pe,"users",h.uid),{wishlist:dc(be)}),G(de=>[...de,be])))}catch(Y){console.error("Error toggling wishlist:",Y)}finally{H(!1)}},ve=be=>{const Y=[],ce=Math.floor(be),Ne=be%1>=.5;for(let de=0;de<5;de++)de<ce?Y.push(a.jsx("span",{className:"text-yellow-400",children:"★"},de)):de===ce&&Ne?Y.push(a.jsx("span",{className:"text-yellow-400",children:"★"},de)):Y.push(a.jsx("span",{className:"text-gray-300",children:"★"},de));return a.jsx("div",{className:"flex text-xs",children:Y})},ge=()=>{h?o(!0):n(!0)};C.useEffect(()=>{(async()=>{if(h!=null&&h.uid){V(!0);try{const Y=await Zt(je(pe,"users",h.uid));Y.exists()&&Y.data().location&&L(Y.data().location)}catch(Y){console.error("Error fetching user location:",Y)}finally{V(!1)}}})()},[h]);const Ae=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>w(!N),className:"flex items-center space-x-2 cursor-pointer group",children:[h!=null&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(h==null?void 0:h.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:K,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),ke=()=>t?a.jsx("div",{className:"fixed inset-0 bg-transparent z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-50 rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>n(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jd,{className:"text-white text-3xl"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:_e,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-[#fff] transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>n(!1),className:"w-full text-[#fff] border border-[#fff] py-3 rounded-lg hover:bg-[#fff] hover:text-black hover:bg-opacity-10 hover:border-[#fff] transition duration-200 font-medium",children:"Cancel"})]})]})}):null,Ce=()=>{if(!r)return null;const be=()=>u.reduce((Y,ce)=>Y+ce.salePrice*ce.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",u.length>0?`(${u.length})`:""]}),a.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),u.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>o(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.map(Y=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:Y.imageBase64||Xs,alt:Y.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:Y.name}),a.jsx("p",{className:"text-xs text-gray-500",children:Y.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",Y.salePrice||Y.originalPrice]}),Y.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",Y.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>F(Y.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>we(Y.id,Math.max(1,Y.quantity-1)),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:Y.quantity}),a.jsx("button",{onClick:()=>we(Y.id,Y.quantity+1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},Y.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",be()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",be()+40]})]}),a.jsx("button",{onClick:()=>I("/order-confirm"),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})};ye();const dt=ye();return a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsxs("div",{className:"bg-gray-50 flex items-center gap-2 px-4 py-3 rounded-lg border border-gray-200 focus-within:border-blue-400 focus-within:ring-2 focus-within:ring-blue-100 transition-all w-1/3",children:[a.jsx(hr,{size:20,className:"text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search for products...",className:"bg-transparent outline-none w-full text-gray-700",value:M,onChange:be=>A(be.target.value)})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[h?a.jsx(Ae,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>n(!0),children:[a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:ge,children:[a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Your"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Cart"})]})]})]})]})}),a.jsxs("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Pe,{to:"/",className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!h&&n(!0),children:h&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>w(!N)}):a.jsx(ys,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:ge,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]})]})]}),N&&h&&a.jsxs("div",{className:"absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:K,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),a.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4 backdrop-blur-sm flex items-center",children:[a.jsxs("div",{className:"flex flex-col flex-1",children:[a.jsxs("div",{className:"text-white font-bold flex items-center",children:[a.jsx("span",{className:"mr-2",children:"Delivery in 9 mins"}),a.jsx("span",{className:"bg-white text-[#1a7e74] text-xs px-2 py-0.5 rounded-full",children:"FAST"})]}),a.jsxs("div",{className:"flex items-center text-sm md:text-white text-black",children:[a.jsx("span",{children:"Round North, Kodaly, Kerala"}),a.jsx(Js,{size:14,className:"ml-1"})]})]}),a.jsx("div",{className:"bg-white px-3 py-1 rounded-lg text-[#1a7e74] font-medium text-sm",children:"Change"})]}),a.jsxs("div",{className:"bg-gray-50 flex items-center gap-2 px-4 py-3 mb-2 rounded-lg border border-gray-200 focus-within:border-blue-400 focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[a.jsx(hr,{size:20,className:"text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search for products...",className:"bg-transparent outline-none w-full text-gray-700",value:M,onChange:be=>A(be.target.value)})]})]}),a.jsx(ke,{}),a.jsx(Ce,{}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hover:text-blue-500",children:a.jsx(Pe,{to:"/",children:"Home"})}),a.jsx("div",{children:a.jsx(Sd,{className:"text-lg"})}),a.jsx("div",{children:"All Products"})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:T==="All "?"All Products":T}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:dt.map(be=>a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all",onMouseEnter:()=>e(be.id),onMouseLeave:()=>e(null),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:be.imageBase64||Xs,alt:be.name,className:"w-full h-40 object-cover"}),be.offer>0&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[be.offer,"% OFF"]}),s===be.id&&a.jsx("button",{onClick:()=>re(be),disabled:P,className:`absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-colors ${B.some(Y=>Y.id===be.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:a.jsx(lr,{size:16,fill:B.some(Y=>Y.id===be.id)?"currentColor":"none"})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:be.name}),a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:be.weight}),ve(be.rating||4),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",be.salePrice||be.originalPriceprice]}),be.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",be.originalPrice]})]}),a.jsx("button",{onClick:()=>{u.some(ce=>ce.id===be.id)?le(be.id):oe(be)},className:`w-full rounded-lg py-2 mt-3 text-sm font-medium transition-colors flex items-center justify-center ${u.some(Y=>Y.id===be.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u.some(Y=>Y.id===be.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})})]})]},be.id))})]}),a.jsx(ke,{}),a.jsx(Ce,{})]})},o8=()=>{const[s,e]=C.useState(null),[t,n]=C.useState(!1),[r,o]=C.useState(!1),[u,f]=C.useState([]),{currentUser:h,signInWithGoogle:p,logout:x}=rn(),[v,_]=C.useState([]),[N,w]=C.useState(!1),[E,R]=C.useState([]),[T,k]=C.useState(!0),{categoryName:P}=Jo(),[H,B]=C.useState(""),G=es(),[M,A]=C.useState(decodeURIComponent(P)),[I,O]=C.useState([]),[L,z]=C.useState({address:"Round North, Kodaly, Kerala",deliveryTime:"9 mins"}),[V,ye]=C.useState(!1);C.useEffect(()=>{window.scrollTo(0,0)},[M]),C.useEffect(()=>{(async()=>{k(!0);try{const Ne=(await Tt(ot(pe,"products"))).docs.map(de=>({id:de.id,...de.data()}));R(Ne)}catch(ce){console.error("Error fetching products:",ce)}finally{k(!1)}})()},[]);const _e=()=>{let Y=M==="All Products"?E:E.filter(ce=>ce.category===M);if(H&&H.trim().length>0){const ce=H.toLowerCase().trim();Y=Y.filter(Ne=>{var de;return Ne.name&&Ne.name.toLowerCase().includes(ce)||Ne.category&&Ne.category.toLowerCase().includes(ce)||Ne.description&&((de=Ne.description)==null?void 0:de.toLowerCase().includes(ce))})}return Y};C.useEffect(()=>{(async()=>{try{const Ne=(await Tt(ot(pe,"categories"))).docs.map(de=>({id:de.id,...de.data()}));_([{id:"all",name:"All Products",imageBase64:bv},...Ne])}catch(ce){console.error("Error fetching categories:",ce)}})()},[]),C.useEffect(()=>{h!=null&&h.cartItems?f(h.cartItems):f([]),h!=null&&h.wishlist?O(h.wishlist):O([])},[h]);const K=async()=>{try{await p(),n(!1)}catch(Y){console.error("Google Sign-In Error:",Y)}},oe=async()=>{await x(),w(!1),f([]),O([])},le=async Y=>{if(!h){n(!0);return}try{const ce=[...u],Ne=ce.findIndex(de=>de.id===Y.id);if(Ne>=0)ce[Ne].quantity+=1;else{const de={id:Y.id,name:Y.name,originalPrice:Y.originalPrice,salePrice:Y.salePrice,offer:Y.offer,category:Y.category,imageBase64:Y.imageBase64,quantity:1,addedAt:new Date().toISOString()},W=await od(de);ce.push(W)}await ze(je(pe,"users",h.uid),{cartItems:ce}),f(ce)}catch(ce){console.error("Error adding to cart:",ce)}},we=async Y=>{if(h)try{const ce=u.filter(Ne=>Ne.id!==Y);await ze(je(pe,"users",h.uid),{cartItems:ce}),f(ce)}catch(ce){console.error("Error removing from cart:",ce)}},F=async(Y,ce)=>{if(h!=null&&h.uid)try{const Ne=u.map(de=>de.id===Y?{...de,quantity:ce}:de);await ze(je(pe,"users",h.uid),{cartItems:Ne}),f(Ne)}catch(Ne){console.error("Error updating quantity:",Ne)}},re=async Y=>{try{const ce=u.filter(Ne=>Ne.id!==Y);h!=null&&h.uid&&await ze(je(pe,"users",h.uid),{cartItems:ce}),f(ce)}catch(ce){console.error("Error removing item:",ce)}},ve=async Y=>{if(!h){n(!0);return}try{if(k(!0),I.some(Ne=>Ne.id===Y.id))await ze(je(pe,"users",h.uid),{wishlist:hc(Y)}),O(Ne=>Ne.filter(de=>de.id!==Y.id));else{const Ne={id:Y.id,name:Y.name,originalPrice:Y.originalPrice,salePrice:Y.salePrice,offer:Y.offer,category:Y.category,imageBase64:Y.imageBase64},de=await od(Ne);await ze(je(pe,"users",h.uid),{wishlist:dc(de)}),O(W=>[...W,de])}}catch(ce){console.error("Error toggling wishlist:",ce)}finally{k(!1)}},ge=Y=>{const ce=[],Ne=Math.floor(Y),de=Y%1>=.5;for(let W=0;W<5;W++)W<Ne?ce.push(a.jsx("span",{className:"text-yellow-400",children:"★"},W)):W===Ne&&de?ce.push(a.jsx("span",{className:"text-yellow-400",children:"★"},W)):ce.push(a.jsx("span",{className:"text-gray-300",children:"★"},W));return a.jsx("div",{className:"flex text-xs",children:ce})},Ae=()=>{h?o(!0):n(!0)};C.useEffect(()=>{(async()=>{if(h!=null&&h.uid){ye(!0);try{const ce=await Zt(je(pe,"users",h.uid));ce.exists()&&ce.data().location&&z(ce.data().location)}catch(ce){console.error("Error fetching user location:",ce)}finally{ye(!1)}}})()},[h]);const ke=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>w(!N),className:"flex items-center space-x-2 cursor-pointer group",children:[h!=null&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(h==null?void 0:h.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:oe,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),Ce=()=>t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md shadow-xl p-6 transform transition-all",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx("span",{className:"text-2xl",children:"👤"})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:K,className:"w-full flex items-center justify-center gap-2 border border-gray-300 rounded-lg py-3 px-4 text-gray-700 hover:bg-gray-50 transition duration-200 mb-4",children:[a.jsx(br,{size:24}),a.jsx("span",{children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>n(!1),className:"w-full text-gray-600 py-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200",children:"Cancel"})]})]})}):null,dt=()=>{if(!r)return null;const Y=()=>u.reduce((ce,Ne)=>ce+Ne.salePrice*Ne.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",u.length>0?`(${u.length})`:""]}),a.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),u.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>o(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.map(ce=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:ce.imageBase64||Xs,alt:ce.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:ce.name}),a.jsx("p",{className:"text-xs text-gray-500",children:ce.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",ce.salePrice||ce.originalPrice]}),ce.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",ce.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>re(ce.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>F(ce.id,Math.max(1,ce.quantity-1)),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:ce.quantity}),a.jsx("button",{onClick:()=>F(ce.id,ce.quantity+1),className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},ce.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",Y()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",Y()+40]})]}),a.jsx("button",{onClick:()=>G("/order-confirm"),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})},be=_e();return a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-16",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs(Pe,{to:"/",className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsxs("div",{className:"bg-gray-50 flex items-center gap-2 px-4 py-3 rounded-lg border border-gray-200 focus-within:border-blue-400 focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[a.jsx(hr,{size:20,className:"text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search for products...",className:"bg-transparent outline-none w-full text-gray-700",value:H,onChange:Y=>B(Y.target.value)})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[h?a.jsx(ke,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>n(!0),children:[a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:Ae,children:[a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Your"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Cart"})]})]}),a.jsx("div",{className:"flex items-center space-x-2 cursor-pointer group",children:a.jsxs(Pe,{to:"/login",className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:a.jsx(pv,{className:"text-xl text-[#1a7e74]"})}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Login"})]})})]})]})}),a.jsxs("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Pe,{to:"/",className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!h&&n(!0),children:h&&h.photoURL?a.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>w(!N)}):a.jsx(ys,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:Ae,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),u.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u.length})]})]})]}),N&&h&&a.jsxs("div",{className:"absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:h==null?void 0:h.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:h==null?void 0:h.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:oe,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),a.jsx("div",{className:"relative w-full mb-4",children:a.jsxs("div",{className:"flex items-center bg-white rounded-lg px-3 py-2 shadow-sm border border-gray-200",children:[a.jsx(hr,{size:18,className:"text-gray-400 mr-2"}),a.jsx("input",{type:"text",placeholder:"Search for fruits, vegetables, groceries...",className:"flex-1 outline-none text-gray-700 text-sm",value:H,onChange:Y=>B(Y.target.value)}),H&&a.jsx("button",{onClick:()=>B(""),className:"text-gray-400",children:a.jsx(qs,{size:16})})]})}),a.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2 scrollbar-hide",children:v.map(Y=>a.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${M===Y.name?"text-white":"text-white text-opacity-90 hover:text-opacity-100"}`,onClick:()=>A(Y.name),children:[a.jsx("div",{className:`mb-2 w-14 h-14 rounded-full flex items-center justify-center shadow-md bg-white ${M===Y.name?"border-2 border-white":""}`,children:Y.imageBase64&&a.jsx("img",{src:Y.imageBase64,alt:Y.name,className:"w-full h-full object-cover rounded-full"})}),a.jsx("span",{className:"text-xs font-medium whitespace-nowrap text-center",children:Y.name})]},Y.id))})]}),a.jsx(Ce,{}),a.jsx(dt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hover:text-blue-500",children:a.jsx(Pe,{to:"/",children:"Home"})}),a.jsx("div",{children:a.jsx(Sd,{className:"text-lg"})}),a.jsx("div",{children:M})]}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:M})}),T?a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):be.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"text-5xl mb-4",children:"😕"}),a.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No Products Found"}),a.jsx("p",{className:"text-gray-500",children:"Try selecting a different category or check back later."})]}):a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:be.map(Y=>a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all",onMouseEnter:()=>e(Y.id),onMouseLeave:()=>e(null),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:Y.imageBase64||Xs,alt:Y.name,className:"w-full h-40 md:h-44 object-cover"}),Y.offer>0&&a.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium",children:[Y.offer,"% OFF"]}),s===Y.id&&a.jsx("button",{onClick:()=>ve(Y),disabled:T,className:`absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-colors ${I.some(ce=>ce.id===Y.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:a.jsx(lr,{size:16,fill:I.some(ce=>ce.id===Y.id)?"currentColor":"none"})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:Y.name}),a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:Y.weight}),ge(Y.rating||4),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:"font-bold text-gray-900",children:["₹",Y.salePrice||Y.price]}),Y.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through",children:["₹",Y.originalPrice]})]}),a.jsx("button",{onClick:()=>{u.some(Ne=>Ne.id===Y.id)?we(Y.id):le(Y)},className:`w-full rounded-lg py-2 mt-3 text-sm font-medium transition-colors flex items-center justify-center ${u.some(ce=>ce.id===Y.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u.some(ce=>ce.id===Y.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"}),"Add to Cart"]})})]})]},Y.id))})]})]})},c8=()=>{var Ne;const{productId:s}=Jo(),[e,t]=C.useState(null),[n,r]=C.useState(!0),[o,u]=C.useState(null),[f,h]=C.useState(1),[p,x]=C.useState(!1),[v,_]=C.useState(!1),[N,w]=C.useState([]),[E,R]=C.useState(!1),{currentUser:T,signInWithGoogle:k,logout:P}=rn(),[H,B]=C.useState([]),G=es(),[M,A]=C.useState([]),[I,O]=C.useState(null),[L,z]=C.useState([]),[V,ye]=C.useState({address:"Round North, Kodaly, Kerala",deliveryTime:"9 mins"}),[_e,K]=C.useState(!1);C.useEffect(()=>{s&&(async()=>{try{r(!0);const W=je(pe,"products",s),se=await Zt(W);se.exists()?t({id:se.id,...se.data()}):u("Product not found")}catch(W){console.error("Error fetching product:",W),u("Failed to load product details")}finally{r(!1)}})()},[s]),C.useEffect(()=>{e&&(O(e.imageBase64),z(e.subImages||[]))},[e]),C.useEffect(()=>{T!=null&&T.cartItems?w(T.cartItems):w([]),T!=null&&T.wishlist?B(T.wishlist):B([])},[T]),C.useEffect(()=>{(async()=>{try{const se=(await Tt(ot(pe,"products"))).docs.map(ie=>({id:ie.id,...ie.data()}));A(se)}catch(W){console.error("Error fetching all products:",W)}})()},[]);const oe=()=>{f>1&&h(f-1)},le=()=>{h(f+1)},we=async()=>{if(!T){x(!0);return}try{const de=[...N],W=de.findIndex(se=>se.id===e.id);if(W>=0)de.splice(W,1);else{const se={id:e.id,name:e.name,originalPrice:e.originalPrice,salePrice:e.salePrice,offer:e.offer,category:e.category,imageBase64:e.imageBase64,quantity:f,addedAt:new Date().toISOString()},ie=await od(se);de.push(ie)}await ze(je(pe,"users",T.uid),{cartItems:de}),w(de)}catch(de){console.error("Error updating cart:",de)}},F=async de=>{if(T)try{const W=N.filter(se=>se.id!==de);await ze(je(pe,"users",T.uid),{cartItems:W}),w(W)}catch(W){console.error("Error removing from cart:",W)}};C.useEffect(()=>{window.scrollTo(0,0)},[s]);const re=async()=>{if(!T){x(!0);return}try{if(r(!0),H.some(W=>W.id===e.id))await ze(je(pe,"users",T.uid),{wishlist:hc(e)}),B(W=>W.filter(se=>se.id!==e.id));else{const W={id:e.id,name:e.name,originalPrice:e.originalPrice,salePrice:e.salePrice,offer:e.offer,category:e.category,imageBase64:e.imageBase64},se=await od(W);await ze(je(pe,"users",T.uid),{wishlist:dc(se)}),B(ie=>[...ie,se])}}catch(de){console.error("Error toggling wishlist:",de)}finally{r(!1)}},ve=()=>{T?_(!0):x(!0)},ge=async de=>{try{const W=N.filter(se=>se.id!==de);await ze(je(pe,"users",T.uid),{cartItems:W}),w(W)}catch(W){console.error("Error removing item:",W)}},Ae=async()=>{try{await k(),x(!1)}catch(de){console.error("Google Sign-In Error:",de)}};C.useEffect(()=>{(async()=>{if(T!=null&&T.uid){K(!0);try{const W=await Zt(je(pe,"users",T.uid));W.exists()&&W.data().location&&ye(W.data().location)}catch(W){console.error("Error fetching user location:",W)}finally{K(!1)}}})()},[T]);const ke=async()=>{await P(),R(!1),w([])},Ce=de=>{const W=[],se=Math.floor(de),ie=de%1>=.5;for(let xe=0;xe<5;xe++)xe<se?W.push(a.jsx("span",{className:"text-yellow-400",children:"★"},xe)):xe===se&&ie?W.push(a.jsx("span",{className:"text-yellow-400",children:"★"},xe)):W.push(a.jsx("span",{className:"text-gray-300",children:"★"},xe));return a.jsx("div",{className:"flex text-sm",children:W})},dt=M.filter(de=>de.category===(e==null?void 0:e.category)&&de.id!==(e==null?void 0:e.id)),be=()=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{onClick:()=>R(!E),className:"flex items-center space-x-2 cursor-pointer group",children:[T!=null&&T.photoURL?a.jsx("img",{src:T.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-200"}):a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Hello,"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:(T==null?void 0:T.displayName)||"My Account"})]}),a.jsx(Js,{size:16,className:"text-gray-500"})]}),E&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold",children:T==null?void 0:T.displayName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:T==null?void 0:T.email})]}),a.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),a.jsx("a",{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),a.jsx("a",{href:"/wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Wishlist"}),a.jsx("button",{onClick:ke,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),Y=()=>p?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#39B2A7] bg-opacity-90 rounded-xl w-full max-w-md shadow-xl p-6 transform transition-all border-t-4 border-[#2e978e]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sign in to Zepto"}),a.jsx("button",{onClick:()=>x(!1),className:"text-white hover:text-gray-700 bg-gray-100 rounded-full p-2 w-8 h-8 flex items-center justify-center transition-colors",children:"✖"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#65D2CD] flex items-center justify-center mb-4",children:a.jsx(jd,{className:"text-white text-3xl"})}),a.jsx("p",{className:"text-center text-white mb-6",children:"Sign in to access your cart, save favorites, and check out faster!"}),a.jsxs("button",{onClick:Ae,className:"w-full flex items-center justify-center gap-2 border hover:text-black border-white rounded-lg py-3.5 px-4 text-white hover:bg-white transition duration-200 mb-4 shadow-sm",children:[a.jsx(br,{size:24}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),a.jsx("button",{onClick:()=>x(!1),className:"w-full text-white border border-white py-3 rounded-lg hover:bg-white hover:text-black hover:bg-opacity-10 transition duration-200 font-medium",children:"Cancel"})]})]})}):null,ce=()=>{if(!v)return null;const de=()=>N.reduce((W,se)=>W+se.salePrice*se.quantity,0);return a.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-50 z-50 flex items-center justify-center md:justify-end",children:a.jsxs("div",{className:"w-full md:w-1/4 h-full md:h-screen bg-white md:shadow-lg transform transition-transform duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Cart ",N.length>0?`(${N.length})`:""]}),a.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full p-2",children:a.jsx(qs,{size:18})})]}),N.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mb-4",children:a.jsx(bt,{size:24})}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Your cart is empty"}),a.jsx("button",{onClick:()=>_(!1),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:N.map(W=>a.jsxs("div",{className:"flex items-center py-4 border-b border-gray-100",children:[a.jsx("img",{src:W.imageBase64||Xs,alt:W.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:W.name}),a.jsx("p",{className:"text-xs text-gray-500",children:W.weight}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",W.salePrice||W.originalPrice]}),W.originalPrice&&a.jsxs("span",{className:"text-gray-400 text-xs line-through ml-2",children:["₹",W.originalPrice]})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("button",{onClick:()=>ge(W.id),className:"text-gray-400 hover:text-red-500 mb-2",children:a.jsx(Qn,{size:16})}),a.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[a.jsx("button",{className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"px-2 text-gray-800",children:W.quantity}),a.jsx("button",{className:"px-2 py-1 text-gray-500 hover:text-blue-600",children:a.jsx(kn,{size:16})})]})]})]},W.id))}),a.jsxs("div",{className:"border-t border-gray-100 p-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold",children:["₹",de()]})]}),a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Delivery"}),a.jsx("span",{className:"font-semibold",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Discount"}),a.jsx("span",{className:"font-semibold text-green-600",children:"-₹0"})]}),a.jsxs("div",{className:"flex justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold",children:["₹",de()+40]})]}),a.jsx("button",{onClick:()=>G("/order-confirm"),className:"w-full bg-[#1a7e74] text-white py-3 rounded-lg hover:bg-[#145f5a] transition duration-200",children:"Proceed to Checkout"})]})]})]})})};return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):o?a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:o}),a.jsx("button",{onClick:()=>G("/"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Back to Home"})]}):e?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-1"}),a.jsx("div",{className:"hidden md:block bg-white py-4 shadow-sm",children:a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs(Pe,{to:"/",className:"text-blue-600 text-3xl font-bold flex items-center",children:["zepto",a.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-medium ml-3",children:"SUPER SAVER"})]})}),a.jsxs("div",{className:"flex items-center space-x-6",children:[T?a.jsx(be,{}):a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>x(!0),children:[a.jsx(ys,{className:"text-2xl text-gray-700 group-hover:text-blue-600 transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sign in"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"My Account"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:ve,children:[a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),N.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:N.length})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Your"}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Cart"})]})]}),a.jsx("div",{className:"flex items-center space-x-2 cursor-pointer group",children:a.jsxs(Pe,{to:"/login",className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",children:a.jsx(pv,{className:"text-xl text-[#1a7e74]"})}),a.jsx("span",{className:"text-sm font-medium group-hover:text-blue-600 transition-colors",children:"Login"})]})})]})]})}),a.jsx("div",{className:"md:hidden bg-gradient-to-r from-[#65D2CD] to-[#2CAA9E] p-4",children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Pe,{to:"/",className:"bg-white text-[#1a7e74] px-4 py-2 rounded-lg font-bold text-xl shadow-md",children:"zepto"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md",onClick:()=>!T&&x(!0),children:T&&T.photoURL?a.jsx("img",{src:T.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full",onClick:()=>R(!E)}):a.jsx(ys,{className:"text-xl text-[#1a7e74]"})}),a.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-md relative",onClick:ve,children:[a.jsx(bt,{className:"text-xl text-[#1a7e74]"}),N.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:N.length})]})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center text-sm mb-4",children:[a.jsx(Pe,{to:"/",className:"text-gray-500 hover:text-blue-600",children:"Home"}),a.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),a.jsx(Pe,{to:`/category/${e.category}`,className:"text-gray-500 hover:text-blue-600",children:e.category}),a.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),a.jsx("span",{className:"text-gray-800 font-medium truncate max-w-[150px]",children:e.name})]}),a.jsxs("button",{onClick:()=>G(-1),className:"flex items-center mb-4 text-gray-600 hover:text-blue-600 md:hidden",children:[a.jsx(Nl,{size:16,className:"mr-1"})," Back"]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"md:w-1/3 w-full p-4 md:p-6 bg-gray-50",children:[a.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-white flex items-center justify-center mb-4",children:a.jsx("img",{src:I||e.imageBase64||Xs,alt:e.name,className:"w-full h-full object-contain"})}),((Ne=e.subImagesBase64)==null?void 0:Ne.length)>0&&a.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[a.jsx("div",{className:`aspect-square rounded-lg overflow-hidden cursor-pointer border-2 ${I===e.imageBase64?"border-blue-500":"border-gray-200"} hover:border-blue-500 transition-colors`,onClick:()=>O(e.imageBase64),children:a.jsx("img",{src:e.imageBase64,alt:e.name,className:"w-full h-full object-cover"})}),e.subImagesBase64.map((de,W)=>a.jsx("div",{className:`aspect-square rounded-lg overflow-hidden cursor-pointer border-2 ${I===de?"border-blue-500":"border-gray-200"} hover:border-blue-500 transition-colors`,onClick:()=>O(de),children:a.jsx("img",{src:de,alt:`${e.name} - ${W+1}`,className:"w-full h-full object-cover"})},W))]})]}),a.jsxs("div",{className:"md:w-2/3 w-full p-4 md:p-6 md:max-h-[70vh] md:overflow-y-auto",style:{WebkitOverflowScrolling:"touch"},children:[a.jsx("style",{jsx:!0,children:`
                @media (min-width: 768px) {
                  div::-webkit-scrollbar {
                    display: none;
                  }
                }
              `}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-1",children:e.name}),a.jsx("p",{className:"text-gray-500",children:e.weight}),Ce(e.rating||4)]}),a.jsxs("div",{className:"mt-3 md:mt-0 md:text-right",children:[a.jsxs("div",{className:"flex items-center md:justify-end gap-2",children:[a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["₹",e.salePrice||e.originalPrice]}),e.originalPrice&&e.salePrice&&a.jsxs("span",{className:"text-gray-400 text-sm line-through",children:["₹",e.originalPrice]})]}),e.offer>0&&a.jsxs("div",{className:"text-green-600 text-sm font-medium",children:[e.offer,"% OFF"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-600",children:e.description||"Fresh and high-quality product. No description available."})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Quantity"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:oe,className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center text-gray-600 hover:bg-gray-200",children:a.jsx(dl,{size:16})}),a.jsx("span",{className:"w-12 text-center font-semibold",children:f}),a.jsx("button",{onClick:le,className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center text-gray-600 hover:bg-gray-200",children:a.jsx(kn,{size:16})})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("button",{onClick:()=>{N.some(W=>W.id===e.id)?F(e.id):we()},className:`w-full md:w-auto flex-1 rounded-lg py-3 px-6 flex items-center justify-center ${N.some(de=>de.id===e.id)?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:N.some(de=>de.id===e.id)?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Added to Cart"]}):a.jsxs(a.Fragment,{children:[a.jsx(bt,{size:16,className:"mr-2"})," Add to Cart"]})}),a.jsxs("button",{onClick:()=>re(),disabled:n,className:`w-full md:w-auto flex-1 border border-gray-300 hover:border-red-500 hover:text-red-500 rounded-lg py-3 px-6 flex items-center justify-center ${H.some(de=>de.id===e.id)?"bg-red-100 text-red-500":"bg-white text-gray-600 hover:text-red-500"}`,children:[a.jsx(lr,{size:16,fill:H.some(de=>de.id===e.id)?"currentColor":"none"}),"Add to Wishlist"]})]}),a.jsx("div",{className:"mt-8 border-t border-gray-100 pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Product Details"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Category"}),a.jsx("span",{className:"font-medium",children:e.category||"Groceries"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Weight"}),a.jsx("span",{className:"font-medium",children:e.weight||"500g"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Stock"}),a.jsx("span",{className:`font-medium ${e.stock>10?"text-green-600":"text-red-600"}`,children:e.stock>0?`${e.stock} available`:"Out of stock"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Storage"}),a.jsx("span",{className:"font-medium",children:e.storage||"Keep refrigerated"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Delivery Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Delivery Time"}),a.jsx("span",{className:"font-medium text-green-600",children:"9 minutes"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Delivery Fee"}),a.jsx("span",{className:"font-medium",children:"₹40"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Free Delivery"}),a.jsx("span",{className:"font-medium",children:"On orders above ₹200"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Return Policy"}),a.jsx("span",{className:"font-medium",children:"Easy returns within 24 hours"})]})]})]})]})}),a.jsxs("div",{className:"mt-8 border-t border-gray-100 pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Customer Reviews"}),a.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800",children:"View All"})]}),a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsxs("div",{className:"mr-6",children:[a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:e.rating||4.7}),a.jsx("div",{className:"flex mt-1",children:Ce(e.rating||4.7)}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.reviewCount||32," reviews"]})]}),a.jsx("div",{className:"flex-1",children:[5,4,3,2,1].map(de=>a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsxs("div",{className:"flex items-center w-12",children:[a.jsx("span",{className:"text-sm text-gray-600",children:de}),a.jsx("span",{className:"text-yellow-400 ml-1",children:"★"})]}),a.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden ml-2",children:a.jsx("div",{className:"h-full bg-yellow-400",style:{width:`${de===5?"70%":de===4?"20%":de===3?"5%":de===2?"3%":"2%"}`}})}),a.jsx("div",{className:"w-10 text-right text-xs text-gray-500",children:de===5?"70%":de===4?"20%":de===3?"5%":de===2?"3%":"2%"})]},de))})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border-b border-gray-100 pb-6",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold",children:"RK"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"font-medium",children:"Rahul Kumar"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2 days ago"})]})]}),a.jsx("div",{className:"flex mb-2",children:Ce(5)}),a.jsx("p",{className:"text-gray-600",children:"Really fresh and tasty. The quality is excellent and delivery was super quick. Will definitely buy again!"})]}),a.jsxs("div",{className:"border-b border-gray-100 pb-6",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600 font-semibold",children:"PS"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"font-medium",children:"Priya Singh"}),a.jsx("div",{className:"text-xs text-gray-500",children:"1 week ago"})]})]}),a.jsx("div",{className:"flex mb-2",children:Ce(4)}),a.jsx("p",{className:"text-gray-600",children:"Good product but packaging could be improved. The delivery person was very friendly and professional."})]}),a.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Load More Reviews"})]})]})]})]}),a.jsx("div",{className:"p-10",children:dt.length>0&&a.jsxs("div",{className:"mt-12 border-t border-gray-100 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"You May Also Like"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:dt.slice(0,4).map(de=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>G(`/product/${de.id}`),children:[a.jsx("div",{className:"aspect-square bg-white rounded-lg flex items-center justify-center p-2 mb-3",children:a.jsx("img",{src:de.imageBase64||Xs,alt:de.name,className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 text-sm mb-1",children:de.name}),a.jsx("p",{className:"text-xs text-gray-500",children:de.weight||"500g"}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:["₹",de.salePrice]}),a.jsx("button",{className:"bg-blue-50 text-blue-600 p-1 rounded-full hover:bg-blue-100",onClick:W=>{W.stopPropagation(),we()},children:a.jsx(kn,{size:16})})]})]})]},de.id))})]})})]})]}),a.jsx(Y,{}),a.jsx(ce,{})]}):a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-gray-500 mb-4",children:"Product not found"}),a.jsx("button",{onClick:()=>G("/"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Back to Home"})]})};function u8(){const[s,e]=C.useState(1),[t,n]=C.useState("Midnight Black"),[r,o]=C.useState("credit-card"),[u,f]=C.useState(!1),[h,p]=C.useState(""),[x,v]=C.useState(!1),[_,N]=C.useState(!1),w=129.99,E=4.99,R=x?15:0,T=w*s,k=T+E-R,P=[{name:"Midnight Black",hex:"bg-gray-900"},{name:"Ocean Blue",hex:"bg-blue-600"},{name:"Forest Green",hex:"bg-green-700"},{name:"Ruby Red",hex:"bg-red-600"}],H=()=>{s<10&&e(s+1)},B=()=>{s>1&&e(s-1)},G=()=>{h.toLowerCase()==="save15"?(v(!0),N(!1)):(N(!0),v(!1))};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Checkout"}),a.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-12",children:[a.jsx("div",{className:"lg:col-span-7 mb-10 lg:mb-0",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"p-6 sm:p-8 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx("div",{className:"flex-shrink-0 w-full sm:w-32 h-32 mb-4 sm:mb-0",children:a.jsx("div",{className:"bg-gray-100 rounded-lg w-full h-full flex items-center justify-center",children:a.jsx(bt,{size:48,className:"text-gray-500"})})}),a.jsxs("div",{className:"sm:ml-6 flex-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Premium Wireless Headphones"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",w]})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Premium audio experience with noise cancellation"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Color"}),a.jsx("div",{className:"flex items-center space-x-3 mt-2",children:P.map(M=>a.jsx("button",{className:`relative w-8 h-8 rounded-full ${M.hex} focus:outline-none ring-2 ${t===M.name?"ring-blue-500":"ring-transparent"}`,onClick:()=>n(M.name),title:M.name,children:t===M.name&&a.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(M0,{size:16,className:"text-white"})})},M.name))}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:t})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Quantity"}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("button",{onClick:B,className:"text-gray-500 focus:outline-none focus:text-gray-600 p-1 border border-gray-300 rounded-l-md",children:a.jsx(Js,{size:16})}),a.jsx("input",{type:"text",value:s,readOnly:!0,className:"w-12 text-center border-t border-b border-gray-300 py-1"}),a.jsx("button",{onClick:H,className:"text-gray-500 focus:outline-none focus:text-gray-600 p-1 border border-gray-300 rounded-r-md",children:a.jsx(Yw,{size:16})})]})]})]})]})}),a.jsxs("div",{className:"p-6 sm:p-8 border-b border-gray-200",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shipping Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Method"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:`flex items-center p-4 border ${r==="credit-card"?"border-blue-500 bg-blue-50":"border-gray-200"} rounded-lg cursor-pointer`,onClick:()=>o("credit-card"),children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${r==="credit-card"?"border-blue-500":"border-gray-400"} flex items-center justify-center`,children:r==="credit-card"&&a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})}),a.jsxs("div",{className:"ml-3 flex items-center",children:[a.jsx(W4,{size:20,className:"text-gray-500"}),a.jsx("span",{className:"ml-2 font-medium",children:"Credit Card"})]})]}),a.jsxs("div",{className:`flex items-center p-4 border ${r==="paypal"?"border-blue-500 bg-blue-50":"border-gray-200"} rounded-lg cursor-pointer`,onClick:()=>o("paypal"),children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${r==="paypal"?"border-blue-500":"border-gray-400"} flex items-center justify-center`,children:r==="paypal"&&a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})}),a.jsx("div",{className:"ml-3",children:a.jsx("span",{className:"font-medium",children:"PayPal"})})]})]}),r==="credit-card"&&a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),a.jsx("input",{type:"text",placeholder:"XXXX XXXX XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiration Date"}),a.jsx("input",{type:"text",placeholder:"MM/YY",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVC"}),a.jsx("input",{type:"text",placeholder:"XXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]})]})]})}),a.jsx("div",{className:"lg:col-span-5",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),a.jsxs("div",{className:"hidden lg:block",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsxs("p",{className:"text-gray-600",children:["Subtotal (",s," ",s===1?"item":"items",")"]}),a.jsxs("p",{className:"font-medium",children:["$",T.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("p",{className:"text-gray-600",children:"Shipping"}),a.jsxs("p",{className:"font-medium",children:["$",E.toFixed(2)]})]}),x&&a.jsxs("div",{className:"flex justify-between py-2 text-green-600",children:[a.jsx("p",{children:"Discount (SAVE15)"}),a.jsxs("p",{className:"font-medium",children:["-$",R.toFixed(2)]})]}),a.jsxs("div",{className:"border-t border-gray-200 mt-4 pt-4 flex justify-between",children:[a.jsx("p",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("p",{className:"text-lg font-semibold",children:["$",k.toFixed(2)]})]})]}),a.jsxs("div",{className:"lg:hidden",children:[a.jsxs("button",{className:"w-full flex justify-between items-center py-2",onClick:()=>f(!u),children:[a.jsx("span",{className:"font-medium",children:u?"Hide order summary":"Show order summary"}),a.jsxs("span",{className:"text-lg font-semibold",children:["$",k.toFixed(2)]}),u?a.jsx(Yw,{size:20}):a.jsx(Js,{size:20})]}),u&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsxs("p",{className:"text-gray-600",children:["Subtotal (",s," ",s===1?"item":"items",")"]}),a.jsxs("p",{className:"font-medium",children:["$",T.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("p",{className:"text-gray-600",children:"Shipping"}),a.jsxs("p",{className:"font-medium",children:["$",E.toFixed(2)]})]}),x&&a.jsxs("div",{className:"flex justify-between py-2 text-green-600",children:[a.jsx("p",{children:"Discount (SAVE15)"}),a.jsxs("p",{className:"font-medium",children:["-$",R.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"h-px flex-1 bg-gray-200"}),a.jsx("span",{className:"px-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"h-px flex-1 bg-gray-200"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",placeholder:"Promo code",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:h,onChange:M=>p(M.target.value)}),a.jsx("button",{className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-600 focus:ring-offset-2",onClick:G,children:"Apply"})]}),_&&a.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[a.jsx(qs,{size:16,className:"mr-1"})," Invalid promo code"]}),x&&a.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center",children:[a.jsx(M0,{size:16,className:"mr-1"})," Promo code applied!"]}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Try code: ",a.jsx("span",{className:"font-medium",children:"SAVE15"})," for 15% off"]})]}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center justify-center font-medium",children:[a.jsx(wR,{size:20,className:"mr-2"}),"Complete Purchase"]})}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500 text-center",children:[a.jsx("p",{children:"Estimated delivery: 3-5 business days"}),a.jsx("p",{className:"mt-1",children:"Free returns within 30 days"})]})]})})})]})]})})}const d8=()=>{var h,p,x,v;const s=es(),{currentUser:e}=rn(),[t,n]=C.useState(!1),[r,o]=C.useState(null),u=_=>{o(_)},f=async _=>{var w;if(_.preventDefault(),!((w=e==null?void 0:e.cartItems)!=null&&w.length)){alert("Your cart is empty!");return}if(!r){alert("Please select a delivery address!");return}const N=e.cartItems.reduce((E,R)=>E+R.salePrice*R.quantity,0);s("/payment",{state:{orderDetails:{items:e.cartItems,shippingDetails:r,total:N}}})};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[a.jsx(Nl,{size:20,className:"mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Order Confirmation"}),a.jsxs("form",{onSubmit:f,className:"bg-white rounded-2xl shadow-lg overflow-hidden p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(GE,{size:20}),"Shipping Details"]}),a.jsx(AC,{onSelectAddress:u,selectedAddressId:r==null?void 0:r.id,hideAddressForm:!0})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order Summary"}),a.jsxs("div",{className:"space-y-2",children:[((h=e==null?void 0:e.cartItems)==null?void 0:h.length)>0?e.cartItems.map(_=>a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:_.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",_.quantity]})]}),a.jsxs("p",{className:"font-medium",children:["₹",_.salePrice*_.quantity]})]},_.id)):a.jsx("div",{className:"text-center py-4 text-gray-500",children:"Your cart is empty"}),a.jsxs("div",{className:"flex justify-between pt-4 font-semibold text-lg",children:[a.jsx("span",{children:"Total Amount"}),a.jsxs("span",{children:["₹",((p=e==null?void 0:e.cartItems)==null?void 0:p.reduce((_,N)=>_+N.salePrice*N.quantity,0))||0]})]})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{type:"submit",disabled:t||!r||!((x=e==null?void 0:e.cartItems)!=null&&x.length),className:`w-full py-3 px-4 text-white font-medium rounded-lg ${t||!r||!((v=e==null?void 0:e.cartItems)!=null&&v.length)?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:t?"Processing...":"Proceed to Payment"})})]})]})})},h8=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(""),[h,p]=C.useState(!1);C.useEffect(()=>{x()},[]);const x=async()=>{try{p(!0);const R=(await Tt(ot(pe,"orders"))).docs.map(T=>({id:T.id,...T.data()}));e(R),o("")}catch(E){o("Failed to fetch orders: "+E.message)}finally{n(!1),p(!1)}},v=async E=>{if(window.confirm("Are you sure you want to delete this order?"))try{await cc(je(pe,"orders",E)),e(R=>R.filter(T=>T.id!==E))}catch(R){o("Failed to delete order: "+R.message)}},_=async(E,R)=>{try{const T=je(pe,"orders",E),k={status:R,deliveryStatus:R.toLowerCase()==="accept"?"pending":null,deliveryBoy:null,lastUpdated:new Date().toISOString()};R.toLowerCase()==="accept"&&(k.deliveryTracking={status:"pending",timeline:[{status:"pending",timestamp:new Date().toISOString(),message:"Waiting for delivery boy to accept"}]}),await ze(T,k);const P=s.find(H=>H.id===E);if(R.toLowerCase()==="accept"&&(P!=null&&P.userId)){const H=je(pe,"users",P.userId),B={type:"order_status",message:`Your order #${E} has been accepted by the store`,orderId:E,status:R,createdAt:new Date().toISOString(),read:!1};await ze(H,{notifications:dc(B)})}e(H=>H.map(B=>B.id===E?{...B,status:R}:B))}catch(T){o("Failed to update order status: "+T.message)}},N=E=>{switch(E.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"shipped":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"accept":return"bg-emerald-100 text-emerald-800";case"reject":return"bg-rose-100 text-rose-800";default:return"bg-gray-100 text-gray-800"}},w=s.filter(E=>{var R;return((R=E.customerName)==null?void 0:R.toLowerCase().includes(u.toLowerCase()))||E.id.toLowerCase().includes(u.toLowerCase())});return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Orders"})]})}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(Td,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search orders...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:E=>f(E.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:x,disabled:h,children:[a.jsx(Xm,{size:16,className:`mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(Qm,{size:16,className:"mr-2"}),"Filter"]})]})]})}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):w.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(qz,{size:48,className:"mb-4 text-gray-300"}),u?"No orders found matching your search.":"No orders found."]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(E=>{var R,T,k,P,H,B;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",E.id]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center",children:a.jsx(ld,{className:"text-gray-500",size:14})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:(R=E.shippingDetails)==null?void 0:R.fullName}),a.jsx("div",{className:"text-sm text-gray-500",children:(T=E.shippingDetails)==null?void 0:T.phone}),a.jsx("div",{className:"text-sm text-gray-500",children:(k=E.shippingDetails)==null?void 0:k.address})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:(P=E.shippingDetails)==null?void 0:P.phone})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:(H=E.items)==null?void 0:H.map((G,M)=>a.jsxs("div",{className:"mb-1",children:[G.name," x ",G.quantity," - ",G.salePrice,"/-"]},M))})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[(E.total+40||0).toFixed(2),"/-"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${N(E.status)}`,children:E.status}),E.status==="Accept"&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${N(E.deliveryStatus||"pending")}`,children:["Delivery: ",E.deliveryStatus||"pending"]}),E.deliveryStatus==="cancelled"&&E.cancelReason&&a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Reason: ",E.cancelReason]}),E.deliveryBoy&&a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Delivery By: ",E.deliveryBoy]})]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:(B=E.createdAt)!=null&&B.toDate?E.createdAt.toDate().toLocaleDateString():new Date(E.createdAt).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[E.status.toLowerCase()!=="accept"&&E.status.toLowerCase()!=="reject"&&E.deliveryStatus!=="cancelled"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>_(E.id,"Accept"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold hover:bg-green-200",children:"Accept"}),a.jsx("button",{onClick:()=>_(E.id,"Reject"),className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold hover:bg-red-200",children:"Reject"})]}),a.jsx("button",{onClick:()=>v(E.id),className:"flex items-center text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(_v,{size:18})})]})})]},E.id)})})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:w.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," orders"]})})]})]})},f8=()=>{var w;const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(""),[h,p]=C.useState(!1),[x,v]=C.useState(null);C.useEffect(()=>{_()},[]);const _=async()=>{try{p(!0);const R=(await Tt(ot(pe,"users"))).docs.map(T=>({id:T.id,...T.data()}));e(R),o("")}catch(E){o("Failed to fetch users: "+E.message)}finally{n(!1),p(!1)}},N=s.filter(E=>{var R,T,k,P;return((R=E.firstName)==null?void 0:R.toLowerCase().includes(u.toLowerCase()))||((T=E.lastName)==null?void 0:T.toLowerCase().includes(u.toLowerCase()))||((k=E.email)==null?void 0:k.toLowerCase().includes(u.toLowerCase()))||((P=E.mobile)==null?void 0:P.toLowerCase().includes(u.toLowerCase()))});return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Users"})]})}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(Td,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:E=>f(E.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:_,disabled:h,children:[a.jsx(Xm,{size:16,className:`mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(Qm,{size:16,className:"mr-2"}),"Filter"]})]})]})}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):N.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(ld,{size:48,className:"mb-4 text-gray-300"}),u?"No users found matching your search.":"No users found."]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Details"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(E=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>v(E),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("img",{src:E.photoURL||"https://via.placeholder.com/40",alt:"User",className:"h-10 w-10 rounded-full object-cover"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.firstName," ",E.lastName]}),a.jsx("div",{className:"text-sm text-gray-500",children:E.email})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:E.mobile}),a.jsx("div",{className:"text-sm text-gray-500",children:E.email})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[E.address,", ",E.landmark,a.jsx("br",{}),E.place,", ",E.pincode]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900",children:["UID: ",E.uid]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Gender: ",E.gender||"N/A"]})]})]},E.id))})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:N.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," users"]})})]}),x&&a.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"User Details"}),a.jsx("button",{onClick:()=>v(null),className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Personal Information"}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Name:"})," ",x.firstName," ",x.lastName]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Gender:"})," ",x.gender||"N/A"]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",x.email]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Mobile:"})," ",x.mobile]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Account Information"}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"User ID:"})," ",x.uid]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Created At:"}),"  ",(w=x.createdAt)!=null&&w.toDate?x.createdAt.toDate().toLocaleDateString():new Date(x.createdAt).toLocaleDateString()]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Address Information"}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Address:"})," ",x.address]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Landmark:"})," ",x.landmark||"N/A"]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Place:"})," ",x.place]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Pincode:"})," ",x.pincode]})]})]})]})]})})]})},m8=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(""),[u,f]=C.useState(""),[h,p]=C.useState(!1);C.useEffect(()=>{x()},[]);const x=async()=>{try{p(!0);const E=(await Tt(ot(pe,"deliveryBoys"))).docs.map(R=>({id:R.id,...R.data()}));e(E),o("")}catch(w){o("Failed to fetch delivery boys: "+w.message)}finally{n(!1),p(!1)}},v=async(w,E)=>{try{const R=je(pe,"deliveryBoys",w);await ze(R,{status:E==="active"?"inactive":"active"}),x()}catch(R){o("Failed to update status: "+R.message)}},_=async w=>{if(window.confirm("Are you sure you want to delete this delivery boy?"))try{await cc(je(pe,"deliveryBoys",w)),x()}catch(E){o("Failed to delete delivery boy: "+E.message)}},N=s.filter(w=>w.name.toLowerCase().includes(u.toLowerCase()));return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Pe,{to:"/dashboard",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Delivery Boys"})]}),a.jsxs(Pe,{to:"/dashboard/add-delivery-boy",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(CC,{size:16,className:"mr-2"}),"Add New Delivery Boy"]})]}),r&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:r})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex items-center w-full max-w-xs",children:[a.jsx(Td,{className:"absolute left-3 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search delivery boys...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:w=>f(w.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",onClick:x,disabled:h,children:[a.jsx(Xm,{size:16,className:`mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a.jsx(Qm,{size:16,className:"mr-2"}),"Filter"]})]})]})}),t?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):N.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(ld,{size:48,className:"mb-4 text-gray-300"}),u?"No delivery boys found matching your search.":"No delivery boys found. Add your first delivery boy!"]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone No"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(w=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:w.gender})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-500",children:w.address})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:w.phone})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("button",{onClick:()=>v(w.id,w.status),className:`px-3 py-1 rounded-full text-xs font-medium ${w.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(Pe,{to:`/dashboard/edit-delivery-boy/${w.id}`,className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:a.jsx(TC,{size:18})}),a.jsx("button",{onClick:()=>_(w.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(_v,{size:18})})]})})]},w.id))})]})}),a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:N.length})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," delivery boys"]})})]})]})},p8=()=>{const s=es(),[e,t]=C.useState(!1),[n,r]=C.useState(""),[o,u]=C.useState({name:"",gender:"male",address:"",phone:"",status:"active"}),f=p=>{const{name:x,value:v}=p.target;u(_=>({..._,[x]:v}))},h=async p=>{p.preventDefault(),t(!0),r("");try{await uc(ot(pe,"deliveryBoys"),o),s("/dashboard/delivery-boys")}catch(x){r("Failed to add delivery boy: "+x.message)}finally{t(!1)}};return a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/delivery-boys",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Delivery Boy"})]}),n&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:n})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),a.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter delivery boy name",required:!0,disabled:e})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{id:"gender",name:"gender",value:o.gender,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:e,children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("textarea",{id:"address",name:"address",value:o.address,onChange:f,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter delivery boy address",required:!0,disabled:e})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter phone number",required:!0,disabled:e})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:o.status,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:e,children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/delivery-boys",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:e,children:e?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Delivery Boy"})]})]})})})]})},g8=()=>{const{id:s}=Jo(),e=es(),[t,n]=C.useState(!0),[r,o]=C.useState(!1),[u,f]=C.useState(""),[h,p]=C.useState({name:"",gender:"male",address:"",phone:"",status:"active"});C.useEffect(()=>{x()},[s]);const x=async()=>{try{const N=je(pe,"deliveryBoys",s),w=await Zt(N);w.exists()?p(w.data()):f("Delivery boy not found")}catch(N){f("Failed to fetch delivery boy: "+N.message)}finally{n(!1)}},v=N=>{const{name:w,value:E}=N.target;p(R=>({...R,[w]:E}))},_=async N=>{N.preventDefault(),o(!0),f("");try{const w=je(pe,"deliveryBoys",s);await ze(w,h),e("/dashboard/delivery-boys")}catch(w){f("Failed to update delivery boy: "+w.message)}finally{o(!1)}};return t?a.jsx("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):a.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Pe,{to:"/dashboard/delivery-boys",className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(Ci,{size:20})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Delivery Boy"})]}),u&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gc,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:u})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),a.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter delivery boy name",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{id:"gender",name:"gender",value:h.gender,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:r,children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("textarea",{id:"address",name:"address",value:h.address,onChange:v,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter delivery boy address",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter phone number",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:h.status,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:r,children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(Pe,{to:"/dashboard/delivery-boys",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:r,children:r?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Delivery Boy"})]})]})})})]})},x8=()=>{const[s,e]=C.useState([]),[t,n]=C.useState(!0),[r,o]=C.useState(!1),[u,f]=C.useState(null),[h,p]=C.useState(""),x=localStorage.getItem("deliveryName"),v=["Customer not available","Wrong address","Bad weather conditions","Vehicle breakdown","Customer requested cancellation","Other"];C.useEffect(()=>{(async()=>{try{const k=yr(ot(pe,"orders"),bi("status","in",["Accept","accept"]),bi("deliveryBoy","==",null)),P=yr(ot(pe,"orders"),bi("status","in",["Accept","accept"]),bi("deliveryBoy","==",x)),[H,B]=await Promise.all([Tt(k),Tt(P)]),G=H.docs.map(A=>({id:A.id,...A.data()})),M=B.docs.map(A=>({id:A.id,...A.data()}));e([...G,...M]),n(!1)}catch(k){console.error("Error fetching orders:",k),n(!1)}})()},[]);const _=async T=>{try{await ze(je(pe,"orders",T),{status:"Accept",deliveryStatus:"pending",deliveryBoy:x}),e(s.map(k=>k.id===T?{...k,status:"Accept",deliveryStatus:"pending",deliveryBoy:x}:k))}catch(k){console.error("Error accepting order:",k)}},N=async T=>{try{await ze(je(pe,"orders",T),{status:"Reject",deliveryBoy:x}),e(s.map(k=>k.id===T?{...k,status:"Reject",deliveryBoy:x}:k))}catch(k){console.error("Error rejecting order:",k)}},w=async(T,k)=>{try{await ze(je(pe,"orders",T),{deliveryStatus:k}),e(s.map(P=>P.id===T?{...P,deliveryStatus:k}:P))}catch(P){console.error("Error updating delivery status:",P)}},E=async()=>{if(!(!u||!h))try{await ze(je(pe,"orders",u),{deliveryStatus:"cancelled",cancelReason:h}),e(s.map(T=>T.id===u?{...T,deliveryStatus:"cancelled",cancelReason:h}:T)),o(!1),f(null),p("")}catch(T){console.error("Error cancelling delivery:",T)}},R=T=>{switch(T){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"on the way":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Delivery Dashboard"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-600",children:"Welcome,"}),a.jsx("span",{className:"font-medium",children:x}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("deliveryName"),window.location.href="/login"},className:"ml-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 6.707 6.293a1 1 0 00-1.414 1.414L8.586 11l-3.293 3.293a1 1 0 101.414 1.414L10 12.414l3.293 3.293a1 1 0 001.414-1.414L11.414 11l3.293-3.293z",clipRule:"evenodd"})}),"Logout"]})]})]}),t?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow p-6",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No New Orders"}),a.jsx("p",{className:"text-gray-500",children:"There are currently no orders available for delivery."})]}):a.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map(T=>{var k,P,H,B;return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold",children:["Order #",T.id.slice(0,8)]}),a.jsx("p",{className:"text-gray-600",children:(k=T.shippingDetails)==null?void 0:k.fullName}),a.jsx("p",{className:"text-gray-600",children:(P=T.shippingDetails)==null?void 0:P.address})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${R(T.status)}`,children:T.status})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Items:"}),a.jsx("ul",{className:"space-y-1",children:(H=T.items)==null?void 0:H.map((G,M)=>a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:G.name}),a.jsxs("span",{children:[G.quantity," x ₹",G.salePrice]})]},M))})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["Total: ₹",T.total]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Ordered at: ",new Date((B=T.createdAt)==null?void 0:B.toDate()).toLocaleString()]})]}),!T.deliveryBoy&&T.status==="Accept"?a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>_(T.id),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[a.jsx(M0,{size:16,className:"mr-1"})," Accept"]}),a.jsxs("button",{onClick:()=>N(T.id),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[a.jsx(qs,{size:16,className:"mr-1"})," Reject"]})]}):T.deliveryBoy===x?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:T.deliveryStatus||"pending",onChange:G=>w(T.id,G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:T.deliveryStatus==="cancelled",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"departed",children:"Departed"}),a.jsx("option",{value:"delivered",children:"Delivered"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),T.deliveryStatus!=="cancelled"&&a.jsx("button",{onClick:()=>{f(T.id),o(!0)},className:"px-3 py-2 text-sm text-red-600 hover:text-red-800",children:"Cancel Delivery"})]}):null]})]},T.id)})})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cancel Delivery"}),a.jsxs("select",{value:h,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Select a reason"}),v.map((T,k)=>a.jsx("option",{value:T,children:T},k))]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{o(!1),f(null),p("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:E,disabled:!h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Confirm"})]})]})})]})},y8=()=>{var _;const s=es(),e=nn(),{currentUser:t}=rn(),[n,r]=C.useState(!1),[o,u]=C.useState(""),f=(_=e.state)==null?void 0:_.orderDetails;if(!f)return s("/order-confirm"),null;const h=N=>new Promise(w=>{const E=document.createElement("script");E.src=N,E.onload=()=>w(!0),E.onerror=()=>w(!1),document.body.appendChild(E)}),p=async()=>{if(!await h("https://checkout.razorpay.com/v1/checkout.js")){alert("Failed to load Razorpay SDK. Check your internet connection.");return}const w={key:"rzp_test_9tCOZuKLhiZdaM",amount:f.total*100,currency:"INR",name:"Chinju Store",description:"Order Payment",handler:async function(R){await x("razorpay",R.razorpay_payment_id)},prefill:{name:f.shippingDetails.fullName,email:t.email,contact:f.shippingDetails.phone},theme:{color:"#528FF0"}};new window.Razorpay(w).open()},x=async(N,w=null)=>{try{r(!0);const E={userId:t.uid,items:f.items,shippingDetails:f.shippingDetails,paymentMethod:N,paymentId:w,total:f.total,status:N==="cod"?"Pending":"Paid",createdAt:h5()};await uc(ot(pe,"orders"),E),await ze(je(pe,"users",t.uid),{cartItems:[]}),s("/orders")}catch(E){console.error("Error creating order:",E),alert("Failed to create order. Please try again.")}finally{r(!1)}},v=async()=>{if(!o){alert("Please select a payment method");return}o==="razorpay"?await p():o==="cod"&&await x("cod")};return a.jsx("div",{className:"py-10 h-auto px-2 w-full flex justify-center items-center bg-gray-100 overflow-hidden ",children:a.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[a.jsx(Nl,{size:20,className:"mr-2"}),"Back to Order Confirm"]})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Payment Method"}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("label",{className:"block relative",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:o==="razorpay",onChange:N=>u(N.target.value),className:"sr-only"}),a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer flex items-center gap-3 ${o==="razorpay"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[a.jsx("img",{src:"https://razorpay.com/assets/razorpay-glyph.svg",alt:"Razorpay",className:"h-8"}),a.jsx("span",{className:"font-medium",children:"Pay with Razorpay"})]})]}),a.jsxs("label",{className:"block relative",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"cod",checked:o==="cod",onChange:N=>u(N.target.value),className:"sr-only"}),a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer flex items-center gap-3 ${o==="cod"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[a.jsx(SR,{size:24}),a.jsx("span",{className:"font-medium",children:"Cash on Delivery"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),a.jsxs("div",{className:"space-y-2",children:[f.items.map(N=>a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:N.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",N.quantity]})]}),a.jsxs("p",{className:"font-medium flex items-center",children:[a.jsx(um,{}),N.salePrice*N.quantity]})]},N.id)),a.jsxs("div",{className:"flex justify-between pt-4 font-semibold text-lg",children:[a.jsx("span",{children:"Total Amount"}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(um,{}),f.total]})]})]})]}),a.jsx("button",{onClick:v,disabled:n||!o,className:`w-full mt-6 bg-green-500 text-white py-3 rounded font-medium hover:bg-green-600 transition-colors ${n||!o?"opacity-50 cursor-not-allowed":""}`,children:n?"Processing...":"Confirm Payment"})]})})})},Ru=({children:s})=>{const{currentUser:e,loading:t}=rn(),n=nn(),r=localStorage.getItem("isAdmin")==="true";return t?a.jsx("div",{children:"Loading..."}):!e||n.pathname==="/dashboard"&&!r?a.jsx(e4,{to:"/login",state:{from:n},replace:!0}):s};function v8(){const s=nn(),e=s.pathname==="/dashboard"||s.pathname==="/login"||s.pathname==="/dashboard/add-category"||s.pathname==="/dashboard/view-category"||s.pathname==="/dashboard/add-banner"||s.pathname==="/dashboard/view-banner"||s.pathname==="/dashboard/edit-category/:id"||s.pathname==="/dashboard/edit-banner/:id"||s.pathname==="/dashboard/view-product"||s.pathname==="/dashboard/add-product"||s.pathname==="/dashboard/edit-product"||s.pathname==="/productviewall"||s.pathname==="/category/:categoryName"||s.pathname==="/product/:productId";return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"min-h-screen pb-16 bg-[#f5f6fa]",children:a.jsxs(s4,{children:[a.jsx(ft,{path:"/",element:a.jsx(Pz,{})}),a.jsx(ft,{path:"/login",element:a.jsx(Mz,{})}),a.jsx(ft,{path:"/login-modal",element:a.jsx(Kz,{showLoginModal:!0,setShowLoginModal:()=>{}})}),a.jsx(ft,{path:"/dashboard",element:a.jsx(Hz,{})}),a.jsx(ft,{path:"/dashboard/add-category",element:a.jsx(Xz,{})}),a.jsx(ft,{path:"/dashboard/view-category",element:a.jsx(Zz,{})}),a.jsx(ft,{path:"/dashboard/edit-category/:id",element:a.jsx(Jz,{})}),a.jsx(ft,{path:"/dashboard/add-banner",element:a.jsx(e8,{})}),a.jsx(ft,{path:"/dashboard/view-banner",element:a.jsx(t8,{})}),a.jsx(ft,{path:"/dashboard/edit-banner/:id",element:a.jsx(s8,{})}),a.jsx(ft,{path:"/dashboard/add-product",element:a.jsx(i8,{})}),a.jsx(ft,{path:"/dashboard/view-product",element:a.jsx(r8,{})}),a.jsx(ft,{path:"/dashboard/edit-product/:id",element:a.jsx(a8,{})}),a.jsx(ft,{path:"/productviewall",element:a.jsx(l8,{})}),a.jsx(ft,{path:"/category/:categoryName",element:a.jsx(o8,{})}),a.jsx(ft,{path:"/product/:productId",element:a.jsx(c8,{})}),a.jsx(ft,{path:"/product/ProductCheckout",element:a.jsx(u8,{})}),a.jsx(ft,{path:"/order-confirm",element:a.jsx(d8,{})}),a.jsx(ft,{path:"/payment",element:a.jsx(Ru,{children:a.jsx(y8,{})})}),a.jsx(ft,{path:"/dashboard/orderdetails",element:a.jsx(h8,{})}),a.jsx(ft,{path:"/dashboard/users",element:a.jsx(f8,{})}),a.jsx(ft,{path:"/dashboard/delivery-boys",element:a.jsx(m8,{})}),a.jsx(ft,{path:"/dashboard/add-delivery-boy",element:a.jsx(p8,{})}),a.jsx(ft,{path:"/dashboard/edit-delivery-boy/:id",element:a.jsx(g8,{})}),a.jsx(ft,{path:"/delivery-dashboard",element:a.jsx(x8,{})}),a.jsx(ft,{path:"/cart",element:a.jsx(Ru,{children:a.jsx($z,{isOpen:!0,onClose:()=>{}})})}),a.jsx(ft,{path:"/profile",element:a.jsx(Ru,{children:a.jsx(Wz,{})})}),a.jsx(ft,{path:"/orders",element:a.jsx(Ru,{children:a.jsx(Yz,{})})}),a.jsx(ft,{path:"/wishlist",element:a.jsx(Ru,{children:a.jsx(Qz,{})})})]})}),!e&&a.jsx(MR,{})]})}function b8(){return a.jsx(j4,{children:a.jsx(t7,{children:a.jsx(v8,{})})})}dI.createRoot(document.getElementById("root")).render(a.jsx(C.StrictMode,{children:a.jsx(b8,{})}));
